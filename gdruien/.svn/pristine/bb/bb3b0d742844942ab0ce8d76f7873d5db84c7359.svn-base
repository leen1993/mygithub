/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/9.0.2
 * Generated at: 2018-05-14 02:16:51 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.WEB_002dINF.view.expense.inpatient;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class ipOpschargeList_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.HashMap<java.lang.String,java.lang.Long>(6);
    _jspx_dependants.put("jar:file:/E:/workspace.hisnew/hisbase/WebContent/WEB-INF/lib/jstl-1.2.jar!/META-INF/fn.tld", Long.valueOf(1153356282000L));
    _jspx_dependants.put("jar:file:/E:/workspace.hisnew/hisbase/WebContent/WEB-INF/lib/jstl-1.2.jar!/META-INF/c.tld", Long.valueOf(1153356282000L));
    _jspx_dependants.put("/WEB-INF/lib/jstl-1.2.jar", Long.valueOf(1525761782870L));
    _jspx_dependants.put("/commons/include/html_doctype.html", Long.valueOf(1525761798654L));
    _jspx_dependants.put("/commons/include/get.jsp", Long.valueOf(1525827802831L));
    _jspx_dependants.put("jar:file:/E:/workspace.hisnew/hisbase/WebContent/WEB-INF/lib/jstl-1.2.jar!/META-INF/fmt.tld", Long.valueOf(1153356282000L));
  }

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.HashSet<>();
    _jspx_imports_packages.add("javax.servlet");
    _jspx_imports_packages.add("javax.servlet.http");
    _jspx_imports_packages.add("javax.servlet.jsp");
    _jspx_imports_classes = null;
  }

  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody;

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
    _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
  }

  public void _jspDestroy() {
    _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.release();
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
      throws java.io.IOException, javax.servlet.ServletException {

    final java.lang.String _jspx_method = request.getMethod();
    if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method) && !javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET POST or HEAD");
      return;
    }

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write('\r');
      out.write('\n');
      out.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">");
      out.write("\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("<title>住院手术-手术批费</title>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      if (_jspx_meth_c_005fset_005f0(_jspx_page_context))
        return;
      out.write('\r');
      out.write('\n');
      if (_jspx_meth_c_005fset_005f1(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\r\n");
      out.write("<meta http-equiv=\"X-UA-Compatible\" content=\"IE=EmulateIE8\" />\r\n");
      out.write("\r\n");
      out.write("<script src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/scripts/boot.js\" type=\"text/javascript\"></script>\r\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/commons/dynamic.jsp\"></script>\r\n");
      out.write("\r\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/scripts/core.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/scripts/plugins/template/jquery.tmpl.min.js\"></script>\r\n");
      out.write("\r\n");
      out.write("<link href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/styles/default/css/web.css\" rel=\"stylesheet\" type=\"text/css\" />\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<style type=\"text/css\">\r\n");
      out.write(".blue-font {\r\n");
      out.write("\tfont-size:14px;\r\n");
      out.write("\tcolor:#006aad;\r\n");
      out.write("\tfont-weight:bold;\r\n");
      out.write("}\r\n");
      out.write(".table-label {\r\n");
      out.write("\ttext-align:right;\r\n");
      out.write("\tfont-weight:bold;\r\n");
      out.write("}\r\n");
      out.write(" .patientInfo {\r\n");
      out.write("\tcolor: blue;\r\n");
      out.write("\tfont-weight:bold;\r\n");
      out.write("}  \r\n");
      out.write("</style>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("\t\r\n");
      out.write("\t// 检索条件\r\n");
      out.write("\tvar queryEnum = [{id:\"inpatientNo\",text:\"住院号\"},{id:\"patientName\",text:\"姓名\"},{id:\"registerId\",text:\"登记号\"},{id:\"bedNo\",text:\"床号\"},{id:\"patientId\",text:\"唯一号\"}];\r\n");
      out.write("\t\r\n");
      out.write("\tvar index = 0;\r\n");
      out.write("\t\r\n");
      out.write("\t// 参数设置 \"是否判断欠费,Y：判断欠费，不允许继续收费,M：判断欠费，提示是否继续收费,N：不判断欠费\"\r\n");
      out.write("\tvar messtype = \"N\"\r\n");
      out.write("\t\r\n");
      out.write("\t// 当前手术批费信息\r\n");
      out.write("\tvar currentOpsCharge = {};\r\n");
      out.write("\t\r\n");
      out.write("\t// 当前手术申请信息\r\n");
      out.write("\tvar currentOpsApply = {};\r\n");
      out.write("\t\r\n");
      out.write("\t// 当前患者\r\n");
      out.write("\tvar thisRegister = {};\r\n");
      out.write("\t\r\n");
      out.write("\t// 患者手术申请列表\r\n");
      out.write("\tvar registerOpsApplyList = [];\r\n");
      out.write("\t\r\n");
      out.write("\t// 患者手术批费记录列表\r\n");
      out.write("\tvar registerOpsChargeList = [];\r\n");
      out.write("\t\r\n");
      out.write("\t// 开方信息\r\n");
      out.write("\tvar recipe = {};\r\n");
      out.write("\t\r\n");
      out.write("\t// 是否可操作\r\n");
      out.write("\tvar isEditEnable = false\r\n");
      out.write("\t\r\n");
      out.write("\t// 键盘监听切换搜索模式\r\n");
      out.write("\tdocument.onkeydown = function() {\r\n");
      out.write("\t\tif (event.keyCode == 113) {\r\n");
      out.write("\t\t\tindex++;\r\n");
      out.write("\t\t\tindex = index%5;\r\n");
      out.write("\t\t\tdocument.getElementById(\"queryName\").innerHTML = queryEnum[index].text;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("// \t// F2检索\r\n");
      out.write("// \tfunction query () {\r\n");
      out.write("// \t\tvar queryValue = mini.get(\"keyWord\").value;\r\n");
      out.write("// \t\tif(queryValue == null || queryValue==\"\"){ \r\n");
      out.write("// \t\t\treturn ;\r\n");
      out.write("// \t\t}\r\n");
      out.write("// \t\t$.post(\r\n");
      out.write("// \t\t\t\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/inpatient/ipOpscharge/query.do\",\r\n");
      out.write("// \t\t\t{\r\n");
      out.write("// \t\t\t\tqueryName: queryEnum[index].id,\r\n");
      out.write("// \t\t\t\tqueryText: queryValue\r\n");
      out.write("// \t\t\t},\r\n");
      out.write("// \t\t\tfunction (r) {\r\n");
      out.write("// \t\t\t\tif (r) {\r\n");
      out.write("// \t\t\t\t\tqueryRegister(r);\r\n");
      out.write("// \t\t\t\t}else{\r\n");
      out.write("// \t\t\t\t\tmini.showTips({\r\n");
      out.write("// \t\t\t\t\t\tcontent: \"<font size='3'>没有找到\"+ queryEnum[index].text + \"为\"+queryValue+\"的患者信息</font>\",\r\n");
      out.write("// \t\t\t\t\t\tstate: \"info\",      \r\n");
      out.write("// \t\t\t\t\t\tx: \"center\",          \r\n");
      out.write("// \t\t\t\t\t\ty: \"center\",          \r\n");
      out.write("// \t\t\t\t\t\ttimeout: 3000     \r\n");
      out.write("// \t\t\t\t\t});\r\n");
      out.write("// \t\t\t\t}\r\n");
      out.write("// \t\t\t}\r\n");
      out.write("// \t\t);\r\n");
      out.write("// \t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 获取患者信息\r\n");
      out.write("\tfunction queryRegister (register) {\r\n");
      out.write("\t\tclearCurrent();\r\n");
      out.write("\t\tthisRegister = register;\r\n");
      out.write("\t\tbaseSetRegister(register);\r\n");
      out.write("\t\tif (register.validFlag != \"1\") {\r\n");
      out.write("\t\t\ttop.mini.alert(\"患者已取消登记\");\r\n");
      out.write("\t\t} else if (register.dataState != \"I\" && register.dataState != \"B\") {\r\n");
      out.write("\t\t\ttop.mini.alert(\"患者不是出于登记或在院状态\");\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\t$.ajax({\r\n");
      out.write("\t\t\t\turl: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/inpatient/ipOpscharge/queryRegisterDetail.do\",\r\n");
      out.write("\t\t\t\tdata: {\r\n");
      out.write("\t\t\t\t\tregisterId: register.registerId\r\n");
      out.write("\t\t\t\t},\r\n");
      out.write("\t\t\t\ttype: \"post\",\r\n");
      out.write("\t            async: false,\r\n");
      out.write("\t            success: function (registerDetail) {\r\n");
      out.write("\t\t\t\t\tif (!registerDetail) {\r\n");
      out.write("\t\t\t\t\t\ttop.mini.alert(\"查询患者住院登记明细信息失败\");\r\n");
      out.write("\t\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\t\ttxtFreeCost.setValue(register.freeCost);\r\n");
      out.write("\t\t\t\t\t\ttxtAlertCost.setValue(registerDetail.alterCost);\r\n");
      out.write("\t\t\t\t\t\tcmbRecipeDoct.setValue(\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${currentOperId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\");\r\n");
      out.write("\t\t\t\t\t\tif (registerDetail.alterFlag == 1) {\r\n");
      out.write("\t\t\t\t\t\t\twLabel3.setValue(\"警戒线(开)\");\r\n");
      out.write("\t\t\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\t\t\twLabel3.setValue(\"警戒线(关)\");\r\n");
      out.write("\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\tif (register.lockcostFlag == \"1\") {\r\n");
      out.write("\t\t\t\t\t\t\ttop.mini.alert(\"此患者已锁定费用，请在收费处取消结算\");\r\n");
      out.write("\t\t\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\t\t\tif (isLackFee(register, registerDetail,0)) {\r\n");
      out.write("\t\t\t\t\t\t\t\tif (messtype == \"M\") {\r\n");
      out.write("\t\t\t\t\t\t\t\t\tmini.showMessageBox({\r\n");
      out.write("\t\t\t\t\t\t\t\t\t    title: \"提示\",    \r\n");
      out.write("\t\t\t\t\t\t\t\t\t    message: \"此患者已欠费，是否继续？\",\r\n");
      out.write("\t\t\t\t\t\t\t\t\t    buttons: [\"ok\", \"no\"],    \r\n");
      out.write("\t\t\t\t\t\t\t\t\t    iconCls: \"mini-messagebox-question\",\r\n");
      out.write("\t\t\t\t\t\t\t\t\t    callback: function(action){\r\n");
      out.write("\t\t\t\t\t\t\t\t\t    \tif (action == \"ok\") {\r\n");
      out.write("\t\t\t\t\t\t\t\t\t    \t\tcmbRecipeDoct.showPopup(true);\r\n");
      out.write("\t\t\t\t\t\t\t\t\t    \t}\r\n");
      out.write("\t\t\t\t\t\t\t\t\t    }\r\n");
      out.write("\t\t\t\t\t\t\t\t\t});\r\n");
      out.write("\t\t\t\t\t\t\t\t} else if (messtype == \"Y\") {\r\n");
      out.write("\t\t\t\t\t\t\t\t\ttop.mini.alert(\"此患者已欠费，不允许继续收费！\");\r\n");
      out.write("\t\t\t\t\t\t\t\t\treturn;\r\n");
      out.write("\t\t\t\t\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\t\t\t\t\tcmbRecipeDoct.showPopup(true);\r\n");
      out.write("\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\t\t\t\tcmbRecipeDoct.focus();\r\n");
      out.write("\t\t\t\t\t\t\t\tcmbRecipeDoct.showPopup(true);\r\n");
      out.write("\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t});\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 记载患者信息\r\n");
      out.write("\tfunction baseSetRegister (register) {\r\n");
      out.write("\t\tsetRegister(register.registerId);\r\n");
      out.write("\t\tshowOpsApply(register);\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 加载手术申请信息(树)\r\n");
      out.write("\tfunction showOpsApply (register) {\r\n");
      out.write("\t\ttvOpsApplyTree.loadData();\r\n");
      out.write("// \t\t$.post(\r\n");
      out.write("\t\t$.ajax({\r\n");
      out.write("\t\t\turl: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/inpatient/ipOpscharge/showOpsApply.do\",\r\n");
      out.write("\t\t\tdata: {\r\n");
      out.write("\t\t\t\tregisterId: register.registerId\r\n");
      out.write("\t\t\t},\r\n");
      out.write("\t\t\ttype: \"post\",\r\n");
      out.write("            async: false,\r\n");
      out.write("            success: function (r) {\r\n");
      out.write("            \tif (r.num == -1) {\r\n");
      out.write("\t\t\t\t\ttop.mini.alert(r.message);\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t\tif (r.treeList) {\r\n");
      out.write("\t\t\t\t\ttvOpsApplyTree.loadList(r.treeList, \"id\", \"pid\");\r\n");
      out.write("\t\t\t\t\tregisterOpsApplyList = r.registerOpsApplyList;\r\n");
      out.write("\t\t\t\t\tregisterOpsChargeList = r.registerOpsChargeList;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\r\n");
      out.write("// \t\t);\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 判断是否欠费\r\n");
      out.write("\tfunction isLackFee (register,registerDetail,totCost) {\r\n");
      out.write("\t\tvar result = false;\r\n");
      out.write("\t\tif (registerDetail.alterFlag != \"1\") {\r\n");
      out.write("\t\t\tresult = false;\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\tif (registerDetail.alterLimitType == \"D\") {\r\n");
      out.write("\t\t\t\tvar dateTime = new Date();\r\n");
      out.write("\t\t\t\tif (dateTime >= registerDetail.alterBeginTime && dateTime < registerDetail.alterEndTime) {\r\n");
      out.write("\t\t\t\t\tresult = false;\r\n");
      out.write("\t\t\t\t\treturn result;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t\tif ((register.freeCost - totCost) > registerDetail.alterCost) {\r\n");
      out.write("\t\t\t\t\tresult = false;\r\n");
      out.write("\t\t\t\t\treturn result;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t} else {\r\n");
      out.write("\t\t\t\tif (registerDetail.alterLimitType != \"M\") {\r\n");
      out.write("\t\t\t\t\tresult = false;\r\n");
      out.write("\t\t\t\t\treturn result;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t\tif ((register.freeCost - totCost) > registerDetail.alterCost) {\r\n");
      out.write("\t\t\t\t\tresult = false;\r\n");
      out.write("\t\t\t\t\treturn result;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t\tresult = true;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\treturn result;\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 选中手术申请信息(树节点)时加载患者信息\r\n");
      out.write("\tfunction tvOpsApplyAfterSelect (e) {\r\n");
      out.write("\t\tvar apply = {};\r\n");
      out.write("\t\tvar opsCharge = {};\r\n");
      out.write("\t\tif (e.node) {\r\n");
      out.write("\t\t\tif (e.node.tag && e.node.tagType == \"Apply\") {\r\n");
      out.write("\t\t\t\tapply = e.node.tag;\r\n");
      out.write("\t\t\t\topsCharge = {};\r\n");
      out.write("\t\t\t} else if (e.node.tag && e.node.tagType == \"OpsCharge\") {\r\n");
      out.write("\t\t\t\tvar parentNode = tvOpsApplyTree.getParentNode(e.node);\r\n");
      out.write("\t\t\t\tif (parentNode && parentNode.tag && parentNode.tagType == \"Apply\") {\r\n");
      out.write("\t\t\t\t\tapply = parentNode.tag;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t\topsCharge = e.node.tag;\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tsetCurrentOpsApply(apply);\r\n");
      out.write("\t\tsetCurrentOpsCharge(opsCharge);\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 设值当前手术申请信息\r\n");
      out.write("\tfunction setCurrentOpsApply (opsApply) {\r\n");
      out.write("\t\tcurrentOpsApply = opsApply;\r\n");
      out.write("\t\tif (currentOpsApply && currentOpsApply.applyId) {\r\n");
      out.write("\t\t\tcmbRecipeDoct.setValue(\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${currentOperId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\");\r\n");
      out.write("\t\t\tcmbRecipeDept.setValue(\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${currentDepartmentId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\");\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 设值当前手术批费信息\r\n");
      out.write("\tfunction setCurrentOpsCharge (opsCharge) {\r\n");
      out.write("\t\tcurrentOpsCharge = opsCharge;\r\n");
      out.write("\t\tif (!currentOpsCharge || !currentOpsCharge.opschargeId) {\r\n");
      out.write("\t\t\tcurrentOpsCharge = {};\r\n");
      out.write("\t\t\tif (thisRegister && thisRegister.registerId && currentOpsApply && currentOpsApply.applyId) {\r\n");
      out.write("\t\t\t\tvar list = [];\r\n");
      out.write("\t\t\t\tfor (var i = 0; i < registerOpsChargeList.length; i++) {\r\n");
      out.write("\t\t\t\t\tif (registerOpsChargeList[i].opsApplyId == currentOpsApply.applyId) {\r\n");
      out.write("\t\t\t\t\t\tlist.push(registerOpsChargeList[i]);\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t\tvar num = list.length + 1;\r\n");
      out.write("\t\t\t\tcurrentOpsCharge.opschargeName = \"手术批费记录\" + num;\r\n");
      out.write("\t\t\t\tcurrentOpsCharge.sortNo = num;\r\n");
      out.write("\t\t\t\tcurrentOpsCharge.opsApplyId = currentOpsApply.applyId;\r\n");
      out.write("\t\t\t\tcurrentOpsCharge.registerId = thisRegister.registerId;\r\n");
      out.write("\t\t\t\tcurrentOpsCharge.state = \"0\";\r\n");
      out.write("\t\t\t\tcurrentOpsCharge.createdOperId = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${currentOperId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\";\r\n");
      out.write("\t\t\t\tcurrentOpsCharge.createdTime = new Date();\r\n");
      out.write("\t\t\t\tcurrentOpsCharge.operId = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${currentOperId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\";\r\n");
      out.write("\t\t\t\tcurrentOpsCharge.operTime = new Date();\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t\tgrid.clearRows();\r\n");
      out.write("// \t\t\tthis.ucChargeInputByOps1.SetApplyList(true, new System.Collections.Generic.List<WF.Expense.Models.InPatient.Apply>());\r\n");
      out.write("\t\t\tisEditEnable = true;\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\t$.post(\r\n");
      out.write("\t\t\t\t\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/inpatient/ipOpscharge/setCurrentOpsCharge.do\",\r\n");
      out.write("\t\t\t\t{\r\n");
      out.write("\t\t\t\t\tregisterId: thisRegister.registerId,\r\n");
      out.write("\t\t\t\t\tcurrentOpsChargeJson: mini.encode(currentOpsCharge)\r\n");
      out.write("\t\t\t\t},\r\n");
      out.write("\t\t\t\tfunction (r) {\r\n");
      out.write("\t\t\t\t\tcmbRecipeDoct.setValue(r.cmbRecipeDoct);\r\n");
      out.write("\t            \tcmbRecipeDept.setValue(r.cmbRecipeDept);\r\n");
      out.write("\t            \tgrid.clearRows();\r\n");
      out.write("\t            \tgrid.addRows(r.gridList);\r\n");
      out.write("\t            \tgrid.accept();\r\n");
      out.write("// \t            \tthis.ucChargeInputByOps1.SetApplyList(!flag, list2);\r\n");
      out.write("\t            \tisEditEnable = !(r.flag);\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t);\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 常用项目的刷新按钮\r\n");
      out.write("\tfunction wBtnQueryClick () {\r\n");
      out.write("\t\tdeptItemGrid.reload();\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 根据名称或编码过滤常用项目\r\n");
      out.write("\tfunction queryDeptItem (e) {\r\n");
      out.write("\t\tdeptItemGrid.load({\r\n");
      out.write("\t\t\tQ_key_SL: e.value\r\n");
      out.write("\t\t});\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 刷新页面\r\n");
      out.write("\tfunction initData () {\r\n");
      out.write("// \t\tlocation.reload();\r\n");
      out.write("\t\tcurrentOpsCharge = {};\r\n");
      out.write("\t\tcurrentOpsApply = {};\r\n");
      out.write("\t\tthisRegister = {};\r\n");
      out.write("\t\tregisterOpsApplyList = [];\r\n");
      out.write("\t\tregisterOpsChargeList = [];\r\n");
      out.write("\t\trecipe = {};\r\n");
      out.write("\t\tisEditEnable = false;\r\n");
      out.write("\t\tdeptTree.load(\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/maintenance/expGroup/initDeptGroup.do\");\r\n");
      out.write("\t\tpatientTree.load(\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/common/ipExpRegister/getOpsPatient.do\");\r\n");
      out.write("\t\ttvOpsApplyTree.load(\"\");\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 根据日期获取手术历史记录\r\n");
      out.write("\tfunction queryConfimList () {\r\n");
      out.write("\t\t$.post(\r\n");
      out.write("\t\t\t\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/inpatient/ipOpscharge/queryConfimList.do\",\r\n");
      out.write("\t\t\t{\r\n");
      out.write("\t\t\t\tminApplyTime: mini.formatDate (minApplyTime.value, \"yyyy-MM-dd 00:00:00\")\r\n");
      out.write("\t\t\t},\r\n");
      out.write("\t\t\tfunction (r) {\r\n");
      out.write("\t\t\t\tif (r instanceof Array) {\r\n");
      out.write("\t\t\t\t\ttvOpHisTree.loadList(r,\"id\",\"pid\");\r\n");
      out.write("\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\ttop.mini.error(r);\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t);\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 选中手术历史记录(树节点)时加载患者信息\r\n");
      out.write("\tfunction tvOpHisAfterSelect (e) {\r\n");
      out.write("\t\tvar apply = {};\r\n");
      out.write("\t\tvar opsCharge = {};\r\n");
      out.write("\t\tvar registerId = \"\";\r\n");
      out.write("\t\tif (e.node) {\r\n");
      out.write("\t\t\tif (e.node.tag && e.node.tagType == \"Apply\") {\r\n");
      out.write("\t\t\t\tapply = e.node.tag;\r\n");
      out.write("\t\t\t\topsCharge = {};\r\n");
      out.write("\t\t\t\tregisterId = tvOpHisTree.getParentNode(e.node).id;\r\n");
      out.write("\t\t\t} else if (e.node.tag && e.node.tagType == \"OpsCharge\") {\r\n");
      out.write("\t\t\t\tvar parentNode = tvOpHisTree.getParentNode(e.node);\r\n");
      out.write("\t\t\t\tif (parentNode && parentNode.tag && parentNode.tagType == \"Apply\") {\r\n");
      out.write("\t\t\t\t\tapply = parentNode.tag;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t\topsCharge = e.node.tag;\r\n");
      out.write("\t\t\t\tregisterId = tvOpHisTree.getParentNode(parentNode).id;\r\n");
      out.write("\t\t\t} else {\r\n");
      out.write("\t\t\t\tregisterId = e.node.id;\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tsetRegister(registerId);\r\n");
      out.write("\t\tvar parentNode = tvOpHisTree.getParentNode(e.node);\r\n");
      out.write("\t\tvar grandParentNode = tvOpHisTree.getParentNode(parentNode);\r\n");
      out.write("\t\tif (!parentNode) {\r\n");
      out.write("\t\t\tclear();\r\n");
      out.write("\t\t} else if (!grandParentNode.id) {\r\n");
      out.write("\t\t\tclear();\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\tsetCurrentOpCharge(opsCharge,registerId);\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 加载患者登记信息\r\n");
      out.write("\tfunction setRegister (registerId) {\r\n");
      out.write("\t\tform.clear();\r\n");
      out.write("\t\t$.ajax({\r\n");
      out.write("            url: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/inpatient/ipOpscharge/setRegister.do\",\r\n");
      out.write("            data: {\r\n");
      out.write("            \tregisterId: registerId\r\n");
      out.write("            },\r\n");
      out.write("            type: \"post\",\r\n");
      out.write("            async: false,\r\n");
      out.write("            success: function (r) {\r\n");
      out.write("            \tform.setData(r);\r\n");
      out.write("            }\r\n");
      out.write("        });\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 清除开方医生一栏信息和grid信息\r\n");
      out.write("\tfunction clear () {\r\n");
      out.write("\t\tcmbRecipeDoct.setValue();\r\n");
      out.write("\t\tcmbRecipeDept.setValue();\r\n");
      out.write("\t\tgrid.clearRows();\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 清空页面信息\r\n");
      out.write("\tfunction clearCurrent () {\r\n");
      out.write("\t\tform.clear();\r\n");
      out.write("\t\tgrid.clearRows();\r\n");
      out.write("\t\tcmbRecipeDoct.setValue();\r\n");
      out.write("\t\tcmbRecipeDept.setValue();\r\n");
      out.write("\t\ttxtAlertCost.setValue();\r\n");
      out.write("\t\ttxtFreeCost.setValue();\r\n");
      out.write("\t\ttvOpsApplyTree.loadData();\r\n");
      out.write("\t\tregisterOpsApplyList = [];\r\n");
      out.write("\t\tcurrentOpsApply = {};\r\n");
      out.write("\t\tregisterOpsChargeList = [];\r\n");
      out.write("\t\tcurrentOpsCharge = {};\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 加载开方医生一栏信息和grid信息\r\n");
      out.write("\tfunction setCurrentOpCharge (opsCharge,registerId) {\r\n");
      out.write("\t\tcurrentOpsCharge = opsCharge;\r\n");
      out.write("\t\t$.ajax({\r\n");
      out.write("            url: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/inpatient/ipOpscharge/setCurrentOpCharge.do\",\r\n");
      out.write("            data: {\r\n");
      out.write("            \tregisterId: registerId,\r\n");
      out.write("            \topsChargeJson: mini.encode(opsCharge)\r\n");
      out.write("            },\r\n");
      out.write("            type: \"post\",\r\n");
      out.write("            async: false,\r\n");
      out.write("            success: function (r) {\r\n");
      out.write("            \tcmbRecipeDoct.setValue(r.cmbRecipeDoct);\r\n");
      out.write("            \tcmbRecipeDept.setValue(r.cmbRecipeDept);\r\n");
      out.write("            \tgrid.addRows(r.gridList);\r\n");
      out.write("            \tgrid.accept();\r\n");
      out.write("//             \tthis.ucChargeInputByOps1.SetApplyList(!flag, list);\r\n");
      out.write("            \tisEditEnable = !(r.flag);\r\n");
      out.write("            }\r\n");
      out.write("        });\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 双击科室套餐(树节点)\r\n");
      out.write("\tfunction tvDeptGroupNodeMouseDoubleClick (e) {\r\n");
      out.write("\t\tif (e.node && e.node.tag && e.node.tagType == \"Group\") {\r\n");
      out.write("\t\t\tvar group = e.node.tag;\r\n");
      out.write("\t\t\tif (group && group.groupId) {\r\n");
      out.write("\t\t\t\tsetGroupList(group);\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 加载双击的科室套餐到grid列表\r\n");
      out.write("\tfunction setGroupList (group) {\r\n");
      out.write("\t\tif (!thisRegister || !thisRegister.registerId) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请选择患者!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t} else if (!currentOpsApply || !currentOpsApply.applyId) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请选择手术申请信息!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t} else if (!cmbRecipeDoct.value) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请选择手术医生!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t\tcmbRecipeDoct.focus();\r\n");
      out.write("\t\t\tcmbRecipeDoct.showPopup(true);\r\n");
      out.write("\t\t} else if (!cmbRecipeDept.value) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请选择开方科室!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t\tcmbRecipeDept.focus();\r\n");
      out.write("\t\t\tcmbRecipeDept.showPopup(true);\r\n");
      out.write("\t\t} else if (currentOpsCharge && currentOpsCharge.state == \"1\") {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"该手术批费记录已经收费，不能修改!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\tif (!isHaveRecipe()) {\r\n");
      out.write("\t\t\t\taddNewRecipe(true);\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t\t$.post(\r\n");
      out.write("\t\t\t\t\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/inpatient/ipOpscharge/setGroupList.do\",\r\n");
      out.write("\t\t\t\t{\r\n");
      out.write("\t\t\t\t\tgroupId: group.groupId,\r\n");
      out.write("\t\t\t\t\tgroupJson: mini.encode(group),\r\n");
      out.write("\t\t\t\t\tregisterJson: mini.encode(thisRegister),\r\n");
      out.write("\t\t\t\t\trecipeJson: mini.encode(recipe)\r\n");
      out.write("\t\t\t\t},\r\n");
      out.write("\t\t\t\tfunction (r) {\r\n");
      out.write("\t\t\t\t\tif (r.num == -1) {\r\n");
      out.write("\t\t\t\t\t\tmini.showTips({\r\n");
      out.write("\t\t\t\t\t        content: r.message,     \r\n");
      out.write("\t\t\t\t\t        state: \"info\", \r\n");
      out.write("\t\t\t\t\t        x: \"center\",  \r\n");
      out.write("\t\t\t\t\t        y: \"center\", \r\n");
      out.write("\t\t\t\t\t        timeout: 2000     \r\n");
      out.write("\t\t\t\t\t    });\r\n");
      out.write("\t\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\t\tgrid.addRows(r.gridList);\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t);\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 添加开方信息\r\n");
      out.write("\tfunction addNewRecipe (isOnlyAddNewRecipe) {\r\n");
      out.write("\t\tif (!thisRegister || !thisRegister.registerId) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请选择患者!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t} else if (!currentOpsApply || !currentOpsApply.applyId) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请选择手术申请信息!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t} else if (!cmbRecipeDept.value) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请选择开方科室!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t\tcmbRecipeDept.focus();\r\n");
      out.write("\t\t\tcmbRecipeDept.showPopup(true);\r\n");
      out.write("\t\t} else if (currentOpsCharge && currentOpsCharge.state == \"1\") {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"该手术批费记录已经收费，不能修改!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\trecipe.ParentID = \"\";\r\n");
      out.write("\t\t\trecipe.ID = \"\";\r\n");
      out.write("\t\t\trecipe.Doctor = cmbRecipeDoct.value;\r\n");
      out.write("\t\t\trecipe.Dept = thisRegister.orgId;\r\n");
      out.write("\t\t\tif (!isOnlyAddNewRecipe) {\r\n");
      out.write("// \t\t\t\tthis.ucChargeInputByOps1.SetApplyList(true, null);\r\n");
      out.write("\t\t\t\tisEditEnable = true;\r\n");
      out.write("\t\t\t\tgrid.addRow({});\r\n");
      out.write("// \t\t\t\tthis.ucChargeInputByOps1.AddNewRow();\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 判断是否有开方信息\r\n");
      out.write("\tfunction isHaveRecipe () {\r\n");
      out.write("\t\tif (!recipe.ParentID && !recipe.ID && !recipe.Doctor && !recipe.Dept) {\r\n");
      out.write("\t\t\treturn false;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\treturn true;\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 双击常用项目加载信息\r\n");
      out.write("\tfunction wFpSpread1CellDoubleClick (e) {\r\n");
      out.write("\t\tif (e.row) {\r\n");
      out.write("\t\t\tvar text = e.row.sourceType;\r\n");
      out.write("\t\t\tvar text2 = e.row.sourceItemId;\r\n");
      out.write("\t\t\tvar itemBase = {showQty: 1}\r\n");
      out.write("\t\t\tif (text == \"1\") {\r\n");
      out.write("\t\t\t\t$.ajax({\r\n");
      out.write("\t\t            url: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/basedata/datamanager/nondrug/getById.do\",\r\n");
      out.write("\t\t            data: {\r\n");
      out.write("\t\t            \titemId: text2\r\n");
      out.write("\t\t            },\r\n");
      out.write("\t\t            type: \"post\",\r\n");
      out.write("\t\t            async: false,\r\n");
      out.write("\t\t            success: function (r) {\r\n");
      out.write("\t\t            \titemBase = Object.assign(itemBase,r);\r\n");
      out.write("\t\t            \titemBase.itemSysparentType = \"NonDrug\";\r\n");
      out.write("\t\t            }\r\n");
      out.write("\t\t        });\r\n");
      out.write("\t\t\t} else {\r\n");
      out.write("\t\t\t\t$.ajax({\r\n");
      out.write("\t\t            url: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/pharmacy/common/comDrug/getDrugById.do\",\r\n");
      out.write("\t\t            data: {\r\n");
      out.write("\t\t            \tdrugId: text2\r\n");
      out.write("\t\t            },\r\n");
      out.write("\t\t            type: \"post\",\r\n");
      out.write("\t\t            async: false,\r\n");
      out.write("\t\t            success: function (r) {\r\n");
      out.write("\t\t            \titemBase = Object.assign(itemBase,r);\r\n");
      out.write("\t\t            \titemBase.itemSysparentType = \"Drug\";\r\n");
      out.write("\t\t            }\r\n");
      out.write("\t\t        });\r\n");
      out.write("\t\t\t}\r\n");
      out.write("// \t\t\tif (this.afterCheck != null)\r\n");
      out.write("// \t\t\t{\r\n");
      out.write("// \t\t\t\tthis.afterCheck(itemBase);\r\n");
      out.write("// \t\t\t}\r\n");
      out.write("\t\t\taddItemBase(itemBase);\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 添加项目\r\n");
      out.write("\tfunction addItemBase (itemBase) {\r\n");
      out.write("\t\tif (!thisRegister || !thisRegister.registerId) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请选择患者!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t} else if (!currentOpsApply || !currentOpsApply.applyId) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请选择手术申请信息!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t} else if (!cmbRecipeDoct.value) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请选择手术医生!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t\tcmbRecipeDoct.focus();\r\n");
      out.write("\t\t\tcmbRecipeDoct.showPopup(true);\r\n");
      out.write("\t\t} else if (!cmbRecipeDept.value) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请选择开方科室!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t\tcmbRecipeDept.focus();\r\n");
      out.write("\t\t\tcmbRecipeDept.showPopup(true);\r\n");
      out.write("\t\t} else if (currentOpsCharge && currentOpsCharge.state == \"1\") {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"该手术批费记录已经收费，不能修改!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\trecipe.ParentID = \"\";\r\n");
      out.write("\t\t\trecipe.ID = \"\";\r\n");
      out.write("\t\t\trecipe.Doctor = currentOpsCharge.operId;\r\n");
      out.write("\t\t\trecipe.Dept = thisRegister.orgId;\r\n");
      out.write("// \t\t\tthis.ucChargeInputByOps1.AddNewRow();\r\n");
      out.write("// \t\t\tstring empty2 = string.Empty;\r\n");
      out.write("\t\t\taddApply(itemBase.itemId,itemBase.itemSysparentType);\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 添加申请信息\r\n");
      out.write("\tfunction addApply (itemId,itemSysparentType) {\r\n");
      out.write("\t\tif (!thisRegister || !thisRegister.registerId) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请先选择患者\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t\treturn;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tif (!recipe.ParentID && !recipe.ID && !recipe.Doctor && !recipe.Dept) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请先添加处方信息\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t\treturn;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\t$.post(\r\n");
      out.write("\t\t\t\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/inpatient/ipOpscharge/addApply2.do\",\r\n");
      out.write("\t\t\t{\r\n");
      out.write("\t\t\t\titemId: itemId,\r\n");
      out.write("\t\t\t\titemSysparentType: itemSysparentType,\r\n");
      out.write("\t\t\t\tregisterJson: mini.encode(thisRegister),\r\n");
      out.write("\t\t\t\trecipeJson: mini.encode(recipe)\r\n");
      out.write("\t\t\t},\r\n");
      out.write("\t\t\tfunction (r) {\r\n");
      out.write("\t\t\t\tif (r.num == -1) {\r\n");
      out.write("\t\t\t\t\ttop.mini.alert(r.message);\r\n");
      out.write("\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\tgrid.addRow(r.gridRow);\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t);\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// grid编辑前事件\r\n");
      out.write("\tvar resetShowQty = 0;\r\n");
      out.write("\tfunction oncellbeginedit (e) {\r\n");
      out.write("\t\tif (!isEditEnable) {\r\n");
      out.write("\t\t\te.cancel = true;\r\n");
      out.write("\t\t\treturn;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tif (e.field == \"showQty\") {\r\n");
      out.write("\t\t\tresetShowQty = e.value;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// grid编辑后事件\r\n");
      out.write("\tfunction oncellendedit (e) {\r\n");
      out.write("\t\tif (e.field == \"showQty\") {\r\n");
      out.write("\t\t\tvar g = parseFloat(e.value);\r\n");
      out.write("\t\t\tif (g < 0 || !isNumber(g)) {\r\n");
      out.write("\t\t\t\tgrid.updateRow(e.row,{\r\n");
      out.write("\t\t\t\t\tshowQty: resetShowQty\r\n");
      out.write("\t\t\t\t});\r\n");
      out.write("\t\t\t\te.cancel = true;\r\n");
      out.write("\t\t\t\treturn;\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t\taddRowSum(e.row,e.row.tag,g);\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 计算金额\r\n");
      out.write("\tfunction addRowSum (row,apply,showQty) {\r\n");
      out.write("\t\t$.post(\r\n");
      out.write("\t\t\t\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/inpatient/ipOpscharge/addRowSum.do\",\r\n");
      out.write("\t\t\t{\r\n");
      out.write("\t\t\t\tapplyJson: mini.encode(apply),\r\n");
      out.write("\t\t\t\tshowQty: showQty\r\n");
      out.write("\t\t\t},\r\n");
      out.write("\t\t\tfunction (r) {\r\n");
      out.write("\t\t\t\tgrid.updateRow(row,{\r\n");
      out.write("\t\t\t\t\tcost: r\r\n");
      out.write("\t\t\t\t});\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t);\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 选择项目\r\n");
      out.write("\tfunction onItemValueChanged (e) {\r\n");
      out.write("\t\tif (!thisRegister || !thisRegister.registerId) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请先选择患者\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t\treturn;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tif (!recipe.ParentID && !recipe.ID && !recipe.Doctor && !recipe.Dept) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请先添加处方信息\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t\treturn;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tvar row = grid.getSelected();\r\n");
      out.write("\t\tvar item = e.selected;\r\n");
      out.write("\t\tvar itemSysparentType = \"\";\r\n");
      out.write("\t\tif (item.sourceType == 1) {\r\n");
      out.write("\t\t\titemSysparentType = \"Drug\";\r\n");
      out.write("\t\t} else if (item.sourceType == 2) {\r\n");
      out.write("\t\t\titemSysparentType = \"NonDrug\";\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\t$.ajax({\r\n");
      out.write("            url: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/inpatient/ipOpscharge/addApply2.do\",\r\n");
      out.write("            data: {\r\n");
      out.write("            \titemId: item.itemId,\r\n");
      out.write("\t\t\t\titemSysparentType: itemSysparentType,\r\n");
      out.write("\t\t\t\tregisterJson: mini.encode(thisRegister),\r\n");
      out.write("\t\t\t\trecipeJson: mini.encode(recipe)\r\n");
      out.write("            },\r\n");
      out.write("            type: \"post\",\r\n");
      out.write("            async: false,\r\n");
      out.write("            success: function (r) {\r\n");
      out.write("            \tif (r.num == -1) {\r\n");
      out.write("            \t\tmini.showTips({\r\n");
      out.write("        \t\t        content: r.message,    \r\n");
      out.write("        \t\t        state: \"warning\", \r\n");
      out.write("        \t\t        x: \"center\",  \r\n");
      out.write("        \t\t        y: \"center\", \r\n");
      out.write("        \t\t        timeout: 2000     \r\n");
      out.write("        \t\t    });\r\n");
      out.write("            \t\tvar editor = grid.getCellEditor(\"itemNo\",row);\r\n");
      out.write("    \t\t\t\teditor.setText();\r\n");
      out.write("    \t\t\t\teditor.setValue();\r\n");
      out.write("            \t} else if (r.num == 1) {\r\n");
      out.write("            \t\tvar editor = grid.getCellEditor(\"itemNo\",row);\r\n");
      out.write("    \t\t\t\teditor.setText(r.gridRow.itemNo);\r\n");
      out.write("    \t\t\t\teditor.setValue(r.gridRow.itemNo);\r\n");
      out.write("            \t\tgrid.updateRow(row,r.gridRow);\r\n");
      out.write("            \t}\r\n");
      out.write("            }\r\n");
      out.write("        });\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 保存或提交按钮\r\n");
      out.write("\tfunction save (isFee) {\r\n");
      out.write("\t\tif (!thisRegister || !thisRegister.registerId) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请选择患者\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t} else if (!currentOpsApply || !currentOpsApply.applyId) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请选择手术申请信息!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t} else if (!cmbRecipeDoct.value) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请选择手术医生!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t} else if (!cmbRecipeDept.value) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请选择开方科室!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t} else if (!currentOpsCharge.opschargeName) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请选择手术批费记录!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t} else if (currentOpsCharge && currentOpsCharge.state == \"1\") {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"该手术批费记录已经收费，不能再次保存!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\t$.post(\r\n");
      out.write("\t\t\t\t\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/inpatient/ipOpscharge/save1.do\",\r\n");
      out.write("\t\t\t\t{\r\n");
      out.write("\t\t\t\t\tregisterId: thisRegister.registerId\r\n");
      out.write("\t\t\t\t},\r\n");
      out.write("\t\t\t\tfunction (r) {\r\n");
      out.write("\t\t\t\t\tif (r.num == -1) {\r\n");
      out.write("\t\t\t\t\t\tmini.showTips({\r\n");
      out.write("\t\t\t\t\t        content: r.message,    \r\n");
      out.write("\t\t\t\t\t        state: \"warning\", \r\n");
      out.write("\t\t\t\t\t        x: \"center\",  \r\n");
      out.write("\t\t\t\t\t        y: \"center\", \r\n");
      out.write("\t\t\t\t\t        timeout: 2000     \r\n");
      out.write("\t\t\t\t\t    });\r\n");
      out.write("\t\t\t\t\t} else if (r.num == 1) {\r\n");
      out.write("\t\t\t\t\t\tvar list = grid.getList();\r\n");
      out.write("\t\t\t\t\t\tvar sum = 0;\r\n");
      out.write("\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n");
      out.write("\t\t\t\t\t\t\tsum += parseFloat(list[i].cost);\r\n");
      out.write("\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\tif (isLackFee(r.register,r.registerDetail,sum)) {\r\n");
      out.write("\t\t\t\t\t\t\tif (messtype == \"M\") {\r\n");
      out.write("\t\t\t\t\t\t\t\tmini.showMessageBox({\r\n");
      out.write("\t\t\t\t\t\t\t\t    title: \"提示\",    \r\n");
      out.write("\t\t\t\t\t\t\t\t    message: \"此患者已欠费，是否继续？\",\r\n");
      out.write("\t\t\t\t\t\t\t\t    buttons: [\"ok\", \"no\"],    \r\n");
      out.write("\t\t\t\t\t\t\t\t    iconCls: \"mini-messagebox-question\",\r\n");
      out.write("\t\t\t\t\t\t\t\t    callback: function(action){\r\n");
      out.write("\t\t\t\t\t\t\t\t    \tif (action == \"ok\") {\r\n");
      out.write("\t\t\t\t\t\t\t\t    \t\tsave2();\r\n");
      out.write("\t\t\t\t\t\t\t\t    \t}\r\n");
      out.write("\t\t\t\t\t\t\t\t    }\r\n");
      out.write("\t\t\t\t\t\t\t\t});\r\n");
      out.write("\t\t\t\t\t\t\t} else if (messtype == \"Y\") {\r\n");
      out.write("\t\t\t\t\t\t\t\ttop.mini.alert(\"此患者已欠费，不允许继续收费！\");\r\n");
      out.write("\t\t\t\t\t\t\t\treturn;\r\n");
      out.write("\t\t\t\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\t\t\t\tsave2(isFee);\r\n");
      out.write("\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\t\t\tsave2(isFee);\r\n");
      out.write("\t\t\t\t\t\t} \r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t);\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 保存按钮2\r\n");
      out.write("\tfunction save2 (isFee) {\r\n");
      out.write("\t\tvar gridList = grid.getList();\r\n");
      out.write("\t\tvar list = mini.clone(gridList);\r\n");
      out.write("\t\tfor (var i = 0; i < list.length; i++) {\r\n");
      out.write("\t\t\tlist[i] = Object.assign(list[i],list[i].tag);\r\n");
      out.write("\t\t\tlist[i].showQty = gridList[i].showQty; //数量\r\n");
      out.write("\t\t\tlist[i].executeDeptId = gridList[i].executeDeptId; //执行科室\r\n");
      out.write("\t\t\tlist[i].registerId = thisRegister.registerId;\r\n");
      out.write("\t\t\tlist[i].patientPaytypeId = thisRegister.patientPaytypeId;\r\n");
      out.write("\t\t\tlist[i].patientMedicaltypeId = thisRegister.patientMedicaltypeId;\r\n");
      out.write("\t\t\tlist[i].patientDeptId = thisRegister.orgId;\r\n");
      out.write("\t\t\tlist[i].patientNursestationId = thisRegister.nursestationId;\r\n");
      out.write("\t\t\tlist[i].medicaltypeKindId = thisRegister.patientMedicaltypeKind;\r\n");
      out.write("\t\t\tlist[i].operId = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${currentOperId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\";\r\n");
      out.write("\t\t\tlist[i].operDeptId = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${currentDepartmentId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\";\r\n");
      out.write("\t\t\tlist[i].businessOperId = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${currentOperId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\";\r\n");
      out.write("\t\t\tlist[i].businessDeptId = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${currentDepartmentId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\";\r\n");
      out.write("\t\t\tif (!list[i].executeDeptId) {\r\n");
      out.write("\t\t\t\tlist[i].executeDeptId = currentOpsApply.execDeptId;\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t\tlist[i].dataSource = \"3\"; \r\n");
      out.write("\t\t\tlist[i].recipeDeptId = cmbRecipeDept.value;\r\n");
      out.write("\t\t\tlist[i].recipeDoctId = cmbRecipeDoct.value;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tif (isFee && list.length <= 0) {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"请添加收费项目!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\tif (list.length >= 0) {\r\n");
      out.write("\t\t\t\tcurrentOpsCharge.state = (isFee) ? \"1\" : \"0\";\r\n");
      out.write("// \t\t\t\tif (currentOpsCharge.execDeptId && currentOpsCharge.execDeptId != cmbRecipeDept.value && currentOpsApply.doctorDeptId && currentOpsApply.doctorDeptId != cmbRecipeDept.value) {\r\n");
      out.write("// \t\t\t\t\tmini.showTips({\r\n");
      out.write("// \t\t\t\t        content: \"请选择正确的开方科室！\",    \r\n");
      out.write("// \t\t\t\t        state: \"warning\", \r\n");
      out.write("// \t\t\t\t        x: \"center\",  \r\n");
      out.write("// \t\t\t\t        y: \"center\", \r\n");
      out.write("// \t\t\t\t        timeout: 2000     \r\n");
      out.write("// \t\t\t\t    });\r\n");
      out.write("// \t\t\t\t}\r\n");
      out.write("\t\t\t\tif (false) {\r\n");
      out.write("\t\t\t\t\t// 不验证科室  --\"请选择正确的开方科室！\"\r\n");
      out.write("\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\t$.ajax({\r\n");
      out.write("\t\t\t            url: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/inpatient/ipOpscharge/apply.do\",\r\n");
      out.write("\t\t\t            data: {\r\n");
      out.write("\t\t\t            \tisFee: isFee,\r\n");
      out.write("\t\t\t            \tcmbRecipeDept: cmbRecipeDept.value,\r\n");
      out.write("\t\t\t            \tregisterJson: mini.encode(thisRegister),\r\n");
      out.write("\t\t\t            \tcurrentOpsApplyJson: mini.encode(currentOpsApply),\r\n");
      out.write("\t\t\t            \tcurrentOpsChargeJson: mini.encode(currentOpsCharge),\r\n");
      out.write("\t\t\t            \tlistJson: mini.encode(list)\r\n");
      out.write("\t\t\t            },\r\n");
      out.write("\t\t\t            type: \"post\",\r\n");
      out.write("\t\t\t            async: false,\r\n");
      out.write("\t\t\t            success: function (r) {\r\n");
      out.write("\t\t\t            \tif (r.num && r.num == \"1\") {\r\n");
      out.write("\t\t\t            \t\tcurrentOpsCharge = r.opsCharge;\r\n");
      out.write("\t\t\t            \t\tcurrentOpsApply = r.opsApply;\r\n");
      out.write("\t\t\t            \t\tvar message = (isFee) ? \"批费\" : \"暂存\";\r\n");
      out.write("\t\t\t            \t\tmini.showTips({\r\n");
      out.write("\t\t\t\t\t\t\t        content: message + \"成功\",    \r\n");
      out.write("\t\t\t\t\t\t\t        state: \"warning\", \r\n");
      out.write("\t\t\t\t\t\t\t        x: \"center\",  \r\n");
      out.write("\t\t\t\t\t\t\t        y: \"center\", \r\n");
      out.write("\t\t\t\t\t\t\t        timeout: 2000     \r\n");
      out.write("\t\t\t\t\t\t\t    });\r\n");
      out.write("\t\t\t            \t} else {\r\n");
      out.write("\t\t\t            \t\ttop.mini.alert(r);\r\n");
      out.write("\t\t\t            \t}\r\n");
      out.write("\t\t\t            }\r\n");
      out.write("\t\t\t        });\r\n");
      out.write("// \t\t\t\t\tif (isFee) {\r\n");
      out.write("// \t\t\t\t\t\t//该方法实现在后台\r\n");
      out.write("// \t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t\trefreshOpsCharge();\r\n");
      out.write("\t\t}\r\n");
      out.write("\t} \r\n");
      out.write("\t\r\n");
      out.write("\t// 刷新申请信息\r\n");
      out.write("\tfunction refreshOpsCharge () {\r\n");
      out.write("\t\tif (thisRegister != null && thisRegister.registerId) {\r\n");
      out.write("\t\t\tthisRegister = getRegister(thisRegister.registerId);\r\n");
      out.write("\t\t\tif (!thisRegister || !thisRegister.registerId) {\r\n");
      out.write("\t\t\t\ttop.mini.alert(\"刷新患者信息出错!\");\r\n");
      out.write("\t\t\t} else {\r\n");
      out.write("\t\t\t\tvar apply = currentOpsApply;\r\n");
      out.write("\t\t\t\tvar opsCharge = currentOpsCharge;\r\n");
      out.write("\t\t\t\tqueryRegister(thisRegister)\r\n");
      out.write("\t\t\t\tif (tvOpsApplyTree.data && tvOpsApplyTree.data.length > 0) {\r\n");
      out.write("\t\t\t\t\tvar flag = false;\r\n");
      out.write("\t\t\t\t\tif (apply == null || !apply.applyId) {\r\n");
      out.write("\t\t\t\t\t\ttvOpsApplyTree.selectNode(tvOpsApplyTree.data[0]);\r\n");
      out.write("\t\t\t\t\t\tflag = true;\r\n");
      out.write("\t\t\t\t\t} else if (true) {\r\n");
      out.write("\t\t\t\t\t\tfor (var i = 0; i < tvOpsApplyTree.data[0].children.length; i++) {\r\n");
      out.write("\t\t\t\t\t\t\tvar treeNode = tvOpsApplyTree.data[0].children[i];\r\n");
      out.write("\t\t\t\t\t\t\tif (treeNode && treeNode.tag && treeNode.tagType == \"Apply\") {\r\n");
      out.write("\t\t\t\t\t\t\t\tvar apply2 = treeNode.tag;\r\n");
      out.write("\t\t\t\t\t\t\t\tif (apply2 && apply2.applyId == apply.applyId) {\r\n");
      out.write("\t\t\t\t\t\t\t\t\tif (treeNode.children && treeNode.children.length > 0) {\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tif (opsCharge && opsCharge.opschargeId) {\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\tfor (var j = 0; j < treeNode.children.length; j++) {\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\tvar treeNode2 = treeNode.children[j];\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\tif (treeNode2 && treeNode2.tag && treeNode2.tagType == \"OpsCharge\") {\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t\tvar opsCharge2 = treeNode2.tag;\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t\tif (opsCharge2 && opsCharge2.opschargeId == opsCharge.opschargeId) {\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!flag) {\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttvOpsApplyTree.selectNode(treeNode2);\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tflag = true;\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t\t\tif (!flag) {\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\ttvOpsApplyTree.selectNode(treeNode);\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tflag = true;\r\n");
      out.write("\t\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t\t\tbreak;\r\n");
      out.write("\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t//获取患者登记信息\r\n");
      out.write("\tfunction getRegister (registerId) {\r\n");
      out.write("\t\tvar result = {};\r\n");
      out.write("\t\t$.ajax({\r\n");
      out.write("            url: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/common/ipExpRegister/getVRegisterById.do\",\r\n");
      out.write("            data: {\r\n");
      out.write("            \tregisterId: registerId\r\n");
      out.write("            },\r\n");
      out.write("            type: \"post\",\r\n");
      out.write("            async: false,\r\n");
      out.write("            success: function (r) {\r\n");
      out.write("            \tresult = r;\r\n");
      out.write("            }\r\n");
      out.write("        });\r\n");
      out.write("\t\treturn result;\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 删除按钮\r\n");
      out.write("\tfunction del () {\r\n");
      out.write("\t\tif (currentOpsCharge && currentOpsCharge.state == \"1\") {\r\n");
      out.write("\t\t\tmini.showTips({\r\n");
      out.write("\t\t        content: \"该手术批费记录已经收费，不能修改!\",    \r\n");
      out.write("\t\t        state: \"warning\", \r\n");
      out.write("\t\t        x: \"center\",  \r\n");
      out.write("\t\t        y: \"center\", \r\n");
      out.write("\t\t        timeout: 2000     \r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\tif (grid.getList().length > 0) {\r\n");
      out.write("\t\t\t\tvar selections = grid.getSelecteds();\r\n");
      out.write("\t\t\t\tif (selections.length > 0) {\r\n");
      out.write("\t\t\t\t\tgrid.removeRows(selections);\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 监听科室\r\n");
      out.write("\ttop.on(\"EVENT_ORG_CHANGED\", initData);\r\n");
      out.write("\t$(window).unload(function(){\r\n");
      out.write("\t  top.un(\"EVENT_ORG_CHANGED\", initData);\r\n");
      out.write("\t});\r\n");
      out.write("\t\r\n");
      out.write("\t//弹出有手术患者选择界面\r\n");
      out.write("\tfunction getPatient(){\r\n");
      out.write("\t\tpatientInfoWin.show(\"center\",\"middle\");\r\n");
      out.write("\t\tpatientGrid.load({\r\n");
      out.write("\t\t\texecDeptId:\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${currentDepartmentId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\"\r\n");
      out.write("\t\t});\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t//回填患者信息\r\n");
      out.write("\tfunction inputMsg(e){\r\n");
      out.write("\t\tvar inpatientNo = e.node.inpatientNo;\r\n");
      out.write("\t\tvar queryName =\"inpatientNo\";\r\n");
      out.write("\t\t$.post(\r\n");
      out.write("\t\t\t\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/inpatient/ipOpscharge/query.do\",\r\n");
      out.write("\t\t\t{\r\n");
      out.write("\t\t\t\tqueryName: queryName,\r\n");
      out.write("\t\t\t\tqueryText: inpatientNo\r\n");
      out.write("\t\t\t},\r\n");
      out.write("\t\t\tfunction (r) {\r\n");
      out.write("\t\t\t\tif (r) {\r\n");
      out.write("\t\t\t\t\tqueryRegister(r);\r\n");
      out.write("\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\tmini.showTips({\r\n");
      out.write("\t\t\t\t\t\tcontent: \"<font size='3'>没有找到\"+ queryEnum[index].text + \"为\"+queryValue+\"的患者信息</font>\",\r\n");
      out.write("\t\t\t\t\t\tstate: \"info\",      \r\n");
      out.write("\t\t\t\t\t\tx: \"center\",          \r\n");
      out.write("\t\t\t\t\t\ty: \"center\",          \r\n");
      out.write("\t\t\t\t\t\ttimeout: 3000     \r\n");
      out.write("\t\t\t\t\t});\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t);\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\tfunction search (treeKey){\r\n");
      out.write("\t\tif (treeKey == \"\") {\r\n");
      out.write("\t\t\tpatientTree.clearFilter();\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\ttreeKey = treeKey.toLowerCase();\r\n");
      out.write("\t\t\tpatientTree.filter(function(node) {\r\n");
      out.write("\t\t\t\tvar text = node.text ? node.text.toLowerCase() : \"\";\r\n");
      out.write("\t\t\t\tif (text.indexOf(treeKey) != -1) {\r\n");
      out.write("\t\t\t\t\tpatientTree.setValue(node.text);\r\n");
      out.write("\t\t\t\t\treturn true;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t});\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("</script>\r\n");
      out.write("</head>\r\n");
      out.write("<body>\r\n");
      out.write("\t<div class=\"mini-toolbar\" borderStyle=\"border-top:-1px;border-left:0;border-right:0;\" style=\"border-bottom: 1px solid #ccc;padding:5px;font-size:10px;\">\r\n");
      out.write("\t\t<div style=\"width:100%;border-bottom:1px solid #c5c5c5;padding-left:10px;font-weight:bolder;\">患者信息</div>\r\n");
      out.write("\t\t        <div style=\"border-bottom:0px solid #c5c5c5;\"> \r\n");
      out.write("\t\t\t\t\t<table id=\"form\" style=\"width:100%;\">\r\n");
      out.write("\t\t\t\t\t\t<tr>\r\n");
      out.write("\t\t\t\t\t\t\t<td class=\"table-label\">患者:</td>\r\n");
      out.write("\t\t\t\t\t\t\t<td colspan=\"3\">\r\n");
      out.write("\t\t\t\t\t\t\t\t<input name=\"lbPatientInfo\" class=\"mini-textbox\" inputStyle=\"color:blue;font-weight:bold;\" borderStyle=\"border:0\" style=\"width:100%\" allowInput=\"false\"/>\r\n");
      out.write("\t\t\t\t\t\t\t</td>\r\n");
      out.write("\t\t\t\t\t\t\t<td class=\"table-label\">费用:</td>\r\n");
      out.write("\t\t\t\t\t\t\t<td style=\"width:200px;\">\r\n");
      out.write("\t\t\t\t\t\t\t\t<input name=\"lbTotCost\" class=\"mini-textbox\" inputStyle=\"color:blue;font-weight:bold;\" borderStyle=\"border:0\" style=\"width:100%\" allowInput=\"false\"/>\r\n");
      out.write("\t\t\t\t\t\t\t</td>\r\n");
      out.write("\t\t\t\t\t\t\t<td class=\"table-label\">预交金:</td>\r\n");
      out.write("\t\t\t\t\t\t\t<td>\r\n");
      out.write("\t\t\t\t\t\t\t\t<input name=\"lbPrepayCost\" class=\"mini-textbox\" inputStyle=\"color:blue;font-weight:bold;\" borderStyle=\"border:0\" allowInput=\"false\"/>\r\n");
      out.write("\t\t\t\t\t\t\t</td>\r\n");
      out.write("\t\t\t\t\t\t\t<td class=\"table-label\">入院:</td>\r\n");
      out.write("\t\t\t\t\t\t\t<td style=\"width:200px;\">\r\n");
      out.write("\t\t\t\t\t\t\t\t<input name=\"lbInTime\" class=\"mini-textbox\" inputStyle=\"color:blue;font-weight:bold;\" borderStyle=\"border:0\" style=\"width:100%\" allowInput=\"false\"/>\r\n");
      out.write("\t\t\t\t\t\t\t</td>\r\n");
      out.write("\t\t\t\t\t\t\t<td class=\"table-label\">住院天数:</td>\r\n");
      out.write("\t\t\t\t\t\t\t<td>\r\n");
      out.write("\t\t\t\t\t\t\t\t<input name=\"lbDays\" class=\"mini-textbox\" inputStyle=\"color:blue;font-weight:bold;\" borderStyle=\"border:0\" allowInput=\"false\"/>\r\n");
      out.write("\t\t\t\t\t\t\t</td>\r\n");
      out.write("\t\t\t\t\t\t<tr>\r\n");
      out.write("\t\t\t\t\t\t<tr>\r\n");
      out.write("\t\t\t\t\t\t\t<td class=\"table-label\">诊断:</td>\r\n");
      out.write("\t\t\t\t\t\t\t<td>\r\n");
      out.write("\t\t\t\t\t\t\t\t<input name=\"lbDiagInfo\" class=\"mini-textbox\" inputStyle=\"color:blue;font-weight:bold;\" borderStyle=\"border:0\" allowInput=\"false\"/>\r\n");
      out.write("\t\t\t\t\t\t\t</td>\r\n");
      out.write("\t\t\t\t\t\t\t<td class=\"table-label\">科室:</td>\r\n");
      out.write("\t\t\t\t\t\t\t<td>\r\n");
      out.write("\t\t\t\t\t\t\t\t<input name=\"lbDept\" class=\"mini-textbox\" inputStyle=\"color:blue;font-weight:bold;\" borderStyle=\"border:0\" allowInput=\"false\"/>\r\n");
      out.write("\t\t\t\t\t\t\t</td>\r\n");
      out.write("\t\t\t\t\t\t\t<td class=\"table-label\">病区:</td>\r\n");
      out.write("\t\t\t\t\t\t\t<td>\r\n");
      out.write("\t\t\t\t\t\t\t\t<input name=\"lbNurseStation\" class=\"mini-textbox\" inputStyle=\"color:blue;font-weight:bold;\" borderStyle=\"border:0\" style=\"width:100%\" allowInput=\"false\"/>\r\n");
      out.write("\t\t\t\t\t\t\t</td>\r\n");
      out.write("\t\t\t\t\t\t\t<td class=\"table-label\">住院床号:</td>\r\n");
      out.write("\t\t\t\t\t\t\t<td>\r\n");
      out.write("\t\t\t\t\t\t\t\t<input name=\"lbBedNO\" class=\"mini-textbox\" inputStyle=\"color:blue;font-weight:bold;\" borderStyle=\"border:0\" allowInput=\"false\"/>\r\n");
      out.write("\t\t\t\t\t\t\t</td>\r\n");
      out.write("\t\t\t\t\t\t\t<td class=\"table-label\">出院:</td>\r\n");
      out.write("\t\t\t\t\t\t\t<td>\r\n");
      out.write("\t\t\t\t\t\t\t\t<input name=\"lbOutTime\" class=\"mini-textbox\" inputStyle=\"color:blue;font-weight:bold;\" borderStyle=\"border:0\" style=\"width:100%\" allowInput=\"false\"/>\r\n");
      out.write("\t\t\t\t\t\t\t</td>\r\n");
      out.write("\t\t\t\t\t\t\t<td class=\"table-label\">离院方式:</td>\r\n");
      out.write("\t\t\t\t\t\t\t<td>\r\n");
      out.write("\t\t\t\t\t\t\t\t<input name=\"lbOutWay\" class=\"mini-textbox\" inputStyle=\"color:blue;font-weight:bold;\" borderStyle=\"border:0\" allowInput=\"false\"/>\r\n");
      out.write("\t\t\t\t\t\t\t</td>\r\n");
      out.write("\t\t\t\t\t\t<tr>\r\n");
      out.write("\t\t\t\t\t</table>\r\n");
      out.write("\t\t\t\t</div>\r\n");
      out.write("\t</div>\r\n");
      out.write("\t\r\n");
      out.write("\t<div class=\"mini-toolbar\" borderStyle=\"border-top:0px;border-left:0;border-right:0;\" style=\"border-bottom: 1px solid #ccc;padding:0px;font-size:10px;\">\r\n");
      out.write("\t\t<span id=\"queryName\" class=\"blue-font\">检索</span>\r\n");
      out.write("\t    <input id=\"keyWord\" class=\"mini-textbox\" emptyText=\"输入姓名或住院号检索\" inputStyle=\"color:blue;\" onkeyup=\"search(this.value)\"/>\r\n");
      out.write("\t    <span class=\"separator\"></span>\r\n");
      out.write("\t    <a class=\"mini-button\" onclick=\"addNewRecipe(false)\">增加</a>\r\n");
      out.write("\t    <a class=\"mini-button\" onclick=\"save(false)\">保存</a>\r\n");
      out.write("\t    <a class=\"mini-button\" onclick=\"del\">删除</a>\r\n");
      out.write("\t    <a class=\"mini-button\" onclick=\"save(true)\">提交</a>\r\n");
      out.write("\t</div>\r\n");
      out.write("\t\r\n");
      out.write("\t<div class=\"mini-fit\">\r\n");
      out.write("\t\t<div class=\"mini-splitter\" style=\"width:100%;height:100%;\" allowResize=\"false\" handlerSize=\"-1\">\r\n");
      out.write("\t\t    <div size=\"250px\" showCollapseButton=\"false\" style=\"padding:5px;\">\r\n");
      out.write("\t\t\t\t<div class=\"mini-splitter\" vertical=\"true\" style=\"width:100%; height:100%;\" allowResize=\"false\" handlerSize=\"-1\" borderStyle=\"border:0\">\r\n");
      out.write("\t\t\t\t\t<div size=\"50%\" showCollapseButton=\"false\">\r\n");
      out.write("\t\t\t\t\t\t<div class=\"mini-splitter\" vertical=\"true\" style=\"width:100%;height:100%;\" allowResize=\"false\" handlerSize=\"-1\" borderStyle=\"border:0\">\r\n");
      out.write("\t\t\t\t\t\t\t<div size=\"60%\" showCollapseButton=\"false\">\r\n");
      out.write("\t\t\t\t\t\t\t\t<div class=\"mini-fit\">\r\n");
      out.write("\t\t\t\t\t\t    \t\t <ul id=\"patientTree\" class=\"mini-tree\" style=\"width:100%;height:100%;padding:5px;\" resultAsTree=\"false\" expandOnLoad=\"true\"\r\n");
      out.write("\t\t\t\t\t\t    \t\t\tonnodeselect=\"inputMsg\"  url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/common/ipExpRegister/getOpsPatient.do?execDeptId=");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${currentDepartmentId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\">        \r\n");
      out.write("\t\t\t\t\t\t\t\t\t</ul>  \r\n");
      out.write("\t\t\t\t\t\t    \t</div>\r\n");
      out.write("\t\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t\t<div showCollapseButton=\"false\">\r\n");
      out.write("\t\t\t\t\t\t\t\t<!-- 手术申请 -->\r\n");
      out.write("\t\t\t\t\t\t    \t<div style=\"width:100%;border-bottom:1px solid #c5c5c5;padding-left:10px;font-weight:bolder;\">手术申请</div>\r\n");
      out.write("\t\t\t\t\t\t    \t<div class=\"mini-fit\">\r\n");
      out.write("\t\t\t\t\t\t    \t\t <ul id=\"tvOpsApplyTree\" class=\"mini-tree\" style=\"width:100%;height:100%;padding:5px;\" resultAsTree=\"false\" expandOnLoad=\"true\"\r\n");
      out.write("\t\t\t\t\t\t    \t\t\tonnodeselect=\"tvOpsApplyAfterSelect\">        \r\n");
      out.write("\t\t\t\t\t\t\t\t\t</ul>  \r\n");
      out.write("\t\t\t\t\t\t    \t</div>\r\n");
      out.write("\t\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t<div showCollapseButton=\"false\">\r\n");
      out.write("\t\t\t\t\t\t<!-- 手术历史记录 -->\r\n");
      out.write("\t\t\t\t\t\t<div style=\"width:100%;border-bottom:1px solid #c5c5c5;padding-left:10px;font-weight:bolder;\">手术历史记录</div>\r\n");
      out.write("\t\t\t\t        <div class=\"mini-fit\">\r\n");
      out.write("\t\t\t\t        \t<ul id=\"tvOpHisTree\" class=\"mini-tree\" style=\"width:100%;height:100%;padding:5px;\" resultAsTree=\"false\"\r\n");
      out.write("\t\t\t\t        \t\tonnodeselect=\"tvOpHisAfterSelect\">        \r\n");
      out.write("\t\t\t\t\t\t\t</ul>\r\n");
      out.write("\t\t\t\t        </div>\r\n");
      out.write("\t\t\t\t        <div class=\"mini-toolbar\" style=\"border-top:1px solid #c5c5c5;border-bottom:0;border-left:0;border-right:0;\">\r\n");
      out.write("\t\t\t\t\t\t    <span class=\"blue-font\">日期</span>\r\n");
      out.write("\t\t\t\t\t\t    <input id=\"minApplyTime\" class=\"mini-datepicker\" style=\"width:100px;\" value=\"\"/>\r\n");
      out.write("\t\t\t\t\t\t    <a class=\"mini-button\" onclick=\"queryConfimList\">查询</a>\r\n");
      out.write("\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t</div>\t        \r\n");
      out.write("\t\t    </div>\r\n");
      out.write("\t\t    <div showCollapseButton=\"false\">\r\n");
      out.write("\t\t    \t<!-- 开方医生，科室等信息 -->\r\n");
      out.write("\t\t        <div class=\"mini-toolbar\" borderStyle=\"border-top:-1px;border-left:0;border-right:0;\" style=\"border-bottom: 1px solid #ccc;padding:5px;font-size:10px;\">\r\n");
      out.write("\t\t        \t<table style=\"wdith:2000px;height:70%\">\r\n");
      out.write("\t\t        \t\t<tr>\r\n");
      out.write("\t\t        \t\t\t<td style=\"width:100px;text-align:right;\">\r\n");
      out.write("\t\t        \t\t\t\t<span class=\"blue-font\">开方医生:</span></td>\r\n");
      out.write("\t\t        \t\t\t<td>\r\n");
      out.write("\t\t        \t\t\t\t<input id=\"cmbRecipeDoct\" class=\"mini-combobox\" style=\"width:100px;\" allowInput=\"true\" valueFromSelect=\"true\"\r\n");
      out.write("\t\t        \t\t\t\t\turl=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/common/basedata/employee/getKVs.do\"/>\r\n");
      out.write("\t\t        \t\t\t</td>\r\n");
      out.write("\t\t        \t\t\t<td style=\"width:100px;text-align:right;\">\r\n");
      out.write("\t\t        \t\t\t\t<span class=\"blue-font\">开方科室:</span>\r\n");
      out.write("\t\t        \t\t\t</td>\r\n");
      out.write("\t\t        \t\t\t<td>\r\n");
      out.write("\t\t        \t\t\t\t<input id=\"cmbRecipeDept\" class=\"mini-combobox\" style=\"width:120px;\" allowInput=\"true\" valueFromSelect=\"true\"\r\n");
      out.write("\t\t        \t\t\t\t\turl=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysOrg/getKVs.do\"/>\r\n");
      out.write("\t\t        \t\t\t</td>\r\n");
      out.write("\t\t        \t\t\t<td style=\"width:80px;\">\r\n");
      out.write("\t\t        \t\t\t\t<input id=\"wLabel3\" class=\"mini-textbox\" style=\"width:100%;\" inputStyle=\"text-align:right;font-weight:bold;\" borderStyle=\"border:0;\" allowInput=\"false\" value=\"警戒线(开)\"/>\r\n");
      out.write("\t\t        \t\t\t</td>\r\n");
      out.write("\t\t        \t\t\t<td>\r\n");
      out.write("\t\t        \t\t\t\t<input id=\"txtAlertCost\" class=\"mini-textbox\" inputStyle=\"color:red;\" value=\"0.00\" style=\"width:100px;\"/>\t\r\n");
      out.write("\t\t        \t\t\t</td>\r\n");
      out.write("\t\t        \t\t\t<td class=\"table-label\">余额:</td>\r\n");
      out.write("\t\t        \t\t\t<td>\r\n");
      out.write("\t\t        \t\t\t\t<input id=\"txtFreeCost\" class=\"mini-textbox\" inputStyle=\"color:red;\" value=\"0.00\" style=\"width:100px;\"/>\t\r\n");
      out.write("\t\t        \t\t\t</td>\r\n");
      out.write("\t\t        \t\t</tr>\r\n");
      out.write("\t\t        \t</table>\r\n");
      out.write("\t\t        </div>\r\n");
      out.write("\t\t        <!-- 分割grid和科室组套 -->\r\n");
      out.write("\t\t        <div class=\"mini-splitter\" style=\"width:100%;height:100%;\" allowResize=\"false\" handlerSize=\"-1\" borderStyle=\"border:0\">\r\n");
      out.write("\t\t\t\t    <div size=\"70%\" showCollapseButton=\"false\">\r\n");
      out.write("\t\t\t\t        <div id=\"grid\" class=\"mini-datagrid\" style=\"width:100%;height:100%;\" showPager=\"false\" borderStyle=\"border:0;\" \r\n");
      out.write("\t\t\t        \t\tallowCellEdit=\"true\" allowCellSelect=\"true\" cellEditAction=\"celldblclick\" multiSelect=\"true\" \r\n");
      out.write("\t\t\t        \t\toncellbeginedit=\"oncellbeginedit\" oncellendedit=\"oncellendedit\" allowCellWrap=\"true\">\r\n");
      out.write("\t\t\t\t\t\t    <div property=\"columns\">\r\n");
      out.write("\t\t\t\t\t\t        <div type=\"indexcolumn\"></div>                \r\n");
      out.write("\t\t\t\t\t\t        <div field=\"itemNo\" name=\"itemNo\" width=\"120\" headerAlign=\"center\" align=\"center\">编码\r\n");
      out.write("\t\t\t\t\t\t        \t<div property=\"editor\" class=\"mini-autocomplete\" allowInput=\"true\" showPopup=\"true\"\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tpopupWidth=\"700\" textField=\"itemNo\" valueField=\"itemId\" onvaluechanged=\"onItemValueChanged\"\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\turl=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/pharmacy/common/comDrug/getByDeptId.do\">\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t<div property=\"columns\">\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t<div header=\"编码\" field=\"itemNo\" headerAlign=\"center\" align=\"center\"></div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t<div header=\"名称\" field=\"itemName\" width=\"200px\" headerAlign=\"center\" align=\"center\"></div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t<div header=\"拼音码\" field=\"spellCode\" headerAlign=\"center\" align=\"center\"></div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t<div header=\"五笔码\" field=\"fivestrokeCode\" headerAlign=\"center\" align=\"center\"></div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t<div header=\"国际编码\" field=\"nationCode\" headerAlign=\"center\" align=\"center\"></div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t<div header=\"规格\" field=\"specs\" headerAlign=\"center\" align=\"center\"></div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t<div header=\"单价\" field=\"price\" headerAlign=\"center\" align=\"center\"></div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t<div header=\"特诊价\" field=\"specialPrice\" headerAlign=\"center\" align=\"center\"></div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t<div header=\"单位\" field=\"unit\" headerAlign=\"center\" align=\"center\"></div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t<div header=\"排序号\" field=\"sortNo\" headerAlign=\"center\" align=\"center\"></div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t<div header=\"是否开立不显示\" field=\"showFlag\" headerAlign=\"center\" align=\"center\"></div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t        </div>    \r\n");
      out.write("\t\t\t\t\t\t        <div field=\"itemName\" width=\"150\" headerAlign=\"center\" align=\"center\">名称</div>    \r\n");
      out.write("\t\t\t\t\t\t        <div field=\"\" width=\"30\" headerAlign=\"center\" align=\"center\">.</div>    \r\n");
      out.write("\t\t\t\t\t\t        <div field=\"specs\" width=\"120\" headerAlign=\"center\" align=\"center\">规格</div>    \r\n");
      out.write("\t\t\t\t\t\t        <div field=\"price\" width=\"100\" headerAlign=\"center\" align=\"center\">单价</div>    \r\n");
      out.write("\t\t\t\t\t\t        <div field=\"showQty\" width=\"70\" headerAlign=\"center\" align=\"center\">数量\r\n");
      out.write("\t\t\t\t\t\t        \t<input property=\"editor\" class=\"mini-textbox\"/>\r\n");
      out.write("\t\t\t\t\t\t        </div>    \r\n");
      out.write("\t\t\t\t\t\t        <div field=\"showUnit\" width=\"70\" headerAlign=\"center\" align=\"center\">单位</div>    \r\n");
      out.write("\t\t\t\t\t\t        <div field=\"cost\" width=\"120\" headerAlign=\"center\" align=\"center\">金额</div>    \r\n");
      out.write("\t\t\t\t\t\t        <div field=\"executeDeptId\" width=\"120\" headerAlign=\"center\" align=\"center\" type=\"comboboxcolumn\">执行科室\r\n");
      out.write("\t\t\t\t\t\t        \t<input property=\"editor\" class=\"mini-combobox\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysOrg/getKVs.do\" textField=\"deptName\"/>\r\n");
      out.write("\t\t\t\t\t\t        </div>    \r\n");
      out.write("\t\t\t\t\t\t        <div field=\"\" width=\"100\" headerAlign=\"center\" align=\"center\">标识</div>    \r\n");
      out.write("\t\t\t\t\t\t    </div>\r\n");
      out.write("\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t    </div>\r\n");
      out.write("\t\t\t\t    <div showCollapseButton=\"false\">\r\n");
      out.write("\t\t\t\t        <!-- 科室套餐 -->\r\n");
      out.write("\t\t\t\t        <div class=\"mini-fit\">\r\n");
      out.write("\t\t\t\t        \t<div class=\"mini-tabs\" activeIndex=\"0\" style=\"width:100%;height:100%;\">\r\n");
      out.write("\t\t\t\t\t\t\t    <div title=\"科室套餐\" style=\"border-left:0;border-right:0;\">\r\n");
      out.write("\t\t\t\t\t\t\t        <div class=\"mini-fit\">\r\n");
      out.write("\t\t\t\t\t\t\t\t        <ul id=\"deptTree\" class=\"mini-tree\" style=\"width:100%;height:100%;padding:5px;\" resultAsTree=\"false\" expandOnLoad=\"true\"\r\n");
      out.write("\t\t\t\t\t\t\t\t        \turl=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/maintenance/expGroup/initDeptGroup.do\"\r\n");
      out.write("\t\t\t\t\t\t\t\t        \tonnodedblclick=\"tvDeptGroupNodeMouseDoubleClick\">        \r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t</ul>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t\t    </div>\r\n");
      out.write("\t\t\t\t\t\t\t    <div title=\"常用项目\" style=\"border-left:0;border-right:0;\">\r\n");
      out.write("\t\t\t\t\t\t\t        <div class=\"mini-toolbar\" style=\"border-bottom:1px solid #c5c5c5;border-left:0;border-right:0;\">\r\n");
      out.write("\t\t\t\t\t\t\t\t\t   <span class=\"blue-font\">过滤：</span>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t    <input class=\"mini-textbox\" onvaluechanged=\"queryDeptItem\"/>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t    <a class=\"mini-button\" onclick=\"wBtnQueryClick\">刷新</a> \r\n");
      out.write("\t\t\t\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t\t        <div class=\"mini-fit\">\r\n");
      out.write("\t\t\t\t\t\t\t        \t<div id=\"deptItemGrid\" class=\"mini-datagrid\" style=\"width:100%;height:100%;\" borderStyle=\"border:0\" showPager=\"false\"\r\n");
      out.write("\t\t\t\t\t\t\t        \t\turl=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/basedata/datamanager/deptItem/getCurrentDeptItem.do\"\r\n");
      out.write("\t\t\t\t\t\t\t        \t\tonrowdblclick=\"wFpSpread1CellDoubleClick\">\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t    <div property=\"columns\">\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t        <div type=\"indexcolumn\"></div>                \r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t        <div field=\"sourceItemName\" headerAlign=\"center\" align=\"center\">名称</div>    \r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t        <div field=\"sourceItemNo\" headerAlign=\"center\" align=\"center\">编码</div>    \r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t    </div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t\t        </div>\r\n");
      out.write("\t\t\t\t\t\t\t    </div>\r\n");
      out.write("\t\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t        </div>\r\n");
      out.write("\t\t\t\t    </div>        \r\n");
      out.write("\t\t\t\t</div>\r\n");
      out.write("\t\t    </div>        \r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t</div>\r\n");
      out.write("\t\r\n");
      out.write("\t<script type=\"text/javascript\">\r\n");
      out.write("\t\t mini.parse();\r\n");
      out.write("\t\t var form = new mini.Form(\"#form\"); \r\n");
      out.write("\t\t var tvOpsApplyTree = mini.get(\"tvOpsApplyTree\");\r\n");
      out.write("\t\t var tvOpHisTree = mini.get(\"tvOpHisTree\");\r\n");
      out.write("\t\t var deptTree = mini.get(\"deptTree\");\r\n");
      out.write("\t\t var patientTree = mini.get(\"patientTree\");\r\n");
      out.write("\t\t var minApplyTime = mini.get(\"minApplyTime\");\r\n");
      out.write("\t\t var cmbRecipeDoct = mini.get(\"cmbRecipeDoct\");\r\n");
      out.write("\t\t var cmbRecipeDept = mini.get(\"cmbRecipeDept\");\r\n");
      out.write("\t\t var wLabel3 = mini.get(\"wLabel3\");\r\n");
      out.write("\t\t var patientGrid = mini.get(\"patientGrid\");\r\n");
      out.write("\t\t var txtAlertCost = mini.get(\"txtAlertCost\");\r\n");
      out.write("\t\t var txtFreeCost = mini.get(\"txtFreeCost\");\r\n");
      out.write("\t\t var grid = mini.get(\"grid\");\r\n");
      out.write("\t\t var deptItemGrid = mini.get(\"deptItemGrid\");\r\n");
      out.write("\t\t deptItemGrid.load();\r\n");
      out.write("\t</script>\r\n");
      out.write("</body>\r\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }

  private boolean _jspx_meth_c_005fset_005f0(javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f0 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f0_reused = false;
    try {
      _jspx_th_c_005fset_005f0.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f0.setParent(null);
      // /commons/include/get.jsp(5,0) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f0.setVar("ctx");
      // /commons/include/get.jsp(5,0) name = value type = javax.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f0.setValue(new org.apache.jasper.el.JspValueExpression("/commons/include/get.jsp(5,0) '${pageContext.request.contextPath}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${pageContext.request.contextPath}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f0 = _jspx_th_c_005fset_005f0.doStartTag();
      if (_jspx_th_c_005fset_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f0);
      _jspx_th_c_005fset_005f0_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f0_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fset_005f1(javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f1 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f1_reused = false;
    try {
      _jspx_th_c_005fset_005f1.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f1.setParent(null);
      // /commons/include/get.jsp(6,0) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f1.setVar("emr");
      // /commons/include/get.jsp(6,0) name = value type = javax.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f1.setValue(new org.apache.jasper.el.JspValueExpression("/commons/include/get.jsp(6,0) '${emrContextPath}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${emrContextPath}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f1 = _jspx_th_c_005fset_005f1.doStartTag();
      if (_jspx_th_c_005fset_005f1.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f1);
      _jspx_th_c_005fset_005f1_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f1, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f1_reused);
    }
    return false;
  }
}
