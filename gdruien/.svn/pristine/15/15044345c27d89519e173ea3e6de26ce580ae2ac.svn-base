/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/9.0.2
 * Generated at: 2018-05-14 01:25:17 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.WEB_002dINF.view.medical.outpatient;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class outOrderWorkstation_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.HashMap<java.lang.String,java.lang.Long>(6);
    _jspx_dependants.put("jar:file:/E:/workspace.hisnew/hisbase/WebContent/WEB-INF/lib/jstl-1.2.jar!/META-INF/fn.tld", Long.valueOf(1153356282000L));
    _jspx_dependants.put("jar:file:/E:/workspace.hisnew/hisbase/WebContent/WEB-INF/lib/jstl-1.2.jar!/META-INF/c.tld", Long.valueOf(1153356282000L));
    _jspx_dependants.put("/WEB-INF/lib/jstl-1.2.jar", Long.valueOf(1525761782870L));
    _jspx_dependants.put("/commons/include/html_doctype.html", Long.valueOf(1525761798654L));
    _jspx_dependants.put("/commons/include/get.jsp", Long.valueOf(1525827802831L));
    _jspx_dependants.put("jar:file:/E:/workspace.hisnew/hisbase/WebContent/WEB-INF/lib/jstl-1.2.jar!/META-INF/fmt.tld", Long.valueOf(1153356282000L));
  }

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.HashSet<>();
    _jspx_imports_packages.add("javax.servlet");
    _jspx_imports_packages.add("javax.servlet.http");
    _jspx_imports_packages.add("javax.servlet.jsp");
    _jspx_imports_classes = null;
  }

  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody;

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
    _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
  }

  public void _jspDestroy() {
    _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.release();
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
      throws java.io.IOException, javax.servlet.ServletException {

    final java.lang.String _jspx_method = request.getMethod();
    if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method) && !javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET POST or HEAD");
      return;
    }

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write('\n');
      out.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">");
      out.write("\n");
      out.write("<html>\n");
      out.write("<head>\n");
      out.write("<title>门诊工作站--患者列表</title>\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      if (_jspx_meth_c_005fset_005f0(_jspx_page_context))
        return;
      out.write('\r');
      out.write('\n');
      if (_jspx_meth_c_005fset_005f1(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\r\n");
      out.write("<meta http-equiv=\"X-UA-Compatible\" content=\"IE=EmulateIE8\" />\r\n");
      out.write("\r\n");
      out.write("<script src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/scripts/boot.js\" type=\"text/javascript\"></script>\r\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/commons/dynamic.jsp\"></script>\r\n");
      out.write("\r\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/scripts/core.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/scripts/plugins/template/jquery.tmpl.min.js\"></script>\r\n");
      out.write("\r\n");
      out.write("<link href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/styles/default/css/web.css\" rel=\"stylesheet\" type=\"text/css\" />\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\n");
      out.write("<script src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/scripts/plugins/report/CreateControl.js\" type=\"text/javascript\"></script>\n");
      out.write("<style>\n");
      out.write("\t#tabsButtons .mini-menu-inner, #tabsButtons{\n");
      out.write("\t\theight: 22px;\n");
      out.write("\t\tmargin: -2px 0 0 0;\n");
      out.write("\t\tborder:0;\n");
      out.write("\t\tborder-bottom:0px solid #ccc;\n");
      out.write("\t\t\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t.mini-menu-border {\n");
      out.write("    \t\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t.mini-panel-border {\n");
      out.write("\t    border: 1px solid #ccc;\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t.header {\n");
      out.write("\t\tfont-size:12px;\n");
      out.write("\t\tfont-weight:bold;\n");
      out.write("\t\tmargin:0 ;\n");
      out.write("\t\tpadding: 3px 0 0 10px;\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t.mini-panel-body {\n");
      out.write("\t    padding: 0px;\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("    .mini-textbox {\n");
      out.write("\t\twidth:100px;\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t.blue {\n");
      out.write("        color:blue;\n");
      out.write("    }\n");
      out.write("\n");
      out.write("\t.orange {\n");
      out.write("        color: orange;\n");
      out.write("    }\n");
      out.write("    \n");
      out.write("</style>\n");
      out.write("<script type=\"text/javascript\">\t\n");
      out.write("\t\t\t\n");
      out.write("\t//键盘回车事件  ESC事件\n");
      out.write("\t$(document).keyup(function(event){\n");
      out.write("\t  \tif (event.keyCode == 27) {\n");
      out.write("\t  \t\twin1.hide();\n");
      out.write("\t  \t\twin2.hide();\n");
      out.write("\t  \t\twin.hide();\n");
      out.write("\t  \t}\n");
      out.write("\t  \t\n");
      out.write("\t  \tif(event.keyCode == 13) {\n");
      out.write("\t  \t\tgrid1dClick();\n");
      out.write("\t  \t}\n");
      out.write("\t  \t\n");
      out.write("\t  /* \t方向键(←)： VK_LEFT (37)\n");
      out.write("\t  \t方向键(↑)： VK_UP (38)\n");
      out.write("\t  \t方向键(→)： VK_RIGHT (39)\n");
      out.write("\t  \t方向键(↓)： VK_DOWN (40)  */\n");
      out.write("\t  \t\n");
      out.write("\t});\n");
      out.write("\t\n");
      out.write("\tvar autoCheck = 1;\n");
      out.write("\tvar method = \"added\";\n");
      out.write("\t// 上下文菜单\n");
      out.write("\tfunction onMenuOpen(e) {\n");
      out.write("\t\tvar menu = e.sender;\n");
      out.write("\t\te.htmlEvent.preventDefault();\n");
      out.write("\t\te.cancel = false;\n");
      out.write("\t\treturn;\n");
      out.write("\t\tvar row = grid.getSelected();\n");
      out.write("\t\tvar rowIndex = grid.indexOf(row);\n");
      out.write("\t\tif (!row || rowIndex == 0) {\n");
      out.write("\t\t\te.cancel = true;\n");
      out.write("\t\t\t// 阻止浏览器默认右键菜单\n");
      out.write("\t\t\te.htmlEvent.preventDefault();\n");
      out.write("\t\t\treturn;\n");
      out.write("\t\t}\n");
      out.write("\t}\n");
      out.write("\t\t\n");
      out.write("\t// 开立 （开立之后应该将状态改为进诊）\n");
      out.write("\tfunction grid1dClick(){\n");
      out.write("\t\tvar currentGrid = getGrid();\n");
      out.write("\t\tvar row = currentGrid.getSelected(); \n");
      out.write("\t\tif(!row) {\n");
      out.write("\t\t\treturn;\n");
      out.write("\t\t}\n");
      out.write("\t\tif(row.triageState == 'N' || !row.registerId) {\n");
      out.write("\t\t\ttop.mini.showTips({content: \"该患者是未取号患者\", state: \"default\", x: \"center\", y: \"center\",timeout: 5000 });\n");
      out.write("\t\t\treturn;\n");
      out.write("\t\t} else {\t\n");
      out.write("\t\t\tif(row.diagName == '') { \n");
      out.write("\t\t\t\tonMenuClick(1);\n");
      out.write("\t\t\t} else if (row.diagName != '') {\n");
      out.write("\t\t\t\tonMenuClick(0);\t\t\t\t\t\t\t\t\n");
      out.write("\t\t\t}\n");
      out.write("\t\t\t\n");
      out.write("\t\t\t/* $.ajax({\n");
      out.write("\t\t\t\ttype:\"post\",\n");
      out.write("\t\t\t\turl: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/outpatient/opExpRegister/getDoctName.do\",\n");
      out.write("\t\t\t\tdataType: \"json\",\n");
      out.write("\t\t\t\tdata: {employeeId: row.registerDoctId},\n");
      out.write("\t\t\t\tasync: false,\n");
      out.write("\t\t\t\tsuccess: function(data){\n");
      out.write("\t\t\t\t\ttop.mini.confirm(\"该患者的挂号医生为 ：\"+ data +\",是否继续看诊?\", '提示',function(r) {\n");
      out.write("\t\t\t\t\t\tif (r == \"ok\") { \t\t\t\t\t\n");
      out.write("\t\t\t\t\t\t\tif(row.diagName == '') { \n");
      out.write("\t\t\t\t\t\t\t\tonMenuClick(1);\n");
      out.write("\t\t\t\t\t\t\t} else if (row.diagName != '') {\n");
      out.write("\t\t\t\t\t\t\t\tonMenuClick(0);\t\t\t\t\t\t\t\t\n");
      out.write("\t\t\t\t\t\t\t}\n");
      out.write("\t\t\t\t\t\t}\n");
      out.write("\t\t\t\t\t});\t\n");
      out.write("\t\t\t\t}\n");
      out.write("\t\t\t}); */\n");
      out.write("\t\t}\t\t\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 跳转主选项卡\n");
      out.write("\tfunction onMenuClick(index) {\t\t\n");
      out.write("\t\tvar currentGrid = mini.get(\"grid\" + tabs.getActiveIndex());\n");
      out.write("\t\tvar row = currentGrid.getSelected(); \n");
      out.write("\t\tif(!row)return;\n");
      out.write("\t\trow = mini.copyTo(row || {}, {\n");
      out.write("\t\t\tregisterId: row.registerId,\n");
      out.write("\t\t\tpatientName: row.patientName\n");
      out.write("\t\t});\n");
      out.write("\t\tif (row) {\n");
      out.write("\t\t\tif(!row.registerId || row.registerId == \"0\") {\n");
      out.write("\t\t\t\ttop.mini.showTips({content: \"该患者是未取号患者,不允许叫号!!\", state: \"default\", x: \"center\", y: \"center\", timeout: 5000});\n");
      out.write("\t\t\t\treturn;\n");
      out.write("\t\t\t} else {\n");
      out.write("\t\t\t\ttop.showTab({\n");
      out.write("\t\t\t\t\tresName : row.patientName,\n");
      out.write("\t\t\t\t\tresId : \"OUTORDER_REGISTER_\" + row.registerId,\n");
      out.write("\t\t\t\t\turl : \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/outpatient/outOrder/workstationPatient.do?registerId=\" + row.registerId + \"&index=\" + index\n");
      out.write("\t\t\t\t});\n");
      out.write("\t\t\t}\n");
      out.write("\t\t}\n");
      out.write("\t}\n");
      out.write("\n");
      out.write("\t// 当前grid\n");
      out.write("\tfunction getGrid() {\n");
      out.write("\t\tvar grid = mini.get(\"grid\" + tabs.getActiveIndex());\n");
      out.write("\t\treturn grid;\n");
      out.write("\t}\n");
      out.write("\n");
      out.write("\t// 查询患者(待处理)\n");
      out.write("\tfunction onenter(e) {\n");
      out.write("\t\tvar grid = getGrid();\n");
      out.write("\t\tvar value = e.value; \n");
      out.write("\t\tif(value.startsWith(\"/\") || value.startsWith(\"+\")) {\n");
      out.write("\t\t\ttop.mini.alert(\"临时挂号未实现！\");\n");
      out.write("\t\t} else { // \n");
      out.write("\t\t\tvar regExp = \"^\\\\d*$\";\n");
      out.write("\t\t\tif (regExp.test(value)) { // 说明是病人号\n");
      out.write("\t\t\t\tvar data = {patientId: value};\t\n");
      out.write("\t\t\t} else { // 说明是患者姓名\n");
      out.write("\t\t\t\tvar data = {patientName: value};\n");
      out.write("\t\t\t};\n");
      out.write("\t\t}\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write(" \t// 查询患者\n");
      out.write("\tfunction query() {\n");
      out.write("\t\tvar grid = getGrid();\n");
      out.write("\t\tvar params = {\n");
      out.write("\t\t\tdailySerialId : mini.get(\"dailySerialId\").getValue(),\n");
      out.write("\t\t\tpatientName : mini.get(\"patientName\").getValue()\n");
      out.write("\t\t}\n");
      out.write("\t\n");
      out.write("\t\tgrid.load(params);\n");
      out.write("\t\tgrid.on(\"drawcell\", function (e) {\n");
      out.write("\t\t\tvar record = e.record,\n");
      out.write("\t        column = e.column,\n");
      out.write("\t        field = e.field,\n");
      out.write("\t        value = e.value;\n");
      out.write("            // 未取号患者显示为黄色背景\n");
      out.write("            if(record.triageState == \"N\") {\n");
      out.write("            \te.rowCls = \"orange\";\n");
      out.write("            } else if (record.registerId) {\n");
      out.write("            \tif(record.tag.currentNoon != \"1\") {\n");
      out.write("\t            \tif(record.seeNoonCode != record.tag.currentNoon) {\n");
      out.write("\t            \t\te.rowCls = \"blue\";\n");
      out.write("\t            \t}\n");
      out.write("            \t}\n");
      out.write("            }  \n");
      out.write("\t\t});\n");
      out.write("\t\tgrid.focus();\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 查找患者\n");
      out.write("\tfunction find() {\n");
      out.write("\t\tvar grid = getGrid();\n");
      out.write("\t\tvar url = \"\"; \n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 渲染表格\n");
      out.write("\tfunction ondrawcell(e) {\n");
      out.write("\t\tvar record = e.record, column = e.column.field, row = e.row;\n");
      out.write("\t\tif (column == \"firstVisitFlag\") {\n");
      out.write("\t\t\te.cellHtml = e.value == 1 ? (e.cellCss = \"color:green\" && \"是\"): \"否\";\n");
      out.write("\t\t} else if (column == \"diagName\") {\n");
      out.write("\t\t\te.cellHtml = e.value == null ? \"未录入主诊断\" : e.value;\n");
      out.write("\t\t} else if (column == \"seeNoonCode\") {\n");
      out.write("\t\t\te.cellHtml = {\"1\" : \"上午\",\"2\" : \"下午\",\"3\" : \"晚上\"}[e.value];\n");
      out.write("\t\t} else if (column == \"sexCode\") {\n");
      out.write("\t\t\te.cellHtml = e.value == 1 ? \"男\" : \"女\"\n");
      out.write("\t\t} else if (column == \"confirmFlag\") {\n");
      out.write("\t\t\te.cellHtml = e.value == 1 ? \"是\" : \"否\";\n");
      out.write("\t\t} else if (column == \"emergencyFlag\") {\n");
      out.write("\t\t\te.cellHtml = e.value == 1 ? \"是\" : \"否\";\n");
      out.write("\t\t} else if (column == \"patientPaytypeId\") {\n");
      out.write("\t\t\te.cellHtml = [ \"普通\", \"医保(新)\", \"公医\" ][e.value];\n");
      out.write("\t\t} else if(column == \"totCost\") {\n");
      out.write("\t\t\te.cellHtml = row.totCost + \"(\"+ row.tag.unpayCost +\"未缴)\";\n");
      out.write("\t\t}\n");
      out.write("\t\t\n");
      out.write("\t\tif (e.column.field == \"triageState\") {\n");
      out.write("\t\t\tif(e.value == \"T\") {\n");
      out.write("\t\t\t\te.cellHtml = \"分诊\";\n");
      out.write("\t\t\t} else if(e.value == \"N\") {\n");
      out.write("\t\t\t\te.cellHtml = \"未取号\";\n");
      out.write("\t\t\t} else if(e.value == \"I\") {\n");
      out.write("\t\t\t\te.cellHtml = \"叫号\";\n");
      out.write("\t\t\t} else if(e.value == \"O\") {\n");
      out.write("\t\t\t\te.cellHtml = \"诊出\";\n");
      out.write("\t\t\t} else if(e.value == \"D\") {\n");
      out.write("\t\t\t\te.cellHtml = \"过号\";\n");
      out.write("\t\t\t}\n");
      out.write("\t\t}\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 过号\n");
      out.write("\tfunction delay(e) {\n");
      out.write("\t\tvar row = getGrid().getSelected();\n");
      out.write("\t\tif(!row) {\n");
      out.write("\t\t\ttop.mini.showTips({content: \"请选中一个患者!!\", state: \"warning\", x: \"center\", y: \"center\", timeout: 5000});\n");
      out.write("\t\t\treturn ;\n");
      out.write("\t\t}\n");
      out.write("\t\tif(!row.registerId) {\n");
      out.write("\t\t\ttop.mini.showTips({content: \"该患者是未取号患者,不允许叫号!!\", state: \"default\", x: \"center\", y: \"center\", timeout: 5000});\n");
      out.write("\t\t\treturn ;\n");
      out.write("\t\t}\n");
      out.write("\t\tvar url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/outpatient/triageRecord/ignoreTriage.do\";\n");
      out.write("\t\t$.post(url, {registerId : row.registerId}, function(r) {\n");
      out.write("\t\t\tif(parseInt(r.state) == 1) {\n");
      out.write("\t\t\t\ttop.mini.showTips({content: r.message, state: \"success\", x: \"center\", y: \"center\", timeout: 5000 });\n");
      out.write("\t\t\t\tgetGrid().reload();\n");
      out.write("\t\t\t} else if(parseInt(r.state) == -1){\n");
      out.write("\t\t\t\ttop.mini.showTips({content: r.message, state: \"danger\", x: \"center\", y: \"center\", timeout: 5000});\n");
      out.write("\t\t\t}\n");
      out.write("\t\t});\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 叫号\n");
      out.write("\tfunction callTriage(e) {\n");
      out.write("\t\tvar row = getGrid().getSelected();\n");
      out.write("\t\tif(!row) {\n");
      out.write("\t\t\ttop.mini.showTips({content: \"请选中一个患者!!\", state: \"warning\", x: \"center\", y: \"center\", timeout: 5000});\n");
      out.write("\t\t\treturn ;\n");
      out.write("\t\t}\n");
      out.write("\t\tif(!row.registerId) {\n");
      out.write("\t\t\ttop.mini.showTips({ content: \"该患者是未取号患者,不允许叫号!!\", state: \"default\", x: \"center\", y: \"center\", timeout: 5000 });\n");
      out.write("\t\t\treturn ;\n");
      out.write("\t\t}\n");
      out.write("\t\t\n");
      out.write("\t\tvar url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/outpatient/triageCall/callTriage.do\";\n");
      out.write("\t\t$.post(url, {registerId : row.registerId}, function(r) {\n");
      out.write("\t\t\tif(parseInt(r.state) == 1) {\n");
      out.write("\t\t\t\ttop.mini.showTips({content: r.message, state: \"success\", x: \"center\", y: \"center\", timeout: 5000 });\n");
      out.write("\t\t\t\tgetGrid().reload();\n");
      out.write("\t\t\t\tplayNow(row.dailySerialId, r.roomId);\n");
      out.write("\t\t\t} else if(parseInt(r.state) == -1){\n");
      out.write("\t\t\t\ttop.mini.showTips({content: r.message, state: \"danger\", x: \"center\", y: \"center\", timeout: 5000});\n");
      out.write("\t\t\t}\n");
      out.write("\t\t});\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 弹出新预约窗口\n");
      out.write("\tfunction newAppointView(e) {\n");
      out.write("\t\tvar row = getGrid().getSelected();\n");
      out.write("\t\tif(!row){\n");
      out.write("\t\t\ttop.mini.showTips({content: \"请先选中一行记录！\", state: \"warning\", x: \"center\", y: \"center\", timeout: 5000});\n");
      out.write("\t\t\treturn;\n");
      out.write("\t\t}\n");
      out.write("\t\trow.registerDoctId = \"\";\n");
      out.write("\t\trow.registerDeptId = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${params.orgId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\";\n");
      out.write("\t\t\n");
      out.write("\t\tform.setData(row);\n");
      out.write("\t\twin.setTitle(\"新预约\");\n");
      out.write("\t\twin.show();\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 聚焦事件\n");
      out.write("\tfunction doctOnfocus(e) { // 根据科室查询所有排班， \n");
      out.write("\t\t$.ajax({\n");
      out.write("\t\t\turl: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/schedule/selectedRegDepartment.do\",\n");
      out.write("\t\t\tdata: {registerDeptId : registerDept.getValue()},\n");
      out.write("\t\t\tasync: false ,\n");
      out.write("\t\t\tsuccess: function(r) {\n");
      out.write("\t\t\t\tif(parseInt(r.state) == 1) {\n");
      out.write("\t\t\t\t\tregisterDoct.load(\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/schedule/selectedRegDepartment.do?registerDeptId=\" + registerDeptId + \"&doctFocus=\"+ true);\n");
      out.write("\t\t\t\t} else if(parseInt(r.state) == -1) {\n");
      out.write("\t\t\t\t\t\n");
      out.write("\t\t\t\t\ttop.mini.showTips({content: r.message, state: \"warning\", x: \"center\", y: \"center\", timeout: 5000});\n");
      out.write("\t\t\t\t} else {\n");
      out.write("\t\t\t\t\ttop.mini.error(r);\n");
      out.write("\t\t\t\t}\n");
      out.write("\t\t\t}\n");
      out.write("\t\t});\n");
      out.write("\t\t\n");
      out.write("\t\t\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 看诊日期聚焦事件\n");
      out.write("\tfunction timeFocus(e) {\n");
      out.write("\t\tvar registerDeptId = registerDept.getValue();\n");
      out.write("\t\tvar registerDoctId = registerDoct.getValue();\n");
      out.write("\t\tvar url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/schedule/selectedRegDepartment.do\";\n");
      out.write("\t\tvar data = {\n");
      out.write("\t\t\t\tregisterDeptId : registerDeptId\n");
      out.write("\t\t};\n");
      out.write("\t\tvar fn = function(r) {\n");
      out.write("\t\t\tif(parseInt(r.state) == 1) {\n");
      out.write("\t\t\t\tschedule.load(\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/schedule/selectedRegDepartment.do?registerDoctId=\"+registerDoctId+\"&registerDeptId=\" + registerDeptId + \"&seeTimeFocus=\"+ true);\n");
      out.write("\t\t\t} else if(parseInt(r.state) == -1) {\n");
      out.write("\t\t\t\ttop.mini.showTips({\n");
      out.write("\t\t\t\t\tcontent: r.message,    \n");
      out.write("\t\t\t\t    state: \"warning\",      \n");
      out.write("\t\t\t\t    x: \"center\",         \n");
      out.write("\t\t\t\t    y: \"center\",          \n");
      out.write("\t\t\t\t    timeout: 5000   \n");
      out.write("\t\t\t\t});\n");
      out.write("\t\t\t} else {\n");
      out.write("\t\t\t\ttop.mini.error(r);\n");
      out.write("\t\t\t}\n");
      out.write("\t\t}\n");
      out.write("\t\t$.post(url, data, fn);\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 排班值改变\n");
      out.write("\tfunction timeChanged(e) {\n");
      out.write("\t\tvar scheduleId = schedule.getValue();\n");
      out.write("\t\tvar url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/schedule/scheduleChanged.do\";\n");
      out.write("\t\tvar data = {\n");
      out.write("\t\t\t\tscheduleId : scheduleId\n");
      out.write("\t\t};\n");
      out.write("\t\t\n");
      out.write("\t\t$.post(url, data, function(r) {\n");
      out.write("\t\t\tif(parseInt(r.state) == 1) {\n");
      out.write("\t\t\t\tscheduleTime.load(\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/schedule/scheduleChanged.do?showFlag=true&scheduleId=\" + scheduleId);\n");
      out.write("\t\t\t} else if(parseInt(r.state) == -1) {\n");
      out.write("\t\t\t\ttop.mini.showTips({\n");
      out.write("\t\t\t\t\tcontent: r.message,    \n");
      out.write("\t\t\t\t    state: \"warning\",      \n");
      out.write("\t\t\t\t    x: \"center\",         \n");
      out.write("\t\t\t\t    y: \"center\",          \n");
      out.write("\t\t\t\t    timeout: 5000   \n");
      out.write("\t\t\t\t});\n");
      out.write("\t\t\t} else {\n");
      out.write("\t\t\t\ttop.mini.error(r);\t\n");
      out.write("\t\t\t}\n");
      out.write("\t\t});\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 关闭预约弹窗\n");
      out.write("\tfunction cancel() {\n");
      out.write("\t\twin.hide();\n");
      out.write("\t\twin1.hide();\n");
      out.write("\t\twin2.hide();\n");
      out.write("\t\twin3.hide();\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 创建新预约信息\n");
      out.write("\tfunction createNewAppoint(e) {\n");
      out.write("\t\tvar formData = form.getData();\n");
      out.write("\t\tvar row = getGrid().getSelected();\n");
      out.write("\t\tvar url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/appointment/addSeeAppoint.do\";\n");
      out.write("\t\tvar data = {\n");
      out.write("\t\t\tregisterId : formData.registerId,\n");
      out.write("\t\t\tdata : mini.encode(formData)\n");
      out.write("\t\t};\n");
      out.write("\t\t$.post(url, data, function(r) {\n");
      out.write("\t\t\tif(parseInt(r.state) == 1) {\n");
      out.write("\t\t\t\ttop.mini.showTips({\n");
      out.write("\t\t\t\t\tcontent: r.message,    \n");
      out.write("\t\t\t\t    state: \"success\",      \n");
      out.write("\t\t\t\t    x: \"center\",         \n");
      out.write("\t\t\t\t    y: \"center\",         \n");
      out.write("\t\t\t\t    timeout: 5000   \n");
      out.write("\t\t\t\t});\n");
      out.write("\t\t\t\twin.hide();\n");
      out.write("\t\t\t\t// 打印预约信息\n");
      out.write("\t\t\t\tprintBill(r.appointment);\n");
      out.write("\t\t\t} else if(parseInt(r.state) == -1) {\n");
      out.write("\t\t\t\ttop.mini.showTips({\n");
      out.write("\t\t\t\t\tcontent: r.message,    \n");
      out.write("\t\t\t\t    state: \"warning\",      \n");
      out.write("\t\t\t\t    x: \"center\",         \n");
      out.write("\t\t\t\t    y: \"center\",          \n");
      out.write("\t\t\t\t    timeout: 5000   \n");
      out.write("\t\t\t\t});\n");
      out.write("\t\t\t} else {\n");
      out.write("\t\t\t\ttop.mini.error(r,\"提示\");\n");
      out.write("\t\t\t}\n");
      out.write("\t\t});\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 格式时间\n");
      out.write("\tfunction formatDate(value,index){\n");
      out.write("\t\tif(index==1){\n");
      out.write("\t\t\tvar date = new Date(value).format(\"yyyy-MM-dd\");\n");
      out.write("\t\t\treturn date;\n");
      out.write("\t\t}\n");
      out.write("\t\tif(index==2){\n");
      out.write("\t\t\tvar date = new Date(value).format(\"hh:mm:ss\");\n");
      out.write("\t\t\treturn date;\n");
      out.write("\t\t}\n");
      out.write("\t\tif(index==3){\n");
      out.write("\t\t\tvar hour = new Date(value).format(\"hh\");\n");
      out.write("\t\t\tif(6<=hour && hour<11){\n");
      out.write("\t\t\t\treturn \"上午\"\n");
      out.write("\t\t\t}\n");
      out.write("\t\t\tif(11<=hour && hour<14){\n");
      out.write("\t\t\t\treturn \"中午\"\n");
      out.write("\t\t\t}\n");
      out.write("\t\t\tif(14<=hour && hour<17){\n");
      out.write("\t\t\t\treturn \"下午\"\n");
      out.write("\t\t\t}\n");
      out.write("\t\t}\n");
      out.write("\t\treturn null;\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 格式时间段\n");
      out.write("\tfunction timeSlot(beginTime,endTime){\n");
      out.write("\t\tvar begin = new Date(beginTime).format(\"hh:mm\");\n");
      out.write("\t\tvar end = new Date(endTime).format(\"hh:mm\");\n");
      out.write("\t\treturn begin+\"-\"+end;\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 取得科室或医生的KeyValue\n");
      out.write("\tfunction getKV(url){\n");
      out.write("\t\tvar array;\n");
      out.write("\t\tvar value;\n");
      out.write("\t\t$.ajax({\n");
      out.write("\t\t\ttype:\"post\",\n");
      out.write("\t\t\turl:url,\n");
      out.write("\t\t\tdataType:\"json\",\n");
      out.write("\t\t\tasync: false,\n");
      out.write("\t\t\tsuccess: function(data){\n");
      out.write("\t\t\t\tarray = data;\n");
      out.write("\t\t\t}\n");
      out.write("\t\t});\n");
      out.write("\t\treturn array;\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 通过可以去获取值\n");
      out.write("\tfunction getValue(array,key){\n");
      out.write("\t\tvar value;\n");
      out.write("\t\tfor(var i=0;i<array.length;i++){\n");
      out.write("\t\t\tif(array[i][\"id\"] == key ){\n");
      out.write("\t\t\t\tvalue = array[i][\"text\"];\n");
      out.write("\t\t\t}\n");
      out.write("\t\t}\n");
      out.write("\t\tif(value == null || value == \"\"){\n");
      out.write("\t\t\treturn \"\";\n");
      out.write("\t\t}\n");
      out.write("\t\tvalue = value.substring(value.indexOf(\".\")+1);\n");
      out.write("\t\treturn value;\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 打印预约单\n");
      out.write("\tfunction printBill(appointment){\n");
      out.write("\t\tReport.LoadFromURL(\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/report/template/printAppointment.grf?t=\"+new Date().getTime());//加载报表\n");
      out.write("\t\tReport.PrepareLoadData();\n");
      out.write("\t\tvar appointmentTime = formatDate(appointment.appointmentTime,2);\n");
      out.write("\t\tvar appointmentDate = formatDate(appointment.appointmentTime,1);\n");
      out.write("\t\tvar type = formatDate(appointment.appointmentTime,3);\n");
      out.write("\t\tReport.ParameterByName(\"patientId\").AsString = appointment.patientId==null?\"  \":appointment.patientId;\n");
      out.write("\t\tReport.ParameterByName(\"appointmentNo\").AsString = appointment.appointmentNo==null?\"  \":appointment.appointmentNo;\n");
      out.write("\t\tReport.ParameterByName(\"seeSerialId\").AsString = appointment.seeSerialId==null?\"\":appointment.seeSerialId;\n");
      out.write("\t\tReport.ParameterByName(\"patientId\").AsString = appointment.patientId==null?\"  \":appointment.patientId;\n");
      out.write("\t\tReport.ParameterByName(\"phone\").AsString = appointment.phone==null?\"  \":appointment.phone;\n");
      out.write("\t\tReport.ParameterByName(\"sex\").AsString = appointment.sexCode==1?\"男\":\"女\";\n");
      out.write("\t\tReport.ParameterByName(\"age\").AsString = appointment.age==null?\"  \":appointment.age;;\n");
      out.write("\t\tReport.ParameterByName(\"patientName\").AsString = appointment.patientName==null?\"  \":appointment.patientName;\n");
      out.write("\t\tReport.ParameterByName(\"appointmentTime\").AsString = appointmentTime==null?\"  \": appointmentTime;\n");
      out.write("\t\tReport.ParameterByName(\"appointmentDate\").AsString = appointmentDate==null?\"  \":appointmentDate;\n");
      out.write("\t\tReport.ParameterByName(\"type\").AsString = type==null?\"  \":type;\n");
      out.write("\t\tReport.ParameterByName(\"timeSlot\").AsString = timeSlot(appointment.seeBeginTime,appointment.seeEndTime);\n");
      out.write("\t\tReport.ParameterByName(\"operName\").AsString = appointment.operName==null?\"  \":appointment.operName;\n");
      out.write("\t\tReport.ParameterByName(\"createdTime\").AsString = appointment.createdTime==null?\"  \":appointment.createdTime;\n");
      out.write("\t\tvar doctUrl = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysUser/getKVs.do\";\n");
      out.write("\t\tvar deptUrl = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysOrg/getKVs.do\"\n");
      out.write("\t\tvar doctArray = getKV(doctUrl);\n");
      out.write("\t\tvar deptArray = getKV(deptUrl);\n");
      out.write("\t\tReport.ParameterByName(\"operName\").AsString = getValue(doctArray,appointment.operId);\n");
      out.write("\t\tReport.ParameterByName(\"registerDept\").AsString = getValue(deptArray,appointment.deptId);\n");
      out.write("\t\tReport.ParameterByName(\"registerDoct\").AsString =  getValue(doctArray,appointment.doctId);\n");
      out.write("\t\tReport.Print(true);\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 转诊弹窗\n");
      out.write("\tfunction showTurn(e) {\n");
      out.write("\t\tgrid4.load();\n");
      out.write("\t\twin1.setTitle(\"转诊\");\n");
      out.write("\t\twin1.show();\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 转诊\n");
      out.write("\tfunction transfer(e) {\n");
      out.write("\t\tvar rows = grid4.getSelecteds();\n");
      out.write("\t\tif(rows.length == 0) {\n");
      out.write("\t\t\ttop.mini.showTips({content: \"请选中至少一条记录！\", state: \"success\",  x: \"center\", y: \"center\", timeout: 5000});\n");
      out.write("\t\t\treturn;\n");
      out.write("\t\t}\n");
      out.write("\t\tvar transTreatList = [];\n");
      out.write("\t\tfor(var i = 0; i < rows.length; i++ ) {\n");
      out.write("\t\t\tvar transTreat = form1.getData();\n");
      out.write("\t\t\ttransTreat.registerId = rows[i].registerId;\n");
      out.write("\t\t\ttransTreat.patientName = rows[i].patientName;\n");
      out.write("\t\t\ttransTreat._state = \"added\";\n");
      out.write("\t\t\ttransTreatList.push(transTreat);\n");
      out.write("\t\t};\n");
      out.write("\t\t\n");
      out.write("\t\tvar transTreat = form1.getData();\n");
      out.write("\t\ttop.mini.confirm(\"请再次确认 转诊科室:\"+ mini.get(\"newDeptId\").text +\", 转诊医生:\"+ mini.get(\"newDoctId\").text +\" 是否正确？\", \"提示\", function(action) {\n");
      out.write("\t\t\tif(action == \"ok\") {\n");
      out.write("\t\t\t\t$.ajax({\n");
      out.write("\t\t\t\t\ttype: \"post\",\n");
      out.write("\t\t\t\t\turl: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/outpatient/opTransTreat/transTreat.do\",\n");
      out.write("\t\t\t\t\tdataType: \"json\",\n");
      out.write("\t\t\t\t\tdata: {transTreatList : mini.encode(transTreatList)}, \n");
      out.write("\t\t\t\t\tasync: false,\n");
      out.write("\t\t\t\t\tsuccess: function(r) {\n");
      out.write("\t\t\t\t\t\tif(parseInt(r.state) == 1) {\n");
      out.write("\t\t\t\t\t\t\ttop.mini.showTips({content: \"转诊成功\", state: \"success\", x: \"center\", y: \"center\", timeout: 5000 });\n");
      out.write("\t\t\t\t\t\t\twin1.hide();\n");
      out.write("\t\t\t\t\t\t} else if(parseInt(r.state) == -1){\n");
      out.write("\t\t\t\t\t\t\ttop.mini.showTips({content: r.message, state: \"warning\", x: \"center\", y: \"center\", timeout: 5000 });\n");
      out.write("\t\t\t\t\t\t} else {\n");
      out.write("\t\t\t\t\t\t\ttop.mini.showTips({content: r, state: \"warning\", x: \"center\", y: \"center\", timeout: 5000 });\n");
      out.write("\t\t\t\t\t\t}\n");
      out.write("\t\t\t\t\t}\n");
      out.write("\t\t\t\t});\n");
      out.write("\t\t\t\t\n");
      out.write("\t\t\t}\n");
      out.write("\t\t});\n");
      out.write("\t\t\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 转诊医生科室确定\n");
      out.write("\tfunction changeDept(e) {\n");
      out.write("\t\t$.ajax({\n");
      out.write("\t\t\turl: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysOrg/getByAccount.do\",\n");
      out.write("\t\t\tdata: {account: e.value},\n");
      out.write("\t\t\tasync: false,\n");
      out.write("\t\t\tsuccess: function (r){\n");
      out.write("\t\t\t\tif(r) {\n");
      out.write("\t\t\t\t\tmini.get(\"#newDeptId\").setValue(r.orgId);\n");
      out.write("\t\t\t\t}\n");
      out.write("\t\t\t}\n");
      out.write("\t\t});\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 转诊列表查询\n");
      out.write("\tfunction search(e) {\n");
      out.write("\t\tgrid4.load({\n");
      out.write("\t\t\tdailySerialId : e.sender.value\n");
      out.write("\t\t});\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 全选\n");
      out.write("\tfunction selectAll() {\n");
      out.write("\t\tgrid4.selectAll(true);\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 全不选\n");
      out.write("\tfunction cancelAll() {\n");
      out.write("\t\tgrid4.deselectAll(true);\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 刷新转诊列表\n");
      out.write("\tfunction refresh() {\n");
      out.write("\t\tgetGrid().reload();\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 清空\n");
      out.write("\tfunction clear() {\n");
      out.write("\t\tvar data = form1.getData();\n");
      out.write("\t\tdata.newDoctId = \"\";\n");
      out.write("\t\tdata.newDeptId = \"\";\n");
      out.write("\t\tdata.dailySerailId = \"\";\n");
      out.write("\t\tform1.setData(data);\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 自动刷新\n");
      out.write("\tfunction autoRefresh() {\n");
      out.write("\t  if(autoCheck == 1) {\n");
      out.write("\t\t  return ;  \n");
      out.write("\t  }\n");
      out.write("\t  query();\n");
      out.write("\t  setTimeout(autoRefresh, 2000);   \n");
      out.write("\t}  \n");
      out.write("\t\n");
      out.write("\t// 显示号源管理的窗口\n");
      out.write("\tfunction showSheduleEdit(sign) {\n");
      out.write("\t\tvar url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/schedule/getScheduleData0.do\";\n");
      out.write("\t\tvar data = null;\n");
      out.write("\t\tif(parseInt(sign) == -1) {\n");
      out.write("\t\t\tdata = {\n");
      out.write("\t\t\t\t\tpermisionJudge: true\n");
      out.write("\t\t\t}\n");
      out.write("\t\t}\n");
      out.write("\t\t$.post(url, data, function(r) {\n");
      out.write("\t\t\tif(parseInt(r.state) == 1) {\n");
      out.write("\t\t\t\tsignInput.setValue(sign);\n");
      out.write("\t\t\t\tform2.setData(r.schedule);\n");
      out.write("\t\t\t\tif(parseInt(sign) == 1) {\n");
      out.write("\t\t\t\t\twin2.setTitle(\"加号\");\n");
      out.write("\t\t\t\t} else if(parseInt(sign) == -1) {\n");
      out.write("\t\t\t\t\twin2.setTitle(\"减号\");\n");
      out.write("\t\t\t\t}\n");
      out.write("\t\t\t\twin2.show();\n");
      out.write("\t\t\t} else if(parseInt(r.state) == -1) {\n");
      out.write("\t\t\t\ttop.mini.showTips({content: r.message, state: \"danger\", x: \"center\", y: \"center\", timeout: 2000});\n");
      out.write("\t\t\t} else {\n");
      out.write("\t\t\t\ttop.mini.error(r);\t\t\t\t\n");
      out.write("\t\t\t}\n");
      out.write("\t\t});\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 加号\n");
      out.write("\tfunction updateSchedule() {\n");
      out.write("\t\tvar sign = signInput.getValue();\n");
      out.write("\t\tvar formData = form2.getData();\n");
      out.write("\t\tdebugger;\n");
      out.write("\t\tif(parseInt(sign) == 1) { // 加号\n");
      out.write("\t\t\ttop.mini.confirm(\"确定要加\" + formData.varietyNum + \"个号吗?\", \"信息提示\", function(action) {\n");
      out.write("\t\t\t\tif(action == \"ok\") {\n");
      out.write("\t\t\t\t\tvar url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/schedule/addSchedule.do\";\n");
      out.write("\t\t\t\t\tvar data = {\n");
      out.write("\t\t\t\t\t\tscheduleId : formData.scheduleId,\n");
      out.write("\t\t\t\t\t\taddCount : formData.varietyNum\n");
      out.write("\t\t\t\t\t};\n");
      out.write("\t\t\t\t\t$.post(url, data, function(r) {\n");
      out.write("\t\t\t\t\t\tif(parseInt(r.state) == 1) {\n");
      out.write("\t\t\t\t\t\t\ttop.mini.showTips({content: r.message, state: \"success\", x: \"center\", y: \"center\",  timeout: 2000 });\n");
      out.write("\t\t\t\t\t\t\twin2.hide();\n");
      out.write("\t\t\t\t\t\t} else if(parseInt(r.state) == -1) {\n");
      out.write("\t\t\t\t\t\t\ttop.mini.showTips({content: r.message, state: \"warning\", x: \"center\", y: \"center\", timeout: 2000 });\n");
      out.write("\t\t\t\t\t\t} else {\n");
      out.write("\t\t\t\t\t\t\ttop.mini.error(r);\n");
      out.write("\t\t\t\t\t\t}\n");
      out.write("\t\t\t\t\t});\n");
      out.write("\t\t\t\t}\n");
      out.write("\t\t\t});\n");
      out.write("\t\t\t\n");
      out.write("\t\t} else if(parseInt(sign) == -1) { \n");
      out.write("\t\t\ttop.mini.confirm(\"确定要减\" + formData.varietyNum + \"个号吗?\",\"信息提示\",function(action){\n");
      out.write("\t\t \n");
      out.write("\t\t\t\tif(action == \"ok\") {\n");
      out.write("\t\t\t\t\t$.ajax({\n");
      out.write("\t\t\t\t\t\turl: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/schedule/reduceSchdule.do\",\n");
      out.write("\t\t\t\t\t\tdata: {\n");
      out.write("\t\t\t\t\t\t\tscheduleId: formData.scheduleId,\n");
      out.write("\t\t\t\t\t\t\treduceCount: formData.varietyNum\n");
      out.write("\t\t\t\t\t\t},\n");
      out.write("\t\t\t\t\t\tasync: false ,\n");
      out.write("\t\t\t\t\t\tsuccess: function(r) {\n");
      out.write("\t\t\t\t\t\t\tif(parseInt(r.state) == 1) {\n");
      out.write("\t\t\t\t\t\t\t\ttop.mini.showTips({content: r.message, state: \"success\", x: \"center\", y: \"center\", timeout: 2000});\n");
      out.write("\t\t\t\t\t\t\t\twin2.hide();\n");
      out.write("\t\t\t\t\t\t\t} else if(parseInt(r.state) == -1) {\n");
      out.write("\t\t\t\t\t\t\t\ttop.mini.showTips({content: r.message, state: \"warning\", x: \"center\", y: \"center\",timeout: 2000});\n");
      out.write("\t\t\t\t\t\t\t} else {\n");
      out.write("\t\t\t\t\t\t\t\ttop.mini.error(r);\n");
      out.write("\t\t\t\t\t\t\t}\n");
      out.write("\t\t\t\t\t\t}\n");
      out.write("\t\t\t\t\t});\n");
      out.write("\t\t\t\t\t\n");
      out.write("\t\t\t\t}\n");
      out.write("\t\t\t});\n");
      out.write("\t\t}\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 诊出\n");
      out.write("\tfunction diagnosis() {\n");
      out.write("\t\tvar row = getGrid().getSelected();\n");
      out.write("\t\tvar url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/outpatient/opExpRegister/updateSeenInfo.do\";\n");
      out.write("\t\tvar fn = function(r) {\n");
      out.write("\t\t\tif (parseInt(r.state) == 1) {\n");
      out.write("\t\t\t\ttop.mini.showTips({content: \"诊出成功\", state: \"success\", x: \"center\", y: \"center\", timeout: 2000 });\n");
      out.write("\t\t\t\tquery();\n");
      out.write("\t\t\t} else if(parseInt(r.state) == -1) {\n");
      out.write("\t\t\t\ttop.mini.showTips({content: r.message, state: \"danger\", x: \"center\", y: \"center\", timeout: 5000});\n");
      out.write("\t\t\t} else {\n");
      out.write("\t\t\t\ttop.mini.error(r.message);\n");
      out.write("\t\t\t}\n");
      out.write("\t\t}\n");
      out.write("\n");
      out.write("\t\ttop.mini.confirm(\"是否诊出患者【\"+ row.patientName +\"】?\", '提示',function(r) {\n");
      out.write("\t\t\tif (r == \"ok\") { \t\t\t\t\t\n");
      out.write("\t\t\t\t$.post(url, {registerId : row.registerId, isSeen : true}, fn);\n");
      out.write("\t\t\t}\n");
      out.write("\t\t});\t\n");
      out.write("\t\t\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 取消看诊\n");
      out.write("\tfunction quitDiag() {\n");
      out.write("\t\tvar row = getGrid().getSelected();\n");
      out.write("\t\tvar url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/outpatient/opExpRegister/updateSeenInfo.do\";\n");
      out.write("\t\tvar data = {registerId : row.registerId,isSeen : false, fromOrder : false}; \n");
      out.write("\t\ttop.mini.confirm(\"是否取消看诊患者【\"+ row.patientName +\"】?\", '提示',function(r) {\n");
      out.write("\t\t\tif (r == \"ok\") { \t\t\t\t\t\n");
      out.write("\t\t\t\t$.post(url, data, function(r) {\n");
      out.write("\t\t\t\t\tif (parseInt(r.state) == 1) {\n");
      out.write("\t\t\t\t\t\ttop.mini.showTips({content: \"取消看诊成功！\", state: \"success\", x: \"center\", y: \"center\", timeout: 2000 });\n");
      out.write("\t\t\t\t\t\tquery();\n");
      out.write("\t\t\t\t\t} else if(parseInt(r.state) == -1) {\n");
      out.write("\t\t\t\t\t\ttop.mini.showTips({content: r.message,state: \"danger\", x: \"center\", y: \"center\", timeout: 5000 });\n");
      out.write("\t\t\t\t\t} else {\n");
      out.write("\t\t\t\t\t\ttop.mini.error(r.message);\n");
      out.write("\t\t\t\t\t}\n");
      out.write("\t\t\t\t});\n");
      out.write("\t\t\t}\n");
      out.write("\t\t});\t\t\t\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 页面加载完成事件\n");
      out.write("\tfunction onLoad(e) {\n");
      out.write("\t\t$(\".showTool\").show();\n");
      out.write("\t\tgetGrid().sortBy(\"dailySerialId\", \"asc\");\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 弹出个人预约单信息(补打预约单按钮触发)\n");
      out.write("\tfunction printAppoint() {\n");
      out.write("\t\tvar row = getGrid().getSelected();\n");
      out.write("\t\tif(!row){\n");
      out.write("\t\t\ttop.mini.alert(\"请先选中一行记录！\");\n");
      out.write("\t\t\treturn;\n");
      out.write("\t\t}\n");
      out.write("\t\tvar datagrid = mini.get(\"grid6\"); \n");
      out.write("\t\t$.ajax({\n");
      out.write("\t\t\ttype:\"post\",\n");
      out.write("\t\t\turl:\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/outpatient/opExpRegister/getPersonalAppointmentList.do\",\n");
      out.write("\t\t\tdata:{\n");
      out.write("\t\t\t\tpatientId:row.patientId\n");
      out.write("\t\t\t},\n");
      out.write("\t\t\tdataType:\"json\",\n");
      out.write("\t\t\tasync: false,\n");
      out.write("\t\t\tsuccess: function(data){\n");
      out.write("\t\t\t\tif(data.length==0){\n");
      out.write("\t\t\t\t\ttop.mini.alert(\"该患者无预约信息\")\n");
      out.write("\t\t\t\t}else{\n");
      out.write("\t\t\t\t\twin3.setTitle(\"诊间预约列表\");\n");
      out.write("\t\t\t\t\twin3.show();\n");
      out.write("\t\t\t\t\tdatagrid.setData(data);\n");
      out.write("\t\t\t\t}\n");
      out.write("\t\t\t}\n");
      out.write("\t\t});\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 确定补打预约单信息\n");
      out.write("\tfunction sureRePrint(){\n");
      out.write("\t\tvar row = mini.get(\"grid6\").getSelected();\n");
      out.write("\t\tif(!row){\n");
      out.write("\t\t\ttop.mini.alert(\"请先选中一行记录！\");\n");
      out.write("\t\t\treturn;\n");
      out.write("\t\t}\n");
      out.write("\t\tprintBill(row);\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 当日号查询\n");
      out.write("\tfunction dailyQuery(e) {\n");
      out.write("\t\tvar list = getGrid().getList();\n");
      out.write("\t\t$.ajax({\n");
      out.write("\t\t\ttype: \"post\",\n");
      out.write("\t\t\turl: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/outpatient/opExpRegister/retrievalRegister.do\",\n");
      out.write("\t\t\tdata: {type:\"dailySerialId\", key:e.sender.value},\n");
      out.write("\t\t\tdataType: \"json\",\n");
      out.write("\t\t\tasync: false,\n");
      out.write("\t\t\tsuccess: function(registerList){\n");
      out.write("\t\t\t\tif(registerList.length > 0) {\n");
      out.write("\t\t\t\t\tfor(var i = 0; i < registerList.length; i++ ) {\n");
      out.write("\t\t\t\t\t\tfor(var j = 0; j < list.length; j++) {\n");
      out.write("\t\t\t\t\t\t\tif(registerList[i].registerId == list[j].registerId) {\n");
      out.write("\t\t\t\t\t\t\t\ttop.mini.showTips({content: \"列表中已经存在该患者！！\", state: \"warning\", x: \"center\", y: \"center\", timeout: 5000});\n");
      out.write("\t\t\t\t\t\t\t\treturn ;\n");
      out.write("\t\t\t\t\t\t\t}\n");
      out.write("\t\t\t\t\t\t}\n");
      out.write("\t\t\t\t\t\tgetGrid().addRow(registerList[i]);\n");
      out.write("\t\t\t\t\t}\n");
      out.write("\t\t\t\t\tgetGrid().accept();\n");
      out.write("\t\t\t\t} else {\n");
      out.write("\t\t\t\t\ttop.mini.showTips({content: \"当前科室没有当日号为：\" + e.sender.value + \"的患者信息！\", state: \"warning\", x: \"center\", y: \"center\", timeout: 5000});\n");
      out.write("\t\t\t\t}\n");
      out.write("\t\t\t}\n");
      out.write("\t\t});\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 文本框聚焦事件\n");
      out.write("\tfunction onfocus() {\n");
      out.write("\t\tgetGrid().deselectAll();\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t// 根据病人唯一号或姓名\n");
      out.write("\tfunction patientQuery(e) {\n");
      out.write("\t\tvar list = getGrid().getList();\n");
      out.write("\t\t$.ajax({\n");
      out.write("\t\t\ttype: \"post\",\n");
      out.write("\t\t\turl: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/outpatient/opExpRegister/retrievalRegister.do\",\n");
      out.write("\t\t\tdata: {type:\"patientId\", key:e.sender.value},\n");
      out.write("\t\t\tdataType: \"json\",\n");
      out.write("\t\t\tasync: false,\n");
      out.write("\t\t\tsuccess: function(registerList){\n");
      out.write("\t\t\t\tif(registerList.length > 0) {\n");
      out.write("\t\t\t\t\tfor(var i = 0; i < registerList.length; i++ ) {\n");
      out.write("\t\t\t\t\t\tfor(var j = 0; j < list.length; j++) {\n");
      out.write("\t\t\t\t\t\t\tif(registerList[i].registerId == list[j].registerId) {\n");
      out.write("\t\t\t\t\t\t\t\ttop.mini.showTips({content: \"列表中已经存在该患者！！\", state: \"warning\", x: \"center\", y: \"center\", timeout: 5000});\n");
      out.write("\t\t\t\t\t\t\t\treturn ;\n");
      out.write("\t\t\t\t\t\t\t}\n");
      out.write("\t\t\t\t\t\t}\n");
      out.write("\t\t\t\t\t\tgetGrid().addRow(registerList[i]);\n");
      out.write("\t\t\t\t\t}\n");
      out.write("\t\t\t\t\tgetGrid().accept();\n");
      out.write("\t\t\t\t} else {\n");
      out.write("\t\t\t\t\ttop.mini.showTips({content: \"当前科室没有唯一号(姓名)为：\" + e.sender.value + \"的患者信息！\", state: \"warning\", x: \"center\", y: \"center\", timeout: 5000});\n");
      out.write("\t\t\t\t}\n");
      out.write("\t\t\t}\n");
      out.write("\t\t});\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\ttop.on(\"EVENT_ORG_CHANGED\", query);\n");
      out.write("\t$(window).unload(function() {\n");
      out.write("\t\ttop.un(\"EVENT_ORG_CHANGED\", query);\n");
      out.write("\t});\n");
      out.write("\t\n");
      out.write("\tvar dataTriageType = [{id: \"T\", text: \"分诊\"}, {id: \"N\", text: \"未取号\"}, {id: \"I\", text: \"叫号\"}, {id: \"O\", text: \"诊出\"},{id: \"D\", text: \"过号\"}];\n");
      out.write("\t\n");
      out.write("</script>\n");
      out.write("</head>\n");
      out.write("<body>\n");
      out.write("\t<audio style=\"display:none;\" id=\"music1\" onended=\"endPlay()\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/voice/yuyin/bell.wav\" controls></audio>\n");
      out.write("\t<table id=\"tabsButtons\" style=\"font-size:5px;\">\n");
      out.write("\t\t<tr>\n");
      out.write("\t\t\t<td>\n");
      out.write("\t\t\t\t<input class=\"mini-textbox\" id=\"dailySerialId\" onenter=\"dailyQuery\" onfocus=\"onfocus\" style=\"\" emptyText=\"请输入当日号\"/>\n");
      out.write("\t\t\t\t<input class=\"mini-textbox\" id=\"patientName\" onenter=\"patientQuery\" onfocus=\"onfocus\" emptyText=\"输入病人号或姓名\"/>\n");
      out.write("\t\t\t</td>\n");
      out.write("\t\t\t<td class=\"showTool\" style=\"height:15px;display:none;\">\n");
      out.write("\t\t\t\t<ul class=\"mini-menubar\" borderStyle=\"border-left:0;border-right:0;border-top:0;\">\n");
      out.write("\t\t\t\t\t<li onclick=\"query\" iconCls=\"fa fa-refresh\">刷新</li>\n");
      out.write("\t\t\t\t\t<li onclick=\"callTriage\" iconCls=\"fa fa-bullhorn\">叫号</li>\n");
      out.write("\t\t\t\t\t<li onclick=\"delay\" iconCls=\"fa fa-chevron-circle-right\">过号</li>\n");
      out.write("\t\t\t\t\t<li onclick=\"grid1dClick\" iconCls=\"fa fa-hand-pointer-o\">开立</li>\n");
      out.write("\t\t\t\t\t<li>\n");
      out.write("\t\t\t\t\t\t<span>诊间预约</span>\n");
      out.write("\t\t\t\t\t\t<ul>\n");
      out.write("\t\t\t\t\t\t\t<li onclick=\"newAppointView\" iconCls=\"fa fa-plus-square\">新预约</li>\n");
      out.write("\t\t\t\t\t\t\t<li onclick=\"printAppoint\" iconCls=\"fa fa-window-print\">补打预约单</li>\n");
      out.write("\t\t\t\t\t\t</ul>\n");
      out.write("\t\t\t\t\t</li>\n");
      out.write("\t\t\t\t\t<li>\n");
      out.write("\t\t\t\t\t\t<span>号源管理</span>\n");
      out.write("\t\t\t\t\t\t<ul>\n");
      out.write("\t\t\t\t\t\t\t<li onclick=\"showSheduleEdit(1)\" iconCls=\"fa fa-angle-up\">加号</li>\n");
      out.write("\t\t\t\t\t\t\t<li onclick=\"showSheduleEdit(-1)\" iconCls=\"fa fa-angle-down\">减号</li>\n");
      out.write("\t\t\t\t\t\t</ul>\n");
      out.write("\t\t\t\t\t</li>\n");
      out.write("\t\t\t\t\t\n");
      out.write("\t\t\t\t\t<li>\n");
      out.write("\t\t\t\t\t\t<span>诊出</span>\n");
      out.write("\t\t\t\t\t\t<ul>\n");
      out.write("\t\t\t\t\t\t\t<li onclick=\"diagnosis\" iconCls=\"fa fa-check\">诊出</li>\n");
      out.write("\t\t\t\t\t\t\t<li onclick=\"quitDiag\" iconCls=\"fa fa-window-close\">取消看诊</li>\n");
      out.write("\t\t\t\t\t\t</ul>\n");
      out.write("\t\t\t\t\t</li>\n");
      out.write("\t\t\t\t\t\n");
      out.write("\t\t\t\t\t<li onclick=\"showTurn\" iconCls=\"fa fa-hand-pointer-o\">转诊</li>\n");
      out.write("\t\t\t\t</ul>\n");
      out.write("\t\t\t</td>\n");
      out.write("\t\t</tr>\n");
      out.write("\t</table>\n");
      out.write("\t\n");
      out.write("\t<ul id=\"gridMenu\" class=\"mini-contextmenu\" style=\"display: none;\" onbeforeopen=\"onMenuOpen\">\n");
      out.write("\t\t<li name=\"add\" onclick=\"onMenuClick(0)\">门诊医嘱</li>\n");
      out.write("\t\t<li onclick=\"onMenuClick(1)\">诊断管理</li>\n");
      out.write("\t\t<li onclick=\"onMenuClick(2)\">检验报告查询</li>\n");
      out.write("\t\t<li onclick=\"onMenuClick(3)\">检查报告查询</li>\n");
      out.write("\t\t<li onclick=\"onMenuClick(4)\">门诊手术申请</li>\n");
      out.write("\t\t<li onclick=\"onMenuClick(5)\">门诊历史医嘱</li>\n");
      out.write("\t\t<li onclick=\"onMenuClick(6)\">过敏史</li>\n");
      out.write("\t\t<li onclick=\"onMenuClick(7)\">电子病例</li>\n");
      out.write("\t</ul>\n");
      out.write("\t\n");
      out.write("\t<ul id=\"gridMenu0\" class=\"mini-contextmenu\" style=\"display: none;\" onbeforeopen=\"onMenuOpen\">\n");
      out.write("\t\t<li onclick=\"\">none</li>\n");
      out.write("\t</ul>\n");
      out.write("\n");
      out.write("\t<div id=\"tabs\" class=\"mini-tabs\" onactivechanged=\"query()\" style=\"width:100%; height:100%;\" buttons=\"#tabsButtons\">\n");
      out.write("\t\t<div class=\"mini-fit\" title=\"待诊列表\">\n");
      out.write("\t\t\t<div id=\"grid0\" class=\"mini-datagrid\" showPager=\"false\" pageSize=\"15\" borderStyle=\"border:1;\" allowUnselect=\"false\"\n");
      out.write("\t\t\t\tstyle=\"width:100%;height:100%;\" contextMenu=\"#gridMenu\" multiSelect=\"false\" onload=\"onLoad\" sortMode=\"client\"\n");
      out.write("\t\t\t\turl=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/outpatient/opExpRegister/getPatientList.do?isSeen=false\" ondrawcell=\"ondrawcell\"\n");
      out.write("\t\t\t\tonrowdblclick=\"grid1dClick\">\n");
      out.write("\t\t\t\t<div property=\"columns\">\n");
      out.write("\t\t\t\t\t<div type=\"indexcolumn\"></div>\n");
      out.write("\t\t\t\t\t<!-- <div field=\"seeSerialId\" headerAlign=\"center\" align=\"center\" width=\"50\" allowSort=\"true\">序号</div> -->\n");
      out.write("\t\t\t\t\t<div field=\"seeNoonCode\" type=\"comboboxColumn\" align=\"center\" headerAlign=\"center\" width=\"45\" allowSort=\"true\">\n");
      out.write("\t\t\t\t\t\t午别<input property=\"editor\" class=\"mini-combobox\" showPopup=\"true\" onvaluechanged=\"onvaluechanged3\"\n");
      out.write("\t\t\t\t\t \t\t\t url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/basedata/datamanager/noon/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"dailySerialId\" align=\"center\" headerAlign=\"center\" width=\"55\" allowSort=\"true\">当日号</div>\n");
      out.write("\t\t\t\t\t<div field=\"patientId\" headerAlign=\"center\" align=\"center\" dateFormat=\"yyyy-MM-dd\" allowSort=\"true\">病人号</div>\n");
      out.write("\t\t\t\t\t<div field=\"patientName\" headerAlign=\"center\" align=\"center\" width=\"55\" allowSort=\"true\">姓名</div>\n");
      out.write("\t\t\t\t\t<div field=\"sexCode\" headerAlign=\"center\" align=\"center\" width=\"35\" allowSort=\"true\">性别</div>\n");
      out.write("\t\t\t\t\t<div field=\"age\" headerAlign=\"center\" align=\"center\" width=\"35\" allowSort=\"true\">年龄</div>\n");
      out.write("\t\t\t\t\t<div field=\"patientMedicaltypeId\" type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\" width=\"150\">结算类型\n");
      out.write("\t\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/common/medicalType/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"reglevelId\" type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\" width=\"55\">挂号级别\n");
      out.write("\t\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\"  url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/maintenance/register/regLevel/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"totCost\" headerAlign=\"center\" align=\"center\" width=\"130\" allowSort=\"true\">总金额</div>\n");
      out.write("\t\t\t\t\t<div field=\"registerDeptId\" type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\" width=\"120\">挂号科室\n");
      out.write("\t\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysOrg/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"registerDoctId\"  type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\">预约看诊医生\n");
      out.write("\t\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysUser/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"registerTime\" width=\"120\" headerAlign=\"center\" align=\"center\" dateFormat=\"yyyy-MM-dd HH:mm:ss\">预约看诊时间</div>\n");
      out.write("\t\t\t\t\t<div field=\"diagName\" headerAlign=\"center\" align=\"center\" emptyText=\"未录入主诊断\">诊断</div>\n");
      out.write("\t\t\t\t\t<div field=\"emergencyFlag\" headerAlign=\"center\" align=\"center\" width=\"30\">加急</div>\n");
      out.write("\t\t\t\t\t<div field=\"firstVisitFlag\" headerAlign=\"center\" align=\"center\" width=\"30\">首诊</div>\n");
      out.write("\t\t\t\t\t<div field=\"triageState\" headerAlign=\"center\" align=\"center\" width=\"40\">状态</div>\n");
      out.write("\t\t\t\t</div>\n");
      out.write("\t\t\t</div>\n");
      out.write("\t\t</div>\n");
      out.write("\n");
      out.write("\t\t<div title=\"已诊列表\" class=\"mini-fit\">\n");
      out.write("\t\t\t<div id=\"grid1\" class=\"mini-datagrid\" style=\"width:100%; height:100%\" showPager=\"false\" ondrawcell=\"ondrawcell\" multiSelect=\"false\"\n");
      out.write("\t\t\t\t url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/outpatient/opExpRegister/getPatientList.do?isSeen=true\" contextMenu=\"#gridMenu\" onrowdblclick=\"grid1dClick\">\n");
      out.write("\t\t\t\t<div property=\"columns\">\n");
      out.write("\t\t\t\t\t<div type=\"indexcolumn\"></div>\n");
      out.write("\t\t\t\t\t<div field=\"seeSerialId\" headerAlign=\"center\" align=\"center\" width=\"40\">序号</div>\n");
      out.write("\t\t\t\t\t<div field=\"seeNoonCode\" type=\"comboboxColumn\" align=\"center\" headerAlign=\"center\" width=\"45\" allowSort=\"true\">午别\n");
      out.write("\t\t\t\t\t\t午别<input property=\"editor\" class=\"mini-combobox\" showPopup=\"true\" onvaluechanged=\"onvaluechanged3\"\n");
      out.write("\t\t\t\t\t \t\t\t url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/basedata/datamanager/noon/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"dailySerialId\" headerAlign=\"center\" align=\"center\" width=\"45\"> 当日号</div>\n");
      out.write("\t\t\t\t\t<div field=\"patientId\" headerAlign=\"center\"\talign=\"center\" dateFormat=\"yyyy-MM-dd\">病人号</div>\n");
      out.write("\t\t\t\t\t<div field=\"patientName\" headerAlign=\"center\" align=\"center\"> 姓名</div>\n");
      out.write("\t\t\t\t\t<div field=\"sexCode\" headerAlign=\"center\" align=\"center\"> 性别</div>\n");
      out.write("\t\t\t\t\t<div field=\"age\" headerAlign=\"center\" align=\"center\"> 年龄</div>\n");
      out.write("\t\t\t\t\t<div field=\"patientMedicaltypeId\" type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\" width=\"150\">结算类型\n");
      out.write("\t\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/common/medicalType/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"reglevelId\" type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\">挂号级别\n");
      out.write("\t\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\"  url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/maintenance/register/regLevel/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"totCost\" headerAlign=\"center\" align=\"center\" width=\"150\"> 总金额</div>\n");
      out.write("\t\t\t\t\t\t<div field=\"registerDeptId\" type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\" width=\"150\"> 挂号科室\n");
      out.write("\t\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysOrg/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"seeDoctId\"  type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\"> 看诊医生\n");
      out.write("\t\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\"  url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysUser/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"seeTime\" headerAlign=\"center\" align=\"center\" dateFormat=\"yyyy-MM-dd HH:mm:ss\" width=\"130\"> 看诊时间</div>\n");
      out.write("\t\t\t\t\t<div field=\"diagName\" headerAlign=\"center\" align=\"center\">诊断</div>\n");
      out.write("\t\t\t\t\t<div field=\"emergencyFlag\" headerAlign=\"center\" align=\"center\" allowSort=\"false\">加急</div>\n");
      out.write("\t\t\t\t\t<div field=\"firstVisitFlag\" headerAlign=\"center\" align=\"center\">首诊</div>\n");
      out.write("\t\t\t\t</div>\n");
      out.write("\t\t\t</div>\n");
      out.write("\t\t</div>\n");
      out.write("\t\t\n");
      out.write("\t\t<div class=\"mini-fit\" title=\"预约列表\">\n");
      out.write("\t\t\t<div id=\"grid2\" class=\"mini-datagrid\" showPager=\"false\" style=\"width:100%; height:100%\" contextMenu=\"#gridMenu0\" \n");
      out.write("\t\t\t\t ondrawcell=\"ondrawcell\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/appointment/getAll.do\">\n");
      out.write("\t\t\t\t<div property=\"columns\">\n");
      out.write("\t\t\t\t\t<div type=\"indexcolumn\"></div>\n");
      out.write("\t\t\t\t\t<div field=\"appointmentNo\" headerAlign=\"center\" align=\"center\">预约号</div>\n");
      out.write("\t\t\t\t\t<div field=\"patientId\" headerAlign=\"center\" align=\"center\">病人号</div>\n");
      out.write("\t\t\t\t\t<div field=\"patientName\" headerAlign=\"center\" align=\"center\">姓名</div>\n");
      out.write("\t\t\t\t\t<div field=\"sexCode\" headerAlign=\"center\" align=\"center\">性别</div>\n");
      out.write("\t\t\t\t\t<div field=\"age\" headerAlign=\"center\" align=\"center\">年龄</div>\n");
      out.write("\t\t\t\t\t<div field=\"medicaltypeName\"  headerAlign=\"center\" align=\"center\">结算类型</div>\n");
      out.write("\t\t\t\t\t<div field=\"reglevelId\" type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\">挂号级别\n");
      out.write("\t\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\"  url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/maintenance/register/regLevel/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"deptId\" type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\">挂号科室\n");
      out.write("\t\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysOrg/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div> \n");
      out.write("\t\t\t\t\t<div field=\"doctId\" type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\">预约医生\n");
      out.write("\t\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysUser/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div> \n");
      out.write("\t\t\t\t\t<div field=\"appointmentTime\"  headerAlign=\"center\"  align=\"center\" dateFormat=\"yyyy-MM-dd HH:mm:ss\">预约时间</div>\n");
      out.write("\t\t\t\t\t<div field=\"confirmFlag\"  headerAlign=\"center\" align=\"center\">是否取号</div> \n");
      out.write("\t\t\t\t</div>\n");
      out.write("\t\t\t</div>\n");
      out.write("\t\t</div>\n");
      out.write("\t\t\n");
      out.write("\t\t<div title=\"转诊列表\">\n");
      out.write("\t\t\t<div id=\"grid3\" class=\"mini-datagrid\" style=\"width:100%; height:100%\"  onrowdblclick=\"grid1dClick\" multiSelect=\"false\" showPager=\"false\"\n");
      out.write("\t\t\t\tondrawcell=\"ondrawcell\"\turl=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/outpatient/opExpRegister/getPatientList.do?isSeen=true&isTransTreat=true\" contextMenu=\"#gridMenu\">\n");
      out.write("\t\t\t\t<div property=\"columns\">\n");
      out.write("\t\t\t\t\t<div type=\"indexcolumn\"></div>\n");
      out.write("\t\t\t\t\t<div field=\"seeNoonCode\" type=\"comboboxColumn\" align=\"center\" headerAlign=\"center\" width=\"45\" allowSort=\"true\">午别\n");
      out.write("\t\t\t\t\t\t午别<input property=\"editor\" class=\"mini-combobox\" showPopup=\"true\" onvaluechanged=\"onvaluechanged3\"\n");
      out.write("\t\t\t\t\t \t\t\t url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/basedata/datamanager/noon/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"dailySerialId\" align=\"center\" headerAlign=\"center\" align=\"center\">当日号</div>\n");
      out.write("\t\t\t\t\t<div field=\"patientId\" headerAlign=\"center\" dateFormat=\"yyyy-MM-dd\" align=\"center\">病人号</div>\n");
      out.write("\t\t\t\t\t<div field=\"patientName\" headerAlign=\"center\" align=\"center\">姓名</div>\n");
      out.write("\t\t\t\t\t<div field=\"sexCode\" type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\">性别\n");
      out.write("\t\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\" data=\"[{id:1, text:'男'}, {id:2, text:'女'}]\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"age\" headerAlign=\"center\" align=\"center\">年龄</div>\n");
      out.write("\t\t\t\t\t<div field=\"patientMedicaltypeId\" type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\">结算类型\n");
      out.write("\t\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/common/medicalType/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"reglevelId\" type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\" align=\"center\">挂号级别\n");
      out.write("\t\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\"  url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/maintenance/register/regLevel/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"totCost\" headerAlign=\"center\" align=\"center\">总金额</div>\n");
      out.write("\t\t\t\t\t<div field=\"seeDeptId\" type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\" align=\"center\">看诊科室\n");
      out.write("\t\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysOrg/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"seeDoctId\"  type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\" align=\"center\">看诊医生\n");
      out.write("\t\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\"  url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysUser/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"seeTime\" headerAlign=\"center\" dateFormat=\"yyyy-MM-dd HH:mm:ss\" align=\"center\">看诊时间</div>\n");
      out.write("\t\t\t\t\t<div field=\"diagName\" headerAlign=\"center\" align=\"center\">诊断</div>\n");
      out.write("\t\t\t\t\t<div field=\"emergencyFlag\" headerAlign=\"center\" type=\"checkboxColumn\" trueValue=\"1\" falseValue=\"0\" align=\"center\">加急</div>\n");
      out.write("\t\t\t\t\t<div field=\"firstVisitFlag\" headerAlign=\"center\"  type=\"checkboxColumn\" trueValue=\"1\" falseValue=\"0\" align=\"center\">首诊</div>\n");
      out.write("\t\t\t\t</div>\n");
      out.write("\t\t\t</div>\n");
      out.write("\t\t</div>\n");
      out.write("\t</div>\n");
      out.write("\t\n");
      out.write("\t<!-- 诊间预约窗口 -->\n");
      out.write("\t<div id=\"win1\" class=\"mini-window\" style=\"width:450px;height:420px;margin:0 ; padding:0;\">\n");
      out.write("\t\t <div class=\"mini-fit\">\n");
      out.write("\t       \t<div class=\"header\">\n");
      out.write("\t       \t\t<a class=\"mini-button\" iconCls=\"icon-user\" onclick=\"createNewAppoint\">预约</a>\n");
      out.write("\t       \t\t<a class=\"mini-button\" iconCls=\"fa fa-window-close\" onclick=\"cancel\">取消</a>\n");
      out.write("\t       \t</div>\n");
      out.write("\t       \t <fieldset style=\"border:0px solid #ccc;\">\n");
      out.write("\t\t        <div class=\"fieldset-body\">\n");
      out.write("\t\t       \t\t<div id=\"form1\">\n");
      out.write("\t\t\t           \t<input class=\"mini-hidden\" name=\"registerId\"/>\n");
      out.write("\t\t\t\t       \t<table>\n");
      out.write("\t\t\t\t       \t\t<tr>\n");
      out.write("\t\t\t\t       \t\t\t<td class=\"blue\">挂号科室： </td><td><input class=\"mini-combobox\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysOrg/getKVs.do\" allowInput=\"true\" name=\"registerDeptId\" width=\"125\" id=\"registerDeptId\" popupWidth=\"200\"/></td>\n");
      out.write("\t\t\t\t       \t\t\t<td class=\"blue\">挂号医生： </td><td><input class=\"mini-combobox\" name=\"registerDoctId\" allowInput=\"true\" onfocus=\"doctOnfocus\" id=\"registerDoctId\" width=\"125\"/></td>\n");
      out.write("\t\t\t\t       \t\t</tr>\t\n");
      out.write("\t\t\t\t       \t\t<tr>\n");
      out.write("\t\t\t\t       \t\t\t<td class=\"blue\">看诊日期： </td>\n");
      out.write("\t\t\t\t       \t\t\t<td>\n");
      out.write("\t\t\t\t       \t\t\t\t<input name=\"scheduleId\" class=\"mini-combobox\" nullValue=\"null\" showClearButton=\"false\" onfocus=\"timeFocus\" onvaluechanged=\"timeChanged\"\n");
      out.write("        \t\t\t\t\t\t\t\tformat=\"yyyy-MM-dd\" showTime=\"true\" width=\"125\" id=\"scheduleId\" allowInput=\"true\" popupWidth=\"300\" required=\"true\"/>\n");
      out.write("\t\t\t\t       \t\t\t</td>\n");
      out.write("\t\t\t\t       \t\t\t<td class=\"black\">看诊序号： </td><td><input class=\"mini-combobox\" width=\"125\" name=\"scheduleTimeId\" id=\"scheduleTimeId\"/></td>\n");
      out.write("\t\t\t\t       \t\t</tr>\t\n");
      out.write("\t\t\t\t       \t\t\n");
      out.write("\t\t\t\t       \t\t<tr>\n");
      out.write("\t\t\t\t       \t\t\t<td class=\"blue\">姓名：</td><td><input class=\"mini-textbox\" name=\"patientName\" width=\"125\" enabled=\"false\"/></td>\n");
      out.write("\t\t\t\t       \t\t\t<td class=\"blue\">性别：</td><td><input class=\"mini-combobox\" name=\"sexCode\" data=\"[{id:2, text:'女'},{id:1, text:'男'}]\" width=\"125\"  enabled=\"false\"/></td>\n");
      out.write("\t\t\t\t       \t\t</tr>\t\n");
      out.write("\t\t\t\t       \t\t<tr>\n");
      out.write("\t\t\t\t       \t\t\t<td class=\"blue\">年龄：</td><td><input class=\"mini-textbox\" name=\"age\" width=\"125\" enabled=\"false\"/></td>\n");
      out.write("\t\t\t\t       \t\t\t<td class=\"blue\">手 机 号： </td><td><input class=\"mini-textbox\" name=\"phone\" width=\"125\" enabled=\"false\"/></td>\n");
      out.write("\t\t\t\t       \t\t</tr>\n");
      out.write("\t\t\t\t       \t\t<tr>\n");
      out.write("\t\t\t\t       \t\t\t<td class=\"blue\">出生日期：</td><td><input class=\"mini-datepicker\" name=\"birthDate\" width=\"125\" enabled=\"false\"/></td>\n");
      out.write("\t\t\t\t       \t\t\t<td class=\"blue\">医疗证号：</td><td><input class=\"mini-textbox\" width=\"125\" enabled=\"false\"/></td>\n");
      out.write("\t\t\t\t       \t\t\t\n");
      out.write("\t\t\t\t       \t\t</tr>\t\n");
      out.write("\t\t\t\t       \t\t<tr>\n");
      out.write("\t\t\t\t       \t\t\t<td class=\"blue\">结算类别：</td><td><input class=\"mini-combobox\" name=\"patientMedicaltypeId\" allowInput=\"true\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/common/medicalType/getKVs.do\" width=\"125\" enabled=\"false\"/></td>\n");
      out.write("\t\t\t\t       \t\t\t<td class=\"blue\">结算种类：</td><td><input class=\"mini-combobox\" name=\"patientMedicaltypeKindId\" allowInput=\"true\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/common/medicalTypeKind/getKVs.do\" width=\"125\" enabled=\"false\"/></td>\n");
      out.write("\t\t\t\t       \t\t</tr>\t\n");
      out.write("\t\t\t\t       \t\t\n");
      out.write("\t\t\t\t       \t\t<tr>\n");
      out.write("\t\t\t\t       \t\t\t<td class=\"blue\">证件类型：</td>\n");
      out.write("\t\t\t\t       \t\t\t<td colSpan=\"3\"> \n");
      out.write("\t\t\t\t       \t\t\t\t<input id=\"idnetifierTypeId\" name=\"idnetifierTypeId\" class=\"mini-combobox\" width=\"320\" enabled=\"false\"\n");
      out.write("\t\t\t\t\t                   \temptyText=\"默认身份证\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysDict/getKVs.do?dictType=BD_IDENTIFIER_TYPE\"/>\n");
      out.write("\t\t\t\t\t            </td>\n");
      out.write("\t\t\t\t       \t\t</tr>\t\n");
      out.write("\t\t\t\t       \t\t<tr>\n");
      out.write("\t\t\t\t       \t\t\t<td class=\"blue\">证 件 号： </td><td colSpan=\"3\"><input class=\"mini-textbox\" name=\"idnetifierNo\" width=\"320\" enabled=\"false\"/></td>\n");
      out.write("\t\t\t\t       \t\t</tr>\n");
      out.write("\t\t\t\t       \t\t<tr>\n");
      out.write("\t\t\t\t       \t\t\t<td class=\"blue\">现 地 址： </td><td colSpan=\"3\"><input class=\"mini-textbox\" name=\"presentAddress\" width=\"320\" enabled=\"false\"/></td>\n");
      out.write("\t\t\t\t       \t\t</tr>\t\n");
      out.write("\t\t\t\t       \t</table>\n");
      out.write("\t\t       \t\t</div>\n");
      out.write("\t\t        </div>\n");
      out.write("\t\t    </fieldset>\n");
      out.write("\t     </div>\n");
      out.write("\t</div>\n");
      out.write("\t\n");
      out.write("\t<!-- 转诊 -->\n");
      out.write("\t<div id=\"win2\" class=\"mini-window\" style=\"width:60%;height:300px;margin:0; padding:0;\">\n");
      out.write("\t\t<div id=\"form2\">\n");
      out.write("\t\t\t<table width=\"100%\" border-collapse=\"collapse\" style=\"margin:0;padding:0;\">\n");
      out.write("\t\t\t\t<tr>\n");
      out.write("\t\t\t\t\t<td colspan=\"2\">　<i><strong>当日号：</strong></i><input class=\"mini-textbox\" name=\"dailySerailId\" onenter=\"search\" id=\"dailySerailId\"/></td>\n");
      out.write("\t\t\t\t\t<td colspan=\"2\" align=\"right\" style=\"font-weight:bold;\">\n");
      out.write("\t\t\t\t\t\t<a class=\"mini-button\" iconCls=\"\" onclick=\"selectAll\">全选</a>\n");
      out.write("\t\t\t\t\t\t<a class=\"mini-button\" iconCls=\"\" onclick=\"cancelAll\">全不选</a>\n");
      out.write("\t\t\t\t\t\t<a class=\"mini-button\" iconCls=\"fa fa-refresh\" onclick=\"refresh\">刷新</a>\n");
      out.write("\t\t\t\t\t\t<a class=\"mini-button\" iconCls=\"fa fa-save\" onclick=\"transfer\">保存</a>\n");
      out.write("\t\t\t\t\t\t<a class=\"mini-button\" iconCls=\"fa fa-window-close\" onclick=\"cancel\">取消</a>\n");
      out.write("\t\t\t\t\t\t<a class=\"mini-button\" onclick=\"clear\">清空</a> \n");
      out.write("\t\t\t\t\t</td> \n");
      out.write("\t\t\t\t</tr>\n");
      out.write("\t\t\t\t<tr><td colspan=\"4\" style=\"border-bottom:1px solid #ccc;\"></td></tr>\n");
      out.write("\t\t\t\t<tr>\n");
      out.write("\t\t\t\t\t<td><span class=\"blue\">转诊医生：</span><input class=\"mini-combobox\" name=\"newDoctId\" id=\"newDoctId\" onvaluechanged=\"changeDept\" allowInput=\"true\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysUser/getKVs.do\"/></td>\n");
      out.write("\t\t\t\t\t<td><span class=\"blue\">转诊科室：</span><input class=\"mini-combobox\" name=\"newDeptId\" readOnly=\"true\" id=\"newDeptId\" allowInput=\"true\" popupWidth=\"280\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysOrg/getKVs.do?orgType=C\"/></td>\n");
      out.write("\t\t\t\t\t<td><span class=\"blue\">看诊医生：</span><input class=\"mini-combobox\" name=\"oldDoctId\" readonly=\"true\" value=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${params.account }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysUser/getKVs.do\"/></td>\n");
      out.write("\t\t\t\t\t<td><span class=\"blue\">看诊科室：</span><input class=\"mini-combobox\" name=\"oldDeptId\" readonly=\"true\" value=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${params.orgId }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysOrg/getKVs.do\"/></td>\n");
      out.write("\t\t\t\t</tr>\n");
      out.write("\t\t\t</table>\t\t\n");
      out.write("\t\t</div>\t\n");
      out.write("\t\t<div class=\"mini-fit\">\n");
      out.write("\t\t\t<div id=\"grid5\" class=\"mini-datagrid\" showPager=\"false\" borderStyle=\"border:0px solid #ccc;border-top:1px solid #ccc;\" multiSelect=\"true\" ondrawcell=\"ondrawcell\" \n");
      out.write("\t\t\t\tstyle=\"width:100%;height:100%;\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/outpatient/opExpRegister/getPatientList.do?isSeen=true\">\n");
      out.write("\t\t\t\t<div property=\"columns\">\n");
      out.write("\t\t\t\t\t<div type=\"checkColumn\"></div>\n");
      out.write("\t\t\t\t\t<div field=\"seeSerialId\" headerAlign=\"center\" align=\"center\" width=\"80\">序号</div>\n");
      out.write("\t\t\t\t\t<div field=\"seeNoonCode\" type=\"comboboxColumn\" align=\"center\" headerAlign=\"center\" width=\"45\" allowSort=\"true\">午别\n");
      out.write("\t\t\t\t\t\t午别<input property=\"editor\" class=\"mini-combobox\" showPopup=\"true\" onvaluechanged=\"onvaluechanged3\"\n");
      out.write("\t\t\t\t\t \t\t\t url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/basedata/datamanager/noon/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"dailySerialId\" headerAlign=\"center\" align=\"center\" width=\"80\">当日号</div>\n");
      out.write("\t\t\t\t\t<div field=\"patientId\" headerAlign=\"center\" align=\"center\">病人ID</div>\n");
      out.write("\t\t\t\t\t<div field=\"patientName\" headerAlign=\"center\" align=\"center\" width=\"110\">姓名</div>\n");
      out.write("\t\t\t\t\t<div field=\"sexCode\" headerAlign=\"center\" align=\"center\" width=\"80\">性别</div>\n");
      out.write("\t\t\t\t\t<div field=\"age\" headerAlign=\"center\" align=\"center\" width=\"80\">年龄</div>\n");
      out.write("\t\t\t\t\t<div field=\"reglevelId\" type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\" width=\"120\">挂号级别\n");
      out.write("\t\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\"  url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/maintenance/register/regLevel/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"patientMedicaltypeId\" type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\"  width=\"120\">结算类型\n");
      out.write("\t\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/common/medicalType/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"seeDoctId\"  type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\" width=\"120\">看诊医生\n");
      out.write("\t\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\"  url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysUser/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t<div field=\"seeDeptId\" type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\" width=\"120\">看诊科室\n");
      out.write("\t\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysOrg/getKVs.do\"/>\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t</div>\n");
      out.write("\t\t\t</div>\n");
      out.write("\t\t</div>\n");
      out.write("\t</div>\n");
      out.write("\t\n");
      out.write("\t<!-- 号源管理 加号 win3 -->\n");
      out.write("\t<div id=\"win3\" class=\"mini-window\" style=\"width:500px;height:200px;\">\n");
      out.write("\t\t<div id=\"form3\">\n");
      out.write("\t\t\t<input class=\"mini-hidden\" id=\"sign\" value=\"1\"/>\n");
      out.write("\t\t\t<input class=\"mini-hidden\" name=\"scheduleId\" />\n");
      out.write("\t\t\t<table style=\"margin:5px;\">\n");
      out.write("\t\t\t\t<tr>\n");
      out.write("\t\t\t\t\t<td colspan=\"2\"><input class=\"mini-textbox\" name=\"tag.scheduleInfo\" readOnly=\"true\" borderStyle=\"border:0;\" inputStyle=\"color:blue;\" width=\"400\"/></td>\n");
      out.write("\t\t\t\t</tr>\n");
      out.write("\t\t\t\t<tr>\n");
      out.write("\t\t\t\t\t<td>科　　室：<input class=\"mini-combobox\" name=\"deptId\" readOnly=\"true\" enabled=\"false\" width=\"150\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysOrg/getKVs.do\"/></td>\n");
      out.write("\t\t\t\t\t<td>医　　生：<input class=\"mini-combobox\" name=\"doctId\" readOnly=\"true\" enabled=\"false\" width=\"150\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysUser/getKVs.do\"/></td>\n");
      out.write("\t\t\t\t</tr>\n");
      out.write("\t\t\t\t<tr>\n");
      out.write("\t\t\t\t\t<td>　总限额：<input class=\"mini-textbox\" name=\"regLmt\" readOnly=\"true\" enabled=\"false\" width=\"150\"/></td>\n");
      out.write("\t\t\t\t\t<td>已挂限额：<input class=\"mini-textbox\" name=\"reged\" readOnly=\"true\" enabled=\"false\" width=\"150\"/></td>\n");
      out.write("\t\t\t\t</tr>\n");
      out.write("\t\t\t\t<tr>\n");
      out.write("\t\t\t\t\t<td>当前可挂：<input class=\"mini-textbox\" name=\"tag.regQty\" readOnly=\"true\" enabled=\"false\" width=\"150\"/></td>\n");
      out.write("\t\t\t\t\t<td>数　　量：<input class=\"mini-textbox\" name=\"varietyNum\" id=\"varietyNum\" vtype=\"int\"  width=\"150\"　required=\"true\" onenter=\"updateSchedule\" emptyText=\"请输入数量\"/></td>\n");
      out.write("\t\t\t\t</tr>\n");
      out.write("\t\t\t\t<tr>\n");
      out.write("\t\t\t\t\t<td style=\"text-align:center;\"><a class=\"mini-button\" iconCls=\"fa fa-save\" onclick=\"updateSchedule\">保存</a></td>\n");
      out.write("\t\t\t\t\t<td style=\"text-align:center;\"><a class=\"mini-button\" iconCls=\"fa fa-window-close\" onclick=\"cancel\">取消</a></td>\n");
      out.write("\t\t\t\t</tr>\n");
      out.write("\t\t\t</table>\n");
      out.write("\t\t</div>\n");
      out.write("\t</div>\n");
      out.write("\t\n");
      out.write("\t<!-- 补打预约单win4 -->\n");
      out.write("\t <div id=\"win4\" class=\"mini-window\" style=\"width:70%;height:50%;margin:0; padding:0;\">\n");
      out.write("\t \t<div style=\"width:100%;\">\n");
      out.write("\t        <div class=\"mini-toolbar\" style=\"border-bottom:0;padding:0px;text-align:center;line-height:30px;\">\n");
      out.write("\t            <table style=\"width:100%;\">\n");
      out.write("\t                <tr>\n");
      out.write("\t                    <td style=\"width:100%;\">\n");
      out.write("\t                        <a class=\"mini-button\" iconCls=\"fa fa-check\" onclick=\"sureRePrint()\">确定</a>\n");
      out.write("\t                        <a class=\"mini-button\" iconCls=\"fa fa-window-close\" onclick=\"cancel()\">取消</a>     \n");
      out.write("\t                    </td>\n");
      out.write("\t                </tr>\n");
      out.write("\t            </table>           \n");
      out.write("\t        </div>\n");
      out.write("\t    </div>\n");
      out.write("\t \t<div id=\"grid6\" class=\"mini-datagrid\" borderStyle=\"border:0px solid #ccc;border-top:1px solid #ccc;\" multiSelect=\"false\" ondrawcell=\"ondrawcell\" \n");
      out.write("\t\t\t\tstyle=\"width:100%;height:90%;\" showPager=\"false\">\n");
      out.write("\t\t\t<div property=\"columns\">\n");
      out.write("\t\t\t\t<div type=\"indexcolumn\"></div>\n");
      out.write("\t\t\t\t<div field=\"seeSerialId\" headerAlign=\"center\" align=\"center\" width=\"80\">看诊序号</div>\n");
      out.write("\t\t\t\t<div field=\"appointmentTime\" headerAlign=\"center\" align=\"center\" width=\"125\">看诊时间</div>\n");
      out.write("\t\t\t\t<div field=\"patientName\" headerAlign=\"center\" align=\"center\" width=\"80\">姓名</div>\n");
      out.write("\t\t\t\t<div field=\"patientId\" headerAlign=\"center\" align=\"center\" width=\"100\">唯一号</div>\n");
      out.write("\t\t\t\t<div field=\"sexCode\" headerAlign=\"center\" align=\"center\" width=\"80\">性别</div>\n");
      out.write("\t\t\t\t<div field=\"age\" headerAlign=\"center\" align=\"center\" width=\"80\">年龄</div>\n");
      out.write("\t\t\t\t<div field=\"phone\" headerAlign=\"center\" align=\"center\" width=\"100\">联系电话</div>\n");
      out.write("\t\t\t\t<div field=\"doctId\"  type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\" width=\"130\">预约医生\n");
      out.write("\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\"  url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysUser/getKVs.do\"/>\n");
      out.write("\t\t\t\t</div>\n");
      out.write("\t\t\t\t<div field=\"deptId\" type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\" width=\"130\">预约科室\n");
      out.write("\t\t\t\t\t<input property=\"editor\" class=\"mini-combobox\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysOrg/getKVs.do\"/>\n");
      out.write("\t\t\t\t</div>\n");
      out.write("\t\t\t</div>\n");
      out.write("\t\t</div>\n");
      out.write("\t </div>\n");
      out.write("\t \n");
      out.write("\t\n");
      out.write("\t \n");
      out.write("\t<script type=\"text/javascript\">\n");
      out.write("\t\tmini.parse();\n");
      out.write("\t\tvar win = mini.get(\"win1\");\n");
      out.write("\t\tvar win1 = mini.get(\"win2\");\n");
      out.write("\t\tvar win2 = mini.get(\"win3\");\n");
      out.write("\t\tvar win3 = mini.get(\"win4\");\n");
      out.write("\t\tvar tabs = mini.get(\"tabs\");\n");
      out.write("\t\tvar grid4 = mini.get(\"grid5\");\n");
      out.write("\t\tvar form = new mini.Form(\"#form1\");\n");
      out.write("\t\tvar form1 = new mini.Form(\"#form2\");\n");
      out.write("\t\tvar form2 = new mini.Form(\"#form3\");\n");
      out.write("\t\tvar varietyNum = mini.get(\"#varietyNum\");\n");
      out.write("\t\tvar registerDoct = mini.get(\"#registerDoctId\");\n");
      out.write("\t\tvar registerDept = mini.get(\"#registerDeptId\");\n");
      out.write("\t\tvar schedule = mini.get(\"scheduleId\");\n");
      out.write("\t\tvar scheduleTime = mini.get(\"scheduleTimeId\");\n");
      out.write("\t\tvar signInput = mini.get(\"#sign\");\n");
      out.write("\t\tCreateReport(\"Report\");\n");
      out.write("\t\tquery();\n");
      out.write("\t\tautoRefresh();\n");
      out.write("\t\tvar projectName = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\";\n");
      out.write("\t\t\n");
      out.write("\t</script>\n");
      out.write("\t\n");
      out.write("\t<script src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/scripts/utils/call.js\"></script>\n");
      out.write("\t\n");
      out.write("</body>\n");
      out.write("\t\n");
      out.write("\n");
      out.write("</html>\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }

  private boolean _jspx_meth_c_005fset_005f0(javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f0 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f0_reused = false;
    try {
      _jspx_th_c_005fset_005f0.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f0.setParent(null);
      // /commons/include/get.jsp(5,0) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f0.setVar("ctx");
      // /commons/include/get.jsp(5,0) name = value type = javax.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f0.setValue(new org.apache.jasper.el.JspValueExpression("/commons/include/get.jsp(5,0) '${pageContext.request.contextPath}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${pageContext.request.contextPath}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f0 = _jspx_th_c_005fset_005f0.doStartTag();
      if (_jspx_th_c_005fset_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f0);
      _jspx_th_c_005fset_005f0_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f0_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fset_005f1(javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f1 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f1_reused = false;
    try {
      _jspx_th_c_005fset_005f1.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f1.setParent(null);
      // /commons/include/get.jsp(6,0) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f1.setVar("emr");
      // /commons/include/get.jsp(6,0) name = value type = javax.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f1.setValue(new org.apache.jasper.el.JspValueExpression("/commons/include/get.jsp(6,0) '${emrContextPath}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${emrContextPath}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f1 = _jspx_th_c_005fset_005f1.doStartTag();
      if (_jspx_th_c_005fset_005f1.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f1);
      _jspx_th_c_005fset_005f1_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f1, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f1_reused);
    }
    return false;
  }
}
