mini={components:{},uids:{},ux:{},doc:document,window:window,isReady:false,debug:false,createTime:new Date(),byClass:function(a,b){if(typeof b=="string"){b=__get(b)}return jQuery("."+a,b)[0]},getComponents:function(){var c=[];for(var a in mini.components){var b=mini.components[a];if(b.isControl){c.push(b)}}return c},get:function(a){if(!a){return null}if(mini.isControl(a)){return a}if(typeof a=="string"){if(a.charAt(0)=="#"){a=a.substr(1)}}if(typeof a=="string"){return mini.components[a]}else{var b=mini.uids[a.uid];if(b&&b.el==a){return b}}return null},getbyUID:function(a){return mini.uids[a]},findControls:function(f,g){if(!f){return[]}g=g||mini;var a=[],i=mini.uids;for(var b in i){var d=i[b],c=f.call(g,d);if(c===true||c===1){a.push(d);if(c===1){break}}}return a},getChildControls:function(c){var a=c.el?c.el:c,b=mini.findControls(function(d){if(!d.el||c==d){return false}if(__getById(a,d.el)&&d.within){return true}return false});return b},emptyFn:function(){},createNameControls:function(j,f){if(!j||!j.el){return}if(!f){f="_"}var i=j.el,b=mini.findControls(function(k){if(!k.el||!k.name){return false}if(__getById(i,k.el)){return true}return false});for(var d=0,c=b.length;d<c;d++){var a=b[d],g=f+a.name;if(f===true){g=a.name[0].toUpperCase()+a.name.substring(1,a.name.length)}j[g]=a}},getsByName:function(b,a){return mini.getsbyName(b,a)},getsbyName:function(g,f){var d=mini.isControl(f),c=f;if(f&&d){f=f.el}f=__get(f);f=f||document.body;var b=mini.findControls(function(i){if(!i.el){return false}if(i.name==g&&__getById(f,i.el)){return true}return false},this);if(d&&b.length==0&&c&&c.getbyName){var a=c.getbyName(g);if(a){b.push(a)}}return b},getbyName:function(b,a){return mini.getsbyName(b,a)[0]},getByName:function(b,a){return mini.getbyName(b,a)},getParams:function(f){if(!f){f=location.href}f=f.split("?")[1];var i={};if(f){var d=f.split("&");for(var a=0,g=d.length;a<g;a++){var c=d[a].split("=");try{i[c[0]]=decodeURIComponent(unescape(c[1]))}catch(b){}}}return i},reg:function(a){this.components[a.id]=a;this.uids[a.uid]=a},unreg:function(a){delete mini.components[a.id];delete mini.uids[a.uid]},classes:{},uiClasses:{},getClass:function(a){if(!a){return null}return this.classes[a.toLowerCase()]},getClassByUICls:function(a){return this.uiClasses[a.toLowerCase()]},idPre:"mini-",idIndex:1,newId:function(a){return(a||this.idPre)+this.idIndex++},copyTo:function(a,b){if(a&&b){for(var c in b){a[c]=b[c]}}return a},copyIf:function(a,b){if(a&&b){for(var c in b){if(mini.isNull(a[c])){a[c]=b[c]}}}return a},createDelegate:function(a,b){if(!a){return function(){}}return function(){return a.apply(b,arguments)}},isControl:function(a){return !!(a&&a.isControl)},isElement:function(a){return a&&a.appendChild},isDate:function(a){return !!(a&&a.getFullYear)},isArray:function(a){return !!(a&&!!a.unshift)},isNull:function(a){return a===null||a===undefined},isNumber:function(a){return !isNaN(a)&&typeof a=="number"},isEquals:function(b,a){if(b!==0&&a!==0){if((mini.isNull(b)||b=="")&&(mini.isNull(a)||a=="")){return true}}if(b&&a&&b.getFullYear&&a.getFullYear){return b.getTime()===a.getTime()}if(typeof b=="object"&&typeof a=="object"){return b===a}return String(b)===String(a)},forEach:function(b,d,a){var g=b.clone();for(var i=0,f=g.length;i<f;i++){var c=g[i];if(d.call(a,c,i,b)===false){break}}},sort:function(c,a,b){b=b||c;function d(p,i){var o=0,g=p.length,n,f;for(;o<g;o++){for(n=o;n<g;n++){var k=p[o],l=p[n],j=i(k,l);if(j>0){p.removeAt(n);p.insert(o,l)}}}return p}d(c,a)},elWarp:document.createElement("div")};if(typeof mini_useShims=="undefined"){mini_useShims=false}if(typeof mini_ajaxAsyncInvoke=="undefined"){mini_ajaxAsyncInvoke=true}mini.regClass=function(a,b){b=b.toLowerCase();if(!mini.classes[b]){mini.classes[b]=a;a.prototype.type=b}var c=a.prototype.uiCls;if(!mini.isNull(c)&&!mini.uiClasses[c]){mini.uiClasses[c]=a}};mini.extend=function(a,f,g){if(typeof f!="function"){return this}var d=a,c=d.prototype,i=f.prototype;if(d.superclass==i){return}d.superclass=i;d.superclass.constructor=f;for(var b in i){c[b]=i[b]}if(g){for(b in g){c[b]=g[b]}}return d};mini.namespace=function(b){if(typeof b!="string"){return}b=b.split(".");var c=window;for(var f=0,d=b.length;f<d;f++){var g=b[f],a=c[g];if(!a){a=c[g]={}}c=a}};__events=[];__initEvents=function(a,b){__events.push([a,b]);if(!mini._EventTimer){mini._EventTimer=setTimeout(function(){__bindEvents()},50)}};__bindEvents=function(){for(var b=0,a=__events.length;b<a;b++){var c=__events[b];c[0].call(c[1])}__events=[];mini._EventTimer=null};__parseFn=function(c){if(typeof c!="string"){return null}var b=c.split("."),a=null;for(var f=0,d=b.length;f<d;f++){var g=b[f];if(!a){a=window[g]}else{a=a[g]}if(!a){break}}return a};var cacheParts={};function createPathParts(c){var a=cacheParts[c];if(!a){a=c.split(".");for(var g=0,d=a.length;g<d;g++){var b=a[g],f=b.indexOf("[");if(f>-1){a[g]=b.substr(0,f);a.splice(++g,0,parseInt(b.substr(f+1)))}}cacheParts[c]=a}return a}function getValueByPath(b,c){if(!b||!c){return}if(c in b){return b[c]}var a=createPathParts(c);for(var f=0,d=a.length;f<d&&b;f++){b=b[a[f]]}return b}mini._getMap=function(f,a){if(!f||!a){return undefined}var g=a[f];if(g!==undefined){return g}var d=f.indexOf(".");if(d==-1&&f.indexOf("[")==-1){return a[f]}if(d==(f.length-1)){return a[f]}var c="obj."+f;try{g=getValueByPath(a,f)}catch(b){return undefined}return g};mini._setMap=function(n,g,a){if(!a){return}if(typeof n!="string"){return}var d=n.split(".");function f(p,s,u,o){var r=p[s];if(!r){r=p[s]=[]}for(var q=0;q<=u;q++){var t=r[q];if(!t){if(o===null||o===undefined){t=r[q]={}}else{t=r[q]=o}}}return p[s][u]}var l=null;for(var k=0,j=d.length;k<=j-1;k++){var n=d[k];if(k==j-1){if(n.indexOf("]")==-1){a[n]=g}else{var i=n.split("["),c=i[0],b=parseInt(i[1]);f(a,c,b,"");a[c][b]=g}break}if(n.indexOf("]")==-1){l=a[n];if(k<=j-2&&l==null){a[n]=l={}}a=l}else{i=n.split("["),c=i[0],b=parseInt(i[1]);a=f(a,c,b)}}return g};mini.getAndCreate=function(a){if(!a){return null}if(typeof a=="string"){return mini.components[a]}if(typeof a=="object"){if(mini.isControl(a)){return a}else{if(mini.isElement(a)){return mini.uids[a.uid]}else{return mini.create(a)}}}return null};mini.create=function(b){if(!b){return null}if(mini.get(b.id)===b){return b}var a=this.getClass(b.type);if(!a){return null}var c=new a();c.set(b);return c};Component=function(){this.listeners={};this.uid=mini.newId();this._id=this.uid;if(!this.id){this.id=this.uid}mini.reg(this)};Component.prototype={isControl:true,id:null,_hasId:false,_allowFire:true,destroy:function(){mini.unreg(this);this.fire("destroy");this.listeners={}},getId:function(){return this.id},setId:function(a){if(!a){throw new Error("id not null")}if(this._hasId){throw new Error("id just set only one")}mini.unreg(this);this.id=a;if(this.el){this.el.id=a}if(this._valueEl){this._valueEl.id=a+"$value"}if(this._textEl){this._textEl.id=a+"$text"}this._hasId=true;mini.reg(this)},findListener:function(f,a,b){f=f.toLowerCase();b=b||this;var d=this.listeners[f];if(d){for(var g=0,c=d.length;g<c;g++){var i=d[g];if(i[0]===a&&i[1]===b){return i}}}},un:function(f,b,c){f=f.toLowerCase();var d=this.listeners[f];if(d){if(b){c=c||this;var a=this.findListener(f,b,c);if(a){d.remove(a)}}else{delete this.listeners[f]}}return this},on:function(f,a,b){if(typeof a=="string"){var c=__parseFn(a);if(!c){var g=mini.newId("__str_");window[g]=a;a=new Function("e","var s = "+g+";var fn = __parseFn(s); if(fn) {fn.call(this,e)}else{eval(s);}")}else{a=c}}if(typeof a!="function"||!f){return false}f=f.toLowerCase();var d=this.listeners[f];if(!d){d=this.listeners[f]=[]}b=b||this;if(!this.findListener(f,a,b)){d.push([a,b])}return this},fire:function(g,f){if(this._allowFire==false){return}g=g.toLowerCase();var c=this.listeners[g];if(c){if(!f){f={}}if(f&&f!=this){f.source=f.sender=this;if(!f.type){f.type=g}}for(var a=0,d=c.length;a<d;a++){var b=c[a];if(b){b[0].apply(b[1],[f])}}}},set:function(j){if(typeof j=="string"){return this}var g=this._canLayout;this._canLayout=false;var f=j.renderTo||j.render;delete j.renderTo;delete j.render;for(var d in j){if(d.toLowerCase().indexOf("on")==0){if(this["_$"+d]){continue}var a=j[d];this.on(d.substring(2,d.length).toLowerCase(),a);delete j[d]}}for(d in j){var b=j[d],c="set"+d.charAt(0).toUpperCase()+d.substring(1,d.length),i=this[c];if(i){i.call(this,b)}else{this[d]=b}}if(f&&this.render){this.render(f)}this._canLayout=g;if(this.doLayout){this.doLayout()}return this}};Control=function(a){Control.superclass.constructor.apply(this,arguments);this._create();this.el.uid=this.uid;this._initEvents();if(this._clearBorder){this.el.style.borderWidth="0"}this.addCls(this.uiCls);this.setWidth(this.width);this.setHeight(this.height);this.el.style.display=this.visible?this._style_display:"none";if(a){mini.applyTo.call(this,a)}};mini.extend(Control,Component,{jsName:null,width:"",height:"",visible:true,readOnly:false,enabled:true,tooltip:"",_cls_readonly:"mini-readonly",_cls_disabled:"mini-disabled",name:"",_clearBorder:true,_style_display:"",_canUpdate:true,allowAnim:true,_cls_mask:"mini-mask-loading",loadingMsg:"加载中...",contextMenu:null,ajaxData:null,ajaxType:"",ajaxOptions:null,dataField:"",tabIndex:0});mini.copyTo(Control.prototype,{getAttrs:function(_){var E={},B=_.className;if(B){E.cls=B}if(_.value){E.value=_.value}mini._ParseString(_,E,["id","name","width","height","borderStyle","value","defaultValue","tabIndex","contextMenu","tooltip","ondestroy","data-options","ajaxData","ajaxType","dataField","ajaxOptions","data-placement"]);if(E["data-placement"]){this.tooltipPlacement=E["data-placement"]}mini._ParseBool(_,E,["visible","enabled","readOnly"]);if(_.readOnly&&_.readOnly!="false"){E.readOnly=true}var I=_.style.cssText;if(I){E.style=I}if(isIE9){var $=_.style.background;if($){if(!E.style){E.style=""}E.style+=";background:"+$}}if(this.style){if(E.style){E.style=this.style+";"+E.style}else{E.style=this.style}}if(this.borderStyle){if(E.borderStyle){E.borderStyle=this.borderStyle+";"+E.borderStyle}else{E.borderStyle=this.borderStyle}}if(typeof E.ajaxOptions=="string"){E.ajaxOptions=window.eval("("+E.ajaxOptions+")")}var J=mini._attrs;if(J){for(var A=0,C=J.length;A<C;A++){var F=J[A],G=F[0],D=F[1];if(!D){D="string"}if(D=="string"){mini._ParseString(_,E,[G])}else{if(D=="bool"){mini._ParseBool(_,E,[G])}else{if(D=="int"){mini._ParseInt(_,E,[G])}}}}}var H=E["data-options"];if(H){H=window.eval("("+H+")");if(H){mini.copyTo(E,H)}}return E},getTabIndex:function(){return this.tabIndex},setTabIndex:function(a){var b=this._textEl||this.el;b.tabIndex=a;this.tabIndex=a},getDataField:function(){return this.dataField},setDataField:function(a){this.dataField=a},getAjaxType:function(){return this.ajaxType},setAjaxType:function(a){this.ajaxType=a},getAjaxData:function(){return this.ajaxData},setAjaxData:function(a){this.ajaxData=a},getAjaxOptions:function(){return this.ajaxOptions},setAjaxOptions:function(a){this.ajaxOptions=a},getValue:function(){return this.value},setValue:function(a){this.value=a},getDefaultValue:function(){return this.defaultValue},setDefaultValue:function(a){this.defaultValue=a},getContextMenu:function(){return this.contextMenu},setContextMenu:function(a){var b=this.Ol1loO(a);if(!b){return}if(this.contextMenu!==b){this.contextMenu=b;this.contextMenu.owner=this;mini.on(this.el,"contextmenu",function(c){var d={popupEl:this.el,htmlEvent:c,cancel:false};this.contextMenu.fire("BeforeOpen",d);if(d.cancel==true){return}this.contextMenu.fire("opening",d);if(d.cancel==true){return}this.contextMenu.showAtPos(c.pageX,c.pageY);this.contextMenu.fire("Open",d);return false},this)}},Ol1loO:function(a){var b=a;if(typeof a=="string"){b=mini.get(a);if(!b){mini.parse(a);b=mini.get(a)}}else{if(mini.isArray(a)){b={type:"menu",items:a}}else{if(!mini.isControl(a)){b=mini.create(a)}}}return b},getLoadingMsg:function(){return this.loadingMsg},setLoadingMsg:function(a){this.loadingMsg=a},loading:function(a){this.mask(a||this.loadingMsg)},unmask:function(){mini.unmask(this.OO00());this.isLoading=false},mask:function(a){if(typeof a=="string"){a={html:a}}a=a||{};a.el=this.OO00();if(!a.cls){a.cls=this._cls_mask}mini.mask(a)},OO00:function(){return this.el},getAllowAnim:function(){return this.allowAnim},setAllowAnim:function(a){this.allowAnim=a},blur:function(){try{var a=this;a.el.blur()}catch(b){}},focus:function(){try{var a=this;a.el.focus()}catch(b){}},destroy:function(b){if(this.destroyed!==true){if(!mini._destroying){this._destroyChildren(b)}}if(this.el){var a=this.el;a.onclick=a.ondblclick=a.onmousedown=a.onmouseup=a.onmousemove=a.onmouseover=a.onmouseout=a.onkeydown=a.onkeyup=a.oncontextmenu=null;mini.clearEvent(a);if(b!==false){mini.removeNode(a)}}this._borderEl=this._contentEl=this._valueEl=this._textEl=this.lO10=null;this.el=null;mini.unreg(this);this.destroyed=true;this.fire("destroy")},_destroyChildren:function(b){if(this.el){var c=mini.getChildControls(this);for(var a=0,d=c.length;a<d;a++){var f=c[a];if(f.destroyed!==true){f.destroy(b)}}}},layoutChanged:function(){if(this.canLayout()==false){return}this.doLayout()},doLayout:function(){},canLayout:function(){if(!mini.enableLayout){return false}if(this._canLayout==false){return false}return this.isDisplay()},doUpdate:function(){},endUpdate:function(){this._canUpdate=true;this.doUpdate()},beginUpdate:function(){this._canUpdate=false},isDisplay:function(b){if(__win_display==false||!this.el){return false}var a=document.body,c=this.el;while(1){if(c==null||!c.style){return false}if(c&&c.style&&c.style.display=="none"){if(b){if(b(c)!==true){return false}}else{return false}}if(c==a){return true}c=c.parentNode}return true},hide:function(){this.setVisible(false)},show:function(){this.setVisible(true)},getVisible:function(){return this.visible},setVisible:function(a){this.visible=a;if(this.el){this.el.style.display=a?this._style_display:"none";this.doLayout()}},disable:function(){this.setEnabled(false)},enable:function(){this.setEnabled(true)},getEnabled:function(){return this.enabled},setEnabled:function(a){this.enabled=a;if(this.enabled){this.removeCls(this._cls_disabled)}else{this.addCls(this._cls_disabled)}this._doReadOnly()},isReadOnly:function(){if(this.readOnly||!this.enabled){return true}var a=this.getParent();if(a){return a.isReadOnly()}return false},getParent:function(a){var d=document,c=this.el.parentNode;while(c!=d&&c!=null){var b=mini.get(c);if(b){if(!mini.isControl(b)){return null}if(!a||b.uiCls==a){return b}}c=c.parentNode}return null},getReadOnly:function(){return this.readOnly},setReadOnly:function(a){this.readOnly=a;this._doReadOnly()},_doReadOnly:function(){if(this.readOnly){this.addCls(this._cls_readonly)}else{this.removeCls(this._cls_readonly)}},removeCls:function(a){__cls_rm(this.el,a)},addCls:function(a){__cls_add(this.el,a)},getCls:function(){return this.cls},setCls:function(a){this.addCls(a)},getStyle:function(){return this.style},setStyle:function(a){this.style=a;__css_set(this.el,a);if(this._clearBorder){this.el.style.borderWidth="0";this.el.style.padding="0px"}this.width=this.el.style.width;this.height=this.el.style.height;this._sizeChanged()},getBorderStyle:function(){return this.borderStyle},setBorderStyle:function(a){var b=this._borderEl||this.el;__css_set(b,a);this.doLayout()},getBox:function(){return __getBox(this.el)},getHeight:function(a){var b=a?jQuery(this.el).height():jQuery(this.el).outerHeight();if(a&&this._borderEl){var c=__border(this._borderEl);b=b-c.top-c.bottom}return b},setHeight:function(a){if(parseInt(a)==a){a+="px"}this.height=a;this.el.style.height=a;this._sizeChanged()},getWidth:function(d){var b=this.el,a=d?jQuery(b).width():jQuery(b).outerWidth();if(d&&this._borderEl){var c=__border(this._borderEl);a=a-c.left-c.right}return a},setWidth:function(a){if(parseInt(a)==a){a+="px"}this.width=a;this.el.style.width=a;this._sizeChanged()},_sizeChanged:function(){this.doLayout()},getTooltip:function(){return this.tooltip},setTooltip:function(a){this.tooltip=a;this.el.title=a;if(this.tooltipPlacement){jQuery(this.el).attr("data-placement",this.tooltipPlacement)}},getJsName:function(){return this.jsName},setJsName:function(a){this.jsName=a;window[a]=this},getEl:function(){return this.el},render:function(b,a){if(typeof b==="string"){if(b=="#body"){b=document.body}else{b=__get(b)}}if(!b){return}if(!a){a="append"}a=a.toLowerCase();if(a=="before"){jQuery(b).before(this.el)}else{if(a=="preend"){jQuery(b).preend(this.el)}else{if(a=="after"){jQuery(b).after(this.el)}else{b.appendChild(this.el)}}}this.el.id=this.id;this.doLayout();this.fire("render")},isRender:function(a){return !!(this.el&&this.el.parentNode&&this.el.parentNode.tagName)},isFixedSize:function(){var b=this.width,a=this.height;if(parseInt(b)+"px"==b&&parseInt(a)+"px"==a){return true}return false},isAutoWidth:function(){var a=this.el.style.width;return a=="auto"||a==""},isAutoHeight:function(){var a=this.el.style.height;return a=="auto"||a==""},getName:function(){return this.name},setName:function(a){this.name=a},within:function(a){if(__getById(this.el,a.target)){return true}return false},_initEvents:function(){},_create:function(){this.el=document.createElement("div")}});mini._attrs=null;mini.regHtmlAttr=function(b,a){if(!b){return}if(!a){a="string"}if(!mini._attrs){mini._attrs=[]}mini._attrs.push([b,a])};__mini_setControls=function(c,f,a){f=f||this._contentEl;a=a||this;if(!c){c=[]}if(!mini.isArray(c)){c=[c]}for(var g=0,d=c.length;g<d;g++){var b=c[g];if(typeof b=="string"){if(b.indexOf("#")==0){b=__get(b)}}else{if(mini.isElement(b)){}else{b=mini.getAndCreate(b);b=b.el}}if(!b){continue}mini.append(f,b)}mini.parse(f);a.doLayout();return a};mini.Container=function(){mini.Container.superclass.constructor.apply(this,arguments);if(!this._contentEl){this._contentEl=this.el}};mini.extend(mini.Container,Control,{setControls:__mini_setControls,getContentEl:function(){return this._contentEl},getBodyEl:function(){return this._contentEl},within:function(a){if(__getById(this.el,a.target)){return true}var c=mini.getChildControls(this);for(var f=0,d=c.length;f<d;f++){var b=c[f];if(b.within(a)){return true}}return false}});ValidatorBase=function(){ValidatorBase.superclass.constructor.apply(this,arguments)};mini.extend(ValidatorBase,Control,{required:false,requiredErrorText:"不能为空",OO1lo:"mini-required",errorText:"",ololl0:"mini-error",O01100:"mini-invalid",errorMode:"icon",validateOnChanged:true,validateOnLeave:true,ollo11:true,forceValidate:false,keyNavEnabled:true,indentSpace:false,_indentCls:"mini-indent",errorIconEl:null,errorTooltipPlacement:"right",_labelFieldCls:"mini-labelfield",labelField:false,label:"",labelStyle:""});mini.copyTo(ValidatorBase.prototype,{getLabelStyle:function(){this.labelStyle},setLabelStyle:function(a){if(this.labelStyle!=a){this.labelStyle=a;if(this._labelEl){__css_set(this._labelEl,a)}this._labelLayout()}},getLabel:function(){this.label},setLabel:function(a){if(this.label!=a){this.label=a;if(this._labelEl){this._labelEl.innerHTML=a}this._labelLayout()}},getLabelField:function(){this.labelField},setLabelField:function(a){if(this.labelField!=a){this.labelField=a;if(!this._borderEl){return}if(!this._labelEl){this._labelEl=mini.append(this.el,'<label class="mini-labelfield-label"></label>');this._labelEl.innerHTML=this.label;__css_set(this._labelEl,this.labelStyle)}this._labelEl.style.display=a?"block":"none";if(a){__cls_add(this.el,this._labelFieldCls)}else{__cls_rm(this.el,this._labelFieldCls)}this._labelLayout()}},_labelLayout:function(){var b=this._borderEl;if(!b){return}this._labelLayouted=true;if(this.labelField){var a=this._labelEl.offsetWidth;b.style.marginLeft=a+"px";this._doLabelLayout=a===0}else{b.style.marginLeft=0}},getAttrs:function(c){var a=ValidatorBase.superclass.getAttrs.call(this,c);mini._ParseString(c,a,["onvaluechanged","onvalidation","label","labelStyle","requiredErrorText","errorMode","errorTooltipPlacement"]);mini._ParseBool(c,a,["validateOnChanged","validateOnLeave","labelField","indentSpace","keyNavEnabled","forceValidate"]);var b=c.getAttribute("required");if(!b){b=c.required}if(!b){var d=c.attributes.required;if(d){b=d.value=="null"?null:"true"}}if(b){a.required=b!="false"?true:false}return a},onValidation:function(a,b){this.on("validation",a,b)},onValueChanged:function(a,b){this.on("valuechanged",a,b)},fireValueChanged:function(){if(this.validateOnChanged){this._tryValidate()}this.fire("valuechanged",{value:this.getValue(),oldValue:this._oldValue})},doValueChanged:function(){this.fireValueChanged()},l01O0:function(){if(!this.el){return}this.removeCls(this.ololl0);this.removeCls(this.O01100);if(this.errorMode=="border"){this.el.title=""}if(this.ollo11==false){switch(this.errorMode){case"icon":this.addCls(this.ololl0);var a=this.getErrorIconEl();if(a){a.title=this.errorText;jQuery(a).attr("data-placement",this.errorTooltipPlacement)}break;case"border":this.addCls(this.O01100);this.el.title=this.errorText;default:this.o1011();break}}else{this.o1011()}this.doLayout()},o1011:function(){},getErrorIconEl:function(){return this.lO10},getRequiredErrorText:function(){return this.requiredErrorText},setRequiredErrorText:function(a){this.requiredErrorText=a},getRequired:function(){return this.required},setRequired:function(a){this.required=a;if(this.required){this.addCls(this.OO1lo)}else{this.removeCls(this.OO1lo)}},getErrorText:function(){return this.errorText},setErrorText:function(a){this.errorText=a;if(this.ollo11==false){this.l01O0()}},getErrorMode:function(){return this.errorMode},setErrorMode:function(a){if(!a){a="none"}this.errorMode=a.toLowerCase();if(this.ollo11==false){this.l01O0()}},getValidateOnLeave:function(a){return this.validateOnLeave},setValidateOnLeave:function(a){this.validateOnLeave=a},getValidateOnChanged:function(a){return this.validateOnChanged},setValidateOnChanged:function(a){this.validateOnChanged=a},getIsValid:function(){return this.ollo11},setIsValid:function(a){this.ollo11=a;this.l01O0()},isValid:function(){return this.ollo11},validate:function(){var a={value:this.getValue(),errorText:"",isValid:true};if(this.required){if(mini.isNull(a.value)||String(a.value).trim()===""){a.isValid=false;a.errorText=this.requiredErrorText}}this.fire("validation",a);this.errorText=a.errorText;this.setIsValid(a.isValid);return this.isValid()},_tryValidate:function(){if(this._tryValidateTimer){clearTimeout(this._tryValidateTimer)}var a=this;this._tryValidateTimer=setTimeout(function(){a.validate()},30)},isEditable:function(){if(this.readOnly||!this.allowInput||!this.enabled){return false}return true},getIndentSpace:function(){return this.indentSpace},setIndentSpace:function(a){if(a){this.addCls(this._indentCls)}else{this.removeCls(this._indentCls)}this.indentSpace=a},getKeyNavEnabled:function(){return this.keyNavEnabled},setKeyNavEnabled:function(a){this.keyNavEnabled=a},getForceValidate:function(){return this.forceValidate},setForceValidate:function(a){this.forceValidate=a}});ListControl=function(a){this.data=[];this.l1Oo=[];ListControl.superclass.constructor.call(this,null);this.doUpdate();if(a){mini.applyTo.call(this,a)}};ListControl.ajaxType="get";mini.extend(ListControl,ValidatorBase,{defaultValue:"",value:"",valueField:"id",textField:"text",dataField:"",delimiter:",",data:null,url:"",valueInCheckOrder:true,O1oo:"mini-list-item",Ol00:"mini-list-item-hover",_o01O:"mini-list-item-selected",uiCls:"mini-list",name:"",OOol:null,ajaxData:null,Oo1O:null,l1Oo:[],multiSelect:false,allowDeselect:false,olO0O:true});mini.copyTo(ListControl.prototype,{getAttrs:function(d){var k=ListControl.superclass.getAttrs.call(this,d);mini._ParseString(d,k,["url","data","value","textField","valueField","onitemclick","onitemmousemove","onselectionchanged","onitemdblclick","onbeforeload","onload","onloaderror","ondataload","onbeforeselect","delimiter"]);mini._ParseBool(d,k,["multiSelect","valueInCheckOrder","allowDeselect"]);var b=k.valueField||this.valueField,j=k.textField||this.textField;if(d.nodeName.toLowerCase()=="select"){var g=[];for(var c=0,a=d.length;c<a;c++){var f=d.options[c],i={};i[j]=f.text;i[b]=f.value;g.push(i)}if(g.length>0){k.data=g}}return k},getText:function(){var c=this.getSelecteds();if(c.length==0){return""}var g=[];for(var a=0,f=c.length;a<f;a++){var b=c[a],d=this.getTextField();g.push(b[d])}return g.join(",")},onPreLoad:function(a,b){this.on("preload",a,b)},onLoadError:function(a,b){this.on("loaderror",a,b)},onLoad:function(a,b){this.on("load",a,b)},onBeforeLoad:function(a,b){this.on("beforeload",a,b)},onItemMouseDown:function(a,b){this.on("itemmousedown",a,b)},onItemClick:function(a,b){this.on("itemclick",a,b)},_OnItemMouseMove:function(b,a){if(!this.enabled||b.enabled===false){return}this.o10l0(b);var a={item:b,htmlEvent:a};this.fire("itemmousemove",a)},_OnItemMouseOut:function(b,a){if(!this.enabled){return}if(this.olO0O){this.oOol0O()}var a={item:b,htmlEvent:a};this.fire("itemmouseout",a)},_OnItemClick:function(b,a){if(this.isReadOnly()||this.enabled==false||b.enabled===false){a.preventDefault();return}var d=this.getValue(),c={item:b,htmlEvent:a,cancel:false};this.fire("beforeselect",c);var a={item:b,htmlEvent:a,cancel:false};this.fire("beforeitemclick",a);if(a.cancel){return}if(c.cancel==false){if(this.multiSelect){if(this.isSelected(b)){this.deselect(b);if(this.Oo1O==b){this.Oo1O=null}}else{this.select(b);this.Oo1O=b}if(b.__NullItem){this.deselectAll();this.Oo1O=null}this._OnSelectionChanged()}else{if(!this.isSelected(b)){this.deselectAll();this.select(b);this.Oo1O=b;this._OnSelectionChanged()}else{if(this.allowDeselect&&this.multiSelect==false){this.deselectAll();this._OnSelectionChanged()}}}if(d!=this.getValue()){this.fireValueChanged()}}a={item:b,htmlEvent:a};this.fire("itemclick",a)},getAllowDeselect:function(){return this.allowDeselect},setAllowDeselect:function(a){this.allowDeselect=a},oO1Oo0:function(b,f){if(!this.enabled){return}var c=this.O1o1O(b);if(!c){return}var d=this["_OnItem"+f];if(d){d.call(this,c,b)}else{var a={item:c,htmlEvent:b};this.fire("item"+f,a)}},lOOo:function(a){this.oO1Oo0(a,"ContextMenu")},oO11O:function(a){this.oO1Oo0(a,"KeyUp")},o110O:function(a){this.oO1Oo0(a,"KeyDown")},lol11:function(a){this.oO1Oo0(a,"MouseOut")},lloO:function(a){this.oO1Oo0(a,"MouseOver")},olOO:function(a){this.oO1Oo0(a,"MouseMove")},loOll1:function(a){this.oO1Oo0(a,"MouseUp")},lOO1l1:function(a){this.oO1Oo0(a,"MouseDown")},O1loO1:function(a){this.oO1Oo0(a,"Dblclick")},l11o00:function(a){if(this._clickTime){if(new Date()-this._clickTime<100){return}}this._clickTime=new Date();this.oO1Oo0(a,"Click")},oo0ll0:function(a){return this.uid+"$"+a},o1O0:function(a){return this.uid+"$ck$"+a},_OnSelectionChanged:function(a,c){var b=this.oO1l(this.l1Oo);this.value=b[0];if(this._valueEl){this._valueEl.value=this.value}var d={selecteds:this.getSelecteds(),selected:this.getSelected(),value:this.getValue()};this.fire("SelectionChanged",d)},o0Ool0:function(){var b=this.oO1l(this.l1Oo);this.value=b[0];if(this._valueEl){this._valueEl.value=this.value}for(var i=0,c=this.data.length;i<c;i++){var a=this.data[i],f=this.isSelected(a);if(f){this.addItemCls(a,this._o01O)}else{this.removeItemCls(a,this._o01O)}var g=this.data.indexOf(a),d=this.o1O0(g),j=__get(d,this.el);if(j){j.checked=!!f}}},deselects:function(c){if(!c||c.length==0){return}c=c.clone();for(var d=c.length-1;d>=0;d--){var b=c[d];if(this.isSelected(b)){this.l1Oo.remove(b)}}var a=this;a.o0Ool0()},selects:function(c){if(!c||c.length==0){return}c=c.clone();if(this.multiSelect==false&&c.length>1){c.length=1}for(var f=0,d=c.length;f<d;f++){var b=c[f];if(b.enabled===false){continue}if(!this.isSelected(b)){this.l1Oo.push(b)}}var a=this;a.o0Ool0()},clearSelect:function(){this.deselectAll()},deselectAll:function(){this.deselects(this.l1Oo)},selectAll:function(){var a=this.data.clone();this.selects(a)},deselect:function(a){a=this.getItem(a);if(!a){return}if(!this.isSelected(a)){return}this.deselects([a])},select:function(a){a=this.getItem(a);if(!a){return}if(this.isSelected(a)){return}this.Oo1O=a;this.selects([a])},getSelected:function(){return this.Oo1O},setSelected:function(a){if(a){this.Oo1O=a;this.select(a)}},getSelecteds:function(){var b=this.l1Oo.clone(),a=this;if(this.valueInCheckOrder){mini.sort(b,function(d,c){var g=a.indexOf(d),f=a.indexOf(c);if(g>f){return 1}if(g<f){return -1}return 0})}return b},isSelected:function(a){if(!a){return false}return this.l1Oo.indexOf(a)!=-1},getMultiSelect:function(){return this.multiSelect},setMultiSelect:function(a){this.multiSelect=a},l1oO0O:function(){for(var a=this.l1Oo.length-1;a>=0;a--){var b=this.l1Oo[a];if(this.data.indexOf(b)==-1){this.l1Oo.removeAt(a)}}if(this.Oo1O&&this.data.indexOf(this.Oo1O)==-1){this.Oo1O=null}var c=this.oO1l(this.l1Oo);this.value=c[0];if(this._valueEl){this._valueEl.value=this.value}},_isSelectedAll:function(){var a=this,b=this.getData();for(var f=0,d=b.length;f<d;f++){var c=b[f];if(c.enabled!==false){if(!a.isSelected(c)){return false}}}return true},moveItem:function(b,a){if(!b||!mini.isNumber(a)){return}if(a<0){a=0}if(a>this.data.length){a=this.data.length}this.data.remove(b);this.data.insert(a,b);this.doUpdate()},removeItem:function(b){var a=this.data.indexOf(b);if(a!=-1){this.data.removeAt(a);this.l1oO0O();this.doUpdate()}},removeItems:function(a){if(!mini.isArray(a)){return}this.data.removeRange(a);this.l1oO0O();this.doUpdate()},addItem:function(b,a){if(!b){return}if(this.data.indexOf(b)!=-1){return}if(mini.isNull(a)){a=this.data.length}this.data.insert(a,b);this.doUpdate()},addItems:function(a,b){if(!mini.isArray(a)){return}if(mini.isNull(b)){b=this.data.length}this.data.insertRange(b,a);this.doUpdate()},removeAll:function(){var a=this.getData();this.removeItems(a)},findItems:function(i){if(mini.isNull(i)||i===""){return[]}if(typeof i=="function"){var c=i,g=[],f=this.data;for(var a=0,p=f.length;a<p;a++){var j=f[a];if(c(j,a)===true){g.push(j)}}return g}var d=String(i).split(this.delimiter),f=this.data,n={};for(a=0,p=f.length;a<p;a++){var j=f[a],l=mini._getMap(this.valueField,j);n[l]=j}var k=[];for(var b=0,o=d.length;b<o;b++){l=d[b],j=n[l];if(j){k.push(j)}}return k},oO1l:function(a){if(mini.isNull(a)){a=[]}if(!mini.isArray(a)){a=this.findItems(a)}if(this.valueInCheckOrder){var d=this.getData();mini.sort(a,function(k,j){var n=d.indexOf(k),l=d.indexOf(j);if(n>l){return 1}if(n<l){return -1}return 0})}var i=[],b=[];for(var f=0,c=a.length;f<c;f++){var g=a[f];if(g){i.push(this.getItemValue(g));b.push(this.getItemText(g))}}return[i.join(this.delimiter),b.join(this.delimiter)]},getItemText:function(b){var a=mini._getMap(this.textField,b);return mini.isNull(a)?"":String(a)},getItemValue:function(a){return String(mini._getMap(this.valueField,a))},getTextField:function(){return this.textField},setTextField:function(a){this.textField=a},getValueField:function(){return this.valueField},setValueField:function(a){this.valueField=a},getFormValue:function(){return this.value},getValue:function(){return this.value},setValue:function(a){if(mini.isNull(a)){a=""}this.deselectAll();this.value=a;if(this._valueEl){this._valueEl.value=a}var b=this.findItems(this.value);this.selects(b);this.setSelected(b[0])},_doLoad:function(C){try{var D=window.eval(this.url);if(D!=undefined){this.url=D}}catch(A){}var D=this.url,$=ListControl.ajaxType;if(D){if(D.indexOf(".txt")!=-1||D.indexOf(".json")!=-1){$="get"}}var B=__eval(this.ajaxData,this);mini.copyTo(C,B);var A={url:this.url,async:false,type:this.ajaxType?this.ajaxType:$,data:C,params:C,cache:false,cancel:false};jQuery.extend(true,A,this.ajaxOptions);this.fire("beforeload",A);if(A.data!=A.params&&A.params!=C){A.data=A.params}if(A.cancel==true){return}var _=me=this,D=A.url;mini.copyTo(A,{success:function(G,E,B){delete A.params;var F={text:G,result:null,sender:me,options:A,xhr:B},$=null;try{mini_doload(F);$=F.result;if(!$){$=mini.decode(G)}}catch(C){}if(mini.isArray($)){$={data:$}}if(_.dataField){$.data=mini._getMap(_.dataField,$)}if(!$.data){$.data=[]}var C={data:$.data,cancel:false,result:$};_.fire("preload",C);if(C.cancel==true){return}_.setData(C.data);delete C.cancel;_.fire("load",C);setTimeout(function(){_.doLayout()},100)},error:function($,B,C){var A={xhr:$,text:$.responseText,textStatus:B,errorMsg:$.responseText,errorCode:$.status};_.fire("loaderror",A)}});this.lOol11=mini.ajax(A)},getUrl:function(){return this.url},setUrl:function(a){this.url=a;this._doLoad({})},getData:function(){return this.data.clone()},setData:function($){if(typeof $=="string"){$=window.eval($)}if(!mini.isArray($)){$=[]}this.data=$;this.doUpdate();if(this.value!=""){this.deselectAll();var _=this.findItems(this.value);this.selects(_)}},loadData:function(a){this.setData(a)},load:function(a){if(typeof a=="string"){this.setUrl(a)}else{this.setData(a)}},updateItem:function(b,a){b=this.getItem(b);if(!b){return}mini.copyTo(b,a);this.doUpdate()},getAt:function(a){return this.data[a]},indexOf:function(a){return this.data.indexOf(a)},getCount:function(){return this.data.length},getItem:function(a){if(typeof a=="object"){return a}if(typeof a=="number"){return this.data[a]}return this.findItems(a)[0]},scrollIntoView:function(c){try{var b=this.getItemEl(c),d=this.OOol||this.el;mini.scrollIntoView(b,d,false)}catch(a){}},getFocusedIndex:function(){return this.data.indexOf(this.OO0OO1Item)},getFocusedItem:function(){var a=this.OO0OO1Item;return this.indexOf(a)==-1?null:a},oOol0O:function(){if(!this.OO0OO1Item){return}var a=this.getItemEl(this.OO0OO1Item);if(a){__cls_rm(a,this.Ol00)}this.OO0OO1Item=null},o10l0:function(c,b){c=this.getItem(c);if(!c){return}var a=this.getItemEl(c);if(b&&a){this.scrollIntoView(c)}if(this.OO0OO1Item==c){if(a){__cls_add(a,this.Ol00)}return}this.oOol0O();this.OO0OO1Item=c;if(a){__cls_add(a,this.Ol00)}},getItemEl:function(c){c=this.getItem(c);var b=this.data.indexOf(c),a=this.oo0ll0(b);return document.getElementById(a)},removeItemCls:function(c,a){var b=this.getItemEl(c);if(b){__cls_rm(b,a)}},addItemCls:function(c,a){var b=this.getItemEl(c);if(b){__cls_add(b,a)}},O1o1O:function(a){var c=__getByCls(a.target,this.O1oo);if(c){var b=parseInt(mini.getAttr(c,"index"));return this.data[b]}},setName:function(a){this.name=a;if(this._valueEl){mini.setAttr(this._valueEl,"name",this.name)}},destroy:function(a){ListControl.superclass.destroy.call(this,a)},_initEvents:function(){__initEvents(function(){mini.bind(this.el,"click",this.l11o00,this);mini.bind(this.el,"dblclick",this.O1loO1,this);mini.bind(this.el,"mousedown",this.lOO1l1,this);mini.bind(this.el,"mouseup",this.loOll1,this);mini.bind(this.el,"mousemove",this.olOO,this);mini.bind(this.el,"mouseover",this.lloO,this);mini.bind(this.el,"mouseout",this.lol11,this);mini.bind(this.el,"keydown",this.o110O,this);mini.bind(this.el,"keyup",this.oO11O,this);mini.bind(this.el,"contextmenu",this.lOOo,this)},this)},_create:function(){},set:function(b){if(typeof b=="string"){return this}var a=b.value;delete b.value;var d=b.url;delete b.url;var c=b.data;delete b.data;ListControl.superclass.set.call(this,b);if(!mini.isNull(c)){this.setData(c)}if(!mini.isNull(d)){this.setUrl(d)}if(!mini.isNull(a)){this.setValue(a)}return this},doLayout:function(){if(this._doLabelLayout){this._labelLayout()}},getValueInCheckOrder:function(){return this.valueInCheckOrder},setValueInCheckOrder:function(a){this.valueInCheckOrder=a},getDelimiter:function(){return this.delimiter},setDelimiter:function(a){this.delimiter=a}});mini._Layouts={};mini.layout=function(b,c){if(!mini.enableLayout){return}if(!document.body){return}function a(k){if(!k){return}var i=mini.get(k);if(i){if(i.doLayout){if(!mini._Layouts[i.uid]){mini._Layouts[i.uid]=i;if(c!==false||i.isFixedSize()==false){i.doLayout(false)}delete mini._Layouts[i.uid]}}}else{var d=k.childNodes;if(d){for(var j=0,f=d.length;j<f;j++){var g=d[j];try{g.toString()}catch(l){continue}a(g)}}}}if(!b){b=document.body}a(b);if(b==document.body){mini.layoutIFrames()}};mini.applyTo=function(b){b=__get(b);if(!b){return this}if(mini.get(b)){throw new Error("not applyTo a mini control")}var a=this.getAttrs(b);delete a._applyTo;if(mini.isNull(a.defaultValue)&&!mini.isNull(a.value)){a.defaultValue=a.value}if(mini.isNull(a.defaultText)&&!mini.isNull(a.text)){a.defaultText=a.text}var c=b.parentNode;if(c&&this.el!=b){c.replaceChild(this.el,b)}if(window._mini_set){_mini_set(a,this)}this.set(a);return this};mini.cascadeCreate=function(d){if(!d){return}var k=d.nodeName.toLowerCase();if(!k){return}if($(d).attr("noparser")!=null){return}var a=String(d.className);if(a){var o=mini.get(d);if(!o){var c=a.split(" ");for(var b=0,l=c.length;b<l;b++){var n=c[b],f=mini.getClassByUICls(n);if(f){__cls_rm(d,n);var i=new f();mini.applyTo.call(i,d);d=i.el;break}}}}if(k=="select"||__cls_has(d,"mini-menu")||__cls_has(d,"mini-datagrid")||__cls_has(d,"mini-treegrid")||__cls_has(d,"mini-tree")||__cls_has(d,"mini-button")||__cls_has(d,"mini-textbox")||__cls_has(d,"mini-buttonedit")){return}var g=mini.getChildNodes(d,true);for(b=0,l=g.length;b<l;b++){var j=g[b];if(j.nodeType==1){if(j.parentNode==d){mini.cascadeCreate(j)}}}};mini._Removes=[];mini._firstParse=true;mini.parse=function(b,f){mini.parsed=true;if(mini._firstParse){mini._firstParse=false;var a=document.getElementsByTagName("iframe"),i=[];for(var l=0,j=a.length;l<j;l++){var d=a[l];i.push(d)}for(l=0,j=i.length;l<j;l++){var d=i[l],c=jQuery(d).attr("src");if(!c){continue}d.loaded=false;d._onload=d.onload;d._src=c;d.onload=function(){};d.src=""}setTimeout(function(){for(var o=0,n=i.length;o<n;o++){var p=i[o];if(p._src&&jQuery(p).attr("src")==""){p.loaded=true;p.onload=p._onload;p.src=p._src;p._src=p._onload=null}}},20);setTimeout(function(){for(var n=0,q=i.length;n<q;n++){var p=i[n],o=jQuery(p).attr("data-src");if(o){p.src=o}}},30)}if(typeof b=="string"){var k=b;b=__get(k);if(!b){b=document.body}}if(b&&!mini.isElement(b)){b=b.el}if(!b){b=document.body}var g=__win_display;if(isIE){__win_display=false}mini.cascadeCreate(b);__win_display=g;if(f!==false){mini.layout(b)}};mini._ParseString=function(d,g,c){for(var a=0,i=c.length;a<i;a++){var b=c[a],f=mini.getAttr(d,b);if(f){g[b]=f}}};mini._ParseBool=function(d,g,c){for(var a=0,i=c.length;a<i;a++){var b=c[a],f=mini.getAttr(d,b);if(f){g[b]=f=="true"?true:false}}};mini._ParseInt=function(d,g,c){for(var a=0,i=c.length;a<i;a++){var b=c[a],f=parseInt(mini.getAttr(d,b));if(!isNaN(f)){g[b]=f}}};mini.O0O1O1=function(C){var B=[],L=mini.getChildNodes(C);for(var G=0,K=L.length;G<K;G++){var N=L[G],F={},_=null,M=null,R=mini.getChildNodes(N);if(R){for(var $=0,S=R.length;$<S;$++){var U=R[$],P=mini.getAttr(U,"property");if(!P){continue}P=P.toLowerCase();if(P=="columns"){F.columns=mini.O0O1O1(U);if(U.parentNode){U.parentNode.removeChild(U)}}if(P=="editor"||P=="filter"){var H=U.className,D=H.split(" ");for(var I=0,E=D.length;I<E;I++){var J=D[I],T=mini.getClassByUICls(J);if(T){var O=new T();if(P=="filter"){M=O.getAttrs(U);M.type=O.type}else{_=O.getAttrs(U);_.type=O.type}break}}if(U.parentNode){U.parentNode.removeChild(U)}}}}F.header=N.innerHTML;mini._ParseString(N,F,["name","header","field","editor","filter","renderer","width","type","renderer","headerAlign","align","headerCls","cellCls","headerStyle","cellStyle","displayField","dateFormat","listFormat","mapFormat","numberFormat","trueValue","falseValue","dataType","vtype","currencyUnit","summaryType","summaryRenderer","groupSummaryType","groupSummaryRenderer","defaultValue","defaultText","decimalPlaces","data-options","sortField","sortType"]);mini._ParseBool(N,F,["allowCellWrap","visible","readOnly","allowSort","allowResize","allowMove","allowDrag","autoShowPopup","unique","autoEscape","enabled","hideable","showCellTip","valueFromSelect","navUpdown"]);mini._ParseInt(N,F,["minWidth"]);if(_){F.editor=_}if(M){F.filter=M}if(typeof(F.editor)=="string"){try{F.editor=window.eval("("+F.editor+")")}catch(A){}}if(F.dataType){F.dataType=F.dataType.toLowerCase()}if(F.defaultValue==="true"){F.defaultValue=true}if(F.defaultValue==="false"){F.defaultValue=false}B.push(F);var Q=F["data-options"];if(Q){Q=window.eval("("+Q+")");if(Q){mini.copyTo(F,Q)}}}return B};mini.lllO={};mini._getColumn=function(b){var a=mini.lllO[b.toLowerCase()];if(!a){return{}}return a()};mini.IndexColumn=function(a){return mini.copyTo({ignoreCollapseIndex:false,width:30,cellCls:"",align:"center",draggable:false,allowDrag:true,hideable:true,init:function(b){b.on("addrow",this.__OnIndexChanged,this);b.on("removerow",this.__OnIndexChanged,this);b.on("moverow",this.__OnIndexChanged,this);if(b.isTree){b.on("addnode",this.__OnIndexChanged,this);b.on("removenode",this.__OnIndexChanged,this);b.on("movenode",this.__OnIndexChanged,this);b.on("loadnode",this.__OnIndexChanged,this);this._gridUID=b.uid;this._rowIdField="_id"}},getNumberId:function(b){return this._gridUID+"$number$"+b[this._rowIdField]},createNumber:function(c,b){if(mini.isNull(c.pageIndex)){return b+1}else{return(c.pageIndex*c.pageSize)+b+1}},renderer:function(c){var b=c.sender;if(this.draggable){if(!c.cellStyle){c.cellStyle=""}c.cellStyle+=";cursor:move;"}var d='<div id="'+this.getNumberId(c.record)+'">',f=c.rowIndex;if(this.ignoreCollapseIndex){}if(mini.isNull(b.getPageIndex)){d+=f+1}else{d+=(b.getPageIndex()*b.getPageSize())+f+1}d+="</div>";return d},__OnIndexChanged:function(g){var b=g.sender,c=b.getDataView();for(var i=0,d=c.length;i<d;i++){var k=c[i],f=this.getNumberId(k),j=document.getElementById(f);if(j){j.innerHTML=this.createNumber(b,i)}}}},a)};mini.lllO.indexcolumn=mini.IndexColumn;mini.CheckColumn=function(a){return mini.copyTo({width:30,cellCls:"mini-checkcolumn",headerCls:"mini-checkcolumn",hideable:true,_multiRowSelect:true,header:function(c){var b=this.uid+"checkall",f=c._checkedAll?"mini-grid-checkbox-checked":"",d='<span class="mini-grid-checkbox '+f+'" id="'+b+'"></span>';if(this.multiSelect==false){d=""}return d},getCheckId:function(c,b){return this._gridUID+"$checkcolumn$"+c[this._rowIdField]+"$"+b._id},init:function(c){c.on("_selectchange",this.__OnSelectionChanged,this);c.on("HeaderCellClick",this.l0l0,this);var b=this;c.on("removerow",function(){if(c.data&&c.data.length==0){b._doCheckState(c)}});b=this;c.on("load",function(){var d=c.uid+"checkall";b._doCheckState(c)},this)},renderer:function(d){var i=this.getCheckId(d.record,d.column),f=d.sender.isSelected?d.sender.isSelected(d.record):false,g="checkbox",c=d.sender,b='<span class="mini-grid-'+(c.getMultiSelect()?"checkbox":"radio")+'" id="'+i+'"></span>';return b},l0l0:function(c){var b=c.sender;if(c.column!=this){return}var g=b.uid+"checkall",j=document.getElementById(g);if(j){var f="mini-grid-checkbox-checked",i=!__cls_has(j,f);this._checkedAll=i;if(b.getMultiSelect()){if(i){var d=b.getDataView();b.selects(d);__cls_add(j,f);setTimeout(function(){__cls_add(j,f)},30)}else{d=b.getDataView();b.deselects(d);__cls_rm(j,f)}}else{b.deselectAll();if(i){b.select(0);__cls_add(j,f)}}b.fire("checkall")}},__OnSelectionChanged:function(f){var q=f.sender,d=q.toArray(),o=this,g=q.isVirtualScroll(),j=q._viewRegion,c=(g&&j)?j.start:-1,l=j?j.end:-1,i={};if(c!=-1){var n=q.getVisibleRows();for(var b=c,r=l;b<r;b++){var k=n[b];if(k){i[k._id]=true}}}for(b=0,r=d.length;b<r;b++){var p=d[b];if(c!=-1){if(!i[p._id]){continue}}}if(!this._timer){this._timer=setTimeout(function(){o._doCheckState(q);o._timer=null},10)}},_doCheckState:function(c){var g=c.uid+"checkall",b=document.getElementById(g);if(b){var f=c.getSelecteds(),d=c.isTree?c.getList().length:c.getData().length;if(f.length==d&&d!=0){jQuery(b).addClass("mini-grid-checkbox-checked")}else{jQuery(b).removeClass("mini-grid-checkbox-checked")}}}},a)};mini.lllO.checkcolumn=mini.CheckColumn;mini.ExpandColumn=function(a){return mini.copyTo({width:30,headerAlign:"center",align:"center",draggable:false,cellStyle:"padding:0",cellCls:"mini-grid-expandCell",hideable:true,renderer:function(b){return'<a class="mini-grid-ecIcon" href="javascript:#" onclick="return false"></a>'},init:function(b){b.on("cellclick",this.Oo01o1,this)},Oo01o1:function(d){var c=d.sender;if(d.column==this&&c.isShowRowDetail){if(__getByCls(d.htmlEvent.target,"mini-grid-ecIcon")){var b=c.isShowRowDetail(d.record);if(!b){d.cancel=false;c.fire("beforeshowrowdetail",d);if(d.cancel===true){return}}else{d.cancel=false;c.fire("beforehiderowdetail",d);if(d.cancel===true){return}}if(c.autoHideRowDetail){c.hideAllRowDetail()}if(b){c.hideRowDetail(d.record)}else{c.showRowDetail(d.record)}}}}},a)};mini.lllO.expandcolumn=mini.ExpandColumn;lo0lO0Column=function(a){return mini.copyTo({_type:"checkboxcolumn",editMode:"inline",header:"",headerAlign:"center",trueValue:true,falseValue:false,readOnly:false,getCheckId:function(c,b){return this._gridUID+"$checkbox$"+c[this._rowIdField]+"$"+b._id},getCheckBoxEl:function(c,b){return document.getElementById(this.getCheckId(c,b))},isChecked:function(d,c){var b=this.getCheckBoxEl(d,c);return jQuery(b).hasClass("mini-grid-checkbox-checked")},renderer:function(d){var f=this.getCheckId(d.record,d.column),c=mini._getMap(d.field,d.record),b=c==this.trueValue?true:false;return'<span  id="'+f+'" class="mini-grid-checkbox '+(b?"mini-grid-checkbox-checked":"")+'"></span>'},init:function(g){this.grid=g;function f(k){if(g.isReadOnly()||this.readOnly){return}k.value=mini._getMap(k.field,k.record);g.fire("cellbeginedit",k);if(k.cancel!==true){var j=mini._getMap(k.column.field,k.record),i=j==this.trueValue?this.falseValue:this.trueValue;if(g.O0l10o){g.O0l10o(k.record,k.column,i);g.ll0l0O(k.record,k.column)}}}function c(k){if(k.column==this){var i=this.getCheckId(k.record,k.column),j=k.htmlEvent.target;if(j.id==i){if(g.allowCellEdit){k.cancel=false;f.call(this,k)}else{if(this.readOnly){return}k.value=mini._getMap(k.column.field,k.record);g.fire("cellbeginedit",k);if(k.cancel==true){return}if(g.isEditingRow&&g.isEditingRow(k.record)){setTimeout(function(){jQuery(j).toggleClass("mini-grid-checkbox-checked")},1)}}}}}g.on("cellclick",c,this);mini.on(this.grid.el,"keydown",function(j){if(j.keyCode==32&&g.allowCellEdit){var i=g.getCurrentCell();if(!i){return}if(i[1]!=this){return}var k={record:i[0],column:i[1]};k.field=k.column.field;f.call(this,k);j.preventDefault()}},this);var b=parseInt(this.trueValue),d=parseInt(this.falseValue);if(!isNaN(b)){this.trueValue=b}if(!isNaN(d)){this.falseValue=d}if(this.trueValue=="true"){this.trueValue=true}if(this.falseValue=="false"){this.falseValue=false}}},a)};mini.lllO.checkboxcolumn=lo0lO0Column;mini.RadioButtonColumn=function(a){return mini.copyTo({_type:"radiobuttoncolumn",editMode:"inline",header:"",headerAlign:"center",trueValue:true,falseValue:false,readOnly:false,getCheckId:function(c,b){return this._gridUID+"$radio$"+c[this._rowIdField]+"$"+b._id},getCheckBoxEl:function(c,b){return document.getElementById(this.getCheckId(c,b))},renderer:function(g){var c=g.sender,f=this.getCheckId(g.record,g.column),b=mini._getMap(g.field,g.record),j=b==this.trueValue?true:false,d="radio",k=c._id+g.column.field,i="";return'<span id="'+f+'" class="mini-grid-radio '+(j?"mini-grid-radio-checked":"")+'"></span>'},init:function(g){this.grid=g;function f(j){if(g.isReadOnly()||this.readOnly){return}j.value=mini._getMap(j.field,j.record);g.fire("cellbeginedit",j);if(j.cancel!==true){var i=mini._getMap(j.column.field,j.record);if(i==this.trueValue){return}var k=i==this.trueValue?this.falseValue:this.trueValue,n=g.getData();for(var p=0,l=n.length;p<l;p++){var o=n[p];if(o==j.record){continue}i=mini._getMap(j.column.field,o);if(i!=this.falseValue){g.updateRow(o,j.column.field,this.falseValue)}}if(g.O0l10o){g.O0l10o(j.record,j.column,k);g.ll0l0O(j.record,j.column)}}}function c(j){if(j.column==this){var l=this.getCheckId(j.record,j.column),i=j.htmlEvent.target;if(i.id==l){if(g.allowCellEdit){j.cancel=false;f.call(this,j)}else{if(g.isEditingRow&&g.isEditingRow(j.record)){var k=this;setTimeout(function(){i.checked=true;var t=g.getData();for(var q=0,o=t.length;q<o;q++){var p=t[q];if(p==j.record){continue}var s=j.column.field,r=mini._getMap(s,p);if(r!=k.falseValue){if(p!=j.record){if(g._dataSource){mini._setMap(j.column.field,k.falseValue,p);g._dataSource._setModified(p,s,r)}else{var n={};mini._setMap(s,k.falseValue,n);g.o010o(p,n)}}}}},1)}}}}}g.on("cellclick",c,this);mini.on(this.grid.el,"keydown",function(j){if(j.keyCode==32&&g.allowCellEdit){var i=g.getCurrentCell();if(!i){return}if(i[1]!=this){return}var k={record:i[0],column:i[1]};k.field=k.column.field;f.call(this,k);j.preventDefault()}},this);var b=parseInt(this.trueValue),d=parseInt(this.falseValue);if(!isNaN(b)){this.trueValue=b}if(!isNaN(d)){this.falseValue=d}}},a)};mini.lllO.radiobuttoncolumn=mini.RadioButtonColumn;function listColumnRenderer(d){var b=d.column,g=!mini.isNull(d.value)?String(d.value):"",c=g.split(","),t="id",q="text",n={},f=b.editor,l=b.__editor;if(f){if(!l&&(f.type=="combobox"||f.type=="treeselect")){if(mini.isControl(f)){l=f}else{f=mini.clone(f);l=mini.create(f)}d.column.__editor=l}t=l.getValueField();q=l.getTextField();var p=l.getData();n=b._valueMaps;if(!n||p!==b._data){var s=l.getList?l.getList():p;n={};for(var a=0,r=s.length;a<r;a++){var o=s[a];n[o[t]]=o}b._valueMaps=n;b._data=p}}var k=[];for(a=0,r=c.length;a<r;a++){var j=c[a],o=n[j];if(o){var i=o[q];if(i===null||i===undefined){i=""}k.push(i)}}if(k.length==0&&b.valueFromSelect===false){return g}return k.join(",")}o1oo0oColumn=function(a){return mini.copyTo({renderer:listColumnRenderer},a)};mini.lllO.comboboxcolumn=o1oo0oColumn;lo1l11Column=function(a){return mini.copyTo({renderer:listColumnRenderer},a)};mini.lllO.treeselectcolumn=lo1l11Column;lOl1l=function(a){this.owner=a;mini.on(this.owner.el,"mousedown",this.lOO1l1,this)};lOl1l.prototype={lOO1l1:function(c){var b=__cls_has(c.target,"mini-resizer-trigger");if(b&&this.owner.allowResize){var a=this.o1o010();a.start(c)}},o1o010:function(){if(!this._resizeDragger){this._resizeDragger=new mini.Drag({capture:true,onStart:mini.createDelegate(this.OolO0,this),onMove:mini.createDelegate(this.OloO,this),onStop:mini.createDelegate(this.oOOO1,this)})}return this._resizeDragger},OolO0:function(a){this.mask=mini.append(document.body,'<div class="mini-resizer-mask mini-fixed"></div>');this.proxy=mini.append(document.body,'<div class="mini-resizer-proxy"></div>');this.proxy.style.cursor="se-resize";var b=this.owner.el;b.offsetWidth;this.elBox=__getBox(b);__setBox(this.proxy,this.elBox)},OloO:function(d){var a=this.owner,b=d.now[0]-d.init[0],c=d.now[1]-d.init[1],g=this.elBox.width+b,f=this.elBox.height+c;if(g<a.minWidth){g=a.minWidth}if(f<a.minHeight){f=a.minHeight}if(g>a.maxWidth){g=a.maxWidth}if(f>a.maxHeight){f=a.maxHeight}mini.setSize(this.proxy,g,f)},oOOO1:function(a,c){if(!this.proxy){return}var b=__getBox(this.proxy);jQuery(this.mask).remove();jQuery(this.proxy).remove();this.proxy=null;this.elBox=null;if(c){this.owner.setWidth(b.width);this.owner.setHeight(b.height);this.owner.fire("resize")}}};mini._topWindow=null;mini._getTopWindow=function(a){if(mini._topWindow){return mini._topWindow}var b=[];function c(f){try{f.___try=1;if(f.___try==1){b.push(f)}}catch(d){}if(f.parent&&f.parent!=f){c(f.parent)}}c(window);mini._topWindow=b[b.length-1];return mini._topWindow};var __ps=mini.getParams();if(__ps._winid){try{window.Owner=mini._getTopWindow()[__ps._winid]}catch(ex){}}mini._WindowID="w"+Math.floor(Math.random()*10000);mini._getTopWindow()[mini._WindowID]=window;mini.iframeParams={};mini.createIFrame=function(q,a,w,v,r){if(!q){q=""}var o=q.split("#");q=o[0];var j="";if(w!==true){j="_t="+Math.floor(Math.random()*1000000);if(q.indexOf("?")==-1){q+="?"+j}else{q+="&"+j}}if(q&&q.indexOf("_winid")==-1){j="_winid="+mini._WindowID;if(q.indexOf("?")==-1){q+="?"+j}else{q+="&"+j}}if(mini.iframeParams){for(var d in mini.iframeParams){q+="&"+d+"="+mini.iframeParams[d]}}if(o[1]){q=q+"#"+o[1]}var n=q.indexOf(".mht")!=-1,u=n?q:"",g=mini.newId("mini-iframe-"),k='<iframe name="'+g+'" src="'+(v=="post"?"":u)+'" style="width:100%;height:100%;"  frameborder="0"></iframe>',p=document.createElement("div"),c=mini.append(p,k),t=false;if(n){t=true}else{setTimeout(function(){if(c){if(v!="post"){c.src=q}t=true}},5)}if(c.attachEvent){c.attachEvent("onload",s)}else{c.onload=s}var l=false,b=true;function s(){if(t==false||l){return}setTimeout(function(){if(a){a(c,b)}b=false},1)}c._ondestroy=function(){l=true;c.src="";if(mini.isIE){try{c.contentWindow.document.write("");c.contentWindow.document.close()}catch(x){}}c._ondestroy=null;c=null};var i;if(v=="post"){function f(){return jQuery("<form />").attr({method:"post",action:q,enctype:"multipart/form-data",target:c.name}).hide().appendTo("body")}i=f();setTimeout(function(){i.submit()},10)}return c};mini._doOpen=function(b){if(typeof b=="string"){b={url:b}}b=mini.copyTo({width:700,height:400,allowResize:true,allowModal:true,closeAction:"destroy",title:"",titleIcon:"",iconCls:"",iconStyle:"",bodyStyle:"padding:0",url:"",showCloseButton:true,showFooter:false},b);b.closeAction="destroy";var c=b.onload;delete b.onload;var j=b.ondestroy;delete b.ondestroy;var f=b.url;delete b.url;var i=mini.getViewportBox();if(b.width&&String(b.width).indexOf("%")!=-1){var d=parseInt(b.width);b.width=parseInt(i.width*(d/100))}if(b.height&&String(b.height).indexOf("%")!=-1){var a=parseInt(b.height);b.height=parseInt(i.height*(a/100))}var g=new Window();g.set(b);g.load(f,c,j);g.show();if(mini.isIE){setTimeout(function(){fixIEFocus()},100)}return g};function fixIEFocus(){var a=mini.getViewportBox(),b=document.createElement("input");b.style.cssText="position:absolute;left:"+a.left+"px;top:"+a.top+"px;";document.body.appendChild(b);b.focus();b.parentNode.removeChild(b)}mini.getTopWindow=function(){var b=[];function c(f){try{if(f.mini){b.push(f)}if(f.parent&&f.parent!=f){c(f.parent)}}catch(d){}}c(window);var a=b[b.length-1];return a};mini.open=function(g){if(!g){return}var d=g.url;if(!d){d=""}var b=d.split("#"),d=b[0];if(d&&d.indexOf("_winid")==-1){var i="_winid="+mini._WindowID;if(d.indexOf("?")==-1){d+="?"+i}else{d+="&"+i}if(b[1]){d=d+"#"+b[1]}}g.url=d;g.Owner=window;var a=[];function c(k){try{if(k.mini){a.push(k)}if(k.parent&&k.parent!=k){c(k.parent)}}catch(j){}}c(window);var f=a[a.length-1];if(g.targetWindow){f=g.targetWindow}return f.mini._doOpen(g)};mini.openTop=mini.open;mini._getResult=function(g,l,b,k,i,j){var d=null,n=mini.getText(g,l,function(p,o){d=o;if(b){if(b){b(p,o)}}},k,i),a={text:n,result:null,sender:{type:""},options:{url:g,data:l,type:i},xhr:d},f=null;try{mini_doload(a);f=a.result;if(!f){f=mini.decode(n)}}catch(c){}if(!mini.isArray(f)&&j){f=mini._getMap(j,f)}if(mini.isArray(f)){f={data:f}}return f?f.data:null};mini.getData=function(d,i,b,g,f){var a=mini.getText(d,i,b,g,f),c=mini.decode(a);return c};mini.getText=function(f,b,c,a,g){var d=null;mini.ajax({url:f,data:b,async:false,type:g?g:"get",cache:false,dataType:"text",success:function(k,i,j){d=k;if(c){c(k,j)}},error:a});return d};if(!window.mini_RootPath){mini_RootPath="/"}O111ll=function(j){var f=document.getElementsByTagName("script"),b="";for(var i=0,c=f.length;i<c;i++){var a=f[i].src;if(a.indexOf(j)!=-1){var d=a.split(j);b=d[0];break}}var g=location.href;g=g.split("#")[0];g=g.split("?")[0];d=g.split("/");d.length=d.length-1;g=d.join("/");if(b.indexOf("http:")==-1&&b.indexOf("file:")==-1){b=g+"/"+b}return b};if(!window.mini_JSPath){mini_JSPath=O111ll("miniui.js")}mini.update=function(b,c){if(typeof b=="string"){b={url:b}}if(c){b.el=c}var a=mini.loadText(b.url);mini.innerHTML(b.el,a);mini.parse(b.el)};mini.createSingle=function(b){if(typeof b=="string"){b=mini.getClass(b)}if(typeof b!="function"){return}var a=b.single;if(!a){a=b.single=new b()}return a};mini.createTopSingle=function(b){if(typeof b!="function"){return}var a=b.prototype.type;if(top&&top!=window&&top.mini&&top.mini.getClass(a)){return top.mini.createSingle(a)}else{return mini.createSingle(b)}};mini.sortTypes={string:function(a){return String(a).toUpperCase()},date:function(a){if(!a){return 0}if(mini.isDate(a)){return a.getTime()}return mini.parseDate(String(a))},"float":function(a){var b=parseFloat(String(a).replace(/,/g,""));return isNaN(b)?0:b},"int":function(a){var b=parseInt(String(a).replace(/,/g,""),10);return isNaN(b)?0:b},currency:function(a){var b=parseFloat(String(a).replace(/,/g,""));return isNaN(b)?0:b}};mini.lll1oo=function(l,i,d,j){var n=l.split(";");for(var a=0,p=n.length;a<p;a++){var l=n[a].trim(),f=l.split(":"),g=f[0],o=l.substr(g.length+1,1000);if(o){o=o.split(",")}else{o=[]}var b=mini.VTypes[g];if(b){var c=b(i,o);if(c!==true){d.isValid=false;var k=f[0]+"ErrorText";d.errorText=j[k]||mini.VTypes[k]||"";d.errorText=String.format(d.errorText,o[0],o[1],o[2],o[3],o[4]);break}}}};mini.lOo0=function(a,b){if(a&&a[b]){return a[b]}else{return mini.VTypes[b]}};mini.VTypes={minDateErrorText:"不能小于日期 {0}",maxDateErrorText:"不能大于日期 {0}",uniqueErrorText:"字段不能重复",requiredErrorText:"不能为空",emailErrorText:"请输入邮件格式",urlErrorText:"请输入URL格式",floatErrorText:"请输入数字",intErrorText:"请输入整数",dateErrorText:"请输入日期格式 {0}",maxLengthErrorText:"不能超过 {0} 个字符",minLengthErrorText:"不能少于 {0} 个字符",maxErrorText:"数字不能大于 {0} ",minErrorText:"数字不能小于 {0} ",rangeLengthErrorText:"字符长度必须在 {0} 到 {1} 之间",rangeCharErrorText:"字符数必须在 {0} 到 {1} 之间",rangeErrorText:"数字必须在 {0} 到 {1} 之间",required:function(a,b){if(mini.isNull(a)||a===""){return false}return true},email:function(a,b){if(mini.isNull(a)||a===""){return true}if(a.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)!=-1){return true}else{return false}},url:function(b,c){if(mini.isNull(b)||b===""){return true}function a(g){g=g.toLowerCase().split("?")[0];var f="^((https|http|ftp|rtsp|mms)?://)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,5})?((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$",d=new RegExp(f);if(d.test(g)){return(true)}else{return(false)}}return a(b)},"int":function(a,c){if(mini.isNull(a)||a===""){return true}function b(f){if(f<0){f=-f}var d=String(f);return d.length>0&&!(/[^0-9]/).test(d)}return b(a)},"float":function(b,c){if(mini.isNull(b)||b===""){return true}function a(f){var d=String(f);if(d.indexOf("-")!=-1&&d.indexOf("-")!=0){return false}d=d.replace("-","");if(d.split(".").length>2){return false}return d.length>0&&!(/[^0-9.]/).test(d)&&!(d.charAt(d.length-1)==".")}return a(b)},date:function(a,c){if(mini.isNull(a)||a===""){return true}if(!a){return false}var b=null,d=c[0];if(d){b=mini.parseDate(a,d);if(b&&b.getFullYear){if(mini.formatDate(b,d)==a){return true}}}else{b=mini.parseDate(a,"yyyy-MM-dd");if(!b){b=mini.parseDate(a,"yyyy/MM/dd")}if(!b){b=mini.parseDate(a,"MM/dd/yyyy")}if(b&&b.getFullYear){return true}}return false},maxLength:function(b,c){if(mini.isNull(b)||b===""){return true}var a=parseInt(c);if(!b||isNaN(a)){return true}if(b.length<=a){return true}else{return false}},minLength:function(b,c){if(mini.isNull(b)||b===""){return true}var a=parseInt(c);if(isNaN(a)){return true}if(b.length>=a){return true}else{return false}},rangeLength:function(d,c){if(mini.isNull(d)||d===""){return true}if(!d){return false}var b=parseFloat(c[0]),a=parseFloat(c[1]);if(isNaN(b)||isNaN(a)){return true}if(b<=d.length&&d.length<=a){return true}return false},rangeChar:function(a,f){if(mini.isNull(a)||a===""){return true}var d=parseFloat(f[0]),b=parseFloat(f[1]);if(isNaN(d)||isNaN(b)){return true}function i(l){var n=new RegExp("^[一-龥]+$");if(n.test(l)){return true}return false}var c=0,g=String(a).split("");for(var k=0,j=g.length;k<j;k++){if(i(g[k])){c+=2}else{c+=1}}if(d<=c&&c<=b){return true}return false},range:function(d,c){if(mini.VTypes["float"](d,c)==false){return false}if(mini.isNull(d)||d===""){return true}d=parseFloat(d);if(isNaN(d)){return false}var b=parseFloat(c[0]),a=parseFloat(c[1]);if(isNaN(b)||isNaN(a)){return true}if(b<=d&&d<=a){return true}return false},min:function(a,c){if(mini.VTypes["float"](a,c)==false){return false}if(mini.isNull(a)||a===""){return true}a=parseFloat(a);if(isNaN(a)){return false}var b=parseFloat(c[0]);if(isNaN(b)){return true}if(b<=a){return true}return false},max:function(a,c){if(mini.VTypes["float"](a,c)==false){return false}if(mini.isNull(a)||a===""){return true}a=parseFloat(a);if(isNaN(a)){return false}var b=parseFloat(c[0]);if(isNaN(b)){return true}if(a<=b){return true}return false}};mini.summaryTypes={count:function(a){if(!a){a=[]}return a.length},max:function(d,b){if(!d){d=[]}var a=null;for(var i=0,g=d.length;i<g;i++){var c=d[i],f=parseFloat(mini._getMap(b,c));if(f===null||f===undefined||isNaN(f)){continue}if(a==null||a<f){a=f}}return a},min:function(b,a){if(!b){b=[]}var d=null;for(var i=0,g=b.length;i<g;i++){var c=b[i],f=parseFloat(mini._getMap(a,c));if(f===null||f===undefined||isNaN(f)){continue}if(d==null||d>f){d=f}}return d},avg:function(b,a){if(!b){b=[]}if(b.length==0){return 0}var f=0;for(var i=0,g=b.length;i<g;i++){var c=b[i],d=parseFloat(mini._getMap(a,c));if(d===null||d===undefined||isNaN(d)){continue}f+=d}var j=f/b.length;return j},sum:function(b,a){if(!b){b=[]}var d=0;for(var i=0,g=b.length;i<g;i++){var c=b[i],f=parseFloat(mini._getMap(a,c));if(f===null||f===undefined||isNaN(f)){continue}d+=f}return d}};mini.formatCurrency=function(b,c){if(b===null||b===undefined){null==""}b=String(b).replace(/\$|\,/g,"");if(isNaN(b)){b="0"}sign=(b==(b=Math.abs(b)));b=Math.floor(b*100+0.50000000001);cents=b%100;b=Math.floor(b/100).toString();if(cents<10){cents="0"+cents}for(var a=0;a<Math.floor((b.length-(1+a))/3);a++){b=b.substring(0,b.length-(4*a+3))+","+b.substring(b.length-(4*a+3))}c=c||"";return c+(((sign)?"":"-")+b+"."+cents)};mini.getByUid=mini.getbyUID;mini.emptyFn=function(){};mini.Drag=function(a){mini.copyTo(this,a)};mini.Drag.prototype={onStart:mini.emptyFn,onMove:mini.emptyFn,onStop:mini.emptyFn,capture:false,fps:20,event:null,delay:80,start:function(a){a.preventDefault();if(a){this.event=a}this.now=this.init=[this.event.pageX,this.event.pageY];var b=document;mini.on(b,"mousemove",this.move,this);mini.on(b,"mouseup",this.stop,this);mini.on(b,"contextmenu",this.contextmenu,this);if(this.context){mini.on(this.context,"contextmenu",this.contextmenu,this)}this.trigger=a.target;mini.selectable(this.trigger,false);mini.selectable(b.body,false);if(this.capture){if(isIE){this.trigger.setCapture(true)}else{if(document.captureEvents){document.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP|Event.MOUSEDOWN)}}}this.started=false;this.startTime=new Date()},contextmenu:function(a){if(this.context){mini.un(this.context,"contextmenu",this.contextmenu,this)}mini.un(document,"contextmenu",this.contextmenu,this);a.preventDefault();a.stopPropagation()},move:function(a){if(this.delay){if(new Date()-this.startTime<this.delay){return}}var b=this;if(!this.timer){this.timer=setTimeout(function(){if(!b.started){b.started=true;b.onStart(b)}b.now=[a.pageX,a.pageY];b.event=a;b.onMove(b);b.timer=null},5)}},stop:function(a){this.now=[a.pageX,a.pageY];this.event=a;if(this.timer){clearTimeout(this.timer);this.timer=null}var c=document;mini.selectable(this.trigger,true);mini.selectable(c.body,true);if(isIE){this.trigger.setCapture(false);this.trigger.releaseCapture()}var d=mini.MouseButton.Right!=a.button;if(d==false){a.preventDefault()}mini.un(c,"mousemove",this.move,this);mini.un(c,"mouseup",this.stop,this);var b=this;setTimeout(function(){mini.un(document,"contextmenu",b.contextmenu,b);if(b.context){mini.un(b.context,"contextmenu",b.contextmenu,b)}},1);if(this.started){this.onStop(this,d)}}};mini.JSON=new (function(){var E=[],B=null,F=!!{}.hasOwnProperty,D=function($,_){var A=C[_];if(A){return A}A=_.charCodeAt();return"\\u00"+Math.floor(A/16).toString(16)+(A%16).toString(16)},A=function(M,G){if(M===null){E[E.length]="null";return}var H=typeof M;if(H=="undefined"){E[E.length]="null";return}else{if(M.push){E[E.length]="[";var C,J,K=M.length,I;for(J=0;J<K;J+=1){I=M[J];H=typeof I;if(H=="undefined"||H=="function"||H=="unknown"){}else{if(C){E[E.length]=","}A(I);C=true}}E[E.length]="]";return}else{if(M.getFullYear){if(B){E[E.length]='"';if(typeof B=="function"){E[E.length]=B(M,G)}else{E[E.length]=mini.formatDate(M,B)}E[E.length]='"'}else{var L;E[E.length]='"';E[E.length]=M.getFullYear();E[E.length]="-";L=M.getMonth()+1;E[E.length]=L<10?"0"+L:L;E[E.length]="-";L=M.getDate();E[E.length]=L<10?"0"+L:L;E[E.length]="T";L=M.getHours();E[E.length]=L<10?"0"+L:L;E[E.length]=":";L=M.getMinutes();E[E.length]=L<10?"0"+L:L;E[E.length]=":";L=M.getSeconds();E[E.length]=L<10?"0"+L:L;E[E.length]='"'}return}else{if(H=="string"){if($.test(M)){E[E.length]='"';E[E.length]=M.replace(_,D);E[E.length]='"';return}E[E.length]='"'+M+'"';return}else{if(H=="number"){E[E.length]=M;return}else{if(H=="boolean"){E[E.length]=String(M);return}else{E[E.length]="{";C,J,I;for(J in M){if(!F||Object.prototype.hasOwnProperty.call(M,J)){I=M[J];H=typeof I;if(H=="undefined"||H=="function"||H=="unknown"){}else{if(C){E[E.length]=","}A(J);E[E.length]=":";A(I,J);C=true}}}E[E.length]="}";return}}}}}}},C={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},$=/["\\\x00-\x1f]/,_=/([\x00-\x1f\\"])/g;this.encode=function(){var $;return function(_,$){E=[];B=$;A(_);B=null;return E.join("")}}();this.decode=function(){var A=/^(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2}(?:\.*\d*)?)Z*$/,_=new RegExp("^/+Date\\((-?[0-9]+).*\\)/+$","g"),$=/[\"\'](\d{4})-(\d{1,2})-(\d{1,2})[T ](\d{1,2}):(\d{1,2}):(\d{1,2})(\.*\d*)[\"\']/g;return function(H,E){if(H===""||H===null||H===undefined){return H}if(typeof H=="object"){H=this.encode(H)}function B(_){if(E!==false){_=_.replace(__js_dateRegEx,"$1new Date($2)");_=_.replace($,"new Date($1,$2-1,$3,$4,$5,$6)");_=_.replace(__js_dateRegEx2,"new Date($1)")}return window.eval("("+_+")")}var F=null;if(window.JSON&&window.JSON.parse){var G=function(C,B){if(typeof B==="string"&&E!==false){A.lastIndex=0;var $=A.exec(B);if($){B=new Date($[1],$[2]-1,$[3],$[4],$[5],$[6]);return B}_.lastIndex=0;$=_.exec(B);if($){B=new Date(parseInt($[1]));return B}}return B};try{var C=H.replace(__js_dateRegEx,'$1"/Date($2)/"');F=window.JSON.parse(C,G)}catch(D){F=B(H)}}else{F=B(H)}return F}}()})();__js_dateRegEx=new RegExp('(^|[^\\\\])\\"\\\\/Date\\((-?[0-9]+)(?:[a-zA-Z]|(?:\\+|-)[0-9]{4})?\\)\\\\/\\"',"g");__js_dateRegEx2=new RegExp("[\"']/Date\\(([0-9]+)\\)/[\"']","g");mini.encode=mini.JSON.encode;mini.decode=mini.JSON.decode;mini.clone=function(d,a){if(d===null||d===undefined){return d}var b=mini.encode(d),c=mini.decode(b);function f(k){for(var n=0,l=k.length;n<l;n++){var j=k[n];delete j._state;delete j._id;delete j._pid;delete j._uid;for(var i in j){var g=j[i];if(g instanceof Array){f(g)}}}}if(a!==false){f(c instanceof Array?c:[c])}return c};var DAY_MS=86400000,HOUR_MS=3600000,MINUTE_MS=60000;mini.copyTo(mini,{clearTime:function(a){if(!a){return null}return new Date(a.getFullYear(),a.getMonth(),a.getDate())},maxTime:function(a){if(!a){return null}return new Date(a.getFullYear(),a.getMonth(),a.getDate(),23,59,59)},cloneDate:function(a){if(!a){return null}return new Date(a.getTime())},addDate:function(c,b,a){if(!a){a="D"}c=new Date(c.getTime());switch(a.toUpperCase()){case"Y":c.setFullYear(c.getFullYear()+b);break;case"MO":c.setMonth(c.getMonth()+b);break;case"D":c.setDate(c.getDate()+b);break;case"H":c.setHours(c.getHours()+b);break;case"M":c.setMinutes(c.getMinutes()+b);break;case"S":c.setSeconds(c.getSeconds()+b);break;case"MS":c.setMilliseconds(c.getMilliseconds()+b);break}return c},getWeek:function(c,d,k){var i=Math.floor((14-(d))/12),b=c+4800-i,j=(d)+(12*i)-3,a=k+Math.floor(((153*j)+2)/5)+(365*b)+Math.floor(b/4)-Math.floor(b/100)+Math.floor(b/400)-32045,f=(a+31741-(a%7))%146097%36524%1461,l=Math.floor(f/1460),g=((f-l)%365)+l;NumberOfWeek=Math.floor(g/7)+1;return NumberOfWeek},getWeekStartDate:function(c,a){if(!a){a=0}if(a>6||a<0){throw new Error("out of weekday")}var d=c.getDay(),f=a-d;if(d<a){f-=7}var b=new Date(c.getFullYear(),c.getMonth(),c.getDate()+f);return b},getShortWeek:function(b){var a=this.dateInfo.daysShort;return a[b]},getLongWeek:function(b){var a=this.dateInfo.daysLong;return a[b]},getShortMonth:function(a){var b=this.dateInfo.monthsShort;return b[a]},getLongMonth:function(a){var b=this.dateInfo.monthsLong;return b[a]},dateInfo:{monthsLong:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],daysLong:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],daysShort:["日","一","二","三","四","五","六"],quarterLong:["一季度","二季度","三季度","四季度"],quarterShort:["Q1","Q2","Q2","Q4"],halfYearLong:["上半年","下半年"],patterns:{d:"yyyy-M-d",D:"yyyy年M月d日",f:"yyyy年M月d日 H:mm",F:"yyyy年M月d日 H:mm:ss",g:"yyyy-M-d H:mm",G:"yyyy-M-d H:mm:ss",m:"MMMd日",o:"yyyy-MM-ddTHH:mm:ss.fff",s:"yyyy-MM-ddTHH:mm:ss",t:"H:mm",T:"H:mm:ss",U:"yyyy年M月d日 HH:mm:ss",y:"yyyy年MM月"},tt:{AM:"上午",PM:"下午"},ten:{Early:"上旬",Mid:"中旬",Late:"下旬"},today:"今天",clockType:24}});Date.prototype.getHalfYear=function(){if(!this.getMonth){return null}var a=this.getMonth();if(a<6){return 0}return 1};Date.prototype.getQuarter=function(){if(!this.getMonth){return null}var a=this.getMonth();if(a<3){return 0}if(a<6){return 1}if(a<9){return 2}return 3};mini.formatDate=function(f,a,s){if(!f||!f.getFullYear||isNaN(f)){return""}var j=f.toString(),q=mini.dateInfo;if(!q){q=mini.dateInfo}if(typeof(q)!=="undefined"){var t=typeof(q.patterns[a])!=="undefined"?q.patterns[a]:a,d=f.getFullYear(),o=f.getMonth(),k=f.getDate();if(a=="yyyy-MM-dd"){o=o+1<10?"0"+(o+1):o+1;k=k<10?"0"+k:k;return d+"-"+o+"-"+k}if(a=="MM/dd/yyyy"){o=o+1<10?"0"+(o+1):o+1;k=k<10?"0"+k:k;return o+"/"+k+"/"+d}j=t.replace(/yyyy/g,d);j=j.replace(/yy/g,(d+"").substring(2));var b=f.getHalfYear();j=j.replace(/hy/g,q.halfYearLong[b]);var i=f.getQuarter();j=j.replace(/Q/g,q.quarterLong[i]);j=j.replace(/q/g,q.quarterShort[i]);j=j.replace(/MMMM/g,q.monthsLong[o].escapeDateTimeTokens());j=j.replace(/MMM/g,q.monthsShort[o].escapeDateTimeTokens());j=j.replace(/MM/g,o+1<10?"0"+(o+1):o+1);j=j.replace(/(\\)?M/g,function(v,u){return u?v:o+1});var p=f.getDay();j=j.replace(/dddd/g,q.daysLong[p].escapeDateTimeTokens());j=j.replace(/ddd/g,q.daysShort[p].escapeDateTimeTokens());j=j.replace(/dd/g,k<10?"0"+k:k);j=j.replace(/(\\)?d/g,function(v,u){return u?v:k});var n=f.getHours(),l=n>12?n-12:n;if(q.clockType==12){if(n>12){n-=12}}j=j.replace(/HH/g,n<10?"0"+n:n);j=j.replace(/(\\)?H/g,function(v,u){return u?v:n});j=j.replace(/hh/g,l<10?"0"+l:l);j=j.replace(/(\\)?h/g,function(v,u){return u?v:l});var c=f.getMinutes();j=j.replace(/mm/g,c<10?"0"+c:c);j=j.replace(/(\\)?m/g,function(v,u){return u?v:c});var r=f.getSeconds();j=j.replace(/ss/g,r<10?"0"+r:r);j=j.replace(/(\\)?s/g,function(v,u){return u?v:r});j=j.replace(/fff/g,f.getMilliseconds());j=j.replace(/tt/g,f.getHours()>12||f.getHours()==0?q.tt.PM:q.tt.AM);var f=f.getDate(),g="";if(f<=10){g=q.ten.Early}else{if(f<=20){g=q.ten.Mid}else{g=q.ten.Late}}j=j.replace(/ten/g,g)}return j.replace(/\\/g,"")};String.prototype.escapeDateTimeTokens=function(){return this.replace(/([dMyHmsft])/g,"\\$1")};mini.fixDate=function(b,a){if(+b){while(b.getDate()!=a.getDate()){b.setTime(+b+(b<a?1:-1)*HOUR_MS)}}};mini.parseDate=function(A,$){try{var C=window.eval(A);if(C&&C.getFullYear){return C}}catch(B){}if(typeof A=="object"){return isNaN(A)?null:A}if(typeof A=="number"){C=new Date(A*1000);if(C.getTime()!=A){return null}return isNaN(C)?null:C}if(typeof A=="string"){m=A.match(/^([0-9]{4})([0-9]{2})([0-9]{0,2})$/);if(m){var _=new Date(parseInt(m[1],10),parseInt(m[2],10)-1);if(m[3]){_.setDate(m[3])}return _}m=A.match(/^([0-9]{4}).([0-9]*)$/);if(m){_=new Date(m[1],m[2]-1);return _}if(A.match(/^\d+(\.\d+)?$/)){C=new Date(parseFloat(A)*1000);if(C.getTime()!=A){return null}else{return C}}if($===undefined){$=true}C=mini.parseISO8601(A,$)||(A?new Date(A):null);return isNaN(C)?null:C}return null};mini.parseISO8601=function(a,c){var d=a.match(/^([0-9]{4})([-\/]([0-9]{1,2})([-\/]([0-9]{1,2})([T ]([0-9]{1,2}):([0-9]{1,2})(:([0-9]{1,2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!d){d=a.match(/^([0-9]{4})[-\/]([0-9]{2})[-\/]([0-9]{2})[T ]([0-9]{1,2})/);if(d){var b=new Date(d[1],d[2]-1,d[3],d[4]);return b}d=a.match(/^([0-9]{4}).([0-9]*)$/);if(d){b=new Date(d[1],d[2]-1);return b}d=a.match(/^([0-9]{4}).([0-9]*).([0-9]*)/);if(d){b=new Date(d[1],d[2]-1,d[3]);return b}d=a.match(/^([0-9]{2})-([0-9]{2})-([0-9]{4})$/);if(!d){return null}else{b=new Date(d[3],d[1]-1,d[2]);return b}}b=new Date(d[1],0,1);if(c||!d[14]){var f=new Date(d[1],0,1,9,0);if(d[3]){b.setMonth(d[3]-1);f.setMonth(d[3]-1)}if(d[5]){b.setDate(d[5]);f.setDate(d[5])}mini.fixDate(b,f);if(d[7]){b.setHours(d[7])}if(d[8]){b.setMinutes(d[8])}if(d[10]){b.setSeconds(d[10])}if(d[12]){b.setMilliseconds(Number("0."+d[12])*1000)}mini.fixDate(b,f)}else{b.setUTCFullYear(d[1],d[3]?d[3]-1:0,d[5]||1);b.setUTCHours(d[7]||0,d[8]||0,d[10]||0,d[12]?Number("0."+d[12])*1000:0);var g=Number(d[16])*60+(d[18]?Number(d[18]):0);g*=d[15]=="-"?1:-1;b=new Date(+b+(g*60*1000))}return b};mini.parseTime=function(g,b){if(!g){return null}var k=parseInt(g);if(k==g&&b){d=new Date(0);var c=b.charAt(0);if(c=="H"){d.setHours(k)}else{if(c=="m"){d.setMinutes(k)}else{if(c=="s"){d.setSeconds(k)}}}if(isNaN(d)){d=null}return d}var d=mini.parseDate(g);if(!d){var f=g.split(":"),a=parseInt(parseFloat(f[0])),j=parseInt(parseFloat(f[1])),i=parseInt(parseFloat(f[2]));if(!isNaN(a)&&!isNaN(j)&&!isNaN(i)){d=new Date(0);d.setHours(a);d.setMinutes(j);d.setSeconds(i)}if(!isNaN(a)&&(b=="H"||b=="HH")){d=new Date(0);d.setHours(a)}else{if(!isNaN(a)&&!isNaN(j)&&(b=="H:mm"||b=="HH:mm")){d=new Date(0);d.setHours(a);d.setMinutes(j)}else{if(!isNaN(a)&&!isNaN(j)&&b=="mm:ss"){d=new Date(0);d.setMinutes(a);d.setSeconds(j)}}}}return d};mini.dateInfo={monthsLong:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],daysLong:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],daysShort:["日","一","二","三","四","五","六"],quarterLong:["一季度","二季度","三季度","四季度"],quarterShort:["Q1","Q2","Q2","Q4"],halfYearLong:["上半年","下半年"],patterns:{d:"yyyy-M-d",D:"yyyy年M月d日",f:"yyyy年M月d日 H:mm",F:"yyyy年M月d日 H:mm:ss",g:"yyyy-M-d H:mm",G:"yyyy-M-d H:mm:ss",m:"MMMd日",o:"yyyy-MM-ddTHH:mm:ss.fff",s:"yyyy-MM-ddTHH:mm:ss",t:"H:mm",T:"H:mm:ss",U:"yyyy年M月d日 HH:mm:ss",y:"yyyy年MM月"},tt:{AM:"上午",PM:"下午"},ten:{Early:"上旬",Mid:"中旬",Late:"下旬"},today:"今天",clockType:24};(function(R){var B=R.mini;if(!B){B=R.mini={}}var L=B.cultures={},D="zh_CN";B.cultures[D]={name:D,numberFormat:{number:{pattern:["n","-n"],decimals:2,decimalsSeparator:".",groupSeparator:",",groupSize:[3]},percent:{pattern:["n %","-n %"],decimals:2,decimalsSeparator:".",groupSeparator:",",groupSize:[3],symbol:"%"},currency:{pattern:["$n","$-n"],decimals:2,decimalsSeparator:".",groupSeparator:",",groupSize:[3],symbol:"\xa5"}}};function O($){return B.cultures[$]}function S($){if($&&$.name){return $}return O($)||B.cultures.current}B.getCulture=S;B.culture=function($){if($!==undefined){B.cultures.current=O($)}else{return L.current}};B.culture(D);var N="string",$="number",Q=function($){return $&&!!$.unshift},H={2:/^\d{1,2}/,4:/^\d{4}/};function K(_,A,B){_=_+"";A=typeof A==$?A:2;var D=A-_.length;if(D>0){var C=M(D,"0");return B?_+C:C+_}return _}function M(A,$){var _="";while(A){A-=1;_+=$}return _}var A=/^(n|c|p)(\d*)$/i,I=/^(e)(\d*)$/i,E=/[^0#]/g,C=/[eE][\-+]?[0-9]+/;function _(H,D,L){H=Math.abs(H);var O=D.indexOf(",")!=-1,$=D.split("."),B=($[0]||"").replace(E,""),_=($[1]||"").replace(E,""),P="",M=L.groupSize[0],A=L.decimalsSeparator,N=L.groupSeparator,F=B.indexOf("0");B=F==-1?"0":(B.substr(F)||"0");var J=_.length,I=_.substr(0,_.lastIndexOf("0")+1).length;function Q(number,fractionDigits){with(Math){return round(number*pow(10,fractionDigits))/pow(10,fractionDigits)}}H=Q(H,J);var C=String(H).split(".");value0=C[0];value1=C[1]||"";if(value0){value0=K(value0,B.length);if(O){for(var G=0;G<Math.floor((value0.length-(1+G))/3);G++){value0=value0.substring(0,value0.length-(4*G+3))+N+value0.substring(value0.length-(4*G+3))}}P+=value0}if(J>0){P+=A;P+=K(value1.substr(0,J),I,true)}return P}function F(C,H,_,$){var D=_.numberFormat.number,I=A.exec(C);if(I!=null){var F=I[1],G=I[2];if(F=="p"){D=_.numberFormat.percent}else{if(F=="c"){D=_.numberFormat.currency}}var B=G?parseInt(G):D.decimals,E=D.pattern[H<0?1:0];E=E.replace("n","#,#"+(B>0?"."+M(B,"0"):""));C=C.replace(F+G,E).replace("$",_.numberFormat.currency.symbol).replace("%",_.numberFormat.percent.symbol)}else{if(P(C)){if(H<0&&!$[1]){C="-"+C}}}return C}function P($){return $.indexOf("0")!=-1||$.indexOf("#")!=-1}function J(_){if(!_){return null}function $(_){var C=_.indexOf("0"),$=_.indexOf("#");if(C==-1||($!=-1&&$<C)){C=$}var B=_.lastIndexOf("0"),A=_.lastIndexOf("#");if(B==-1||(A!=-1&&A>B)){B=A}return[C,B]}var A=$(_),C=A[0],B=A[1];return C>-1?{begin:C,end:B,format:_.substring(C,B+1)}:null}function G(K,E,M){if(typeof K!=$){return""}if(!E){return String(K)}var C=E.split(";");E=C[0];if(K<0&&C.length>=2){E=C[1]}if(K==0&&C.length>=3){E=C[2]}var M=S(M),L=M.numberFormat.number,T=M.numberFormat.percent,H=M.numberFormat.currency,E=F(E,K,M,C),O=E.indexOf(H.symbol)!=-1,B=E.indexOf(T.symbol)!=-1,A=E.indexOf(".")!=-1,G=P(E),Q=O?H:(B?H:L),K=B?K*100:K,D=I.exec(E);if(D){var N=parseInt(D[2]);return isNaN(N)?K.toExponential():K.toExponential(N)}if(!G){return E}var U="",R=J(E);if(R!=null){U=_(K,R.format,Q);U=E.substr(0,R.begin)+U+E.substr(R.end+1)}else{U=E}return U}B.parseInt=function(C,_,A){var $=B.parseFloat(C,_,A);if($){$=$|0}return $};B.parseFloat=function(U,P,G){if(!U&&U!==0){return null}if(typeof U===$){return U}if(G&&G.split(";")[2]==U){return 0}if(C.test(U)){U=parseFloat(U);if(isNaN(U)){U=null}return U}U=U.toString();P=B.getCulture(P);var O=P.numberFormat,K=O.number,I=O.percent,S=O.currency,_=U.indexOf(I.symbol)!=-1,R=U.indexOf(S.symbol)!=-1,K=R?S:(_?I:K),H=K.pattern[1],Q=K.decimals,E=K.decimalsSeparator,T=K.groupSeparator,N=U.indexOf("-")>-1;function L(D,$,_){var A=J($);if(A){var B=$.substr(0,A.begin),C=$.substr(A.end+1);if(D.indexOf(B)==0&&D.indexOf(C)>-1){D=D.replace(B,"").replace(C,"");N=_}}return D}if(!G){if(N==false){G=H.replace("n","#,#"+(Q>0?"."+M(Q,"0"):"")).replace("$",S.symbol).replace("%",I.symbol);U=L(U,G,true)}}else{var D=G.split(";");if(D[1]){G=D[1];U=L(U,G,true)}else{G=D[0];var A=U;U=L(A,G,false);if(A==U){U=L(A,"-"+G,true)}}}U=U.split(T).join("").replace(E,".");var F=U.match(/([0-9,.]+)/g);if(F==null){return null}U=F[0];U=parseFloat(U);if(isNaN(U)){U=null}else{if(N){U*=-1}}if(U&&_){U/=100}return U};B.formatNumber=G})(this);mini.Keyboard={Left:37,Top:38,Right:39,Bottom:40,PageUp:33,PageDown:34,End:35,Home:36,Enter:13,ESC:27,Space:32,Tab:9,Del:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};var ua=navigator.userAgent.toLowerCase(),check=function(a){return a.test(ua)},DOC=document,isStrict=document.compatMode=="CSS1Compat",version=function(b,c){var a;return(b&&(a=c.exec(ua)))?parseFloat(a[1]):0},docMode=document.documentMode,isOpera=check(/opera/),isOpera10_5=isOpera&&check(/version\/10\.5/),isChrome=check(/\bchrome\b/),isWebKit=check(/webkit/),isSafari=!isChrome&&check(/safari/),isSafari2=isSafari&&check(/applewebkit\/4/),isSafari3=isSafari&&check(/version\/3/),isSafari4=isSafari&&check(/version\/4/),isSafari5_0=isSafari&&check(/version\/5\.0/),isSafari5=isSafari&&check(/version\/5/),isIE=!isOpera&&check(/msie/),isIE7=isIE&&((check(/msie 7/)&&docMode!=8&&docMode!=9&&docMode!=10)||docMode==7),isIE8=isIE&&((check(/msie 8/)&&docMode!=7&&docMode!=9&&docMode!=10)||docMode==8),isIE9=isIE&&((check(/msie 9/)&&docMode!=7&&docMode!=8&&docMode!=10)||docMode==9),isIE10=isIE&&((check(/msie 10/)&&docMode!=7&&docMode!=8&&docMode!=9)||docMode==10),isIE6=isIE&&!isIE7&&!isIE8&&!isIE9&&!isIE10,isIE11=(ua.indexOf("trident")>-1&&ua.indexOf("rv")>-1),isIE=isIE||isIE11,isFirefox=navigator.userAgent.indexOf("Firefox")>0,isGecko=!isWebKit&&check(/gecko/),isGecko3=isGecko&&check(/rv:1\.9/),isGecko4=isGecko&&check(/rv:2\.0/),isGecko5=isGecko&&check(/rv:5\./),isGecko10=isGecko&&check(/rv:10\./),isFF3_0=isGecko3&&check(/rv:1\.9\.0/),isFF3_5=isGecko3&&check(/rv:1\.9\.1/),isFF3_6=isGecko3&&check(/rv:1\.9\.2/),isWindows=check(/windows|win32/),isMac=check(/macintosh|mac os x/),isAir=check(/adobeair/),isLinux=check(/linux/),scrollbarSize=null,chromeVersion=version(true,/\bchrome\/(\d+\.\d+)/),firefoxVersion=version(true,/\bfirefox\/(\d+\.\d+)/),ieVersion=version(isIE,/msie (\d+\.\d+)/),IE_V=isIE?parseInt(ieVersion):-1,operaVersion=version(isOpera,/version\/(\d+\.\d+)/),safariVersion=version(isSafari,/version\/(\d+\.\d+)/),webKitVersion=version(isWebKit,/webkit\/(\d+\.\d+)/),isSecure=/^https/i.test(window.location.protocol),isBorderBox=isIE&&!isStrict;if(isIE6){try{DOC.execCommand("BackgroundImageCache",false,true)}catch(e){}}mini.boxModel=!isBorderBox;mini.isIE=isIE;mini.isIE6=isIE6;mini.isIE7=isIE7;mini.isIE8=isIE8;mini.isIE9=isIE9;mini.isIE10=isIE10;mini.isIE11=isIE11;mini.IE_V=IE_V;mini.isFirefox=isFirefox;mini.isOpera=isOpera;mini.isSafari=isSafari;mini.isChrome=isChrome;if(jQuery){jQuery.boxModel=mini.boxModel}mini.noBorderBox=false;if(jQuery.boxModel==false&&isIE&&isIE9==false){mini.noBorderBox=true}mini.MouseButton={Left:0,Middle:1,Right:2};if(isIE&&!isIE9&&!isIE10){mini.MouseButton={Left:1,Middle:4,Right:2}}mini.append=function(a,b){a=__get(a);if(!b||!a){return}if(typeof b=="string"){if(b.charAt(0)=="#"){b=__get(b);if(!b){return}a.appendChild(b);return b}else{if(b.indexOf("<tr")==0){return jQuery(a).append(b)[0].lastChild;return}var c=document.createElement("div");c.innerHTML=b;b=c.firstChild;while(c.firstChild){a.appendChild(c.firstChild)}return b}}else{a.appendChild(b);return b}};mini.prepend=function(a,b){if(typeof b=="string"){if(b.charAt(0)=="#"){b=__get(b)}else{var c=document.createElement("div");c.innerHTML=b;b=c.firstChild}}return jQuery(a).prepend(b)[0].firstChild};mini.after=function(a,b){if(typeof b=="string"){if(b.charAt(0)=="#"){b=__get(b)}else{var c=document.createElement("div");c.innerHTML=b;b=c.firstChild}}if(!b||!a){return}a.nextSibling?a.parentNode.insertBefore(b,a.nextSibling):a.parentNode.appendChild(b);return b};mini.before=function(a,b){if(typeof b=="string"){if(b.charAt(0)=="#"){b=__get(b)}else{var c=document.createElement("div");c.innerHTML=b;b=c.firstChild}}if(!b||!a){return}a.parentNode.insertBefore(b,a);return b};mini.__wrap=document.createElement("div");mini.createElements=function(a){mini.removeChilds(mini.__wrap);var b=a.indexOf("<tr")==0;if(b){a="<table>"+a+"</table>"}mini.__wrap.innerHTML=a;return b?mini.__wrap.firstChild.rows:mini.__wrap.childNodes};__get=function(g,b){if(typeof g=="string"){if(g.charAt(0)=="#"){g=g.substr(1)}var c=document.getElementById(g);if(c){return c}if(b&&!__getById(document.body,b)){var d=b.getElementsByTagName("*");for(var a=0,f=d.length;a<f;a++){c=d[a];if(c.id==g){return c}}c=null}return c}else{return g}};__cls_has=function(c,a){c=__get(c);if(!c){return}if(!c.className){return false}var b=String(c.className).split(" ");return b.indexOf(a)!=-1};__cls_add=function(b,a){if(!a){return}if(__cls_has(b,a)==false){jQuery(b).addClass(a)}};__cls_rm=function(b,a){if(!a){return}jQuery(b).removeClass(a)};__margin=function(b){b=__get(b);var a=jQuery(b);return{top:parseInt(a.css("margin-top"),10)||0,left:parseInt(a.css("margin-left"),10)||0,bottom:parseInt(a.css("margin-bottom"),10)||0,right:parseInt(a.css("margin-right"),10)||0}};__border=function(b){b=__get(b);var a=jQuery(b);return{top:parseInt(a.css("border-top-width"),10)||0,left:parseInt(a.css("border-left-width"),10)||0,bottom:parseInt(a.css("border-bottom-width"),10)||0,right:parseInt(a.css("border-right-width"),10)||0}};__padding=function(b){b=__get(b);var a=jQuery(b);return{top:parseInt(a.css("padding-top"),10)||0,left:parseInt(a.css("padding-left"),10)||0,bottom:parseInt(a.css("padding-bottom"),10)||0,right:parseInt(a.css("padding-right"),10)||0}};__setWidth=function(a,d){a=__get(a);d=parseInt(d);if(isNaN(d)||!a){return}if(jQuery.boxModel){var c=__padding(a),b=__border(a);d=d-c.left-c.right-b.left-b.right}if(d<0){d=0}a.style.width=d+"px"};__setHeight=function(a,d){a=__get(a);d=parseInt(d);if(isNaN(d)||!a){return}if(jQuery.boxModel){var c=__padding(a),b=__border(a);d=d-c.top-c.bottom-b.top-b.bottom}if(d<0){d=0}a.style.height=d+"px"};__getWidth=function(b,a){b=__get(b);if(b.style.display=="none"||b.type=="text/javascript"){return 0}return a?jQuery(b).width():jQuery(b).outerWidth()};__getHeight=function(b,a){b=__get(b);if(b.style.display=="none"||b.type=="text/javascript"){return 0}return a?jQuery(b).height():jQuery(b).outerHeight()};__setBox=function(c,b,f,a,d){if(f===undefined){f=b.y;a=b.width;d=b.height;b=b.x}mini.setXY(c,b,f);__setWidth(c,a);__setHeight(c,d)};__getBox=function(b){var c=mini.getXY(b),a={x:c[0],y:c[1],width:__getWidth(b),height:__getHeight(b)};a.left=a.x;a.top=a.y;a.right=a.x+a.width;a.bottom=a.y+a.height;return a};__css_set=function(d,a){d=__get(d);if(!d||typeof a!="string"){return}var c=jQuery(d),l=a.toLowerCase().split(";");for(var b=0,k=l.length;b<k;b++){var i=l[b],f=i.split(":");if(f.length>1){if(f.length>2){var j=f[0].trim();f.removeAt(0);var g=f.join(":").trim();c.css(j,g)}else{c.css(f[0].trim(),f[1].trim())}}}};__getStyle=function(){var a=document.defaultView;return new Function("el","style",["style.indexOf('-')>-1 && (style=style.replace(/-(\\w)/g,function(m,a){return a.toUpperCase()}));","style=='float' && (style='",a?"cssFloat":"styleFloat","');return el.style[style] || ",a?"window.getComputedStyle(el,null)[style]":"el.currentStyle[style]"," || null;"].join(""))}();__getById=function(c,a){var b=false;c=__get(c);a=__get(a);if(c===a){return true}if(c&&a){if(c.contains){try{return c.contains(a)}catch(d){return false}}else{if(c.compareDocumentPosition){return !!(c.compareDocumentPosition(a)&16)}else{while(a=a.parentNode){b=a==c||b}}}}return b};__getByCls=function(c,f,b){c=__get(c);var a=document.body,g=0,d;b=b||50;if(typeof b!="number"){d=__get(b);b=10}while(c&&c.nodeType==1&&g<b&&c!=a&&c!=d){if(__cls_has(c,f)){return c}g++;c=c.parentNode}return null};mini.copyTo(mini,{byId:__get,hasClass:__cls_has,addClass:__cls_add,removeClass:__cls_rm,getMargins:__margin,getBorders:__border,getPaddings:__padding,setWidth:__setWidth,setHeight:__setHeight,getWidth:__getWidth,getHeight:__getHeight,setBox:__setBox,getBox:__getBox,setStyle:__css_set,getStyle:__getStyle,repaint:function(a){if(!a){a=document.body}__cls_add(a,"mini-repaint");setTimeout(function(){__cls_rm(a,"mini-repaint")},1)},getSize:function(b,a){return{width:__getWidth(b,a),height:__getHeight(b,a)}},setSize:function(c,b,a){__setWidth(c,b);__setHeight(c,a)},setX:function(b,a){a=parseInt(a);var c=jQuery(b).offset(),d=parseInt(c.top);if(d===undefined){d=c[1]}mini.setXY(b,a,d)},setY:function(b,d){d=parseInt(d);var c=jQuery(b).offset(),a=parseInt(c.left);if(a===undefined){a=c[0]}mini.setXY(b,a,d)},setXY:function(b,a,d){var c={left:parseInt(a),top:parseInt(d)};jQuery(b).offset(c);if(jQuery.fn.jquery&&jQuery.fn.jquery.indexOf("1.4")!=-1){jQuery(b).offset(c)}},getXY:function(a){var b=jQuery(a).offset();return[parseInt(b.left),parseInt(b.top)]},getViewportBox:function(){var c=jQuery(window).width(),b=jQuery(window).height(),a=jQuery(document).scrollLeft(),d=jQuery(document.body).scrollTop();if(d==0&&document.documentElement){d=document.documentElement.scrollTop}return{x:a,y:d,top:d,left:a,width:c,height:b,right:a+c,bottom:d+b}},showAt:function(o){var f=jQuery;o=jQuery.extend({el:null,x:"center",y:"center",offset:[0,0],fixed:false,zindex:mini.getMaxZIndex(),timeout:0,timeoutHandler:null,constrain:false,animation:false},o);var n=jQuery(o.el)[0],l=o.x,j=o.y,c=o.offset[0],a=o.offset[1],b=o.zindex,i=o.fixed,d=o.animation;if(!n){return}if(o.timeout){setTimeout(function(){if(o.timeoutHandler){o.timeoutHandler()}},o.timeout)}var q=";position:absolute;display:block;left:auto;top:auto;right:auto;bottom:auto;margin:0;z-index:"+b+";";__css_set(n,q);q="";if(o&&mini.isNumber(l)&&mini.isNumber(j)){if(o.fixed&&!mini.isIE6){q+=";position:fixed;"}__css_set(n,q);if(o.constrain){var k=jQuery(window).width(),g=jQuery(window).height(),p=mini.getSize(n);if(l+p.width>k){l=k-p.width}if(l<0){l=0}if(j+p.height>g){j=g-p.height}if(j<0){j=0}}mini.setXY(n,l,j);return}if(l=="left"){q+="left:"+c+"px;"}else{if(l=="right"){q+="right:"+c+"px;"}else{p=mini.getSize(n);q+="left:50%;margin-left:"+(-p.width*0.5)+"px;"}}if(j=="top"){q+="top:"+a+"px;"}else{if(j=="bottom"){q+="bottom:"+a+"px;"}else{p=mini.getSize(n);q+="top:50%;margin-top:"+(-p.height*0.5)+"px;"}}if(i&&!mini.isIE6){q+="position:fixed"}__css_set(n,q)},getChildNodes:function(g,d){g=__get(g);if(!g){return}var a=g.childNodes,b=[];for(var f=0,c=a.length;f<c;f++){var i=a[f];if(i.nodeType==1||d===true){b.push(i)}}return b},removeNode:isIE?function(){var a;return function(b){if(b&&b.tagName!="BODY"){a=a||document.createElement("div");a.appendChild(b);a.innerHTML=""}}}():function(a){if(a&&a.parentNode&&a.tagName!="BODY"){a.parentNode.removeChild(a)}},removeChilds:function(g,b){g=__get(g);if(!g){return}var c=mini.getChildNodes(g,true);for(var f=0,d=c.length;f<d;f++){var a=c[f];if(b&&a==b){}else{g.removeChild(c[f])}}},isAncestor:__getById,findParent:__getByCls,findChild:function(c,a){c=__get(c);var d=c.getElementsByTagName("*");for(var b=0,f=d.length;b<f;b++){var c=d[b];if(__cls_has(c,a)){return c}}},isAncestor:function(c,a){var b=false;c=__get(c);a=__get(a);if(c===a){return true}if(c&&a){if(c.contains){try{return c.contains(a)}catch(d){return false}}else{if(c.compareDocumentPosition){return !!(c.compareDocumentPosition(a)&16)}else{while(a=a.parentNode){b=a==c||b}}}}return b},getOffsetsTo:function(b,a){var d=this.getXY(b),c=this.getXY(a);return[d[0]-c[0],d[1]-c[1]]},scrollIntoView:function(a,f,i,b){var d=__get(f)||document.body,p=this.getOffsetsTo(a,d),q=p[0]+d.scrollLeft,j=p[1]+d.scrollTop,o=j+a.offsetHeight,k=q+a.offsetWidth,c=d.clientHeight,l=parseInt(d.scrollTop,10),r=parseInt(d.scrollLeft,10),g=l+c,n=r+d.clientWidth;if(b!==false){if(a.offsetHeight>c||j<l){d.scrollTop=j}else{if(o>g){d.scrollTop=o-c}}d.scrollTop=d.scrollTop}if(i!==false){if(a.offsetWidth>d.clientWidth||q<r){d.scrollLeft=q}else{if(k>n){d.scrollLeft=k-d.clientWidth}}d.scrollLeft=d.scrollLeft}return this},getScrollOffset:function(){if(!mini._scrollOffset){var a=document.createElement("div");a.style.cssText="width:100px;background:#eee;height:50px;overflow:scroll;padding:1px;position:absolute;left:-1000px;top:0;box-sizing:content-box;-moz-box-sizing:content-box;";document.body.appendChild(a);mini._scrollOffset=a.offsetWidth-a.clientWidth;a.parentNode.removeChild(a)}return mini._scrollOffset},setOpacity:function(b,a){jQuery(b).css({opacity:a})},selectable:function(b,a){b=__get(b);if(!!a){jQuery(b).removeClass("mini-unselectable");if(isIE){b.unselectable="off"}else{b.style.MozUserSelect="";b.style.KhtmlUserSelect="";b.style.UserSelect=""}}else{jQuery(b).addClass("mini-unselectable");if(isIE){b.unselectable="on"}else{b.style.MozUserSelect="none";b.style.UserSelect="none";b.style.KhtmlUserSelect="none"}}},selectRange:function(f,d,c){if(f.createTextRange){var b=f.createTextRange();b.moveStart("character",d);b.moveEnd("character",c-f.value.length);b.select()}else{if(f.setSelectionRange){f.setSelectionRange(d,c)}}try{f.focus()}catch(a){}},getSelectRange:function(a){a=__get(a);if(!a){return}try{a.focus()}catch(b){}var f=0,d=0;if(a.createTextRange&&document.selection){var c=document.selection.createRange().duplicate();c.moveEnd("character",a.value.length);if(c.text===""){f=a.value.length}else{f=a.value.lastIndexOf(c.text)}c=document.selection.createRange().duplicate();c.moveStart("character",-a.value.length);d=c.text.length}else{f=a.selectionStart;d=a.selectionEnd}return[f,d]}});(function(){var a={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},c=document.createElement("div");c.setAttribute("class","t");var b=c.className==="t";mini.setAttr=function(g,f,d){g.setAttribute(b?f:(a[f]||f),d)};mini.getAttr=function(i,g){if(g=="height"){return jQuery(i).attr("height")}if(g=="value"&&(isIE6||isIE7)){var f=i.attributes[g];return f?f.value:null}if(!i.getAttribute){return null}var j=i.getAttribute(b?g:(a[g]||g));if(typeof j=="function"||g=="maxLength"){var d=i.attributes[g];if(d){j=d.value}}if(!j&&g=="onload"){var k=i.getAttributeNode?i.getAttributeNode(g):null;if(k){j=k.nodeValue}}return j}})();mini_preventDefault=function(){if(window.event){window.event.returnValue=false}};mini_stopPropogation=function(){if(window.event){window.event.cancelBubble=true}};mini.bind=function(c,d,a,b){if(!c){return}var f="on"+d.toLowerCase();c[f]=function(i){i=i||window.event;if(!i.target){i.target=i.srcElement}if(!i.preventDefault){i.preventDefault=mini_preventDefault}if(!i.stopPropogation){i.stopPropogation=mini_stopPropogation}var g=a.call(b,i);if(g===false){return false}}};mini.on=function(b,d,g,a){b=__get(b);a=a||b;if(!b||!d||!g||!a){return false}var f=mini.findListener(b,d,g,a);if(f){return false}var c=mini.createDelegate(g,a);mini.listeners.push([b,d,g,a,c]);if(mini.isFirefox&&d=="mousewheel"){d="DOMMouseScroll"}jQuery(b).bind(d,c)};mini.un=function(c,d,a,b){c=__get(c);b=b||c;if(!c||!d||!a||!b){return false}var f=mini.findListener(c,d,a,b);if(!f){return false}if(!mini._destroying){mini.listeners.remove(f)}if(mini.isFirefox&&d=="mousewheel"){d="DOMMouseScroll"}jQuery(c).unbind(d,f[4])};mini.copyTo(mini,{listeners:[],_getListeners:function(){var a=mini.listeners;return a},findListener:function(a,c,i,j){a=__get(a);j=j||a;if(!a||!c||!i||!j){return false}var b=mini._getListeners();for(var f=b.length-1;f>=0;f--){var g=b[f];try{if(g[0]==a&&g[1]==c&&g[2]==i&&g[3]==j){return g}}catch(d){}}},clearEvent:function(b,d){b=__get(b);if(!b){return false}if(mini._destroying){jQuery(b).unbind();return}var c=mini._getListeners();for(var f=c.length-1;f>=0;f--){var a=c[f];if(a[0]==b){if(!d||d==a[1]){mini.un(b,a[1],a[2],a[3])}}}b.onmouseover=b.onmousedown=null}});mini.__windowResizes=[];mini.onWindowResize=function(a,b){mini.__windowResizes.push([a,b])};mini.on(window,"resize",function(c){var d=mini.__windowResizes;for(var b=0,a=d.length;b<a;b++){var f=d[b];f[0].call(f[1],c)}});mini.htmlEncode=function(b){if(typeof b!=="string"){return b}var a="";if(b.length==0){return""}a=b;a=a.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");a=a.replace(/ /g,"&nbsp;");a=a.replace(/\'/g,"&#39;");a=a.replace(/\"/g,"&quot;");return a};mini.htmlDecode=function(b){if(typeof b!=="string"){return b}var a="";if(b.length==0){return""}a=b.replace(/&gt;/g,"&");a=a.replace(/&lt;/g,"<");a=a.replace(/&gt;/g,">");a=a.replace(/&nbsp;/g," ");a=a.replace(/&#39;/g,"'");a=a.replace(/&quot;/g,'"');return a};mini.copyTo(Array.prototype,{add:Array.prototype.enqueue=function(a){this[this.length]=a;return this},getRange:function(b,f){var c=[];for(var a=b;a<=f;a++){var d=this[a];if(d){c[c.length]=d}}return c},addRange:function(c){for(var b=0,a=c.length;b<a;b++){this[this.length]=c[b]}return this},clear:function(){this.length=0;return this},clone:function(){if(this.length===1){return[this[0]]}else{return Array.apply(null,this)}},contains:function(a){return(this.indexOf(a)>=0)},indexOf:function(c,d){var b=this.length;for(var a=(d<0)?Math.max(0,b+d):d||0;a<b;a++){if(this[a]===c){return a}}return -1},dequeue:function(){return this.shift()},insert:function(a,b){this.splice(a,0,b);return this},insertRange:function(b,d){for(var a=d.length-1;a>=0;a--){var c=d[a];this.splice(b,0,c)}return this},remove:function(b){var a=this.indexOf(b);if(a>=0){this.splice(a,1)}return(a>=0)},removeAt:function(a){var b=this[a];this.splice(a,1);return b},removeRange:function(a){a=a.clone();for(var c=0,b=a.length;c<b;c++){this.remove(a[c])}}});mini.isShowBackdrop=!(mini.isIE&&mini.IE_V<=8);mini._MaskID=1;mini._MaskObjects={};mini.mask=function(a){var c=__get(a);if(mini.isElement(c)){a={el:c}}else{if(typeof a=="string"){a={html:a}}}a=mini.copyTo({html:"",cls:"",style:"",backStyle:""},a);a.el=__get(a.el);if(!a.el){a.el=document.body}c=a.el;mini.unmask(a.el);c._maskid=mini._MaskID++;mini._MaskObjects[c._maskid]=a;var d=mini.append(c,'<div class="mini-mask"><div class="mini-mask-background" style="'+a.backStyle+'"></div><div class="mini-mask-msg '+a.cls+'" style="'+a.style+'">'+a.html+"</div></div>");if(c==document.body){__cls_add(d,"mini-fixed")}a.maskEl=d;if(!mini.isNull(a.opacity)){mini.setOpacity(d.firstChild,a.opacity)}function b(){f.style.display="block";var g=mini.getSize(f);f.style.marginLeft=-g.width/2+"px";f.style.marginTop=-g.height/2+"px";f.style.zIndex=mini.getMaxZIndex()}var f=d.lastChild;f.style.display="none";setTimeout(function(){b()},0)};mini.unmask=function(c){c=__get(c);if(!c){c=document.body}var b=mini._MaskObjects[c._maskid];if(!b){return}delete mini._MaskObjects[c._maskid];var a=b.maskEl;b.maskEl=null;if(a&&a.parentNode){a.parentNode.removeChild(a)}};mini.showMaskLoading=function(a){a=$.extend({el:document.body,cls:"mini-mask-loading",html:Control.prototype.loadingMsg||"加载中..."},a);return mini.mask(a)};mini.Cookie={get:function(f){var b=document.cookie.split("; "),a=null;for(var d=0;d<b.length;d++){var c=b[d].split("=");if(f==c[0]){a=c}}if(a){var g=a[1];if(g===undefined){return g}return unescape(g)}return null},set:function(f,d,c,a){var b=new Date();if(c!=null){b=new Date(b.getTime()+(c*1000*3600*24))}document.cookie=f+"="+escape(d)+((c==null)?"":("; expires="+b.toGMTString()))+";path=/"+(a?"; domain="+a:"")},del:function(a,b){this.set(a,null,-100,b)}};mini.copyTo(mini,{treeToArray:function(l,k,f,a,b){if(!k){k="children"}var j=[];for(var d=0,c=l.length;d<c;d++){var n=l[d];j[j.length]=n;if(a){n[a]=b}var i=n[k];if(i&&i.length>0){var g=n[f],o=this.treeToArray(i,k,f,a,g);j.addRange(o)}}return j},arrayToTree:function(k,d,f,o){if(!d){d="children"}f=f||"_id";o=o||"_pid";var j=[],i={};for(var c=0,a=k.length;c<a;c++){var n=k[c];if(!n){continue}var g=mini._getMap(f,n);if(g!==null&&g!==undefined){i[g]=n}delete n[d]}for(c=0,a=k.length;c<a;c++){var n=k[c],b=mini._getMap(o,n),l=i[b];if(!l){j.push(n);continue}if(!l[d]){l[d]=[]}l[d].push(n)}return j}});mini.treeToList=mini.treeToArray;mini.listToTree=mini.arrayToTree;function UUID(){var c=[],b="0123456789ABCDEF".split("");for(var a=0;a<36;a++){c[a]=Math.floor(Math.random()*16)}c[14]=4;c[19]=(c[19]&3)|8;for(a=0;a<36;a++){c[a]=b[c[a]]}c[8]=c[13]=c[18]=c[23]="-";return c.join("")}String.format=function(a){var b=Array.prototype.slice.call(arguments,1);a=a||"";return a.replace(/\{(\d+)\}/g,function(c,d){return b[d]})};String.prototype.trim=function(){var a=/^\s+|\s+$/g;return function(){return this.replace(a,"")}}();mini.copyTo(mini,{measureText:function(g,j,k){if(!this.measureEl){this.measureEl=mini.append(document.body,"<div></div>")}this.measureEl.style.cssText="position:absolute;left:-1000px;top:-1000px;visibility:hidden;";if(typeof g=="string"){this.measureEl.className=g}else{this.measureEl.className="";var d=jQuery(g),c=jQuery(this.measureEl),b=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(var a=0,i=b.length;a<i;a++){var f=b[a];c.css(f,d.css(f))}}if(k){__css_set(this.measureEl,k)}this.measureEl.innerHTML=j;return mini.getSize(this.measureEl)}});if(typeof mini_layoutOnParse=="undefined"){mini_layoutOnParse=true}mini.enableLayout=true;jQuery(function(){mini.updateDevice();setTimeout(function(){var a=document.documentElement;if((isIE6||isIE7)&&(__getStyle(document.body,"overflow")=="hidden"||(a&&__getStyle(a,"overflow")=="hidden"))){jQuery(document.body).css("overflow","visible");if(a){jQuery(a).css("overflow","visible")}}mini.__LastWindowWidth=document.documentElement.clientWidth;mini.__LastWindowHeight=document.documentElement.clientHeight;var b=new Date();mini.isReady=true;mini.parse(null,mini_layoutOnParse);__bindEvents()},1)});mini_onload=function(a){mini.on(window,"resize",mini_onresize)};mini.on(window,"load",mini_onload);mini.__LastWindowWidth=document.documentElement.clientWidth;mini.__LastWindowHeight=document.documentElement.clientHeight;mini.doWindowResizeTimer=null;mini.allowLayout=true;mini_onresize=function(b){mini.updateDevice();if(mini.doWindowResizeTimer){clearTimeout(mini.doWindowResizeTimer)}__win_display=mini.isWindowDisplay();if(__win_display==false||mini.allowLayout==false){return}if(typeof Ext!="undefined"){mini.doWindowResizeTimer=setTimeout(function(){var d=document.documentElement.clientWidth,f=document.documentElement.clientHeight;if(mini.__LastWindowWidth==d&&mini.__LastWindowHeight==f){}else{mini.__LastWindowWidth=d;mini.__LastWindowHeight=f;mini.layout(null,false)}mini.doWindowResizeTimer=null},300)}else{var a=100;try{if(parent&&parent!=window&&parent.mini){a=0}}catch(c){}mini.doWindowResizeTimer=setTimeout(function(){var d=document.documentElement.clientWidth,f=document.documentElement.clientHeight;if(mini.__LastWindowWidth==d&&mini.__LastWindowHeight==f){}else{mini.__LastWindowWidth=d;mini.__LastWindowHeight=f;mini.layout(null,false)}mini.doWindowResizeTimer=null},a)}};mini.isDisplay=function(c,a){var b=a||document.body;while(1){if(c==null||!c.style){return false}if(c&&c.style&&c.style.display=="none"){return false}if(c==b){return true}c=c.parentNode}return true};mini.isWindowDisplay=function(){try{var i=window.parent,c=i!=window;if(c){var f=i.document.getElementsByTagName("iframe"),b=i.document.getElementsByTagName("frame"),g=[];for(var l=0,j=f.length;l<j;l++){g.push(f[l])}for(l=0,j=b.length;l<j;l++){g.push(b[l])}var k=null;for(l=0,j=g.length;l<j;l++){var a=g[l];if(a.contentWindow==window){k=a;break}}if(!k){return false}return mini.isDisplay(k,i.document.body)}else{return true}}catch(d){return true}};__win_display=mini.isWindowDisplay();mini.layoutIFrames=function(b){if(!document.body){return}if(!b){b=document.body}var a=b.getElementsByTagName("iframe");setTimeout(function(){for(var f=0,d=a.length;f<d;f++){var g=a[f];try{if(mini.isDisplay(g)&&__getById(b,g)){if(g.contentWindow.mini){if(g.contentWindow.__win_display==false){g.contentWindow.__win_display=g.contentWindow.mini.isWindowDisplay();g.contentWindow.mini.layout()}else{g.contentWindow.mini.layout(null,false)}}g.contentWindow.mini.layoutIFrames()}}catch(c){}}},30)};jQuery.ajaxSetup({cache:false});if(isIE){setInterval(function(){},20000)}mini_unload=function(c){try{var j=mini._getTopWindow();j[mini._WindowID]="";delete j[mini._WindowID]}catch(d){}var g=document.body?document.body.getElementsByTagName("iframe"):null;if(g&&g.length>0){var i=[];for(var b=0,k=g.length;b<k;b++){i.push(g[b])}for(b=0,k=i.length;b<k;b++){try{var l=i[b];l._ondestroy=null;l.onload=function(){};jQuery(l).unbind("load");l.src="";if(mini.isIE){try{l.contentWindow.document.write("");l.contentWindow.document.close()}catch(d){}}if(l.parentNode){l.parentNode.removeChild(l)}}catch(c){}}}mini._destroying=true;var f=mini.getComponents().clone();for(b=0,k=f.length;b<k;b++){var a=f[b];if(a.destroyed!==true){a.destroy(false)}}f.length=0;f=null;mini.clearEvent(window);mini.clearEvent(document);mini.un(window,"unload",mini_unload);mini.un(window,"load",mini_onload);mini.un(window,"resize",mini_onresize);mini.components={};mini.classes={};mini.uiClasses={};mini.uids={};mini.listeners.length=0;mini._topWindow=null;window.mini=null;window.Owner=null;window.CloseOwnerWindow=null};mini.on(window,"unload",mini_unload);function _o10O(){}mini.zIndex=1000;mini.zindex=mini.getMaxZIndex=function(){return mini.zIndex++};function js_isTouchDevice(){try{document.createEvent("TouchEvent");return true}catch(a){return false}}function l1o1(b){if(js_isTouchDevice()){var c=typeof b=="string"?document.getElementById(b):b,a=0;c.addEventListener("touchstart",function(d){a=this.scrollTop+d.touches[0].pageY;d.preventDefault()},false);c.addEventListener("touchmove",function(d){this.scrollTop=a-d.touches[0].pageY;d.preventDefault()},false)}}olOOO0=function(c){c=__get(c);if(!c||!isIE||isIE10||isIE11){return}function a(){var f=c._placeholder_label;if(!f){return}var d=c.getAttribute("placeholder");if(!d){d=c.placeholder}if(!c.value){f.innerHTML=d;f.style.display=""}else{f.style.display="none"}}if(c._placeholder){a();return}c._placeholder=true;var b=document.createElement("label");b.className="mini-placeholder-label";c.parentNode.appendChild(b);c._placeholder_label=b;b.onmousedown=function(){try{c.focus()}catch(d){}};c.onpropertychange=function(d){d=d||window.event;if(d.propertyName=="value"){a()}};a();mini.on(c,"focus",function(d){if(!c.readOnly){b.style.display="none"}});mini.on(c,"blur",function(d){a()})};mini.ajax=function(a){if(!a.dataType){a.dataType="text"}return window.jQuery.ajax(a)};__eval=function($,B){var A=$,_=typeof $;if(_=="string"){A=window.eval("("+$+")");if(typeof A=="function"){A=A.call(B)}}return A};var hasOn=!!jQuery.fn.on;if(!jQuery.fn.on){jQuery.fn.on=function(d,a,c,b){return this.delegate(a,d,c,b)}}mini._lastDevice;mini.updateDevice=function(){var b="mini-xs",c=jQuery(window).width(),a="xs";if(c>768){b+=" mini-sm";a="sm"}if(c>992){b+=" mini-md";a="md"}if(c>1200){b+=" mini-lg";a="lg"}b+=" mini-"+a+"-active";if(mini._lastDevice==a){return}jQuery(document.documentElement).removeClass("mini-xs mini-sm mini-md mini-lg mini-xs-active mini-sm-active mini-md-active mini-lg-active ").addClass(b);if(mini._lastDevice!=a){jQuery(window).triggerHandler("devicechange",a)}mini._lastDevice=a};mini.getClipboard=function(b){var a="";if(window.clipboardData){a=window.clipboardData.getData("Text")}else{if(b){a=b.clipboardData.getData("text/plain")}}return a};mini.setClipboard=function(a){if(window.clipboardData){window.clipboardData.setData("Text",a)}else{var b=jQuery('<textarea style="position:absolute;left:0;top:-1000px;width:100px;z-index:1000;"></textarea>').appendTo("body").val(a)[0];b.select();b.focus();document.execCommand("copy")}};mini.getActiveElement=function(){try{return document.activeElement}catch(a){}};if(typeof window.rootpath=="undefined"){rootpath="/"}mini.loadJS=function(b,a){if(!b){return}if(typeof a=="function"){return loadJS._async(b,a)}else{return loadJS._sync(b)}};mini.loadJS._js={};mini.loadJS._async=function(a,g){var d=mini.loadJS._js[a];if(!d){d=mini.loadJS._js[a]={create:false,loaded:false,callbacks:[]}}if(d.loaded){setTimeout(function(){g()},1);return}else{d.callbacks.push(g);if(d.create){return}}d.create=true;var c=document.getElementsByTagName("head")[0],f=document.createElement("script");f.src=a;f.type="text/javascript";function b(){for(var i=0;i<d.callbacks.length;i++){var j=d.callbacks[i];if(j){j()}}d.callbacks.length=0}setTimeout(function(){if(document.all){f.onreadystatechange=function(){if(f.readyState=="loaded"||f.readyState=="complete"){b();d.loaded=true}}}else{f.onload=function(){b();d.loaded=true}}c.appendChild(f)},1);return f};mini.loadJS._sync=function(b){if(loadJS._js[b]){return}loadJS._js[b]={create:true,loaded:true,callbacks:[]};var c=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript";a.text=loadText(b);c.appendChild(a);return a};mini.loadText=function(f){var g="",d=document.all&&location.protocol=="file:",c=null;if(d){c=new ActiveXObject("Microsoft.XMLHTTP")}else{if(window.XMLHttpRequest){c=new XMLHttpRequest()}else{if(window.ActiveXObject){c=new ActiveXObject("Microsoft.XMLHTTP")}}}c.onreadystatechange=a;var b="_t="+new Date().getTime();if(f.indexOf("?")==-1){b="?"+b}else{b="&"+b}f+=b;c.open("GET",f,false);c.send(null);function a(){if(c.readyState==4){var i=d?0:200;if(c.status==i){g=c.responseText}}}return g};mini.loadJSON=function(_){var $=loadText(_),A=window.eval("("+$+")");return A};mini.loadCSS=function(b,d){if(!b){return}if(loadCSS._css[b]){return}var c=document.getElementsByTagName("head")[0],a=document.createElement("link");if(d){a.id=d}a.href=b;a.rel="stylesheet";a.type="text/css";c.appendChild(a);return a};mini.loadCSS._css={};mini.innerHTML=function(b,a){if(typeof b=="string"){b=document.getElementById(b)}if(!b){return}a='<div style="display:none">&nbsp;</div>'+a;b.innerHTML=a;mini.__executeScripts(b);var c=b.firstChild};mini.__executeScripts=function(b){var f=b.getElementsByTagName("script");for(var g=0,d=f.length;g<d;g++){var c=f[g],a=c.src;if(a){mini.loadJS(a)}else{var i=document.createElement("script");i.type="text/javascript";i.text=c.text;b.appendChild(i)}}for(g=f.length-1;g>=0;g--){c=f[g];c.parentNode.removeChild(c)}};Hidden=function(){Hidden.superclass.constructor.apply(this,arguments)};mini.extend(Hidden,Control,{_clearBorder:false,formField:true,value:"",uiCls:"mini-hidden"});mini.copyTo(Hidden.prototype,{getFormValue:function(){return this.el.value},getValue:function(){return this.value},setValue:function(a){if(a===null||a===undefined){a=""}this.value=a;if(mini.isDate(a)){var b=a.getFullYear(),d=a.getMonth()+1,c=a.getDate();d=d<10?"0"+d:d;c=c<10?"0"+c:c;this.el.value=b+"-"+d+"-"+c}else{this.el.value=a}},setName:function(a){this.name=a;this.el.name=a},_create:function(){this.el=document.createElement("input");this.el.type="hidden";this.el.className="mini-hidden"}});mini.regClass(Hidden,"hidden");Popup=function(){Popup.superclass.constructor.apply(this,arguments);this.setVisible(false);this.setAllowDrag(this.allowDrag);this.setAllowResize(this.allowResize)};mini.extend(Popup,mini.Container,{_clearBorder:false,uiCls:"mini-popup"});mini.copyTo(Popup.prototype,{getAttrs:function(b){var a=Popup.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["popupEl","popupCls","showAction","hideAction","xAlign","yAlign","modalStyle","onbeforeopen","open","onbeforeclose","onclose"]);mini._ParseBool(b,a,["showModal","showShadow","allowDrag","allowResize"]);mini._ParseInt(b,a,["showDelay","hideDelay","xOffset","yOffset","minWidth","minHeight","maxWidth","maxHeight"]);var c=mini.getChildNodes(b,true);a.body=c;return a},setBody:function(a){if(!a){return}if(!mini.isArray(a)){a=[a]}for(var c=0,b=a.length;c<b;c++){mini.append(this._contentEl,a[c])}},setHeight:function(a){if(parseInt(a)==a){a+="px"}this.height=a;if(a.indexOf("px")!=-1){__setHeight(this.el,a)}else{this.el.style.height=a}this._sizeChanged()},setWidth:function(a){if(parseInt(a)==a){a+="px"}this.width=a;if(a.indexOf("px")!=-1){__setWidth(this.el,a)}else{this.el.style.width=a}this._sizeChanged()},destroy:function(a){if(this.el){this.el.onmouseover=null}if(!mini._destroying){mini.un(document,"mousedown",this.o0ll,this);mini.un(window,"resize",this.o0010,this)}if(a!==false){if(this.Oll0l0){jQuery(this.Oll0l0).remove()}if(this.shadowEl){jQuery(this.shadowEl).remove()}if(this._shimEl){jQuery(this._shimEl).remove()}}this.Oll0l0=null;this.shadowEl=null;this._shimEl=null;Popup.superclass.destroy.call(this,a)},doLayout:function(){if(!this.canLayout()){return}Popup.superclass.doLayout.call(this);this.OlO01();var c=this.el.childNodes;if(c){for(var b=0,d=c.length;b<d;b++){var a=c[b];mini.layout(a)}}},_create:function(){var a=this.el=document.createElement("div");this.el.className="mini-popup";this._contentEl=this.el}});mini.regClass(Popup,"popup");popup_prototype={isPopup:false,popupEl:null,popupCls:"",showAction:"mouseover",hideAction:"outerclick",showDelay:300,hideDelay:500,xAlign:"left",yAlign:"below",xOffset:0,yOffset:0,minWidth:50,minHeight:25,maxWidth:2000,maxHeight:2000,showModal:false,showShadow:true,modalStyle:"opacity:0.2",l0110O:"mini-popup-drag",O0lOO0:"mini-popup-resize",allowDrag:false,allowResize:false,looo:function(){if(!this.popupEl){return}mini.un(this.popupEl,"click",this.oO1oo1,this);mini.un(this.popupEl,"contextmenu",this.lll1o,this);mini.un(this.popupEl,"mouseover",this.lloO,this)},l1oO1:function(){if(!this.popupEl){return}mini.on(this.popupEl,"click",this.oO1oo1,this);mini.on(this.popupEl,"contextmenu",this.lll1o,this);mini.on(this.popupEl,"mouseover",this.lloO,this)},doShow:function(b){var c={popupEl:this.popupEl,htmlEvent:b,cancel:false};this.fire("BeforeOpen",c);if(c.cancel==true){return}this.fire("opening",c);if(c.cancel==true){return}if(!this.popupEl){this.show()}else{var a={};if(b){a.xy=[b.pageX,b.pageY]}this.showAtEl(this.popupEl,a)}},doHide:function(a){var b={popupEl:this.popupEl,htmlEvent:a,cancel:false};this.fire("BeforeClose",b);if(b.cancel==true){return}this.close()},show:function(a,b){this.showAtPos(a,b)},showAtPos:function(b,a){this.render(document.body);if(!b){b="center"}if(!a){a="middle"}this.el.style.position="absolute";this.el.style.left="-2000px";this.el.style.top="-2000px";this.el.style.display="";this.o11O();var c=mini.getViewportBox(),d=__getBox(this.el);if(b=="left"){b=0}if(b=="center"){b=c.width/2-d.width/2}if(b=="right"){b=c.width-d.width}if(a=="top"){a=0}if(a=="middle"){a=c.y+c.height/2-d.height/2}if(a=="bottom"){a=c.height-d.height}if(b+d.width>c.right){b=c.right-d.width}if(a+d.height>c.bottom){a=c.bottom-d.height-20}this.O0O0lO(b,a)},o0lo:function(){jQuery(this.Oll0l0).remove();if(!this.showModal){return}if(this.visible==false){return}var c=document.documentElement,f=parseInt(Math.max(document.body.scrollWidth,c?c.scrollWidth:0)),a=parseInt(Math.max(document.body.scrollHeight,c?c.scrollHeight:0)),b=mini.getViewportBox(),d=b.height;if(d<a){d=a}var g=b.width;if(g<f){g=f}this.Oll0l0=mini.append(document.body,'<div class="mini-modal"></div>');this.Oll0l0.style.height=d+"px";this.Oll0l0.style.width=g+"px";this.Oll0l0.style.zIndex=__getStyle(this.el,"zIndex")-1;__css_set(this.Oll0l0,this.modalStyle)},_doShim:function(){if(!mini_useShims){return}if(!this._shimEl){var b="<iframe frameborder='0' style='position:absolute; z-index:-1; width:0; height:0; top:0;left:0;scrolling:no;'></iframe>";this._shimEl=mini.append(document.body,b)}function a(){this._shimEl.style.display="";var d=__getBox(this.el),f=this._shimEl.style;f.width=d.width+"px";f.height=d.height+"px";f.left=d.x+"px";f.top=d.y+"px";var g=__getStyle(this.el,"zIndex");if(!isNaN(g)){this._shimEl.style.zIndex=g-3}}this._shimEl.style.display="none";if(this._doShimTimer){clearTimeout(this._doShimTimer);this._doShimTimer=null}var c=this;this._doShimTimer=setTimeout(function(){c._doShimTimer=null;a.call(c)},20)},OlO01:function(){if(!this.shadowEl){this.shadowEl=mini.append(document.body,'<div class="mini-shadow"></div>')}this.shadowEl.style.display=this.showShadow?"":"none";if(this.showShadow){function a(){this.shadowEl.style.display="";var c=__getBox(this.el),d=this.shadowEl.style;d.width=c.width+"px";d.height=c.height+"px";d.left=c.x+"px";d.top=c.y+"px";var f=__getStyle(this.el,"zIndex");if(!isNaN(f)){this.shadowEl.style.zIndex=f-2}}this.shadowEl.style.display="none";if(this.OlO01Timer){clearTimeout(this.OlO01Timer);this.OlO01Timer=null}var b=this;this.OlO01Timer=setTimeout(function(){b.OlO01Timer=null;a.call(b)},20)}},o11O:function(){this.el.style.display="";var a=__getBox(this.el);if(a.width>this.maxWidth){__setWidth(this.el,this.maxWidth);a=__getBox(this.el)}if(a.height>this.maxHeight){__setHeight(this.el,this.maxHeight);a=__getBox(this.el)}if(a.width<this.minWidth){__setWidth(this.el,this.minWidth);a=__getBox(this.el)}if(a.height<this.minHeight){__setHeight(this.el,this.minHeight);a=__getBox(this.el)}},_getWindowOffset:function(a){return[0,0]},showAtEl:function(b,k){b=__get(b);if(!b){return}if(!this.isRender()||this.el.parentNode!=document.body){this.render(document.body)}var d={atEl:b,popupEl:this.el,xAlign:this.xAlign,yAlign:this.yAlign,xOffset:this.xOffset,yOffset:this.yOffset,popupCls:this.popupCls};mini.copyTo(d,k);__cls_add(b,d.popupCls);b.popupCls=d.popupCls;this._popupEl=b;this.el.style.position="absolute";this.el.style.left="-2000px";this.el.style.top="-2000px";this.el.style.display="";this.doLayout();this.o11O();var p=mini.getViewportBox(),s=__getBox(this.el),q=__getBox(b),f=d.xy,a=d.xAlign,l=d.yAlign,j=p.width/2-s.width/2,i=0;if(f){j=f[0];i=f[1]}switch(d.xAlign){case"outleft":j=q.x-s.width;break;case"left":j=q.x;break;case"center":j=q.x+q.width/2-s.width/2;break;case"right":j=q.right-s.width;break;case"outright":j=q.right;break;default:break}switch(d.yAlign){case"above":i=q.y-s.height;break;case"top":i=q.y;break;case"middle":i=q.y+q.height/2-s.height/2;break;case"bottom":i=q.bottom-s.height;break;case"below":i=q.bottom;break;default:break}j=parseInt(j);i=parseInt(i);var g=this._getWindowOffset(k);if(d.outYAlign||d.outXAlign){if(d.outYAlign=="above"){if(i+s.height>p.bottom){var o=q.y-p.y,c=p.bottom-q.bottom;if(o>c){i=q.y-s.height}}}if(d.outYAlign=="below"){if(i+s.height>p.bottom){o=q.y-p.y,c=p.bottom-q.bottom;if(o>c){i=q.y-s.height}}}if(d.outXAlign=="outleft"){if(j+s.width>p.right){var n=q.x-p.x,r=p.right-q.right;if(n>r){j=q.x-s.width}}}if(d.outXAlign=="right"){if(j+s.width>p.right){j=q.right-s.width}}if(d.alwaysView){if(i<0){i=0}if(i+s.height>p.bottom){i=p.bottom-s.height}if(j<0){j=0}if(j+s.width>p.right){j=p.right-s.width}}this.O0O0lO(j+g[0],i+g[1])}else{this.showAtPos(j+d.xOffset+g[0],i+d.yOffset+g[1])}},O0O0lO:function(b,a){this.el.style.display="";this.el.style.zIndex=mini.getMaxZIndex();mini.setX(this.el,b);mini.setY(this.el,a);this.setVisible(true);if(this.hideAction=="mouseout"){mini.on(document,"mousemove",this.l1l000,this)}var c=this;this.OlO01();this.o0lo();this._doShim();mini.layoutIFrames(this.el);this.isPopup=true;mini.on(document,"mousedown",this.o0ll,this);mini.on(window,"resize",this.o0010,this);this.fire("Open")},open:function(){this.show()},close:function(){this.hide()},hide:function(){if(!this.el){return}if(this.popupEl){__cls_rm(this.popupEl,this.popupEl.popupCls)}if(this._popupEl){__cls_rm(this._popupEl,this._popupEl.popupCls)}this._popupEl=null;jQuery(this.Oll0l0).remove();if(this.shadowEl){this.shadowEl.style.display="none"}if(this._shimEl){this._shimEl.style.display="none"}mini.un(document,"mousemove",this.l1l000,this);mini.un(document,"mousedown",this.o0ll,this);mini.un(window,"resize",this.o0010,this);this.setVisible(false);this.isPopup=false;this.fire("Close")},setPopupEl:function(a){a=__get(a);if(!a){return}this.looo();this.popupEl=a;this.l1oO1()},setPopupCls:function(a){this.popupCls=a},setShowAction:function(a){this.showAction=a},setHideAction:function(a){this.hideAction=a},setShowDelay:function(a){this.showDelay=a},setHideDelay:function(a){this.hideDelay=a},setXAlign:function(a){this.xAlign=a},setYAlign:function(a){this.yAlign=a},setxOffset:function(a){a=parseInt(a);if(isNaN(a)){a=0}this.xOffset=a},setyOffset:function(a){a=parseInt(a);if(isNaN(a)){a=0}this.yOffset=a},setShowModal:function(a){this.showModal=a},setShowShadow:function(a){this.showShadow=a},setMinWidth:function(a){if(isNaN(a)){return}this.minWidth=a},setMinHeight:function(a){if(isNaN(a)){return}this.minHeight=a},setMaxWidth:function(a){if(isNaN(a)){return}this.maxWidth=a},setMaxHeight:function(a){if(isNaN(a)){return}this.maxHeight=a},setAllowDrag:function(a){this.allowDrag=a;__cls_rm(this.el,this.l0110O);if(a){__cls_add(this.el,this.l0110O)}},setAllowResize:function(a){this.allowResize=a;__cls_rm(this.el,this.O0lOO0);if(a){__cls_add(this.el,this.O0lOO0)}},oO1oo1:function(a){if(this.ooo0Oo){return}if(this.showAction!="leftclick"){return}var b=jQuery(this.popupEl).attr("allowPopup");if(String(b)=="false"){return}this.doShow(a)},lll1o:function(a){if(this.ooo0Oo){return}if(this.showAction!="rightclick"){return}var b=jQuery(this.popupEl).attr("allowPopup");if(String(b)=="false"){return}a.preventDefault();this.doShow(a)},lloO:function(a){if(this.ooo0Oo){return}if(this.showAction!="mouseover"){return}var c=jQuery(this.popupEl).attr("allowPopup");if(String(c)=="false"){return}clearTimeout(this._hideTimer);this._hideTimer=null;if(this.isPopup){return}var b=this;this._showTimer=setTimeout(function(){b.doShow(a)},this.showDelay)},l1l000:function(a){if(this.hideAction!="mouseout"){return}this.Oll00(a)},o0ll:function(a){if(this.hideAction!="outerclick"){return}if(!this.isPopup){return}if(jQuery(a.target).closest(".mini-popup")[0]){return}if(this.within(a)||(this.popupEl&&__getById(this.popupEl,a.target))){}else{this.doHide(a)}},Oll00:function(a){if(__getById(this.el,a.target)||(this.popupEl&&__getById(this.popupEl,a.target))){}else{clearTimeout(this._showTimer);this._showTimer=null;if(this._hideTimer){return}var b=this;this._hideTimer=setTimeout(function(){b.doHide(a)},this.hideDelay)}},o0010:function(a){if(this.isDisplay()&&!mini.isIE6){this.o0lo()}},within:function(a){if(__getById(this.el,a.target)){return true}var c=mini.getChildControls(this);for(var f=0,d=c.length;f<d;f++){var b=c[f];if(b.within(a)){return true}}return false}};mini.copyTo(Popup.prototype,popup_prototype);(function(){if(hasOn){var a=mini.getTopWindow();if(a){function c(d,f){if(f==document){}else{jQuery(document).trigger("mousedown")}}jQuery(a.document).on("topmousedown",c);function b(d){var f=a.jQuery;if(f){f(a.document).trigger("topmousedown",[document])}}jQuery(document).on("mousedown",b);jQuery(window).on("unload",function(){jQuery(a.document).off("topmousedown",c);jQuery(document).off("mousedown",b)})}}})();Button=function(){Button.superclass.constructor.apply(this,arguments)};mini.extend(Button,Control,{text:"",iconCls:"",iconStyle:"",plain:false,checkOnClick:false,checked:false,groupName:"",img:"",o01oO:"mini-button-plain",_hoverCls:"mini-button-hover",oll001:"mini-button-pressed",OOoO1O:"mini-button-checked",_cls_disabled:"mini-button-disabled",allowCls:"",_clearBorder:false,uiCls:"mini-button",href:"",target:""});mini.copyTo(Button.prototype,{getAttrs:function(b){var a=Button.superclass.getAttrs.call(this,b);a.text=b.innerHTML;mini._ParseString(b,a,["text","href","iconCls","iconStyle","iconPosition","groupName","menu","onclick","oncheckedchanged","target","img"]);mini._ParseBool(b,a,["plain","checkOnClick","checked"]);return a},onClick:function(a,b){this.on("click",a,b)},OlO111:function(a){this.removeCls(this.oll001);mini.un(document,"mouseup",this.OlO111,this)},lOO1l1:function(a){if(this.isReadOnly()){return}this.addCls(this.oll001);mini.on(document,"mouseup",this.OlO111,this)},l11o00:function(g){if(!this.href&&g){g.preventDefault()}if(this.readOnly||this.enabled==false){return}this.focus();if(this.checkOnClick){if(this.groupName){var b=this.groupName,a=mini.findControls(function(i){if(i.type=="button"&&i.groupName==b){return true}});if(a.length>0){for(var f=0,d=a.length;f<d;f++){var c=a[f];if(c!=this){c.setChecked(false)}}this.setChecked(true)}else{this.setChecked(!this.checked)}}else{this.setChecked(!this.checked)}}this.fire("click",{htmlEvent:g})},doClick:function(){this.l11o00(null)},getChecked:function(){return this.checked},setChecked:function(a){var b=this.checked!=a;this.checked=a;if(a){this.addCls(this.OOoO1O)}else{this.removeCls(this.OOoO1O)}if(b){this.fire("CheckedChanged")}},getCheckOnClick:function(){return this.checkOnClick},setCheckOnClick:function(a){this.checkOnClick=a},getGroupName:function(){return this.groupName},setGroupName:function(a){this.groupName=a},getPlain:function(){return this.plain},setPlain:function(a){this.plain=a;if(a){this.addCls(this.o01oO)}else{this.removeCls(this.o01oO)}},getIconPosition:function(){return this.iconPosition},setIconPosition:function(a){this.iconPosition="left";this.doUpdate()},getImg:function(){return this.img},setImg:function(a){this.img=a;this.doUpdate()},getIconStyle:function(){return this.iconStyle},setIconStyle:function(a){this.iconStyle=a;this.doUpdate()},getIconCls:function(){return this.iconCls},setIconCls:function(a){this.iconCls=a;this.doUpdate()},getText:function(){return this.text},setText:function(a){if(this.text!=a){this.text=a;this.doUpdate()}},getTarget:function(){return this.target},setTarget:function(a){this.target=a;this.el.target=a},getHref:function(){return this.href},setHref:function(a){this.href=a;this.el.href=a;var b=this.el;setTimeout(function(){b.onclick=null},100)},doUpdate:function(){if(this._canUpdate===false){return}var g="",f=this.text,b=this.iconStyle||this.iconCls||this.img;if(b&&f){g=" mini-button-icon-text "}else{if(b&&f===""){g=" mini-button-icon-only ";f="&nbsp;"}else{if(f==""){f="&nbsp;"}}}var d=this.iconStyle||"";if(!d&&this.img){d="background-image:url("+this.img+")"}var a="";if(b){a='<span class="mini-button-icon mini-iconfont '+this.iconCls+'" style="'+d+'"></span>'}var c='<span class="mini-button-text '+g+'">'+a+f+"</span>";if(this.allowCls){c=c+'<span class="mini-button-allow '+this.allowCls+'"></span>'}this.el.innerHTML=c},destroy:function(a){if(this.el){this.el.onclick=null;this.el.onmousedown=null}if(this.menu){this.menu.owner=null}this.menu=null;Button.superclass.destroy.call(this,a)},_initEvents:function(){__initEvents(function(){mini.bind(this.el,"mousedown",this.lOO1l1,this);mini.bind(this.el,"click",this.l11o00,this)},this)},_create:function(){this.el=document.createElement("a");this.el.className="mini-button";this.el.hideFocus=true;this.el.href="javascript:void(0)";this.doUpdate()},set:function(a){if(typeof a=="string"){return this}this._canUpdate=a.text||a.iconStyle||a.iconCls||a.iconPosition;Button.superclass.set.call(this,a);if(this._canUpdate===false){this._canUpdate=true;this.doUpdate()}return this}});mini.regClass(Button,"button");MenuButton=function(){MenuButton.superclass.constructor.apply(this,arguments)};mini.extend(MenuButton,Button,{uiCls:"mini-menubutton",allowCls:"mini-button-menu"});MenuButton.prototype.setEnabled=function(a){this.enabled=a;if(a){this.removeCls(this._cls_disabled)}else{this.addCls(this._cls_disabled)}jQuery(this.el).attr("allowPopup",!!a)};MenuButton.prototype.setMenu=function(a){if(mini.isArray(a)){a={type:"menu",items:a}}if(typeof a=="string"){var c=__get(a);if(!c){return}mini.parse(a);a=mini.get(a)}if(this.menu!==a){this.menu=mini.getAndCreate(a);this.menu.setPopupEl(this.el);this.menu.setPopupCls("mini-button-popup");this.menu.setShowAction("leftclick");this.menu.setHideAction("outerclick");this.menu.setXAlign("left");this.menu.setYAlign("below");this.menu.hide();this.menu.owner=this;this.menu.addCls("mini-menu-open");var b=this;this.menu.on("BeforeOpen",function(d){if(b.split&&!jQuery(d.htmlEvent.target).closest(".mini-button-split")[0]){d.cancel=true}})}};mini.regClass(MenuButton,"menubutton");mini.SplitButton=function(){mini.SplitButton.superclass.constructor.apply(this,arguments)};mini.extend(mini.SplitButton,MenuButton,{split:true,uiCls:"mini-splitbutton",allowCls:"mini-button-split",l11o00:function(b){var a=this;if(a.split&&jQuery(b.target).closest(".mini-button-split")[0]){return}mini.SplitButton.superclass.l11o00.call(this,b)}});mini.regClass(mini.SplitButton,"splitbutton");CheckBox=function(){CheckBox.superclass.constructor.apply(this,arguments)};mini.extend(CheckBox,Control,{formField:true,_clearText:false,text:"",checked:false,defaultValue:false,trueValue:true,falseValue:false,checkedCls:"mini-checkbox-checked",uiCls:"mini-checkbox"});mini.copyTo(CheckBox.prototype,{getAttrs:function(b){var d=CheckBox.superclass.getAttrs.call(this,b),a=jQuery(b);d.text=b.innerHTML;mini._ParseString(b,d,["text","oncheckedchanged","onclick","onvaluechanged"]);mini._ParseBool(b,d,["enabled"]);var f=mini.getAttr(b,"checked");if(f){d.checked=(f=="true"||f=="checked")?true:false}var g=a.attr("trueValue");if(g){d.trueValue=g;g=parseInt(g);if(!isNaN(g)){d.trueValue=g}}var c=a.attr("falseValue");if(c){d.falseValue=c;c=parseInt(c);if(!isNaN(c)){d.falseValue=c}}return d},lO0ool:function(a){if(this.isReadOnly()){return}this.setChecked(!this.checked);this.fire("checkedchanged",{checked:this.checked});this.fire("valuechanged",{value:this.getValue()});this.fire("click",a,this)},getFalseValue:function(){return this.falseValue},setFalseValue:function(a){this.falseValue=a},getTrueValue:function(){return this.trueValue},setTrueValue:function(a){this._checkEl.value=a;this.trueValue=a},getFormValue:function(){return this.getValue()},getValue:function(){return String(this.checked==true?this.trueValue:this.falseValue)},setValue:function(a){if(this.checked!==a){this.setChecked(a);this.value=this.getValue()}},getChecked:function(){return this.checked},setChecked:function(a){if(a===true){a=true}else{if(String(a)==String(this.trueValue)){a=true}else{if(a=="true"){a=true}else{if(a=="True"){a=true}else{if(String(a)==="1"){a=true}else{if(a=="Y"){a=true}else{a=false}}}}}}if(this.checked!==a){this.checked=!!a;this._checkEl.checked=this.checked;this.value=this.getValue()}var b=jQuery(this.el);if(this.checked){b.addClass(this.checkedCls)}else{b.removeClass(this.checkedCls)}},getText:function(){return this.text},setText:function(a){if(this.text!==a){this.text=a;this._labelEl.innerHTML=a}},setName:function(a){this.name=a;mini.setAttr(this._checkEl,"name",this.name)},_initEvents:function(){__initEvents(function(){mini.on(this.el,"click",this.lO0ool,this);var a=this;mini.on(this.el,"keyup",function(c){if(c.keyCode==32){$(c.target).click()}});this._checkEl.onmouseup=function(){return false};var b=this;this._checkEl.onclick=function(){if(b.isReadOnly()){return false}};this._checkEl.checked=this.checked},this)},destroy:function(a){if(this._checkEl){this._checkEl.onmouseup=null;this._checkEl.onclick=null;this._checkEl=null}CheckBox.superclass.destroy.call(this,a)},_create:function(){var a=this.uid+"$check";this.el=document.createElement("span");this.el.className="mini-checkbox";this.el.innerHTML='<input id="'+a+'" name="'+this.id+'" type="checkbox" class="mini-checkbox-check"><span class="mini-checkbox-icon" tabIndex="0"></span><label for="'+a+'" onclick="return false;">'+this.text+"</label>";this._checkEl=this.el.firstChild;this._labelEl=this.el.lastChild},set:function(a){if(typeof a=="string"){return this}var b=this;if(!mini.isNull(a.trueValue)){b.setTrueValue(a.trueValue);delete a.trueValue}if(!mini.isNull(a.falseValue)){b.setFalseValue(a.falseValue);delete a.falseValue}CheckBox.superclass.set.call(this,a);return this}});mini.regClass(CheckBox,"checkbox");jQuery(function(){setTimeout(function(){var a=mini.getComponents();for(var f=0,d=a.length;f<d;f++){var b=a[f];if(b instanceof TextBox){var c=b.getTextEl().value;if(b.value!==c){b.value=c}}}},300)});TextBox=function(){TextBox.superclass.constructor.apply(this,arguments)};mini.extend(TextBox,ValidatorBase,{name:"",formField:true,selectOnFocus:false,allowInput:true,minWidth:10,minHeight:15,maxLength:5000,emptyText:"",text:"",value:"",defaultValue:"",height:21,l0Oolo:"mini-textbox-empty",o10lo:"mini-textbox-focus",_cls_disabled:"mini-textbox-disabled",uiCls:"mini-textbox",oolo1O:"text",Ol0oo:false,_placeholdered:false,lO10:null,inputStyle:"",vtype:""});mini.copyTo(TextBox.prototype,{getRangeErrorText:function(){return this.rangeErrorText},setRangeErrorText:function(a){this.rangeErrorText=a},getRangeCharErrorText:function(){return this.rangeCharErrorText},setRangeCharErrorText:function(a){this.rangeCharErrorText=a},getRangeLengthErrorText:function(){return this.rangeLengthErrorText},setRangeLengthErrorText:function(a){this.rangeLengthErrorText=a},getMinErrorText:function(){return this.minErrorText},setMinErrorText:function(a){this.minErrorText=a},getMaxErrorText:function(){return this.maxErrorText},setMaxErrorText:function(a){this.maxErrorText=a},getMinLengthErrorText:function(){return this.minLengthErrorText},setMinLengthErrorText:function(a){this.minLengthErrorText=a},getMaxLengthErrorText:function(){return this.maxLengthErrorText},setMaxLengthErrorText:function(a){this.maxLengthErrorText=a},getDateErrorText:function(){return this.dateErrorText},setDateErrorText:function(a){this.dateErrorText=a},getIntErrorText:function(){return this.intErrorText},setIntErrorText:function(a){this.intErrorText=a},getFloatErrorText:function(){return this.floatErrorText},setFloatErrorText:function(a){this.floatErrorText=a},getUrlErrorText:function(){return this.urlErrorText},setUrlErrorText:function(a){this.urlErrorText=a},getEmailErrorText:function(){return this.emailErrorText},setEmailErrorText:function(a){this.emailErrorText=a},llO0O:function(a){if(a.isValid==false){return}mini.lll1oo(this.vtype,a.value,a,this)},getVtype:function(){return this.vtype},setVtype:function(a){this.vtype=a},getAttrs:function(c){var a=TextBox.superclass.getAttrs.call(this,c),b=jQuery(c);mini._ParseString(c,a,["value","text","emptyText","inputStyle","onenter","onkeydown","onkeyup","onkeypress","onclick","maxLengthErrorText","minLengthErrorText","onfocus","onblur","vtype","emailErrorText","urlErrorText","floatErrorText","intErrorText","dateErrorText","minErrorText","maxErrorText","rangeLengthErrorText","rangeErrorText","rangeCharErrorText"]);mini._ParseBool(c,a,["allowInput","selectOnFocus"]);mini._ParseInt(c,a,["maxLength","minLength","minHeight","minWidth"]);return a},setInputStyle:function(a){this.inputStyle=a;__css_set(this._textEl,a)},oo0o0:function(a){this.OO0OO1=false;var b=this;setTimeout(function(){if(b.OO0OO1==false){b.removeCls(b.o10lo)}},2);this.fire("blur",{htmlEvent:a});if(this.validateOnLeave&&this.isEditable()){this._tryValidate()}},oOlOo0:function(b){this.doUpdate();if(this.isReadOnly()){return}this.OO0OO1=true;this.addCls(this.o10lo);this.OOO11();if(this.selectOnFocus){var a=this;setTimeout(function(){a.selectText()},1)}this.fire("focus",{htmlEvent:b})},l0Ol1:function(a){this.fire("keypress",{htmlEvent:a})},Oo0oo:function(a){this.fire("keyup",{htmlEvent:a})},o0oOlo:function(b){var c={htmlEvent:b};this.fire("keydown",c);if(b.keyCode==8&&(this.isReadOnly()||this.allowInput==false)){return false}if(b.keyCode==27||b.keyCode==13||b.keyCode==9){if(this.oolo1O=="textarea"&&b.keyCode==13){}else{this.O1O1(null);if(b.keyCode==13){var a=this;a.fire("enter",c)}}}if(b.keyCode==27){b.preventDefault()}},O0Oo:function(b){var a=this;setTimeout(function(){a.O1O1(b)},0)},O1O1:function(b,c){var a=this.value;this.setValue(this._textEl.value);if(a!==this.getValue()||c===true){this.fireValueChanged()}},lOO1l1:function(a){var b=this;if(this.oolo1O=="textarea"){return}if(!__getById(this._textEl,a.target)){setTimeout(function(){b.focus();mini.selectRange(b._textEl,10000,10000)},1)}else{setTimeout(function(){try{b._textEl.focus()}catch(c){}},1)}},l11o00:function(a){if(!this.enabled){return}this.fire("click",{htmlEvent:a})},o1011:function(){if(this.lO10){var a=this.lO10;jQuery(a).remove()}this.lO10=null},getErrorIconEl:function(){if(!this.lO10){this.lO10=mini.append(this.el,'<span class="mini-errorIcon"></span>')}return this.lO10},getSelectOnFocus:function(a){return this.selectOnFocus},setSelectOnFocus:function(a){this.selectOnFocus=a},getInputText:function(){return this._textEl.value},getTextEl:function(){return this._textEl},selectText:function(){var b=this;function a(){try{b._textEl.select()}catch(c){}}a()},blur:function(){try{this._textEl.blur()}catch(a){}},focus:function(){var a=this;setTimeout(function(){try{a._textEl.focus();if(mini.isIE){var b=a._textEl.createTextRange();b.collapse(false);b.select()}}catch(c){}},10)},doUpdate:function(){if(this.enabled){this.removeCls(this._cls_disabled)}else{this.addCls(this._cls_disabled)}if(this.isReadOnly()||this.allowInput==false){this._textEl.readOnly=true;__cls_add(this.el,"mini-textbox-readOnly")}else{this._textEl.readOnly=false;__cls_rm(this.el,"mini-textbox-readOnly")}if(this.required){this.addCls(this.OO1lo)}else{this.removeCls(this.OO1lo)}if(this.enabled){this._textEl.disabled=false}else{this._textEl.disabled=true}},setEnabled:function(a){if(this.enabled!=a){this.enabled=a;this.doUpdate()}},setReadOnly:function(a){if(this.readOnly!=a){this.readOnly=a;this.doUpdate()}},getMaxLength:function(){return this.maxLength},ooo1o:function(a){if(this._textEl.value.length>=this.maxLength){this.__OnPaste(a);a.preventDefault()}},__OnPaste:function(a){var b=this;setTimeout(function(){var c=b._textEl.value;if(c.length>b.maxLength){b._textEl.value=c.substring(0,b.maxLength)}b.O1O1()},0)},setMaxLength:function(a){this.maxLength=a;mini.setAttr(this._textEl,"maxLength",a);if(this.oolo1O=="textarea"&&mini.isIE){mini.on(this._textEl,"keyup",this.ooo1o,this);mini.on(this._textEl,"keypress",this.ooo1o,this);mini.on(this._textEl,"paste",this.__OnPaste,this)}},getEmptyText:function(){return this.emptyText},setEmptyText:function(a){if(this.emptyText!=a){this.emptyText=a;this.O0llo0()}},O0llo0:function(){this._textEl.placeholder=this.emptyText;if(this.emptyText){olOOO0(this._textEl)}},getAllowInput:function(){return this.allowInput},setAllowInput:function(a){if(this.allowInput!=a){this.allowInput=a;this.doUpdate()}},getFormValue:function(){var a=this.value;if(a===null||a===undefined){a=""}return String(a)},getText:function(){return this._textEl.value},setText:function(a){if(mini.isNull(a)){a=""}this._textEl.value=a},getValue:function(){return this.value},setValue:function(a){if(a===null||a===undefined){a=""}a=String(a);if(a.length>this.maxLength){a=a.substring(0,this.maxLength)}this.value=a;this._valueEl.value=this._textEl.value=a;this.O0llo0()},setName:function(a){if(this.name!=a){this.name=a;if(this._valueEl){mini.setAttr(this._valueEl,"name",this.name)}}},setHeight:function(a){if(parseInt(a)==a){a+="px"}this.height=a;if(this.oolo1O=="textarea"){this.el.style.height=a;this.doLayout()}},doLayout:function(){if(this._doLabelLayout){this._labelLayout()}},destroy:function(b){if(this.el){this.el.onmousedown=null}if(this._textEl){var a=this._textEl;if(a._placeholder_label){a._placeholder_label.onmousedown=null;a._placeholder_label=null}a.onpropertychange=a.ondrop=a.onchange=a.onfocus=null;mini.clearEvent(a);this._textEl=null}if(this._valueEl){mini.clearEvent(this._valueEl);this._valueEl=null}TextBox.superclass.destroy.call(this,b)},OOO11:function(){if(this.Ol0oo){return}this.Ol0oo=true;mini.on(this._textEl,"blur",this.oo0o0,this);mini.on(this._textEl,"keydown",this.o0oOlo,this);mini.on(this._textEl,"keyup",this.Oo0oo,this);mini.on(this._textEl,"keypress",this.l0Ol1,this);mini.bind(this.el,"click",this.l11o00,this)},_initEvents:function(){__initEvents(function(){mini.bind(this._textEl,"drop",this.O0Oo,this);mini.bind(this._textEl,"change",this.O1O1,this);mini.bind(this._textEl,"focus",this.oOlOo0,this);mini.bind(this.el,"mousedown",this.lOO1l1,this);var a=this.value;this.value=null;if(this.el){this.setValue(a)}},this);this.on("validation",this.llO0O,this)},_create:function(){var a='<input  type="'+this.oolo1O+'" class="mini-textbox-input" autocomplete="off"/>';if(this.oolo1O=="textarea"){a='<textarea  class="mini-textbox-input" autocomplete="off"/></textarea>'}a='<span class="mini-textbox-border">'+a+"</span>";a+='<input type="hidden"/>';this.el=document.createElement("span");this.el.className="mini-textbox";this.el.innerHTML=a;this._borderEl=this.el.firstChild;this._textEl=this._borderEl.firstChild;this._valueEl=this._borderEl.lastChild;this.O0llo0()}});mini.regClass(TextBox,"textbox");Password=function(){Password.superclass.constructor.apply(this,arguments)};mini.extend(Password,TextBox,{uiCls:"mini-password",oolo1O:"password"});Password.prototype.getValue=function(){return this._textEl.value};mini.regClass(Password,"password");TextArea=function(){TextArea.superclass.constructor.apply(this,arguments)};mini.extend(TextArea,TextBox,{maxLength:10000000,height:"",minHeight:50,oolo1O:"textarea",uiCls:"mini-textarea"});TextArea.prototype.doLayout=function(){if(!this.canLayout()){return}TextArea.superclass.doLayout.call(this);var a=__getHeight(this.el);if(mini.isIE6){__setHeight(this._borderEl,a)}a-=2;if(a<0){a=0}this._textEl.style.height=a+"px"};mini.regClass(TextArea,"textarea");ButtonEdit=function(){ButtonEdit.superclass.constructor.apply(this,arguments);var a=this.isReadOnly();if(a||this.allowInput==false){this._textEl.readOnly=true}if(this.enabled==false){this.addCls(this._cls_disabled)}if(a){this.addCls(this._cls_readonly)}if(this.required){this.addCls(this.OO1lo)}};mini.extend(ButtonEdit,ValidatorBase,{name:"",formField:true,selectOnFocus:false,showButton:true,buttonToolTip:"",closeToolTip:"",showClose:false,emptyText:"",defaultValue:"",defaultText:"",value:"",text:"",maxLength:1000,minLength:0,height:21,inputAsValue:true,allowInput:true,Oo0o0:"mini-buttonedit-noInput",_cls_readonly:"mini-buttonedit-readOnly",_cls_disabled:"mini-buttonedit-disabled",l0Oolo:"mini-buttonedit-empty",o10lo:"mini-buttonedit-focus",O1lo0o:"mini-buttonedit-button",O0l0:"mini-buttonedit-button-hover",lo11:"mini-buttonedit-button-pressed",_closeCls:"mini-buttonedit-close",uiCls:"mini-buttonedit",_deferSetText:true,Ol0oo:false,_buttonWidth:20,_closeWidth:20,autoClear:false,lO10:null,textName:"",inputStyle:""});mini.copyTo(ButtonEdit.prototype,{getAttrs:function(_){var B=ButtonEdit.superclass.getAttrs.call(this,_),A=jQuery(_);mini._ParseString(_,B,["value","text","textName","emptyText","inputStyle","defaultText","onenter","onkeydown","onkeyup","onkeypress","onbuttonclick","onbuttonmousedown","ontextchanged","onfocus","onblur","oncloseclick","onclick","buttons","buttonToolTip"]);mini._ParseBool(_,B,["allowInput","inputAsValue","selectOnFocus","showClose","showButton","autoClear"]);mini._ParseInt(_,B,["maxLength","minLength"]);var $=B.buttons;if($){$=window.eval("("+$+")");B.buttons=$||null}return B},setInputStyle:function(a){this.inputStyle=a;__css_set(this._textEl,a)},getShowButton:function(){return this.showButton},setShowButton:function(a){this.showButton=a;this._doInputLayout()},getShowClose:function(a){return this.showClose},setShowClose:function(a){this.showClose=a;this._doInputLayout()},getSelectOnFocus:function(a){return this.selectOnFocus},setSelectOnFocus:function(a){this.selectOnFocus=a},getTextName:function(){return this.textName},setTextName:function(a){this.textName=a;if(this._textEl){mini.setAttr(this._textEl,"name",this.textName)}},onTextChanged:function(a,b){this.on("textchanged",a,b)},onButtonMouseDown:function(a,b){this.on("buttonmousedown",a,b)},onButtonClick:function(a,b){this.on("buttonclick",a,b)},lo00lo:function(b,a){this.focus();this.addCls(this.o10lo);this.fire("buttonmousedown",{htmlEvent:b,spinType:a})},l01l:function(b){var a={htmlEvent:b,cancel:false};this.fire("beforebuttonclick",a);if(a.cancel==true){return}this.fire("buttonclick",a)},l0Ol1:function(a){this.fire("keypress",{htmlEvent:a})},Oo0oo:function(a){this.fire("keyup",{htmlEvent:a})},O1O1:function(){var b=this._textEl.value;if(b==this.text){return}var a=this.getValue();this.setText(b);if(this.inputAsValue){this.setValue(b);if(a!==this.getFormValue()){this.fireValueChanged()}}},o0oOlo:function(a){var c={htmlEvent:a};this.fire("keydown",c);if(a.keyCode==8&&(this.isReadOnly()||this.allowInput==false)){return false}if(a.keyCode==27||a.keyCode==13||a.keyCode==9){var b=this;b.O1O1(null);if(a.keyCode==13){var d=this;d.fire("enter",c)}}if(a.keyCode==27){a.preventDefault()}},oo0o0:function(b){var a=this;a.OO0OO1=false;setTimeout(function(){a.__fireBlur(b)},10)},__fireBlur:function(b){var c=this;function a(){if(c.OO0OO1==false){c.removeCls(c.o10lo);if(c.validateOnLeave&&c.isEditable()){c._tryValidate()}this.fire("blur",{htmlEvent:b})}}setTimeout(function(){a.call(c)},2)},__doFocusCls:function(){if(this.OO0OO1==false){this.removeCls(this.o10lo)}},oOlOo0:function(a){this.doUpdate();this.OOO11();if(this.isReadOnly()){return}this.OO0OO1=true;this.addCls(this.o10lo);if(this.selectOnFocus){this.selectText()}this.fire("focus",{htmlEvent:a})},OlO111:function(b){this._clickTarget=null;var a=this;setTimeout(function(){var f=a._buttonEl.getElementsByTagName("*");for(var d=0,c=f.length;d<c;d++){__cls_rm(f[d],a.lo11)}__cls_rm(a._buttonEl,a.lo11);__cls_rm(a.el,a.oll001);jQuery(".mini-buttonedit-button",a._buttonsEl).removeClass(a.lo11)},80);mini.un(document,"mouseup",this.OlO111,this)},lOO1l1:function(b){if(this.isReadOnly()||this.enabled==false){return}if(!__getById(this._borderEl,b.target)){return}if(!__getById(this._textEl,b.target)){this._clickTarget=b.target;var c=this;setTimeout(function(){c.focus();mini.selectRange(c._textEl,1000,1000)},1);if(__getById(this._buttonEl,b.target)){var f=__getByCls(b.target,"mini-buttonedit-up"),d=__getByCls(b.target,"mini-buttonedit-down");if(f){__cls_add(f,this.lo11);this.lo00lo(b,"up")}else{if(d){__cls_add(d,this.lo11);this.lo00lo(b,"down")}else{__cls_add(this._buttonEl,this.lo11);this.lo00lo(b)}}}mini.on(document,"mouseup",this.OlO111,this);var a=__getByCls(b.target,"mini-buttonedit-button");if(a){__cls_add(a,this.lo11)}}},_handlerButtonElClick:function(b){var a=__getByCls(b.target,"mini-buttonedit-button");if(a&&a!=this._buttonEl&&a!=this._closeEl){var f=jQuery(a).attr("name"),c=this.getButtonByName(f),d={sender:this,button:c,htmlEvent:b};if(c.handler){c.handler(d)}}},l11o00:function(a){if(this.enabled==false){return}this.fire("click",{htmlEvent:a});if(this.isReadOnly()){return}if(!__getById(this._borderEl,a.target)){return}var b=new Date();if(__getById(this._buttonEl,a.target)){this.l01l(a)}if(__getByCls(a.target,this._closeCls)){if(this.autoClear){if((this.value&&this.value!==0)||this.text!==""){this.setValue("");this.setText("");this.fireValueChanged()}}this.fire("closeclick",{htmlEvent:a})}this._handlerButtonElClick(a)},o1011:function(){if(this.lO10){var a=this.lO10;jQuery(a).remove()}this.lO10=null},getErrorIconEl:function(){if(!this.lO10){this.lO10=mini.append(this.el,'<span class="mini-errorIcon"></span>')}return this.lO10},getButtonToolTip:function(){return this.buttonToolTip},setButtonToolTip:function(a){this.buttonToolTip=a},getAutoClear:function(){return this.autoClear},setAutoClear:function(a){this.autoClear=a},getInputAsValue:function(){return this.inputAsValue},setInputAsValue:function(a){this.inputAsValue=a},getAllowInput:function(){return this.allowInput},setAllowInput:function(a){this.allowInput=a;this._doReadOnly()},_doReadOnly:function(){var a=this.isReadOnly();if(a||this.allowInput==false){this._textEl.readOnly=true}else{this._textEl.readOnly=false}if(a){this.addCls(this._cls_readonly)}else{this.removeCls(this._cls_readonly)}if(this.allowInput){this.removeCls(this.Oo0o0)}else{this.addCls(this.Oo0o0)}if(this.enabled){this._textEl.disabled=false}else{this._textEl.disabled=true}},setEnabled:function(a){ButtonEdit.superclass.setEnabled.call(this,a)},getMinLength:function(){return this.minLength},setMinLength:function(a){a=parseInt(a);if(isNaN(a)){return}this.minLength=a},getMaxLength:function(){return this.maxLength},setMaxLength:function(a){a=parseInt(a);if(isNaN(a)){return}this.maxLength=a;this._textEl.maxLength=a},getEmptyText:function(){return this.emptyText},setEmptyText:function(a){if(this.emptyText!=a){this.emptyText=a;this.O0llo0()}},O0llo0:function(){this._textEl.placeholder=this.emptyText;if(this.emptyText){olOOO0(this._textEl)}},getFormValue:function(){var a=this.value;if(a===null||a===undefined){a=""}return String(a)},getValue:function(){return this.value},setValue:function(a){if(a===null||a===undefined){a=""}var b=this.value!==a;this.value=a;this._valueEl.value=this.getFormValue()},getText:function(){return this._textEl.value},setText:function(a){if(a===null||a===undefined){a=""}var b=this.text!==a;this.text=a;this._textEl.value=a;this.O0llo0()},setName:function(a){this.name=a;if(this._valueEl){mini.setAttr(this._valueEl,"name",this.name)}},getTextEl:function(){return this._textEl},selectText:function(){this._textEl.select()},blur:function(){try{this._textEl.blur()}catch(a){}},focus:function(){try{this._textEl.focus();var b=this;setTimeout(function(){if(b.OO0OO1){b._textEl.focus()}},10)}catch(a){}},setHeight:function(a){if(parseInt(a)==a){a+="px"}this.height=a},doLayout:function(){if(this._noLayout){this._doInputLayout(false)}if(this._doLabelLayout){this._labelLayout()}},_doInputLayout:function(a){this._buttonEl.style.display=this.showButton?"inline-block":"none";this._buttonEl.title=this.buttonToolTip;if(this._closeEl){this._closeEl.style.display=this.showClose?"inline-block":"none";this._closeEl.title=this.closeToolTip}if(mini.isNull(ButtonEdit._paddingOffset)){var c=__padding(this._borderEl);ButtonEdit._paddingOffset=c.left}var d=this._buttonsEl.offsetWidth,b=d+(d>0?0:ButtonEdit._paddingOffset);if(b==2){this._noLayout=true}else{this._noLayout=false}this._borderEl.style.paddingRight=b+"px";if(a!==false){this.doLayout()}},OOO11:function(){if(this.Ol0oo){return}this.Ol0oo=true;mini.on(this.el,"click",this.l11o00,this);mini.on(this._textEl,"blur",this.oo0o0,this);mini.on(this._textEl,"keydown",this.o0oOlo,this);mini.on(this._textEl,"keyup",this.Oo0oo,this);mini.on(this._textEl,"keypress",this.l0Ol1,this)},__input:function(){},_initEvents:function(){__initEvents(function(){mini.bind(this.el,"mousedown",this.lOO1l1,this);mini.bind(this._textEl,"focus",this.oOlOo0,this);mini.bind(this._textEl,"change",this.O1O1,this);var a=this.text;this.text=null;if(this.el){if(this._deferSetText){this.setText(a)}}if(mini.isIE){mini.on(this._textEl,"input",this.__input,this)}},this)},destroy:function(a){if(this._textEl){this._textEl.onchange=this._textEl.onfocus=null;mini.clearEvent(this._textEl);this._textEl=null}this._borderEl=this._buttonsEl=this._buttonEl=this._closeEl=this._valueEl=null;ButtonEdit.superclass.destroy.call(this,a)},_create:function(){this.el=document.createElement("span");this.el.className="mini-buttonedit";var a=this.OOO0OsHTML();this.el.innerHTML='<span class="mini-buttonedit-border"><input type="text" class="mini-buttonedit-input" autocomplete="off"/>'+a+'</span><input name="'+this.name+'" type="hidden"/>';this._borderEl=this.el.firstChild;this._textEl=this._borderEl.firstChild;this._valueEl=this.el.lastChild;this._buttonsEl=this._borderEl.lastChild;this._buttonEl=this._buttonsEl.lastChild;this._closeEl=this._buttonEl.previousSibling;this.O0llo0()},OOO0OHtml:function(c,a,b){return this._createButtonHtml(c,a,b)},OOO0OsHTML:function(){var a='<span class="mini-buttonedit-close" name="close"></span>'+this.OOO0OHtml("trigger","",this.buttonToolTip);return'<span class="mini-buttonedit-buttons">'+a+"</span>"},_createButtonHtml:function(b,d,a){b=b||"";d=d||"";a=a||"";var c="onmouseover=\"__cls_add(this,'"+this.O0l0+"');\" onmouseout=\"__cls_rm(this,'"+this.O0l0+"');\"";return'<span title="'+a+'" name="'+b+'" class="mini-buttonedit-button mini-buttonedit-'+b+'" '+c+'><span class="mini-buttonedit-icon '+d+'"></span></span>'},getButtonByName:function(b){var c=this.getButtons();for(var a=0,f=c.length;a<f;a++){var d=c[a];if(d.name&&d.name==b){return d}}return null},getButtons:function(){return this.buttons||[]},setButtons:function(d){var a=this;jQuery(".mini-buttonedit-button:not(.mini-buttonedit-trigger)",this.el).remove();a.buttons=d||[];var f="";function g(j){f+=a._createButtonHtml(j.name,j.iconCls,j.tooltip)}for(var i=0,c=a.buttons.length;i<c;i++){var b=a.buttons[i];if(!b.name){b.name="button"+i}g(b)}mini.append(a._buttonsEl,f);a._doInputLayout(false)},set:function(c){if(typeof c=="string"){return this}var a=c.value;delete c.value;var b=c.text;delete c.text;this._canUpdate=!(c.enabled==false||c.allowInput==false||c.readOnly);ButtonEdit.superclass.set.call(this,c);if(this._canUpdate===false){this._canUpdate=true;this.doUpdate()}if(!mini.isNull(b)){this.setText(b)}if(!mini.isNull(a)){this.setValue(a)}return this}});mini.regClass(ButtonEdit,"buttonedit");PopupEdit=function(){PopupEdit.superclass.constructor.apply(this,arguments);this._createPopup();this.el.className+=" mini-popupedit"};mini.extend(PopupEdit,ButtonEdit,{uiCls:"mini-popupedit",popup:null,popupCls:"mini-buttonedit-popup",_hoverCls:"mini-buttonedit-hover",oll001:"mini-buttonedit-pressed",_destroyPopup:true,popupWidth:"100%",popupMinWidth:50,popupMaxWidth:2000,popupHeight:"",popupMinHeight:30,popupMaxHeight:2000,showPopupOnClick:false,alwaysView:false});mini.copyTo(PopupEdit.prototype,{getAttrs:function(b){var a=PopupEdit.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["popupWidth","popupHeight","popup","onshowpopup","onhidepopup","onbeforeshowpopup"]);mini._ParseInt(b,a,["popupMinWidth","popupMaxWidth","popupMinHeight","popupMaxHeight"]);mini._ParseBool(b,a,["showPopupOnClick","alwaysView"]);return a},O00lO:function(a){if(a.name=="close"){this.hidePopup()}a.cancel=true},l11o00:function(b){if(this.enabled==false){return}this.fire("click",{htmlEvent:b});if(this.isReadOnly()){return}if(__getById(this._buttonEl,b.target)){this.l01l(b)}if(__getByCls(b.target,this._closeCls)){if(this.isShowPopup()){this.hidePopup()}if(this.autoClear){if((this.value&&this.value!==0)||this.text!==""){this.setValue("");this.setText("");this.fireValueChanged()}}this.fire("closeclick",{htmlEvent:b});return}if(this.allowInput==false||__getById(this._buttonEl,b.target)||this.showPopupOnClick){var a=__getByCls(b.target,"mini-buttonedit-button");if(a&&a!=this._buttonEl){}else{if(this.isShowPopup()){this.hidePopup();this.focus()}else{var c=this;setTimeout(function(){c.showPopup()},1)}}}this._handlerButtonElClick(b)},getShowPopupOnClick:function(a){return this.showPopupOnClick},setShowPopupOnClick:function(a){this.showPopupOnClick=a},getPopupMinHeight:function(a){return this.popupMinHeight},getPopupMaxHeight:function(a){return this.popupMaxHeight},getPopupHeight:function(a){return this.popupHeight},setPopupMinHeight:function(a){this.popupMinHeight=a},setPopupMaxHeight:function(a){this.popupMaxHeight=a},setPopupHeight:function(a){this.popupHeight=a},getPopupMinWidth:function(a){return this.popupMinWidth},getPopupMaxWidth:function(a){return this.popupMaxWidth},getPopupWidth:function(a){return this.popupWidth},setPopupMinWidth:function(a){this.popupMinWidth=a},setPopupMaxWidth:function(a){this.popupMaxWidth=a},setPopupWidth:function(a){this.popupWidth=a},getAlwaysView:function(){return this.alwaysView},setAlwaysView:function(a){this.alwaysView=a},isShowPopup:function(){if(this.popup&&this.popup.isDisplay()){return true}else{return false}},hidePopup:function(){if(this.isShowPopup()){var a=this.getPopup();a.close();if(this._autoBlur!==false){this.blur()}}},Oo0o0l:function(a){if(this._textChanged){this._textChanged=false;this.O1O1()}this.__doFocusCls();this.fire("hidepopup")},O1o11lAtEl:function(b,a){var c=this.getPopup();c.showAtEl(b,a)},_syncShowPopup:function(){var c=this.getPopup();if(this._popupInner&&this._popupInner.el.parentNode!=this.popup._contentEl){this.popup._contentEl.appendChild(this._popupInner.el);this._popupInner.setVisible(true)}var d=__getBox(this._borderEl),b=this.popupWidth;if(this.popupWidth=="100%"){b=d.width}c.show(-1000,-1000);c.setWidth(b);var a=parseInt(this.popupHeight);if(!isNaN(a)){c.setHeight(a)}else{c.setHeight("auto")}c.setMinWidth(this.popupMinWidth);c.setMinHeight(this.popupMinHeight);c.setMaxWidth(this.popupMaxWidth);c.setMaxHeight(this.popupMaxHeight);var f={xAlign:"left",yAlign:"below",outYAlign:"above",outXAlign:"right",popupCls:this.popupCls,alwaysView:this.alwaysView};this.O1o11lAtEl(this._borderEl,f)},__OnDocumentMousewheel:function(a){var c=this;function b(){if(!c.isShowPopup()){return}var f=c._mousewheelXY,d=mini.getXY(c.el);if(f[0]!=d[0]||f[1]!=d[1]){c.hidePopup()}else{setTimeout(b,300)}}setTimeout(b,300)},_onDocumentMousewheel:function(){this._unDocumentMousewheel();this._mousewheelXY=mini.getXY(this.el);mini.on(document,"mousewheel",this.__OnDocumentMousewheel,this)},_unDocumentMousewheel:function(){mini.un(document,"mousewheel",this.__OnDocumentMousewheel,this);this._mousewheelXY=null},showPopup:function(){var a={cancel:false};if(this._firebeforeshowpopup!==false){this.fire("beforeshowpopup",a);if(a.cancel==true){return false}}var b=this.getPopup();this._syncShowPopup();b.on("Close",this.Oo0o0l,this);this._onDocumentMousewheel();this.fire("showpopup")},oO01Ol:function(a){},ll100:function(a){if(this.within(a.htmlEvent)){a.cancel=true}else{this._unDocumentMousewheel()}},__OnPopupClose:function(a){},_createPopup:function(){this.popup=new Popup();this.popup.setShowAction("none");this.popup.setHideAction("outerclick");this.popup.setPopupEl(this.el);this.popup.on("BeforeClose",this.ll100,this);this.popup.on("close",this.__OnPopupClose,this);mini.on(this.popup.el,"keydown",this.oO01Ol,this)},getPopup:function(){if(!this.popup){this._createPopup()}return this.popup},setPopup:function(a){if(typeof a=="string"){mini.parse(a);a=mini.get(a)}var b=mini.getAndCreate(a);if(!b){return}b.setVisible(false);this._popupInner=b;b.owner=this;b.on("beforebuttonclick",this.O00lO,this)},within:function(a){if(__getById(this.el,a.target)){return true}if(this.popup.within(a)){return true}return false},O1O1:function(a){if(this.isShowPopup()){this._textChanged=true}else{this._textChanged=false;PopupEdit.superclass.O1O1.call(this,a)}},o0oOlo:function(a){this.fire("keydown",{htmlEvent:a});if(a.keyCode==8&&(this.isReadOnly()||this.allowInput==false)){return false}if(a.keyCode==9){this.hidePopup();return}if(a.keyCode==27){this.hidePopup();return}if(a.keyCode==13){this.fire("enter")}if(this.isShowPopup()){if(a.keyCode==13||a.keyCode==27){a.stopPropagation()}}},lOO1l1:function(a){if(this.isReadOnly()){return}PopupEdit.superclass.lOO1l1.call(this,a);if(this.allowInput==false&&__getByCls(a.target,"mini-buttonedit-border")){__cls_add(this.el,this.oll001);mini.on(document,"mouseup",this.OlO111,this)}},lol11:function(a){if(this.isReadOnly()||this.allowInput){return}this.removeCls(this._hoverCls)},lloO:function(b){if(this.isReadOnly()||this.allowInput){return}if(__getByCls(b.target,"mini-buttonedit-border")){var a=__getByCls(b.target,"mini-buttonedit-button");if(a&&a!=this._buttonEl){}else{this.addCls(this._hoverCls)}}},oo0o0:function(a){this.OO0OO1=false;if(this._clickTarget&&__getById(this.el,this._clickTarget)){return}if(this.isShowPopup()){return}PopupEdit.superclass.oo0o0.call(this,a)},_initEvents:function(){PopupEdit.superclass._initEvents.call(this);__initEvents(function(){mini.bind(this.el,"mouseover",this.lloO,this);mini.bind(this.el,"mouseout",this.lol11,this)},this)},destroy:function(a){if(this.isShowPopup()){this.hidePopup()}if(this.popup){if(this._destroyPopup){this.popup.destroy()}this.popup=null}if(this._popupInner){this._popupInner.owner=null;this._popupInner=null}if(this.el){this.el.onmouseover=this.el.onmouseout=null}this.oOll0=this.tree=null;PopupEdit.superclass.destroy.call(this,a)}});mini.regClass(PopupEdit,"popupedit");ComboBox=function(){this.data=[];this.columns=[];ComboBox.superclass.constructor.apply(this,arguments);this._initInput()};mini.extend(ComboBox,PopupEdit,{text:"",value:"",valueField:"id",textField:"text",dataField:"",delimiter:",",multiSelect:false,data:[],url:"",valueInCheckOrder:true,columns:[],allowInput:false,valueFromSelect:false,popupMaxHeight:200,autoFocusItem:false,uiCls:"mini-combobox",changeOnSelectMethod:false,clearOnLoad:true,pinyinField:"tag",showNullItem:false,autoFilter:true});mini.copyTo(ComboBox.prototype,{getAttrs:function(d){var o=ComboBox.superclass.getAttrs.call(this,d);mini._ParseString(d,o,["url","data","textField","valueField","displayField","nullItemText","pinyinField","delimiter","ondrawcell","onbeforeload","onpreload","onload","onloaderror","onitemclick","onbeforeitemclick"]);mini._ParseBool(d,o,["multiSelect","showNullItem","valueFromSelect","valueInCheckOrder","clearOnLoad","autoFilter","autoFocusItem"]);if(o.displayField){o.textField=o.displayField}var b=o.valueField||this.valueField,n=o.textField||this.textField;if(d.nodeName.toLowerCase()=="select"){var k=[];for(var c=0,a=d.length;c<a;c++){var f=d.options[c],l={};l[n]=f.text;l[b]=f.value;k.push(l)}if(k.length>0){o.data=k}}else{var j=mini.getChildNodes(d);for(c=0,a=j.length;c<a;c++){var i=j[c],g=jQuery(i).attr("property");if(!g){continue}g=g.toLowerCase();if(g=="columns"){o.columns=mini.O0O1O1(i)}else{if(g=="data"){o.data=i.innerHTML}}}}return o},getAutoFilter:function(){return this.autoFilter},setAutoFilter:function(a){this.autoFilter=a},setAjaxOptions:function(a){this.ajaxOptions=a;this.oOll0.setAjaxOptions(a)},setAjaxType:function(a){this.ajaxType=a;this.oOll0.setAjaxType(a)},setAjaxData:function(a){this.ajaxData=a;this.oOll0.setAjaxData(a)},O1O1:function(d){if(this.isShowPopup()){this._textChanged=true;return}this._textChanged=false;if(this.multiSelect==false){var j=this._textEl.value,l=this.getData(),g=null;for(var b=0,a=l.length;b<a;b++){var f=l[b],p=f[this.textField],c=f[this.valueField];if(p==j){if(mini.isNull(this.value)||this.value===""||this.value==c){g=f;break}}}if(g){this.oOll0.setValue(g?g[this.valueField]:"");var k=this.oOll0.getValue(),n=this.oOll0.oO1l(k),i=this.getValue();this.setValue(k);this.setText(n[1])}else{if(this.valueFromSelect){this.setValue("");this.setText("")}else{this.setValue(j);this.setText(j)}}if(i!=this.getValue()){var o=this;o.fireValueChanged()}}},findItems:function(a){return this.oOll0.findItems(a)},Oo0o0l:function(a){if(this.valueFromSelect||this._textChanged){this._textChanged=false;this.O1O1()}if(this._textEl.value==""){this.oOll0.oOol0O()}if(this._filtered){this._filtered=false;if(this.oOll0.el){this.oOll0.setData(this.data)}}this.__doFocusCls();this.fire("hidepopup")},l00Ol:function(j){if(!this.autoFilter){return}if(this.multiSelect==true){return}var f=[];j=j.toUpperCase();for(var c=0,k=this.data.length;c<k;c++){var i=this.data[c],a=mini._getMap(this.textField,i),g=mini._getMap(this.pinyinField,i);a=a?String(a).toUpperCase():"";g=g?String(g).toUpperCase():"";if(a.indexOf(j)!=-1||g.indexOf(j)!=-1){f.push(i)}}this.oOll0.setData(f);this._filtered=true;if(j!==""||this.isShowPopup()){this.showPopup();var b=0;if(this.oOll0.getShowNullItem()){b=1}var d=this;d.oOll0.o10l0(b,true)}},lOOoo:function(b){var a=this;setTimeout(function(){var c=a._textEl.value;if(c!=b){a.l00Ol(c)}},10)},l0Ol1:function(a){this.fire("keypress",{htmlEvent:a})},Oo0oo:function(a){this.fire("keyup",{htmlEvent:a})},o0oOlo:function(g,f){var j={htmlEvent:g};this.fire("keydown",j);if(g.keyCode==8&&(this.isReadOnly()||this.allowInput==false)){return false}if(g.keyCode==9){if(this.isShowPopup()){this._autoBlur=false;this.hidePopup();delete this._autoBlur}return}if(this.isReadOnly()){return}switch(g.keyCode){case 27:g.preventDefault();if(this.isShowPopup()){g.stopPropagation()}this.hidePopup();this.focus();break;case 13:if(this.isShowPopup()){g.preventDefault();g.stopPropagation();var d=this.oOll0.getFocusedIndex(),a=this.oOll0.getAt(d);if(a&&a.enabled!==false){if(d!=-1){var b={item:a,cancel:false};this.fire("beforeitemclick",b);if(b.cancel==false){if(this.multiSelect){}else{this.oOll0.deselectAll();this.oOll0.select(a)}var c=this.oOll0.getSelecteds(),i=this.oOll0.oO1l(c);this.setValue(i[0]);this.setText(i[1]);this.fireValueChanged()}}}this.hidePopup();this.focus()}else{this.fire("enter",j)}break;case 37:break;case 38:g.preventDefault();d=this.oOll0.getFocusedIndex();if(d==-1){d=0;if(!this.multiSelect){a=this.oOll0.findItems(this.value)[0];if(a){d=this.oOll0.indexOf(a)}}}if(this.isShowPopup()){if(!this.multiSelect){d-=1;if(d<0){d=0}this.oOll0.o10l0(d,true)}}break;case 39:break;case 40:g.preventDefault();d=this.oOll0.getFocusedIndex();if(d==-1){d=-1;if(!this.multiSelect){a=this.oOll0.findItems(this.value)[0];if(a){d=this.oOll0.indexOf(a)}}}if(this.isShowPopup()){if(!this.multiSelect){d+=1;if(d>this.oOll0.getCount()-1){d=this.oOll0.getCount()-1}this.oOll0.o10l0(d,true)}}else{if(this.keyNavEnabled){this.showPopup();if(!this.multiSelect){this.oOll0.o10l0(d,true)}}}break;default:if(this.allowInput==false){}else{this.lOOoo(this._textEl.value)}break}},O100:function(i,g){var d={item:i.item,cancel:false};if(g!==false){this.fire("beforeitemclick",d);if(d.cancel){return}}var f=this.oOll0.getSelecteds(),a=this.oOll0.oO1l(f),c=this.getValue();this.setValue(a[0]);this.setText(a[1]);if(i){if(g!==false){if(c!=this.getValue()){var b=this;setTimeout(function(){b.fireValueChanged()},1)}if(!this.multiSelect){this.hidePopup()}this.focus();this.fire("itemclick",{item:i.item})}}},__OnBeforeItemClick:function(a){var b={item:a.item,cancel:false};this.fire("beforeitemclick",b);if(b.cancel){a.cancel=true}},__OnItemDrawCell:function(a){this.fire("drawcell",a)},getSelected:function(){return this.getSelecteds()[0]},getSelecteds:function(){return this.oOll0.findItems(this.value)},fireValueChanged:function(){if(this.validateOnChanged){this._tryValidate()}var b=this;function a(){var c=b.getValue(),d=b.getSelecteds(),f=d[0];b.fire("valuechanged",{value:c,selecteds:d,selected:f})}setTimeout(function(){a()},50)},getValueFromSelect:function(){return this.valueFromSelect},setValueFromSelect:function(a){this.valueFromSelect=a},getNullItemText:function(){return this.nullItemText},setNullItemText:function(a){if(this.nullItemText!=a){this.nullItemText=a;this.oOll0.setNullItemText(a)}},getShowNullItem:function(){return this.showNullItem},setShowNullItem:function(a){if(this.showNullItem!=a){this.showNullItem=a;this.oOll0.setShowNullItem(a)}},getColumns:function(){return this.columns},setColumns:function(a){if(!mini.isArray(a)){a=[]}this.columns=a;this.oOll0.setColumns(a)},getMultiSelect:function(){return this.multiSelect},setMultiSelect:function(a){if(this.multiSelect!=a){this.multiSelect=a;if(this.oOll0){this.oOll0.setMultiSelect(a);this.oOll0.setShowCheckBox(a)}}},setValue:function(d){if(mini.isNull(d)){d=""}var c=this.oOll0.oO1l(d),b=c[0],a=c[1];if(a===""||mini.isNull(a)){a=d}if(this.valueFromSelect&&(b===""||mini.isNull(b))){d=a=""}this.value=d;this._valueEl.value=this.value;this.text=this._textEl.value=a;this.O0llo0()},getValueInCheckOrder:function(){return this.valueInCheckOrder},setValueInCheckOrder:function(a){this.valueInCheckOrder=a;this.oOll0.valueInCheckOrder=a},getDataField:function(){return this.dataField},setDataField:function(a){if(this.oOll0){this.oOll0.setDataField(a)}this.dataField=a},setDisplayField:function(a){this.setTextField(a)},getPinyinField:function(){return this.pinyinField},setPinyinField:function(a){this.pinyinField=a},getTextField:function(){return this.textField},setTextField:function(a){if(this.oOll0){this.oOll0.setTextField(a)}this.textField=a},getValueField:function(){return this.valueField},setValueField:function(a){this.valueField=a;if(this.oOll0){this.oOll0.setValueField(a)}},getUrl:function(){return this.url},setUrl:function(a){this.getPopup();this.oOll0.setUrl(a);this.url=this.oOll0.url;this.data=this.oOll0.data;this.doDataChange()},doDataChange:function(){var c=this.oOll0.oO1l(this.value),a=c[0],b=c[1];if(a===""&&!this.clearOnLoad){a=this.value;b=this.text;this.value=null}this.text=this._textEl.value=b;this.setValue(a)},getClearOnLoad:function(){return this.clearOnLoad},setClearOnLoad:function(a){this.clearOnLoad=a},getData:function(){return this.data},setData:function(a){if(typeof a=="string"){a=this._eval(a)}if(!mini.isArray(a)){a=[]}this.oOll0.setData(a);this.data=this.oOll0.data;this.doDataChange()},_eval:function(_){return window.eval("("+_+")")},load:function(a){if(typeof a=="string"){this.setUrl(a)}else{this.setData(a)}},getAt:function(a){return this.data[a]},indexOf:function(a){return this.data.indexOf(a)},getItem:function(a){return typeof a=="object"?a:this.data[a]},selects:function(a){if(!a){return}var b=this.oOll0.oO1l(a);this.setValue(b[0]);this.oOll0.setValue(this.value)},select:function(a){this.oOll0.deselectAll();a=this.getItem(a);if(a){this.oOll0.select(a);this.O100({item:a},false);if(this.changeOnSelectMethod){this.fireValueChanged()}}},deselect:function(a){this.oOll0.deselect(a);this._syncValueText()},deselectAll:function(){this.oOll0.deselectAll();this._syncValueText()},selectAll:function(){this.oOll0.selectAll();this._syncValueText()},_syncValueText:function(){var a=this.oOll0.getSelecteds();var b=this.oOll0.oO1l(a);this.setValue(b[0]);this.setText(b[1])},isSelected:function(a){return this.oOll0.isSelected(a)},showPopup:function(){var c={cancel:false};this.fire("beforeshowpopup",c);this._firebeforeshowpopup=false;if(c.cancel==true){return}this.oOll0.setHeight("auto");ComboBox.superclass.showPopup.call(this);var f=this.popup.el.style.height;if(f==""||f=="auto"){this.oOll0.setHeight("auto")}else{this.oOll0.setHeight("100%")}var d=this;if(!d.multiSelect){var b=jQuery("table .mini-listbox-checkbox",d.oOll0.el),a=b.css("display");b.css("display","table-cell");b.css("display",a)}this.oOll0.setValueInCheckOrder(this.valueInCheckOrder);this.oOll0.setValue(this.value);if(this.autoFocusItem&&(this.value==""||mini.isNull(this.value))){this.oOll0.o10l0(0)}},_createPopup:function(){ComboBox.superclass._createPopup.call(this);this.oOll0=new ListBox();this.listbox=this.oOll0;this.oOll0.delimiter=this.delimiter;this.oOll0.setBorderStyle("border:0;");this.oOll0.setStyle("width:100%;height:auto;");this.oOll0.render(this.popup._contentEl);this.oOll0.on("beforeitemclick",this.__OnBeforeItemClick,this);this.oOll0.on("itemclick",this.O100,this);this.oOll0.on("drawcell",this.__OnItemDrawCell,this);var a=this;this.oOll0.on("beforeload",function(b){a.fire("beforeload",b)},this);this.oOll0.on("preload",function(b){a.fire("preload",b)},this);this.oOll0.on("load",function(b){a.data=b.data;a.fire("load",b)},this);this.oOll0.on("loaderror",function(b){a.fire("loaderror",b)},this)},set:function(b){if(typeof b=="string"){return this}var a=b.text;delete b.text;var f=b.value;delete b.value;var d=b.url;delete b.url;var c=b.data;delete b.data;ComboBox.superclass.set.call(this,b);if(!mini.isNull(c)){this.setData(c);b.data=c}if(!mini.isNull(d)){this.setUrl(d);b.url=d}if(!mini.isNull(f)){this.setValue(f);b.value=f}if(!mini.isNull(a)){this.setText(a)}return this},getAutoFocusItem:function(){return this.autoFocusItem},setAutoFocusItem:function(a){this.autoFocusItem=a},getDelimiter:function(){return this.delimiter},setDelimiter:function(a){this.delimiter=a;if(this.oOll0){this.oOll0.delimiter=a}},__input:function(){if(document.activeElement==this._textEl){this.lOOoo()}},_initInput:function(){var a=this;if(isFirefox){this._textEl.oninput=function(){a.lOOoo()}}}});mini.regClass(ComboBox,"combobox");DatePicker=function(){DatePicker.superclass.constructor.apply(this,arguments);__cls_add(this.el,"mini-datepicker");this.on("validation",this.llO0O,this)};mini.extend(DatePicker,PopupEdit,{valueFormat:"",format:"yyyy-MM-dd",maxDate:null,minDate:null,popupWidth:"",viewDate:new Date(),showTime:false,timeFormat:"H:mm",showYesterdayButton:false,showTodayButton:true,showClearButton:true,showOkButton:false,valueType:"date",uiCls:"mini-datepicker",_monthPicker:false,minDateErrorText:"",maxDateErrorText:"",nullValue:""});mini.copyTo(DatePicker.prototype,{getAttrs:function(b){var a=DatePicker.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["format","viewDate","timeFormat","ondrawdate","minDate","maxDate","valueType","valueFormat","nullValue","minDateErrorText","maxDateErrorText"]);mini._ParseBool(b,a,["showTime","showTodayButton","showClearButton","showOkButton","showWeekNumber","showYesterdayButton"]);return a},o0oOlo:function(b){var c={htmlEvent:b};this.fire("keydown",c);if(b.keyCode==8&&(this.isReadOnly()||this.allowInput==false)){return false}if(b.keyCode==9){if(this.isShowPopup()){this.hidePopup()}return}if(this.isReadOnly()){return}switch(b.keyCode){case 27:b.preventDefault();if(this.isShowPopup()){b.stopPropagation()}this.hidePopup();break;case 9:case 13:if(this.isShowPopup()){b.preventDefault();b.stopPropagation();this.hidePopup();this.focus()}else{this.O1O1(null);var a=this;setTimeout(function(){a.fire("enter",c)},10)}break;case 37:break;case 38:b.preventDefault();break;case 39:break;case 40:if(this.keyNavEnabled){b.preventDefault();this.showPopup()}break;default:break}},O1O1:function(b){var a=this._textEl.value,d=this.getFormValue("U");if(this.valueType=="date"){var c=mini.parseDate(a);if(!c||isNaN(c)){c=null}}this.setValue(a);if(d!==this.getFormValue("U")){this.fireValueChanged()}},getMinDateErrorText:function(){return this.minDateErrorText},setMinDateErrorText:function(a){this.minDateErrorText=a},getMaxDateErrorText:function(){return this.maxDateErrorText},setMaxDateErrorText:function(a){this.maxDateErrorText=a},getMinDate:function(){return this.minDate},setMinDate:function(a){this.minDate=a},getMaxDate:function(){return this.maxDate},setMaxDate:function(a){this.maxDate=a},getShowWeekNumber:function(){return this.showWeekNumber},setShowWeekNumber:function(a){this.showWeekNumber=a},getShowOkButton:function(){return this.showOkButton},setShowOkButton:function(a){this.showOkButton=a},getShowClearButton:function(){return this.showClearButton},setShowClearButton:function(a){this.showClearButton=a},getShowTodayButton:function(){return this.showTodayButton},setShowTodayButton:function(a){this.showTodayButton=a},getShowYesterdayButton:function(){return this.showYesterdayButton},setShowYesterdayButton:function(a){this.showYesterdayButton=a},getTimeFormat:function(){return this.timeFormat},setTimeFormat:function(a){if(this.timeFormat!=a){this.timeFormat=a}},getShowTime:function(){return this.showTime},setShowTime:function(a){if(this.showTime!=a){this.showTime=a}},getViewDate:function(){return this.lolOO.getViewDate()},setViewDate:function(a){a=mini.parseDate(a);if(!mini.isDate(a)){return}this.viewDate=a},getFormValue:function(a){if(this.valueType!="date"){return this.value}if(!mini.isDate(this.value)){return""}a=a||this.format;return mini.formatDate(this.value,a)},getValue:function(){if(this.valueType!="date"){return this.value}if(!mini.isDate(this.value)){return this.nullValue}var a=this.value;if(this.valueFormat){a=mini.formatDate(a,this.valueFormat)}return a},getNullValue:function(){return this.nullValue},setNullValue:function(a){if(a=="null"){a=null}this.nullValue=a},setValue:function(a){var b=this;if(b.valueType=="date"){a=mini.parseDate(a)}else{if(mini.isDate(a)){a=mini.formatDate(a,b.format)}}if(mini.isNull(a)){a=""}if(mini.isDate(a)){a=new Date(a.getTime());if(mini.isDate(a)&&isNaN(a.getTime())){a=""}}if(this.value!=a){this.value=a}this.text=this._textEl.value=this._valueEl.value=this.getFormValue()},getValueFormat:function(){return this.valueFormat},setValueFormat:function(a){if(typeof a!="string"){return}if(this.valueFormat!=a){this.valueFormat=a}},getFormat:function(){return this.format},setFormat:function(a){if(typeof a!="string"){return}if(this.format!=a){this.format=a;this._textEl.value=this._valueEl.value=this.getFormValue()}},OOO0lo:function(a){if(this.showOkButton){return}var b=this.lolOO.getValue();this.setValue(b);this.fireValueChanged()},o0oO1:function(b){if(!b){return}if(this.showOkButton&&b.action!="ok"){return}var c=this.lolOO.getValue(),a=this.getFormValue("U");this.setValue(c);if(a!==this.getFormValue("U")){this.fireValueChanged()}this.hidePopup();this.focus()},o01l:function(a){var c=a.date,d=mini.parseDate(this.maxDate),b=mini.parseDate(this.minDate);if(mini.isDate(d)){if(c.getTime()>d.getTime()){a.allowSelect=false}}if(mini.isDate(b)){if(c.getTime()<b.getTime()){a.allowSelect=false}}this.fire("drawdate",a)},llO0O:function(f){if(f.isValid==false){return}var c=this.value;if(!mini.isDate(c)){return}var d=mini.parseDate(this.maxDate),g=mini.parseDate(this.minDate),b=this.maxDateErrorText||mini.VTypes.maxDateErrorText,a=this.minDateErrorText||mini.VTypes.minDateErrorText;if(mini.isDate(d)){if(c.getTime()>d.getTime()){f.isValid=false;f.errorText=String.format(b,mini.formatDate(d,this.format))}}if(mini.isDate(g)){if(c.getTime()<g.getTime()){f.isValid=false;f.errorText=String.format(a,mini.formatDate(g,this.format))}}},oO01Ol:function(a){if(a.keyCode==13){this.o0oO1()}if(a.keyCode==27){this.hidePopup();this.focus()}},within:function(a){if(__getById(this.el,a.target)){return true}if(this.lolOO.within(a)){return true}return false},hidePopup:function(){DatePicker.superclass.hidePopup.call(this);this.lolOO.un("timechanged",this.OOO0lo,this);this.lolOO.un("dateclick",this.o0oO1,this);this.lolOO.un("drawdate",this.o01l,this);this.lolOO.hideMenu()},showPopup:function(){var c={cancel:false};this.fire("beforeshowpopup",c);if(c.cancel==true){return}this.lolOO=this._getCalendar();this.lolOO.beginUpdate();this.lolOO._canLayout=false;if(this.lolOO.el.parentNode!=this.popup._contentEl){this.lolOO.render(this.popup._contentEl)}this.lolOO.set({monthPicker:this._monthPicker,showTime:this.showTime,timeFormat:this.timeFormat,showClearButton:this.showClearButton,showYesterdayButton:this.showYesterdayButton,showTodayButton:this.showTodayButton,showOkButton:this.showOkButton,showWeekNumber:this.showWeekNumber});this.lolOO.setValue(this.value);if(this.value){this.lolOO.setViewDate(this.value)}else{this.lolOO.setViewDate(this.viewDate)}function a(){this.lolOO.hideMenu();if(this.lolOO._target){var d=this.lolOO._target;this.lolOO.un("timechanged",d.OOO0lo,d);this.lolOO.un("dateclick",d.o0oO1,d);this.lolOO.un("drawdate",d.o01l,d)}this.lolOO.on("timechanged",this.OOO0lo,this);this.lolOO.on("dateclick",this.o0oO1,this);this.lolOO.on("drawdate",this.o01l,this);this.lolOO.endUpdate();this.lolOO._canLayout=true;this.lolOO.doLayout();this.lolOO.focus();this.lolOO._target=this}var b=this;a.call(b);DatePicker.superclass.showPopup.call(this)},__OnPopupClose:function(a){if(this.lolOO){this.lolOO.hideMenu()}},_createPopup:function(){DatePicker.superclass._createPopup.call(this);this.lolOO=this._getCalendar()},destroy:function(a){if(this._destroyPopup){}this.lolOO=null;DatePicker.superclass.destroy.call(this,a)},_getCalendar:function(){if(!DatePicker._Calendar||DatePicker._Calendar.destroyed){var a=DatePicker._Calendar=new Calendar();a.setStyle("border:0;")}return DatePicker._Calendar}});mini.regClass(DatePicker,"datepicker");mini.MonthPicker=function(){mini.MonthPicker.superclass.constructor.apply(this,arguments)};mini.extend(mini.MonthPicker,DatePicker,{uiCls:"mini-monthpicker",valueFormat:"",format:"yyyy-MM",_monthPicker:true});mini.regClass(mini.MonthPicker,"monthpicker");Calendar=function(){this.viewDate=new Date();this.l011=[];Calendar.superclass.constructor.apply(this,arguments)};mini.extend(Calendar,Control,{width:220,height:160,monthPicker:false,_clearBorder:false,viewDate:null,oOl0:"",l011:[],multiSelect:false,firstDayOfWeek:0,yesterdayText:"昨天",todayText:"今天",clearText:"清除",okText:"确定",cancelText:"取消",daysShort:["日","一","二","三","四","五","六"],format:"yyyy年MM月",timeFormat:"H:mm",showTime:false,currentTime:true,rows:1,columns:1,headerCls:"",bodyCls:"",footerCls:"",Oo1o0o:"mini-calendar-today",lll0l:"mini-calendar-weekend",l0Olo1:"mini-calendar-othermonth",o0lo0O:"mini-calendar-selected",showHeader:true,showFooter:true,showWeekNumber:false,showDaysHeader:true,showMonthButtons:true,showYearButtons:true,showTodayButton:true,showClearButton:true,showOkButton:false,showYesterdayButton:false,uiCls:"mini-calendar",menuEl:null,menuYear:null,menuSelectMonth:null,menuSelectYear:null});mini.copyTo(Calendar.prototype,{getAttrs:function(b){var a=Calendar.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["viewDate","rows","columns","ondateclick","ondrawdate","ondatechanged","timeFormat","ontimechanged","onvaluechanged"]);mini._ParseBool(b,a,["multiSelect","showHeader","showFooter","showWeekNumber","showDaysHeader","showMonthButtons","showYearButtons","showTodayButton","showClearButton","showYesterdayButton","showTime","showOkButton"]);return a},fireValueChanged:function(){this.fire("valuechanged")},o110O:function(a){if(this.enabled==false){return}var c=this.getSelectedDate();if(!c){c=new Date(this.viewDate.getTime())}switch(a.keyCode){case 27:break;case 13:if(c){this.lOOOOO(c)}return;break;case 37:c=mini.addDate(c,-1,"D");break;case 38:c=mini.addDate(c,-7,"D");break;case 39:c=mini.addDate(c,1,"D");break;case 40:c=mini.addDate(c,7,"D");break;default:break}var d=this;if(c.getMonth()!=d.viewDate.getMonth()){d.setViewDate(mini.cloneDate(c));d.focus()}var b=this.getDateEl(c);if(b&&__cls_has(b,"mini-calendar-disabled")){return}d.setSelectedDate(c);if(a.keyCode==37||a.keyCode==38||a.keyCode==39||a.keyCode==40){a.preventDefault()}},OOO0lo:function(a){this.fire("timechanged");this.fireValueChanged()},lOO1l1:function(a){if(this.enabled==false){return}var b=__getByCls(a.target,"mini-calendar-date");if(b&&!__cls_has(b,"mini-calendar-disabled")){var f=b.id.split("$"),d=parseInt(f[f.length-1]);if(d==-1){return}var c=new Date(d);this.setSelectedDate(c)}},l11o00:function(a){var g=this.viewDate;if(this.enabled==false){return}var d=a.target,k=__getByCls(a.target,"mini-calendar-title");if(__getByCls(d,"mini-calendar-monthNext")){g.setDate(1);g.setMonth(g.getMonth()+1);this.setViewDate(g)}else{if(__getByCls(d,"mini-calendar-yearNext")){g.setDate(1);g.setFullYear(g.getFullYear()+1);this.setViewDate(g)}else{if(__getByCls(d,"mini-calendar-monthPrev")){g.setMonth(g.getMonth()-1);this.setViewDate(g)}else{if(__getByCls(d,"mini-calendar-yearPrev")){g.setFullYear(g.getFullYear()-1);this.setViewDate(g)}else{if(__getByCls(d,"mini-calendar-tadayButton")){var n=!!__getByCls(d,"yesterday"),c=new Date();if(n){c.setDate(c.getDate()-1)}this.setViewDate(c);this.setSelectedDate(c);if(this.currentTime){var f=new Date();this.setTime(f)}this.lOOOOO(c,"today")}else{if(__getByCls(d,"mini-calendar-clearButton")){this.setSelectedDate(null);this.setTime(null);this.lOOOOO(null,"clear")}else{if(__getByCls(d,"mini-calendar-okButton")){this.lOOOOO(null,"ok")}else{if(k){this.showMenu()}}}}}}}}var b=__getByCls(a.target,"mini-calendar-date");if(b&&!__cls_has(b,"mini-calendar-disabled")){var l=b.id.split("$"),j=parseInt(l[l.length-1]);if(j==-1){return}var i=new Date(j);this.lOOOOO(i)}},O1lO:function(a){if(!__getByCls(a.target,"mini-calendar-menu")){if(!__getByCls(a.target,"mini-monthpicker")){this.hideMenu()}}},__getMonthYear:function(){var a=new Date(this.o0o11electYear,this.o0o11electMonth,1);if(this.monthPicker){this.setViewDate(a);this.setSelectedDate(a);this.lOOOOO(a)}else{this.setViewDate(a);this.hideMenu()}},__OnMenuDblClick:function(d){var b=__getByCls(d.target,"mini-calendar-menu-year"),c=__getByCls(d.target,"mini-calendar-menu-month"),a=__getByCls(d.target,"mini-calendar-date ");if(!b&&!c&&!a){return}if(this.monthPicker){if(!c&&!b){return}}this.__getMonthYear()},l1OOo:function(a){var k=this,b=a.target,f="mini-calendar-menu-month",j="mini-calendar-menu-year",i="mini-calendar-menu-selected";function g(){setTimeout(function(){k.updateMenu()},30)}var d=__getByCls(b,f),c=__getByCls(b,j);if(d){this.o0o11electMonth=parseInt(d.id);jQuery("."+f,k.menuEl).removeClass(i);jQuery(b).parent().find("#"+this.o0o11electMonth).addClass(i)}else{if(c){this.o0o11electYear=parseInt(c.id);jQuery("."+j,k.menuEl).removeClass(i);jQuery(b).parent().find("#"+this.o0o11electYear).addClass(i)}else{if(__getByCls(b,"mini-calendar-menu-prevYear")){this.menuYear=this.menuYear-1;this.menuYear=parseInt(this.menuYear/10)*10;g()}else{if(__getByCls(b,"mini-calendar-menu-nextYear")){this.menuYear=this.menuYear+11;this.menuYear=parseInt(this.menuYear/10)*10;g()}else{if(__getByCls(b,"mini-calendar-okButton")){this.__getMonthYear()}else{if(__getByCls(b,"mini-calendar-cancelButton")){if(this.monthPicker){this.lOOOOO(null,"cancel")}else{this.hideMenu()}}}}}}}},updateMenu:function(){if(!this.menuEl){return}var c='<div class="mini-calendar-menu-months">';for(var b=0,d=12;b<d;b++){var a=mini.getShortMonth(b),f="";if(this.o0o11electMonth==b){f="mini-calendar-menu-selected"}c+='<a id="'+b+'" class="mini-calendar-menu-month '+f+'" href="javascript:void(0);" hideFocus onclick="return false">'+a+"</a>"}c+='<div style="clear:both;"></div></div>';c+='<div class="mini-calendar-menu-years">';for(b=this.menuYear,d=this.menuYear+10;b<d;b++){a=b,f="";if(this.o0o11electYear==b){f="mini-calendar-menu-selected"}c+='<a id="'+b+'" class="mini-calendar-menu-year '+f+'" href="javascript:void(0);" hideFocus onclick="return false">'+a+"</a>"}c+='<div class="mini-calendar-menu-prevYear"></div><div class="mini-calendar-menu-nextYear"></div><div style="clear:both;"></div></div>';c+='<div class="mini-calendar-footer"><span class="mini-calendar-okButton">'+this.okText+'</span><span class="mini-calendar-footerSpace"></span><span class="mini-calendar-cancelButton">'+this.cancelText+'</span></div><div style="clear:both;"></div>';this.menuEl.innerHTML=c},hideMenu:function(){if(this.menuEl){mini.un(this.menuEl,"click",this.l1OOo,this);mini.un(document,"mousedown",this.O1lO,this);jQuery(this.menuEl).remove();this.menuEl=null}},showMenu:function(){this.hideMenu();this.menuYear=parseInt(this.viewDate.getFullYear()/10)*10;this.o0o11electMonth=this.viewDate.getMonth();this.o0o11electYear=this.viewDate.getFullYear();var b='<div class="mini-calendar-menu"></div>';this.menuEl=mini.append(document.body,b);this.updateMenu(this.viewDate);var a=this.getBox();if(this.el.style.borderWidth=="0px"){this.menuEl.style.border="0"}__setBox(this.menuEl,a);mini.on(this.menuEl,"click",this.l1OOo,this);mini.on(this.menuEl,"dblclick",this.__OnMenuDblClick,this);mini.on(document,"mousedown",this.O1lO,this)},_tryShowMenu:function(){if(!this.menuEl){var a=this;setTimeout(function(){a.showMenu()},1)}},lOOOOO:function(c,a){var b={date:c,action:a};this.fire("dateclick",b);this.fireValueChanged();this.hideMenu()},oOl10O:function(b){var a={date:b,dateCls:"",dateStyle:"",dateHtml:b.getDate(),allowSelect:true};this.fire("drawdate",a);return a},l10o1o:function(j,b,p){var f=j.getMonth(),a=this.getFirstDateOfMonth(j),s=new Date(a.getTime()),w=mini.clearTime(new Date()).getTime(),v=this.value?mini.clearTime(this.value).getTime():-1,i=this.rows>1||this.columns>1,g="";g+='<table class="mini-calendar-view" border="0" cellpadding="0" cellspacing="0">';if(this.showHeader){g+='<tr ><td colSpan="10" class="mini-calendar-header"><div class="mini-calendar-headerInner">';if(b==0&&p==0){g+='<div class="mini-calendar-prev">';if(this.showYearButtons){g+='<span class="mini-calendar-yearPrev"></span>'}if(this.showMonthButtons){g+='<span class="mini-calendar-monthPrev"></span>'}g+="</div>"}if(b==0&&p==this.columns-1){g+='<div class="mini-calendar-next">';if(this.showMonthButtons){g+='<span class="mini-calendar-monthNext"></span>'}if(this.showYearButtons){g+='<span class="mini-calendar-yearNext"></span>'}g+="</div>"}g+='<span class="mini-calendar-title">'+mini.formatDate(j,this.format);+"</span>";g+="</div></td></tr>"}if(this.showDaysHeader){g+='<tr class="mini-calendar-daysheader"><td class="mini-calendar-space"></td>';if(this.showWeekNumber){g+='<td sclass="mini-calendar-weeknumber"></td>'}for(var l=this.firstDayOfWeek,k=l+7;l<k;l++){var d=this.getShortWeek(l);g+='<td yAlign="middle">';g+=d;g+="</td>";a=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1)}g+='<td class="mini-calendar-space"></td></tr>'}a=s;for(var n=0;n<=5;n++){g+='<tr class="mini-calendar-days"><td class="mini-calendar-space"></td>';if(this.showWeekNumber){var r=mini.getWeek(a.getFullYear(),a.getMonth()+1,a.getDate());if(String(r).length==1){r="0"+r}g+='<td class="mini-calendar-weeknumber" yAlign="middle">'+r+"</td>"}for(l=this.firstDayOfWeek,k=l+7;l<k;l++){var q=this.isWeekend(a),u=mini.clearTime(a).getTime(),o=u==w,c=this.isSelectedDate(a);if(f!=a.getMonth()&&i){u=-1}var t=this.oOl10O(a);g+='<td yAlign="middle" id="';g+=this.uid+"$"+u;g+='" class="mini-calendar-date ';if(q){g+=" mini-calendar-weekend "}if(t.allowSelect==false){g+=" mini-calendar-disabled "}if(f!=a.getMonth()&&i){}else{if(c){g+=" "+this.o0lo0O+" "}if(o){g+=" mini-calendar-today "}}if(f!=a.getMonth()){g+=" mini-calendar-othermonth "}if(t.dateCls){g+=" "+t.dateCls}g+='" style="';if(t.dateStyle){g+=t.dateStyle}g+='">';if(f!=a.getMonth()&&i){}else{g+=t.dateHtml}g+="</td>";a=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1)}g+='<td class="mini-calendar-space"></td></tr>'}g+='<tr class="mini-calendar-bottom" colSpan="10"><td ></td></tr>';g+="</table>";return g},doUpdate:function(){if(!this._canUpdate){return}var j=new Date(this.viewDate.getTime()),f=this.rows==1&&this.columns==1,c=100/this.rows,g='<table class="mini-calendar-views" border="0" cellpadding="0" cellspacing="0">';for(var b=0,i=this.rows;b<i;b++){g+="<tr >";for(var a=0,k=this.columns;a<k;a++){g+='<td style="height:'+c+'%">';g+=this.l10o1o(j,b,a);g+="</td>";j=new Date(j.getFullYear(),j.getMonth()+1,1)}g+="</tr>"}g+="</table>";this._innerEl.innerHTML=g;var d=this.el;setTimeout(function(){mini.repaint(d)},100);this.doLayout()},doLayout:function(){if(!this.canLayout()){return}this.timeWrapEl.style.display=this.showTime?"":"none";this.todayButtonEl.style.display=this.showTodayButton?"":"none";this.closeButtonEl.style.display=this.showClearButton?"":"none";this.yesterdayButtonEl.style.display=this.showYesterdayButton?"":"none";this.okButtonEl.style.display=this.showOkButton?"":"none";this.footerSpaceEl.style.display=(this.showClearButton&&this.showTodayButton)?"":"none";this.OooOo.style.display=this.showFooter?"":"none";var a=this._innerEl.firstChild,b=this.isAutoHeight();if(!b){a.parentNode.style.height="100px";h=jQuery(this.el).height();h-=jQuery(this.OooOo).outerHeight();a.parentNode.style.height=h+"px"}else{a.parentNode.style.height=""}mini.layout(this.OooOo);if(this.monthPicker){this._tryShowMenu()}},getTimeFormat:function(){return this.timeFormat},setTimeFormat:function(a){if(this.timeFormat!=a){this.timeSpinner.setFormat(a);this.timeFormat=this.timeSpinner.format}},getShowTime:function(){return this.showTime},setShowTime:function(a){if(this.showTime!=a){this.showTime=a;this.timeWrapEl.style.display=this.showTime?"":"none";this.doLayout()}},getColumns:function(){return this.columns},setColumns:function(a){if(isNaN(a)){return}if(a<1){a=1}this.columns=a;this.doUpdate()},getRows:function(){return this.rows},setRows:function(a){if(isNaN(a)){return}if(a<1){a=1}this.rows=a;this.doUpdate()},getMultiSelect:function(){return this.multiSelect},setMultiSelect:function(a){this.multiSelect=a;this.doUpdate()},isSelectedDate:function(a){if(!a||!this.oOl0){return false}return mini.clearTime(a).getTime()==mini.clearTime(this.oOl0).getTime()},getFormValue:function(){var a=this.getValue();if(a){return mini.formatDate(a,"yyyy-MM-dd HH:mm:ss")}return""},getValue:function(){var b=this.oOl0;if(b){b=mini.clearTime(b);if(this.showTime){var a=this.timeSpinner.getValue();if(a){b.setHours(a.getHours());b.setMinutes(a.getMinutes());b.setSeconds(a.getSeconds())}}}return b?b:""},setValue:function(a){this.setSelectedDate(a);if(!a){a=new Date()}this.setTime(a)},getTime:function(){return this.timeSpinner.getFormValue()},setTime:function(a){this.timeSpinner.setValue(a)},getSelectedDate:function(){return this.oOl0?this.oOl0:""},setSelectedDates:function(a){if(!mini.isArray(a)){a=[]}this.l011=a;this.doUpdate()},setSelectedDate:function(a){a=mini.parseDate(a);if(!mini.isDate(a)){a=""}else{a=new Date(a.getTime())}var b=this.getDateEl(this.oOl0);if(b){__cls_rm(b,this.o0lo0O)}this.oOl0=a;if(this.oOl0){this.oOl0=mini.cloneDate(this.oOl0)}b=this.getDateEl(this.oOl0);if(b){__cls_add(b,this.o0lo0O)}this.fire("datechanged")},getViewDate:function(){return this.viewDate},setViewDate:function(a){a=mini.parseDate(a);if(!a){a=new Date()}if(mini.isDate(a)){a=new Date(a.getTime())}this.viewDate=a;this.doUpdate()},getShowOkButton:function(){return this.showOkButton},setShowOkButton:function(a){this.showOkButton=a;this.okButtonEl.style.display=this.showOkButton?"":"none";this.doUpdate()},getShowClearButton:function(){return this.showClearButton},setShowClearButton:function(a){this.showClearButton=a;this.closeButtonEl.style.display=this.showClearButton?"":"none";this.doUpdate()},getShowYesterdayButton:function(){return this.showYesterdayButton},setShowYesterdayButton:function(a){this.showYesterdayButton=a;this.yesterdayButtonEl.style.display=this.showYesterdayButton?"":"none";this.doUpdate()},getShowTodayButton:function(){return this.showTodayButton},setShowTodayButton:function(a){this.showTodayButton=a;this.todayButtonEl.style.display=this.showTodayButton?"":"none";this.doUpdate()},getShowYearButtons:function(){return this.showYearButtons},setShowYearButtons:function(a){this.showYearButtons=a;this.doUpdate()},getShowMonthButtons:function(){return this.showMonthButtons},setShowMonthButtons:function(a){this.showMonthButtons=a;this.doUpdate()},getShowDaysHeader:function(){return this.showDaysHeader},setShowDaysHeader:function(a){this.showDaysHeader=a;this.doUpdate()},getShowWeekNumber:function(){return this.showWeekNumber},setShowWeekNumber:function(a){this.showWeekNumber=a;this.doUpdate()},getShowFooter:function(){return this.showFooter},setShowFooter:function(a){this.showFooter=a;this.doUpdate()},getShowHeader:function(){return this.showHeader},setShowHeader:function(a){this.showHeader=a;this.doUpdate()},within:function(a){if(__getById(this.el,a.target)){return true}if(this.menuEl&&__getById(this.menuEl,a.target)){return true}return false},getDateEl:function(b){if(!b){return null}var a=this.uid+"$"+mini.clearTime(b).getTime();return document.getElementById(a)},_initEvents:function(){if(this.timeSpinner){this.timeSpinner.on("valuechanged",this.OOO0lo,this)}__initEvents(function(){mini.on(this.el,"click",this.l11o00,this);mini.on(this.el,"mousedown",this.lOO1l1,this);mini.on(this.el,"keydown",this.o110O,this)},this)},destroy:function(a){if(this.timeSpinner){this.timeSpinner.destroy();this.timeSpinner=null}this._innerEl=this.OooOo=this.timeWrapEl=this.todayButtonEl=this.footerSpaceEl=this.closeButtonEl=null;this._focusEl=this.okButtonEl=this.yesterdayButtonEl=null;this.timeSpinner=null;Calendar.superclass.destroy.call(this,a)},focus:function(){try{this._focusEl.focus()}catch(a){}},_create:function(){var b='<tr style="width:100%;"><td style="width:100%;"></td></tr>';b+='<tr ><td><div class="mini-calendar-footer"><span style="display:inline-block;"><input name="time" class="mini-timespinner mini-calendar-timespinner" format="'+this.timeFormat+'"/><span class="mini-calendar-footerSpace"></span></span><span class="mini-calendar-tadayButton">'+this.todayText+'</span><span class="mini-calendar-footerSpace"></span><span class="mini-calendar-clearButton">'+this.clearText+'</span><span class="mini-calendar-okButton">'+this.okText+'</span><a href="#" class="mini-calendar-focus" style="position:absolute;left:-10px;top:-10px;width:0px;height:0px;outline:none" hideFocus></a></div></td></tr>';var d='<table class="mini-calendar" cellpadding="0" cellspacing="0">'+b+"</table>",a=document.createElement("div");a.innerHTML=d;this.el=a.firstChild;var f=this.el.getElementsByTagName("tr"),c=this.el.getElementsByTagName("td");this._innerEl=c[0];this.OooOo=mini.byClass("mini-calendar-footer",this.el);this.timeWrapEl=this.OooOo.childNodes[0];this.todayButtonEl=this.OooOo.childNodes[1];this.footerSpaceEl=this.OooOo.childNodes[2];this.closeButtonEl=this.OooOo.childNodes[3];this.okButtonEl=this.OooOo.childNodes[4];this._focusEl=this.OooOo.lastChild;this.yesterdayButtonEl=mini.after(this.todayButtonEl,'<span class="mini-calendar-tadayButton yesterday">'+this.yesterdayText+"</span>");mini.parse(this.OooOo);this.timeSpinner=mini.getbyName("time",this.el);this.doUpdate()},getShortWeek:function(a){return this.daysShort[a]},getFirstDateOfMonth:function(a){var a=new Date(a.getFullYear(),a.getMonth(),1);return mini.getWeekStartDate(a,this.firstDayOfWeek)},isWeekend:function(b){var a=b.getDay();return a==0||a==6}});mini.regClass(Calendar,"calendar");ListBox=function(){ListBox.superclass.constructor.apply(this,arguments)};mini.extend(ListBox,ListControl,{formField:true,columns:null,columnWidth:80,showNullItem:false,nullItemText:"",showEmpty:false,emptyText:"",showCheckBox:false,showAllCheckBox:true,multiSelect:false,O1oo:"mini-listbox-item",Ol00:"mini-listbox-item-hover",_o01O:"mini-listbox-item-selected",uiCls:"mini-listbox"});mini.copyTo(ListBox.prototype,{getAttrs:function(a){var d=ListBox.superclass.getAttrs.call(this,a);mini._ParseString(a,d,["nullItemText","ondrawcell"]);mini._ParseBool(a,d,["showCheckBox","showAllCheckBox","showNullItem"]);if(a.nodeName.toLowerCase()!="select"){var c=mini.getChildNodes(a);for(var g=0,f=c.length;g<f;g++){var b=c[g],i=jQuery(b).attr("property");if(!i){continue}i=i.toLowerCase();if(i=="columns"){d.columns=mini.O0O1O1(b)}else{if(i=="data"){d.data=b.innerHTML}}}}return d},fireValueChanged:function(a){ListBox.superclass.fireValueChanged.call(this);this._doCheckState()},_doCheckState:function(){var b=this.uid+"$ck$all",a=jQuery(document.getElementById(b));if(this._isSelectedAll()&&this.getSelecteds().length!=0){if(a.prop){a.prop("checked",true)}else{a.attr("checked",true)}}else{if(a.prop){a.prop("checked",false)}else{a.attr("checked",false)}}},setValue:function(a){ListBox.superclass.setValue.call(this,a);this._doCheckState()},l11o00:function(b){var c=this.uid+"$ck$all";if(b.target.id==c){var a=document.getElementById(c);if(a){var f=a.checked,d=this.getValue();this._oldValue=d;if(f){this.selectAll()}else{this.deselectAll()}this._OnSelectionChanged();if(d!=this.getValue()){this.fireValueChanged();this.fire("itemclick",{htmlEvent:b})}}return}this.oO1Oo0(b,"Click")},lOO0O:function(a){this.ll0O.scrollLeft=this.ll0o1.scrollLeft},_OnDrawCell:function(a,g,i){var d=i?mini._getMap(i.field,a):this.getItemText(a),b={sender:this,index:g,rowIndex:g,record:a,item:a,column:i,field:i?i.field:null,value:d,cellHtml:d,rowCls:null,cellCls:i?(i.cellCls||""):"",rowStyle:null,cellStyle:i?(i.cellStyle||""):""},f=this.columns&&this.columns.length>0;if(!f){if(g==0&&this.showNullItem){b.cellHtml=this.nullItemText}}if(b.autoEscape==true){b.cellHtml=mini.htmlEncode(b.cellHtml)}if(i){if(i.dateFormat){if(mini.isDate(b.value)){b.cellHtml=mini.formatDate(d,i.dateFormat)}else{b.cellHtml=d}}var c=i.renderer;if(c){fn=typeof c=="function"?c:window[c];if(fn){b.cellHtml=fn.call(i,b)}}}this.fire("drawcell",b);if(b.cellHtml===null||b.cellHtml===undefined||b.cellHtml===""){b.cellHtml="&nbsp;"}return b},lo1llO:function(){for(var b=0,a=this.data.length;b<a;b++){var c=this.data[b];if(c.__NullItem){this.data.removeAt(b);break}}if(this.showNullItem){c={__NullItem:true};c[this.textField]="";c[this.valueField]="";this.data.insert(0,c)}},getNullItemText:function(){return this.nullItemText},setNullItemText:function(a){if(this.nullItemText!=a){this.nullItemText=a;this.lo1llO();this.doUpdate()}},getShowNullItem:function(){return this.showNullItem},setShowNullItem:function(a){if(this.showNullItem!=a){this.showNullItem=a;this.lo1llO();this.doUpdate()}},getShowAllCheckBox:function(){return this.showAllCheckBox},setShowAllCheckBox:function(a){this.showAllCheckBox=a;this.doLayout()},getShowCheckBox:function(){return this.showCheckBox},setShowCheckBox:function(a){this.showCheckBox=a;this.doUpdate()},doLayout:function(d){if(this.columns&&this.columns.length>0){__cls_add(this.el,"mini-listbox-showcolumns")}else{__cls_rm(this.el,"mini-listbox-showcolumns")}if(this.showCheckBox){__cls_rm(this.el,"mini-listbox-hideCheckBox")}else{__cls_add(this.el,"mini-listbox-hideCheckBox")}var o=this.uid+"$ck$all",c=document.getElementById(o);if(c){c.style.display=this.showAllCheckBox?"":"none"}var g=this.ll0o1,f=this.isAutoHeight();if(f){g.style.height="auto"}var b=this.getHeight(true),j=__getWidth(this._borderEl,true),k=j;if(!mini.isIE6){g.style.width=j+"px"}var a=__getHeight(this.ll0O);b=b-a;if(b<0){b=0}g.style.height=b+"px";if(isIE){var l=this.ll0O.firstChild,n=this.ll0o1.firstChild.firstChild;if(this.ll0o1.offsetHeight>=this.ll0o1.scrollHeight){if(n){n.style.width="100%"}if(l){l.style.width="100%"}}else{j=parseInt(n.parentNode.offsetWidth)+"px";if(l){l.style.width=j}}}if(this.ll0o1.offsetHeight<this.ll0o1.scrollHeight){var i=jQuery(this.ll0o1).width()-jQuery(this._contentEl).width();this.ll0O.style.width=(k-i)+"px"}else{this.ll0O.style.width="100%"}},doUpdate:function(){if(this._canUpdate===false){return}var a=this.columns&&this.columns.length>0;if(a){__cls_add(this.el,"mini-listbox-showColumns")}else{__cls_rm(this.el,"mini-listbox-showColumns")}this.ll0O.style.display=a?"":"none";var j=[];if(a){j[j.length]='<table class="mini-listbox-headerInner" cellspacing="0" cellpadding="0"><tr>';var i=this.uid+"$ck$all";if(this.showCheckBox){j[j.length]='<td class="mini-listbox-checkbox"><input type="checkbox" id="'+i+'"></td>'}for(var q=0,p=this.columns.length;q<p;q++){var s=this.columns[q];if(s.visible===false){continue}var d=s.header;if(mini.isNull(d)){d="&nbsp;"}var f=s.width;if(mini.isNumber(f)){f=f+"px"}j[j.length]='<td class="';if(s.headerCls){j[j.length]=s.headerCls}j[j.length]='" style="';if(s.headerStyle){j[j.length]=s.headerStyle+";"}if(f){j[j.length]="width:"+f+";"}if(s.headerAlign){j[j.length]="text-align:"+s.headerAlign+";"}j[j.length]='">';j[j.length]=d;j[j.length]="</td>"}j[j.length]="</tr></table>"}this.ll0O.innerHTML=j.join("");var j=[],w=this.data;j[j.length]='<table class="mini-listbox-items" cellspacing="0" cellpadding="0">';if(this.showEmpty&&w.length==0){j[j.length]='<tr><td colspan="20">'+this.emptyText+"</td></tr>"}else{this.lo1llO();for(var r=0,l=w.length;r<l;r++){var y=w[r],t=-1,o=" ",c=-1,v=" ";j[j.length]='<tr id="';j[j.length]=this.oo0ll0(r);j[j.length]='" index="';j[j.length]=r;j[j.length]='" class="mini-listbox-item ';if(y.enabled===false){j[j.length]=" mini-disabled "}t=j.length;j[j.length]=o;j[j.length]='" style="';c=j.length;j[j.length]=v;j[j.length]='">';var k=this.o1O0(r),n=this.name,b=this.getItemValue(y),g="";if(y.enabled===false){g="disabled"}if(this.showCheckBox){if(y.__NullItem===true){j[j.length]='<td class="mini-listbox-checkbox"></td>'}else{j[j.length]='<td class="mini-listbox-checkbox"><input '+g+' id="'+k+'" type="checkbox" ></td>'}}if(a){for(q=0,p=this.columns.length;q<p;q++){s=this.columns[q];if(s.visible===false){continue}var u=this._OnDrawCell(y,r,s),f=s.width;if(typeof f=="number"){f=f+"px"}j[j.length]='<td class="';if(u.cellCls){j[j.length]=u.cellCls}j[j.length]='" style="';if(u.cellStyle){j[j.length]=u.cellStyle+";"}if(f){j[j.length]="width:"+f+";"}if(s.align){j[j.length]="text-align:"+s.align+";"}j[j.length]='">';j[j.length]=u.cellHtml;j[j.length]="</td>";if(u.rowCls){o=u.rowCls}if(u.rowStyle){v=u.rowStyle}}}else{u=this._OnDrawCell(y,r,null);j[j.length]='<td class="';if(u.cellCls){j[j.length]=u.cellCls}j[j.length]='" style="';if(u.cellStyle){j[j.length]=u.cellStyle}j[j.length]='">';j[j.length]=u.cellHtml;j[j.length]="</td>";if(u.rowCls){o=u.rowCls}if(u.rowStyle){v=u.rowStyle}}j[t]=o;j[c]=v;j[j.length]="</tr>"}}j[j.length]="</table>";var x=j.join("");this.ll0o1.firstChild.innerHTML=x;this.o0Ool0();this.doLayout()},getColumns:function(){return this.columns},showColumn:function(a){a=this.getColumn(a);if(!a){return}a.visible=true;this.doUpdate()},hideColumn:function(a){a=this.getColumn(a);if(!a){return}a.visible=false;this.doUpdate()},getColumn:function(a){var b=typeof a;if(b=="number"){return this.columns[a]}else{if(b=="object"){return a}else{for(var f=0,d=this.columns.length;f<d;f++){var c=this.columns[f];if(c.name==a){return c}}return null}}},isVisibleColumn:function(a){a=this.getColumn(a);if(a.visible==false){return false}return true},setColumns:function(d){if(!mini.isArray(d)){d=[]}this.columns=d;for(var i=0,f=this.columns.length;i<f;i++){var b=this.columns[i];if(b.type){if(!mini.isNull(b.header)&&typeof b.header!=="function"){if(b.header.trim()==""){delete b.header}}var c=mini._getColumn(b.type);if(c){var g=mini.copyTo({},b);mini.copyTo(b,c);mini.copyTo(b,g)}}var a=parseInt(b.width);if(mini.isNumber(a)&&String(a)==b.width){b.width=a+"px"}if(mini.isNull(b.width)){b.width=this.columnWidth+"px"}}this.doUpdate()},destroy:function(a){if(this.ll0o1){this.ll0o1.onscroll=null;mini.clearEvent(this.ll0o1);this.ll0o1=null}this._borderEl=this.ll0O=this.ll0o1=this._valueEl=this.lO10=this.OOol=this._contentEl=null;ListBox.superclass.destroy.call(this,a)},_initEvents:function(){ListBox.superclass._initEvents.call(this);__initEvents(function(){mini.bind(this.ll0o1,"scroll",this.lOO0O,this)},this)},_create:function(){var a=this.el=document.createElement("div");this.el.className="mini-listbox";this.el.innerHTML='<div class="mini-listbox-border"><div class="mini-listbox-header"></div><div class="mini-listbox-view"></div><input type="hidden"/></div><div class="mini-errorIcon"></div>';this._borderEl=this.el.firstChild;this.ll0O=this._borderEl.firstChild;this.ll0o1=this._borderEl.childNodes[1];this._valueEl=this._borderEl.childNodes[2];this.lO10=this.el.lastChild;this.OOol=this.ll0o1;this.ll0o1.innerHTML='<div class="mini-grid-rows-content"></div>';this._contentEl=this.ll0o1.firstChild}});mini.regClass(ListBox,"listbox");CheckBoxList=function(){CheckBoxList.superclass.constructor.apply(this,arguments)};mini.extend(CheckBoxList,ListControl,{formField:true,_labelFieldCls:"mini-labelfield-checkboxlist",multiSelect:true,repeatItems:0,repeatLayout:"none",repeatDirection:"horizontal",O1oo:"mini-checkboxlist-item",Ol00:"mini-checkboxlist-item-hover",_o01O:"mini-checkboxlist-item-selected",O1oO1:"mini-checkboxlist-table",o0o1oo:"mini-checkboxlist-td",O110lO:"checkbox",uiCls:"mini-checkboxlist"});mini.copyTo(CheckBoxList.prototype,{getAttrs:function(b){var d=CheckBoxList.superclass.getAttrs.call(this,b),a=jQuery(b);mini._ParseString(b,d,["ondrawitem"]);var g=parseInt(a.attr("repeatItems"));if(!isNaN(g)){d.repeatItems=g}var f=a.attr("repeatLayout");if(f){d.repeatLayout=f}var c=a.attr("repeatDirection");if(c){d.repeatDirection=c}return d},getRepeatDirection:function(){return this.repeatDirection},setRepeatDirection:function(a){if(a!="vertical"){a="horizontal"}if(this.repeatDirection!=a){this.repeatDirection=a;this.doUpdate()}},getRepeatLayout:function(){return this.repeatLayout},setRepeatLayout:function(a){if(a!="flow"&&a!="table"){a="none"}if(this.repeatLayout!=a){this.repeatLayout=a;this.doUpdate()}},getRepeatItems:function(){return this.repeatItems},setRepeatItems:function(a){a=parseInt(a);if(isNaN(a)){a=0}if(this.repeatItems!=a){this.repeatItems=a;this.doUpdate()}},l00oO:function(c,a){var d=this.getItemText(c),b={index:a,item:c,itemHtml:d,itemCls:"",itemStyle:""};this.fire("drawitem",b);if(b.itemHtml===null||b.itemHtml===undefined){b.itemHtml=""}return b},o1oOol:function(g,k){var c=this.l00oO(g,k),j=this.oo0ll0(k),i=this.o1O0(k),f=this.getItemValue(g),b="",d='<div id="'+j+'" index="'+k+'" class="'+this.O1oo+" ";if(g.enabled===false){d+=" mini-disabled ";b="disabled"}var a='onclick="return false"';a='onmousedown="this._checked = this.checked;" onclick="this.checked = this._checked"';d+=c.itemCls+'" style="'+c.itemStyle+'"><span tabIndex="0" class="mini-list-icon"></span><input style="display:none;" '+a+" "+b+' value="'+f+'" id="'+i+'" type="'+this.O110lO+'" /><label for="'+i+'" onclick="return false;">';d+=c.itemHtml+"</label></div>";return d},doUpdate:function(){var d=this.data,g="";for(var c=0,j=d.length;c<j;c++){var f=d[c];f._i=c}if(this.repeatLayout=="flow"){var i=this.O10lo();for(c=0,j=i.length;c<j;c++){var a=i[c];for(var b=0,k=a.length;b<k;b++){f=a[b];g+=this.o1oOol(f,f._i)}if(c!=j-1){g+="<br/>"}}}else{if(this.repeatLayout=="table"){i=this.O10lo();g+='<table class="'+this.O1oO1+'" cellpadding="0" cellspacing="1">';for(c=0,j=i.length;c<j;c++){a=i[c];g+="<tr>";for(b=0,k=a.length;b<k;b++){f=a[b];g+='<td class="'+this.o0o1oo+'">';g+=this.o1oOol(f,f._i);g+="</td>"}g+="</tr>"}g+="</table>"}else{for(c=0,j=d.length;c<j;c++){f=d[c];g+=this.o1oOol(f,c)}}}this._innerEl.innerHTML=g;for(c=0,j=d.length;c<j;c++){f=d[c];delete f._i}},O10lo:function(){var d=[];if(this.repeatItems>0){if(this.repeatDirection=="horizontal"){var g=[];for(var a=0,f=this.data.length;a<f;a++){var c=this.data[a];if(g.length==this.repeatItems){d.push(g);g=[]}g.push(c)}d.push(g)}else{var b=this.repeatItems>this.data.length?this.data.length:this.repeatItems;for(a=0,f=b;a<f;a++){d.push([])}for(a=0,f=this.data.length;a<f;a++){var c=this.data[a],i=a%this.repeatItems;d[i].push(c)}}}else{d=[this.data.clone()]}return d},_create:function(){var b=this.el=document.createElement("div");this.el.className=this.uiCls;this.el.innerHTML='<table cellpadding="0" border="0" cellspacing="0" style="display:table;"><tr><td><div class="mini-list-inner"></div><div class="mini-errorIcon"></div><input type="hidden" /></td></tr></table>';this.cellEl=b.getElementsByTagName("td")[0];this._innerEl=this.cellEl.firstChild;this._valueEl=this.cellEl.lastChild;this.lO10=this.cellEl.childNodes[1];this._borderEl=this.el.firstChild;var a=this;mini.on(this.el,"keyup",function(c){if(c.keyCode==32){$(c.target).click()}})}});mini.regClass(CheckBoxList,"checkboxlist");RadioButtonList=function(){RadioButtonList.superclass.constructor.apply(this,arguments)};mini.extend(RadioButtonList,CheckBoxList,{multiSelect:false,O1oo:"mini-radiobuttonlist-item",Ol00:"mini-radiobuttonlist-item-hover",_o01O:"mini-radiobuttonlist-item-selected",O1oO1:"mini-radiobuttonlist-table",o0o1oo:"mini-radiobuttonlist-td",O110lO:"radio",uiCls:"mini-radiobuttonlist"});mini.regClass(RadioButtonList,"radiobuttonlist");TreeSelect=function(){this.data=[];TreeSelect.superclass.constructor.apply(this,arguments)};mini.extend(TreeSelect,PopupEdit,{valueFromSelect:false,text:"",value:"",autoCheckParent:false,expandOnLoad:false,valueField:"id",textField:"text",nodesField:"children",dataField:"",delimiter:",",multiSelect:false,data:[],url:"",allowInput:false,showTreeIcon:false,showTreeLines:true,resultAsTree:false,parentField:"pid",checkRecursive:false,showFolderCheckBox:false,showRadioButton:false,popupHeight:200,popupWidth:"100%",popupMaxHeight:250,popupMinWidth:100,uiCls:"mini-treeselect",expandOnPopup:false,virtualScroll:false,defaultRowHeight:23,pinyinField:"tag",expandOnNodeClick:false,autoFilter:true,checkOnTextClick:false});mini.copyTo(TreeSelect.prototype,{getAttrs:function(b){var a=ComboBox.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["url","data","textField","pinyinField","valueField","nodesField","parentField","onbeforenodecheck","onbeforenodeselect","expandOnLoad","onnodeclick","onbeforeload","onload","onloaderror","ondrawnode"]);mini._ParseBool(b,a,["expandOnNodeClick","multiSelect","resultAsTree","checkRecursive","showTreeIcon","showTreeLines","showFolderCheckBox","showRadioButton","autoCheckParent","valueFromSelect","virtualScroll","expandOnPopup","autoFilter","checkOnTextClick"]);mini._ParseInt(b,a,["defaultRowHeight"]);if(a.expandOnLoad){var c=parseInt(a.expandOnLoad);if(mini.isNumber(c)){a.expandOnLoad=c}else{a.expandOnLoad=a.expandOnLoad=="true"?true:false}}return a},getCheckOnTextClick:function(){return this.checkOnTextClick},setCheckOnTextClick:function(a){if(this.tree){this.tree.checkOnTextClick=a}this.checkOnTextClick=a},getAutoFilter:function(){return this.autoFilter},setAutoFilter:function(a){this.autoFilter=a},getExpandOnNodeClick:function(){return this.expandOnNodeClick},setExpandOnNodeClick:function(a){this.expandOnNodeClick=a;if(this.tree){this.tree.setExpandOnNodeClick(a)}},getValueFromSelect:function(){return this.valueFromSelect},setValueFromSelect:function(a){this.valueFromSelect=a},getExpandOnLoad:function(){return this.expandOnLoad},setExpandOnLoad:function(a){this.expandOnLoad=a;if(this.tree){this.tree.setExpandOnLoad(a)}},getAutoCheckParent:function(){return this.autoCheckParent},setAutoCheckParent:function(a){this.autoCheckParent=a;if(this.tree){this.tree.setAutoCheckParent(a)}},getShowRadioButton:function(){return this.showRadioButton},setShowRadioButton:function(a){this.showRadioButton=a;if(this.tree){this.tree.setShowRadioButton(a)}},getShowFolderCheckBox:function(){return this.showFolderCheckBox},setShowFolderCheckBox:function(a){this.showFolderCheckBox=a;if(this.tree){this.tree.setShowFolderCheckBox(a)}},getShowTreeLines:function(){return this.showTreeLines},setShowTreeLines:function(a){this.showTreeLines=a;if(this.tree){this.tree.setShowTreeLines(a)}},getShowTreeIcon:function(){return this.showTreeIcon},setShowTreeIcon:function(a){this.showTreeIcon=a;if(this.tree){this.tree.setShowTreeIcon(a)}},getValueField:function(){return this.valueField},setValueField:function(a){if(this.tree){this.tree.setIdField(a)}this.valueField=a},getParentField:function(){return this.parentField},setParentField:function(a){this.parentField=a;if(this.tree){this.tree.setParentField(a)}},getResultAsTree:function(){return this.resultAsTree},setResultAsTree:function(a){this.resultAsTree=a;if(this.tree){this.tree.setResultAsTree(a)}},getCheckRecursive:function(){return this.checkRecursive},setCheckRecursive:function(a){this.checkRecursive=a;if(this.tree){this.tree.setCheckRecursive(a)}},l00Ol:function(){if(!this.autoFilter){return}if(this.multiSelect){return}var b=this.textField,c=this.pinyinField,a=this._textEl.value.toLowerCase();this.tree.filter(function(g){var d=String(g[b]?g[b]:"").toLowerCase(),f=String(g[c]?g[c]:"").toLowerCase();if(d.indexOf(a)!=-1||f.indexOf(a)!=-1){return true}else{return false}});this.tree.expandAll();this.showPopup()},o0oOlo:function(b){var c={htmlEvent:b};this.fire("keydown",c);if(b.keyCode==8&&(this.isReadOnly()||this.allowInput==false)){return false}if(b.keyCode==9){if(this.isShowPopup()){this.hidePopup()}return}if(this.isReadOnly()){return}switch(b.keyCode){case 27:if(this.isShowPopup()){b.stopPropagation()}this.hidePopup();break;case 13:var a=this;setTimeout(function(){a.fire("enter",c)},10);break;case 37:break;case 38:b.preventDefault();break;case 39:break;case 40:b.preventDefault();this.showPopup();break;default:if(this.allowInput==false){}else{a=this;if(a._queryTimer){clearTimeout(a._queryTimer);a._queryTimer=null}a._queryTimer=setTimeout(function(){a._queryTimer=null;a.l00Ol()},350)}break}},Olo1:function(c){if(!this.multiSelect){return}var b=this.tree.getValue(),a=this.getValue();this.setValue(b);if(a!=this.getValue()){this.fireValueChanged()}this.focus()},l1OO:function(a){if(this.multiSelect){return}var c=this.tree.getSelectedNode(),b=this.tree.oO1l(c),f=b[0],d=this.getValue();this.setValue(f);if(d!=this.getValue()){this.fireValueChanged()}if(this._nohide!==true){this.hidePopup();this.focus()}this._nohide=false;this.fire("nodeclick",{node:a.node})},getMultiSelect:function(){return this.multiSelect},setMultiSelect:function(a){if(this.multiSelect!=a){this.multiSelect=a;this.tree.setShowCheckBox(a);this.tree.setAllowSelect(!a);this.tree.setEnableHotTrack(!a)}},setValue:function(a){var b=this.tree.oO1l(a);if(b[1]==""&&!this.valueFromSelect){b[0]=a;b[1]=a}this.value=b[0];this._valueEl.value=b[0];this.text=this._textEl.value=b[1];this.O0llo0()},getValue:function(){var a=TreeSelect.superclass.getValue.call(this);return a},getDataField:function(){return this.dataField},setDataField:function(a){if(this.tree){this.tree.setDataField(a)}this.dataField=a},getNodesField:function(){return this.nodesField},setNodesField:function(a){if(this.tree){this.tree.setNodesField(a)}this.nodesField=a},getTextField:function(){return this.textField},setTextField:function(a){if(this.tree){this.tree.setTextField(a)}this.textField=a},getPinyinField:function(){return this.pinyinField},setPinyinField:function(a){this.pinyinField=a},getDefaultRowHeight:function(){return this.defaultRowHeight},setDefaultRowHeight:function(a){if(this.tree){this.tree.defaultRowHeight=a}this.defaultRowHeight=a},getVirtualScroll:function(){return this.virtualScroll},setVirtualScroll:function(a){if(this.tree){this.tree.setVirtualScroll(a)}this.virtualScroll=a},getUrl:function(){return this.url},setUrl:function(a){this.getPopup();this.tree.setUrl(a);this.url=this.tree.url;this.data=this.tree.data;this._getCheckedValue()},_getCheckedValue:function(){var a=this.tree.getValue();this.setValue(a)},getData:function(){return this.data},setData:function(a){if(typeof a=="string"){a=this._eval(a)}if(!mini.isArray(a)){a=[]}this.tree.setData(a);this.data=this.tree.data;this._getCheckedValue()},_eval:function($){return window.eval("("+$+")")},load:function(a){this.tree.load(a);this.data=this.tree.data;this._getCheckedValue()},getList:function(){return this.tree.getList()},loadList:function(b,c,a){this.tree.loadList(b,c,a);this.data=this.tree.getData();this._getCheckedValue()},getAt:function(a){return this.data[a]},indexOf:function(a){return this.data.indexOf(a)},getItem:function(a){return typeof a=="object"?a:this.data[a]},Oo0o0l:function(a){if(this._textChanged){this._textChanged=false;this.O1O1()}this.__doFocusCls();this.tree.clearFilter();this.fire("hidepopup")},getExpandOnPopup:function(){return this.expandOnPopup},setExpandOnPopup:function(a){this.expandOnPopup=a},showPopup:function(){var b={cancel:false};this.fire("beforeshowpopup",b);this._firebeforeshowpopup=false;if(b.cancel==true){return}var a=this.popup.el.style.height;TreeSelect.superclass.showPopup.call(this);this.tree.setValue(this.value,false);if(this.expandOnPopup){this.tree.expandPath(this.value)}this._nohide=false},getChildNodes:function(a){return this.tree.getChildNodes(a)},getParentNode:function(a){return this.tree.getParentNode(a)},getSelectedNodes:function(){return this.tree.getNodesByValue(this.value)},getCheckedNodes:function(a){var b=this.tree.getNodesByValue(this.value);if(a===false){a="leaf"}b=this.tree._dataSource.doGetCheckedNodes(b,a);return b},getSelectedNode:function(){return this.getSelectedNodes()[0]},findNodes:function(a){return this.tree.getNodesByValue(a)},findItems:function(a){return this.tree.findNodes(this.tree.getIdField(),a)},OloOOo:function(a){},loo1O1:function(a){},lo11o0:function(a){a.tree=a.sender;this.fire("beforenodeselect",a);if(a.cancel){this._nohide=true}},l0olOl:function(a){a.tree=a.sender;this.fire("beforenodecheck",a)},_olOOl0:function(a){this.fire("drawnode",a)},_createPopup:function(){TreeSelect.superclass._createPopup.call(this);this.tree=new Tree();this.tree.setShowTreeIcon(true);this.tree.setStyle("border:0;width:100%;height:100%;overflow:hidden;");this.tree.setResultAsTree(this.resultAsTree);this.tree.render(this.popup._contentEl);this.tree.setCheckRecursive(this.checkRecursive);this.tree.setShowFolderCheckBox(this.showFolderCheckBox);this.tree.setShowRadioButton(this.showRadioButton);this.tree.setExpandOnNodeClick(this.expandOnNodeClick);this.tree.checkOnTextClick=this.checkOnTextClick;if(!mini.isNull(this.defaultRowHeight)){this.tree.defaultRowHeight=this.defaultRowHeight}this.tree.on("nodeclick",this.l1OO,this);this.tree.on("nodecheck",this.Olo1,this);this.tree.on("expand",this.loo1O1,this);this.tree.on("collapse",this.OloOOo,this);this.tree.on("beforenodecheck",this.l0olOl,this);this.tree.on("beforenodeselect",this.lo11o0,this);this.tree.on("drawnode",this._olOOl0,this);this.tree.useAnimation=false;var a=this;this.tree.on("beforeload",function(b){a.fire("beforeload",b)},this);this.tree.on("load",function(b){a.fire("load",b)},this);this.tree.on("loaderror",function(b){a.fire("loaderror",b)},this)},set:function(b){if(typeof b=="string"){return this}var f=b.value;delete b.value;var a=b.text;delete b.text;var d=b.url;delete b.url;var c=b.data;delete b.data;TreeSelect.superclass.set.call(this,b);if(!mini.isNull(c)){this.setData(c)}if(!mini.isNull(d)){this.setUrl(d)}if(!mini.isNull(f)){this.setValue(f)}if(!mini.isNull(a)){this.setText(a)}return this},setAjaxOptions:function(a){this.ajaxOptions=a;this.tree.setAjaxOptions(a)},setAjaxType:function(a){this.ajaxType=a;this.tree.setAjaxType(a)},setAjaxData:function(a){this.ajaxData=a;this.tree.setAjaxData(a)}});mini.regClass(TreeSelect,"TreeSelect");jQuery(function(){setTimeout(function(){try{var c=mini.getActiveElement();if(c){var a=jQuery(c).closest(".mini-buttonedit,.mini-textbox");if(a.length){var d=mini.get(a[0]);if(d){d.blur();d.focus()}}}}catch(b){}},100)});Spinner=function(){Spinner.superclass.constructor.apply(this,arguments);this.setValue(this.minValue)};mini.extend(Spinner,ButtonEdit,{value:0,minValue:0,maxValue:100,increment:1,decimalPlaces:-1,changeOnMousewheel:true,allowLimitValue:true,allowLoopValue:false,allowNull:false,uiCls:"mini-spinner",format:"",l1ol00:null});mini.copyTo(Spinner.prototype,{getAttrs:function(b){var a=Spinner.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["minValue","maxValue","increment","decimalPlaces","format"]);mini._ParseBool(b,a,["allowLimitValue","allowNull","changeOnMousewheel","allowLoopValue"]);return a},O1O1:function(c){var b=this.getValue(),a=mini.parseFloat(this._textEl.value,this.culture,this.format);this.setValue(a);if(b!=this.getValue()){this.fireValueChanged()}},lo1o:function(a){this.lO00Ol();mini.un(document,"mouseup",this.lo1o,this);if(this._DownValue!=this.getValue()){this.fireValueChanged()}},OoOOO:function(a){if(this.isReadOnly()){return}if(this.changeOnMousewheel==false){return}var g=a.wheelDelta||a.originalEvent.wheelDelta;if(mini.isNull(g)){g=-a.originalEvent.detail*24}var f=this.increment;if(g<0){f=-f}var d=1000000,c=this.value*d,b=f*d,i=(c+b)/d;this.setValue(i);this.fireValueChanged();return false},o0oOlo:function(b){Spinner.superclass.o0oOlo.call(this,b);var a=mini.Keyboard;if(this.isReadOnly()){return}switch(b.keyCode){case a.Top:if(this.keyNavEnabled){this.setValue(this.value+this.increment);this.fireValueChanged()}break;case a.Bottom:if(this.keyNavEnabled){this.setValue(this.value-this.increment);this.fireValueChanged()}break}},oO10:function(a){this._DownValue=this.getValue();this.O1O1();if(a.spinType=="up"){this.o0o1(this.increment,230,2)}else{this.o0o1(-this.increment,230,2)}},lO00Ol:function(){clearInterval(this.l1ol00);this.l1ol00=null},o0o1:function(n,g,k){this.lO00Ol();var f=this;function a(o){if(n>0){if(o>f.maxValue){f.setValue(f.minValue)}}else{if(o<f.minValue){f.setValue(f.maxValue)}}}var i=1000000,j=this.value*i,c=n*i,b=(j+c)/i;this.setValue(b);if(f.allowLoopValue){a(b)}var d=k,l=new Date();this.l1ol00=setInterval(function(){var o=f.value+n;f.setValue(o);if(f.allowLoopValue){a(o)}f.fireValueChanged();k--;if(k==0&&g>50){f.o0o1(n,g-100,d+3)}var p=new Date();if(p-l>500){f.lO00Ol()}l=p},g);mini.on(document,"mouseup",this.lo1o,this)},getAllowLoopValue:function(){return this.allowLoopValue},setAllowLoopValue:function(a){this.allowLoopValue=a},getFormatValue:function(){if(mini.isNull(this.value)){return""}if(this.format&&mini.isNumber(this.value)){return mini.formatNumber(this.value,this.format,this.culture)}return this.value},getFormat:function(){return this.format},setFormat:function(a){if(typeof a!="string"){return}if(this.format!=a){this.format=a;this.setText(this.getFormatValue())}},getAllowNull:function(a){return this.allowNull},setAllowNull:function(a){this.allowNull=a},getAllowLimitValue:function(a){return this.allowLimitValue},setAllowLimitValue:function(a){this.allowLimitValue=a},getChangeOnMousewheel:function(a){return this.changeOnMousewheel},setChangeOnMousewheel:function(a){this.changeOnMousewheel=a},getDecimalPlaces:function(a){return this.decimalPlaces},setDecimalPlaces:function(a){a=parseInt(a);if(isNaN(a)||a<0){return}this.decimalPlaces=a},getIncrement:function(a){return this.increment},setIncrement:function(a){a=parseFloat(a);if(isNaN(a)){return}if(this.increment!=a){this.increment=a}},getMinValue:function(a){return this.minValue},setMinValue:function(a){a=parseFloat(a);if(isNaN(a)){return}a=parseFloat(a);if(this.minValue!=a){this.minValue=a;this.OlolO()}},getMaxValue:function(a){return this.maxValue},setMaxValue:function(a){a=parseFloat(a);if(isNaN(a)){return}a=parseFloat(a);if(this.maxValue!=a){this.maxValue=a;this.OlolO()}},setValue:function(a){a=mini.parseFloat(a,this.culture,this.format);a=parseFloat(a);if(isNaN(a)&&!this.allowNull){a=this.minValue}if(isNaN(a)&&this.allowNull){a=null}if(a&&this.decimalPlaces>=0){a=parseFloat(a.toFixed(this.decimalPlaces))}if(this.value!=a){this.value=a;this.OlolO();this._valueEl.value=this.value;this.text=this._textEl.value=this.getFormatValue()}else{this.text=this._textEl.value=this.getFormatValue()}},getFormValue:function(){var b=this.value;b=parseFloat(b);if(this.allowNull&&isNaN(b)){return""}if(isNaN(b)){b=0}var c=String(b).split("."),f=c[0],d=c[1];if(!d){d=""}if(this.decimalPlaces>0){for(var a=d.length,g=this.decimalPlaces;a<g;a++){d+="0"}d="."+d}else{if(d){d="."+d}}return f+d},OlolO:function(){if(this.allowLimitValue==false){return}if(mini.isNull(this.value)&&this.allowNull){return}if(this.minValue>this.maxValue){this.maxValue=this.minValue+100}if(this.value<this.minValue){this.setValue(this.minValue)}if(this.value>this.maxValue){this.setValue(this.maxValue)}},_initEvents:function(){Spinner.superclass._initEvents.call(this);__initEvents(function(){this.on("buttonmousedown",this.oO10,this);mini.on(this.el,"mousewheel",this.OoOOO,this)},this)},OOO0OHtml:function(){var a="onmouseover=\"__cls_add(this,'"+this.O0l0+"');\" onmouseout=\"__cls_rm(this,'"+this.O0l0+"');\"";return'<span name="trigger" class="mini-buttonedit-button mini-buttonedit-trigger" '+a+'><span class="mini-buttonedit-up"><span></span></span><span class="mini-buttonedit-down"><span></span></span></span>'},set:function(b){if(typeof b=="string"){return this}var a=b.value;delete b.value;Spinner.superclass.set.call(this,b);if(!mini.isNull(a)){this.setValue(a)}return this}});mini.regClass(Spinner,"spinner");TimeSpinner=function(){TimeSpinner.superclass.constructor.apply(this,arguments);this.setValue("00:00:00")};mini.extend(TimeSpinner,ButtonEdit,{value:null,format:"H:mm:ss",uiCls:"mini-timespinner",l1ol00:null});mini.copyTo(TimeSpinner.prototype,{getAttrs:function(b){var a=TimeSpinner.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["format"]);return a},O1O1:function(b){var a=this.getFormValue();this.setValue(this._textEl.value);if(a!=this.getFormValue()){this.fireValueChanged()}},lo1o:function(a){this.lO00Ol();mini.un(document,"mouseup",this.lo1o,this);if(this._DownValue!=this.getFormValue()){this.fireValueChanged()}},oO10:function(a){this._DownValue=this.getFormValue();this.OoOll="hours";if(a.spinType=="up"){this.o0o1(1,230,2)}else{this.o0o1(-1,230,2)}},lO00Ol:function(){clearInterval(this.l1ol00);this.l1ol00=null},o0o1:function(a,d,f){this.lO00Ol();this.O0001o(a,this.OoOll);var c=this,b=f,g=new Date();this.l1ol00=setInterval(function(){c.O0001o(a,c.OoOll);f--;if(f==0&&d>50){c.o0o1(a,d-100,b+3)}var i=new Date();if(i-g>500){c.lO00Ol()}g=i},d);mini.on(document,"mouseup",this.lo1o,this)},O0001o:function(g,f){var d=this.getValue();if(d){switch(f){case"hours":var c=d.getHours()+g;if(c>23){c=23}if(c<0){c=0}d.setHours(c);break;case"minutes":var a=d.getMinutes()+g;if(a>59){a=59}if(a<0){a=0}d.setMinutes(a);break;case"seconds":var b=d.getSeconds()+g;if(b>59){b=59}if(b<0){b=0}d.setSeconds(b);break}}else{d="00:00:00"}this.setValue(d)},getFormattedValue:function(){if(!this.value){return""}return mini.formatDate(this.value,this.format)},getFormValue:function(){if(!this.value){return""}return mini.formatDate(this.value,this.format)},getValue:function(){return this.value==null?null:new Date(this.value.getTime())},setValue:function(a){a=mini.parseTime(a,this.format);if(!a){a=null}if(mini.isDate(a)){a=new Date(a.getTime())}this.value=a;this.text=this._textEl.value=this.getFormattedValue();this._valueEl.value=this.getFormValue()},getFormat:function(){return this.format},setFormat:function(a){if(typeof a!="string"){return}var b=["H:mm:ss","HH:mm:ss","H:mm","HH:mm","H","HH","mm:ss"];if(this.format!=a){this.format=a;this.text=this._textEl.value=this.getFormattedValue()}},_initEvents:function(){TimeSpinner.superclass._initEvents.call(this);__initEvents(function(){this.on("buttonmousedown",this.oO10,this);mini.on(this.el,"mousewheel",this.OoOOO,this);mini.on(this._textEl,"keydown",this.o110O,this)},this)},OOO0OHtml:function(){var a="onmouseover=\"__cls_add(this,'"+this.O0l0+"');\" onmouseout=\"__cls_rm(this,'"+this.O0l0+"');\"";return'<span class="mini-buttonedit-button" '+a+'><span class="mini-buttonedit-up"><span></span></span><span class="mini-buttonedit-down"><span></span></span></span>'}});mini.regClass(TimeSpinner,"timespinner");HtmlFile=function(){HtmlFile.superclass.constructor.apply(this,arguments);this.on("validation",this.llO0O,this)};mini.extend(HtmlFile,ButtonEdit,{buttonText:"浏览...",_buttonWidth:56,limitType:"",limitTypeErrorText:"上传文件格式为：",allowInput:false,readOnly:true,l00OO0:0,uiCls:"mini-htmlfile"});mini.copyTo(HtmlFile.prototype,{getAttrs:function(b){var a=HtmlFile.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["limitType","buttonText","limitTypeErrorText","onfileselect"]);return a},getLimitType:function(){return this.limitType},setLimitType:function(a){this.limitType=a},getButtonText:function(){return this.buttonText},setButtonText:function(a){this.buttonText=a;var b=mini.byClass("mini-buttonedit-button",this.el);if(b){b.innerHTML=a}},clear:function(){var c=this.OlOOO0,b=document.createElement("form");b.style.position="absolute";b.style.left="-1000px";b.style.top="-1000px";document.body.appendChild(b);var a=c.previousSibling;b.appendChild(c);b.reset();jQuery(c).insertAfter(a);document.body.removeChild(b)},getValue:function(){return this._textEl.value},setName:function(a){this.name=a;mini.setAttr(this.OlOOO0,"name",this.name)},llO0O:function(b){if(!this.limitType){return}if(b.isValid==false){return}if(this.required==false&&b.value==""){return}var a=b.value.split("."),d=("*."+a[a.length-1]).toLowerCase(),c=this.limitType.split(";");if(c.length>0&&c.indexOf(d)==-1){b.errorText=this.limitTypeErrorText+this.limitType;b.isValid=false}},olOO:function(c){var b=c.pageX,a=c.pageY,d=__getBox(this.el);b=(b-d.x-5);a=(a-d.y-5);if(this.enabled==false){b=-20;a=-20}this.OlOOO0.style.display="";this.OlOOO0.style.left=b+"px";this.OlOOO0.style.top=a+"px"},oll11O:function(a){this.value=this._textEl.value=this.OlOOO0.value;this.fireValueChanged();a={htmlEvent:a};this.fire("fileselect",a)},OOO0OHtml:function(){var a="onmouseover=\"__cls_add(this,'"+this.O0l0+"');\" onmouseout=\"__cls_rm(this,'"+this.O0l0+"');\"";return'<span class="mini-buttonedit-button" '+a+">"+this.buttonText+"</span>"},destroy:function(a){if(!this.destroyed){mini.clearEvent(this._borderEl);mini.clearEvent(this.OlOOO0)}HtmlFile.superclass.destroy.call(this,a)},_create:function(){HtmlFile.superclass._create.call(this);this.OlOOO0=mini.append(this.el,'<input type="file" hideFocus class="mini-htmlfile-file" name="'+this.name+'" ContentEditable=false/>');mini.on(this._borderEl,"mousemove",this.olOO,this);mini.on(this.OlOOO0,"change",this.oll11O,this)}});mini.regClass(HtmlFile,"htmlfile");mini.FilterEdit=function(){mini.FilterEdit.superclass.constructor.apply(this,arguments);this.on("buttonclick",this.olllO,this);this.on("closeclick",this.__OnCloseClick,this)};mini.extend(mini.FilterEdit,ButtonEdit,{uiCls:"mini-filteredit",_deferSetText:false,value:"",filterValue:"",filterData:null,within:function(a){if(__getById(this.el,a.target)){return true}if(this.menu&&this.menu.within(a)){return true}return false},_getMenu:function(){var a=this;if(!this.menu){this.menu=new Menu();this.menu.on("itemclick",function(b){a.setFilterValue(b.item.value);a.fireValueChanged()})}return this.menu},olllO:function(a){var d=this._getMenu(),b=(this.filterData||[]).clone();d.setItems(b);var c=this.findItem(this.filterValue);d.setSelectedItem(c);d.showAtEl(this._buttonsEl,{})},__OnCloseClick:function(a){this.setText("");this.setValue("");this.setFilterValue("");this.fireValueChanged()},findItem:function(f){var a=this._getMenu(),d=a.getItems();for(var b=0,g=d.length;b<g;b++){var c=d[b];if(c.value==f){return c}}return null},setValue:function(a){if(a===null||a===undefined){a=""}a=String(a);this.value=a;this._valueEl.value=this._textEl.value=a},getFilterData:function(){return this.filterData||[]},setFilterData:function(a){if(!mini.isArray(a)){a=[]}this.filterData=a},getFilterValue:function(){return this.filterValue||""},setFilterValue:function(a){if(a===null||a===undefined){a=""}this.filterValue=a},getAttrs:function(_){var B=mini.FilterEdit.superclass.getAttrs.call(this,_),A=jQuery(_);mini._ParseString(_,B,["value","text","filterValue","filterData"]);if(typeof B.filterData=="string"){try{B.filterData=window.eval("("+B.filterData+")")}catch($){B.filterData=mini._getMap(B.filterData,window)}}return B}});mini.regClass(mini.FilterEdit,"filteredit");Lookup=function(){this.data=[];Lookup.superclass.constructor.apply(this,arguments);mini.on(this._textEl,"mouseup",this.loOll1,this);this.on("showpopup",this.__OnShowPopup,this)};mini.extend(Lookup,PopupEdit,{allowInput:true,valueField:"id",textField:"text",delimiter:",",multiSelect:false,data:[],grid:null,_destroyPopup:false,uiCls:"mini-lookup"});mini.copyTo(Lookup.prototype,{getAttrs:function(b){var a=Lookup.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["grid","valueField","textField"]);mini._ParseBool(b,a,["multiSelect"]);return a},o1Ol1:function(f){var a=-1;if(this.text==""){return a}var d=String(this.text).split(this.delimiter),b=0;for(var i=0,c=d.length;i<c;i++){var g=d[i];if(b<f&&f<=b+g.length){a=i;break}b=b+g.length+1}return a},loOll1:function(c){if(this.isReadOnly()){return}var b=mini.getSelectRange(this._textEl),a=b[0],d=b[1],f=this.o1Ol1(a)},o0oOlo:function(a){Lookup.superclass.o0oOlo.call(this,a);switch(a.keyCode){case 46:case 8:break;case 37:break;case 39:break}},doUpdate:function(){Lookup.superclass.doUpdate.call(this);this._textEl.readOnly=true;this.el.style.cursor="default"},__OnShowPopup:function(i){var f=String(this.value).split(this.delimiter),g={};for(var c=0,l=f.length;c<l;c++){var d=f[c];g[d]=1}var k=this.grid.getData(),j=[];for(c=0,l=k.length;c<l;c++){var b=k[c],a=b[this.valueField];if(g[a]){j.push(b)}}this.grid.selects(j)},OoOl0O:function(a){this.__OnShowPopup(a)},__OnGridRowClickChanged:function(f){var n=this,o=n.grid,d=this.OO11(o.getList()),c=this.OO11(o.getSelecteds()),i=this.OO11(this.data);if(this.multiSelect==false){i={};this.data=[]}var l={};for(var k in i){var b=i[k];if(d[k]){if(c[k]){}else{l[k]=b}}}for(var j=this.data.length-1;j>=0;j--){b=this.data[j],k=b[this.valueField];if(l[k]){this.data.removeAt(j)}}var g=[];for(k in c){b=c[k];if(!i[k]){g.push(b)}}g.sort(function(r,q){var p=o.indexOf(r),s=o.indexOf(q);if(p<s){return -1}if(p==s){return 0}return 1});this.data.addRange(g);var a=this.oO1l(this.data);this.setValue(a[0]);this.setText(a[1]);this.fireValueChanged()},setText:function(a){Lookup.superclass.setText.call(this,a);this.oO1O()},setValue:function(a){Lookup.superclass.setValue.call(this,a);this.oO1O()},OO11:function(g){var d={};for(var c=0,f=g.length;c<f;c++){var b=g[c],a=b[this.valueField];d[a]=b}return d},oO1O:function(){this.value=mini.isNull(this.value)?"":String(this.value);this.text=mini.isNull(this.text)?"":String(this.text);var f=[],c=this.value.split(this.delimiter),g=this.text.split(this.delimiter),d=c.length;if(this.value){for(var b=0,i=d;b<i;b++){var a={},k=c[b],j=g[b];a[this.valueField]=k?k:"";a[this.textField]=j?j:"";f.push(a)}}this.data=f},oO1l:function(b){if(mini.isNull(b)){b=[]}var a=[],c=[];for(var f=0,d=b.length;f<d;f++){var g=b[f];if(g){a.push(this.getItemValue(g));c.push(this.getItemText(g))}}return[a.join(this.delimiter),c.join(this.delimiter)]},getItemText:function(b){var a=b[this.textField];return mini.isNull(a)?"":String(a)},getItemValue:function(a){return String(a[this.valueField])},deselectAll:function(){this.data=[];this.setValue("");this.setText("");if(this.grid){this.grid.deselectAll()}},getTextField:function(){return this.textField},setTextField:function(a){this.textField=a},getValueField:function(){return this.valueField},setValueField:function(a){this.valueField=a},getGrid:function(){return this.grid},setGrid:function(a){if(typeof a=="string"){mini.parse(a);a=mini.get(a)}this.grid=mini.getAndCreate(a);if(this.grid){this.grid.setMultiSelect(this.multiSelect);this.grid.setCheckSelectOnLoad(false);this.grid.on("rowclick",this.__OnGridRowClickChanged,this);this.grid.on("load",this.OoOl0O,this);this.grid.on("checkall",this.__OnGridRowClickChanged,this)}},setMultiSelect:function(a){this.multiSelect=a;if(this.grid){this.grid.setMultiSelect(a)}},destroy:function(a){if(this.grid){this.grid.un("rowclick",this.__OnGridRowClickChanged,this);this.grid.un("load",this.OoOl0O,this);this.grid.un("checkall",this.__OnGridRowClickChanged,this);this.grid=null}Lookup.superclass.destroy.call(this,a)}});mini.regClass(Lookup,"lookup");TextBoxList=function(a){TextBoxList.superclass.constructor.call(this,null);this.data=[];this.selecteds=[];this.doUpdate();if(a){mini.applyTo.call(this,a)}};mini.extend(TextBoxList,ValidatorBase,{formField:true,remote:true,value:"",text:"",valueField:"id",textField:"text",selecteds:null,data:null,url:"",delay:150,allowInput:true,editIndex:0,o10lo:"mini-textboxlist-focus",o01Ool:"mini-textboxlist-item-hover",Oo1000:"mini-textboxlist-item-selected",OllOo1:"mini-textboxlist-close-hover",textName:"",uiCls:"mini-textboxlist",errorIconEl:null,valueFromSelect:true,inputMode:false,ajaxDataType:"text",ajaxContentType:"application/x-www-form-urlencoded; charset=UTF-8",placeholder:"",emptyText:"没有结果",loadingText:"数据加载中,请稍后",errorText:"错误",popupLoadingText:"<span class='mini-textboxlist-popup-loading'>数据加载中...</span>",popupErrorText:"<span class='mini-textboxlist-popup-error'>错误</span>",popupEmptyText:"<span class='mini-textboxlist-popup-noresult'>没有数据</span>",isShowPopup:false,popupHeight:"",popupMinHeight:30,popupMaxHeight:150,searchField:"key"});mini.copyTo(TextBoxList.prototype,{getAttrs:function(c){var a=TextBox.superclass.getAttrs.call(this,c),b=jQuery(c);mini._ParseString(c,a,["value","text","valueField","textField","url","popupHeight","textName","onfocus","onbeforeload","onload","searchField","emptyText","loadingText","errorText","onblur","onremoveitem","placeholder"]);mini._ParseBool(c,a,["allowInput","valueFromSelect","remote","inputMode"]);mini._ParseInt(c,a,["popupMinHeight","popupMaxHeight"]);return a},getSearchField:function(){return this.searchField},setSearchField:function(a){this.searchField=a},blur:function(){try{this.oOlo0O.blur()}catch(a){}},focus:function(){try{this.oOlo0O.focus()}catch(a){}},o0oOlo:function(d){this._selectOnLoad=null;if(this.isReadOnly()||this.allowInput==false){return false}if(d.keyCode==13&&!this.isShowPopup){return}d.stopPropagation();if(this.isReadOnly()||this.allowInput==false){return}var l=mini.getSelectRange(this.oOlo0O),a=l[0],j=l[1],c=this.oOlo0O.value.length,f=a==j&&a==0,b=a==j&&j==c;if(this.isReadOnly()||this.allowInput==false){d.preventDefault()}if(d.keyCode==9){this.hidePopup();return}if(d.keyCode==16||d.keyCode==17||d.keyCode==18){return}switch(d.keyCode){case 13:if(this.inputMode){var i=this.getInputText().trim();if(i){this._doInsertInputValue()}return}if(this.isShowPopup){d.preventDefault();if(this._loading){this._selectOnLoad=true;return}var g=this.oOll0.getFocusedItem();if(g&&g.enabled===false){return}this.__doSelectValue()}break;case 27:d.preventDefault();this.hidePopup();break;case 8:if(f){d.preventDefault()}case 37:if(f){if(this.isShowPopup){this.hidePopup()}else{if(this.editIndex>0){var k=this.editIndex-1;if(k<0){k=0}if(k>=this.selecteds.length){k=this.selecteds.length-1}this.showInput(false);this.select(k)}}}break;case 39:if(b){if(this.isShowPopup){this.hidePopup()}else{if(this.editIndex<=this.selecteds.length-1){k=this.editIndex;this.showInput(false);this.select(k)}}}break;case 38:d.preventDefault();if(this.isShowPopup){k=-1,g=this.oOll0.getFocusedItem();if(g){k=this.oOll0.indexOf(g)}k--;if(k<0){k=0}this.oOll0.o10l0(k,true)}break;case 40:d.preventDefault();if(this.isShowPopup){k=-1,g=this.oOll0.getFocusedItem();if(g){k=this.oOll0.indexOf(g)}k++;if(k<0){k=0}if(k>=this.oOll0.getCount()){k=this.oOll0.getCount()-1}this.oOll0.o10l0(k,true)}else{this.l10o(true)}break;default:break}},__doSelectValue:function(){var b=this.oOll0.getFocusedItem();if(b){this.oOll0.setSelected(b);this.lastInputText=this.text;this.hidePopup();this.o0OO()}else{if(!this.valueFromSelect){var a=this.getInputText().trim();if(a){this._doInsertInputValue()}}}},o110O:function(b){if(this.isReadOnly()||this.allowInput==false){return false}var a=this.selecteds.indexOf(this.Oo1O),c=this;function d(){var f=c.selecteds[a];c.removeItem(f);f=c.selecteds[a];if(!f){f=c.selecteds[a-1]}c.select(f);if(!f){c.showInput()}}switch(b.keyCode){case 8:b.preventDefault();d();break;case 37:case 38:this.select(null);this.showInput(a);break;case 39:case 40:a+=1;this.select(null);this.showInput(a);break;case 46:d();break}},l11o00:function(a){if(this.isReadOnly()||this.enabled==false){return}if(this.enabled==false){return}var b=this.O1o1O(a);if(!b){if(__getByCls(a.target,"mini-textboxlist-input")){}else{this.showInput()}return}this.focusEl.focus();this.select(b);if(a&&__cls_has(a.target,"mini-textboxlist-close")){this.removeItem(b);this.fire("removeitem",{item:b})}},lol11:function(a){this.blurItem()},olOO:function(a){if(this.enabled==false){return}var b=this.O1o1O(a);if(!b){this.blurItem();return}this.hoverItem(b,a)},hidePopup:function(){this.isShowPopup=false;if(this.popup){this.popup.el.style.display="none"}},showPopup:function(a){if(this.isDisplay()==false){return}this.isShowPopup=true;var c=this._createPopup();c.el.style.zIndex=mini.getMaxZIndex();var f=this.oOll0;f.emptyText=this.popupEmptyText;if(a=="loading"){f.emptyText=this.popupLoadingText;this.oOll0.setData([])}else{if(a=="error"){f.emptyText=this.popupLoadingText;this.oOll0.setData([])}}this.oOll0.doUpdate();var d=this.getBox(),b=d.x,g=d.y+d.height;this.popup.el.style.display="block";mini.setXY(c.el,-1000,-1000);this.popup.setWidth(d.width);this.popup.setHeight(this.popupHeight);if(this.popup.getHeight()<this.popupMinHeight){this.popup.setHeight(this.popupMinHeight)}if(this.popup.getHeight()>this.popupMaxHeight){this.popup.setHeight(this.popupMaxHeight)}mini.setXY(c.el,b,g)},_createPopup:function(){if(!this.popup){this.popup=new ListBox();this.popup.addCls("mini-textboxlist-popup");this.popup.setStyle("position:absolute;left:0;top:0;");this.popup.showEmpty=true;this.popup.setValueField(this.valueField);this.popup.setTextField(this.textField);this.popup.render(document.body);this.popup.on("itemclick",function(a){this.hidePopup();this.o0OO()},this)}this.oOll0=this.popup;return this.popup},getErrorText:function(a){return this.errorText},setErrorText:function(a){this.popupEmptyText="<span class='mini-textboxlist-popup-noresult'>"+a+"</span>";this.errorText=a},getLoadingText:function(a){return this.loadingText},setLoadingText:function(a){this.popupLoadingText="<span class='mini-textboxlist-popup-noresult'>"+a+"</span>";this.loadingText=a},getEmptyText:function(a){return this.emptyText},setEmptyText:function(a){this.popupEmptyText="<span class='mini-textboxlist-popup-noresult'>"+a+"</span>";this.emptyText=a},getPlaceholder:function(a){return this.placeholder},setPlaceholder:function(a){this.placeholder=a},within:function(a){if(__getById(this.el,a.target)){return true}if(this.showPopup&&this.popup&&this.popup.within(a)){return true}return false},l0oO11:function(){if(this.delayTimer){clearTimeout(this.delayTimer);this.delayTimer=null}if(this.lOol11){this.lOol11.abort()}this._loading=false},l00Ol:function(){if(this.isDisplay()==false){return}var l=this.getInputText(),f=this;if(!f.remote){var d=this._getFilterLocalData(l);f.oOll0.setData(d);f.showPopup();f.oOll0.o10l0(0,true);f._loading=false;return}var j=this.oOll0.getData(),k={value:this.getValue(),text:this.getText()};k[this.searchField]=l;var g=this.url,b=typeof g=="function"?g:window[g];if(typeof b=="function"){g=b(this)}if(!g){return}var i="post";if(g){if(g.indexOf(".txt")!=-1||g.indexOf(".json")!=-1){i="get"}}var c={url:g,async:true,params:k,data:k,type:this.ajaxType?this.ajaxType:i,cache:false,cancel:false};jQuery.extend(true,c,this.ajaxOptions);this.fire("beforeload",c);if(c.cancel){return}var a=this;mini.copyTo(c,{success:function(p,r,n){delete c.params;var q={text:p,result:null,sender:a,options:c,xhr:n},o=null;try{mini_doload(q);o=q.result;if(!o){o=mini.decode(p)}}catch(s){}if(mini.isArray(o)){o={data:o}}if(a.dataField){o.data=mini._getMap(a.dataField,o)}if(!o.data){o.data=[]}f.oOll0.setData(o.data);f.showPopup();f.oOll0.o10l0(0,true);f.fire("load",{data:o.data,result:o});f._loading=false;if(f._selectOnLoad){f.__doSelectValue();f._selectOnLoad=null}},error:function(o,n,p){f.showPopup("error")}});f.lOol11=mini.ajax(c)},_getFilterLocalData:function(j){var f=this,g=[],k=this._getSelectedMap();j=(j||"").toLowerCase();for(var d=0,a=f.data.length;d<a;d++){var i=f.data[d],c=i[this.valueField];if(!k[c]){var b=i[this.textField];if(!j||String(b).toLowerCase().indexOf(j)!=-1){g.push(i)}}}return g},_getSelectedMap:function(){var a={};for(var c=0,b=this.selecteds.length;c<b;c++){var d=this.selecteds[c];a[d[this.valueField]]=d[this.textField]}return a},l10o:function(b){var a=this;if(this.inputMode){return}setTimeout(function(){a.llOOl()},1);this.showPopup("loading");this.l0oO11();this._loading=true;this.delayTimer=setTimeout(function(){var c=a.oOlo0O.value;a.l00Ol()},this.delay)},getIputMode:function(){return this.inputMode},setIputMode:function(a){this.inputMode=a},llOOl:function(){if(this.isDisplay()==false){return}var d=this.getInputText(),b=mini.measureText(this.oOlo0O,d),a=b.width>20?b.width+4:20,c=__getWidth(this.el,true);if(a>c-15){a=c-15}this.oOlo0O.style.width=a+"px"},doQuery:function(){this.l10o(true)},getValueFromSelect:function(){return this.valueFromSelect},setValueFromSelect:function(a){this.valueFromSelect=a},getPopupMaxHeight:function(){return this.popupMaxHeight},setPopupMaxHeight:function(a){this.popupMaxHeight=a},getPopupMinHeight:function(){return this.popupMinHeight},setPopupMinHeight:function(a){this.popupMinHeight=a},getPopupHeight:function(){return this.popupHeight},setPopupHeight:function(a){this.popupHeight=a},getUrl:function(){return this.url},setUrl:function(a){this.url=a},getAllowInput:function(){return this.allowInput},setAllowInput:function(a){this.allowInput=a;this.doLayout()},getTextField:function(){return this.textField},setTextField:function(a){this.textField=a;this._createSelecteds()},getValueField:function(){return this.valueField},setValueField:function(a){this.valueField=a;this._createSelecteds()},setText:function(a){if(mini.isNull(a)){a=""}if(this.text!==a){this.text=a;this._createSelecteds();this.doUpdate()}},setValue:function(a){if(mini.isNull(a)){a=""}if(this.value!=a){this.value=a;this._valueEl.value=a;this._createSelecteds();this.doUpdate()}},setName:function(a){if(this.name!=a){this.name=a;this._valueEl.name=a}},getFormValue:function(){var a=this.value;if(a===null||a===undefined){a=""}return String(a)},getValue:function(){var f=[];for(var b=0,a=this.selecteds.length;b<a;b++){var d=this.selecteds[b],c=mini._getMap(this.valueField,d);f.push(c)}return f.join(",")},getText:function(){var f=[];for(var b=0,a=this.selecteds.length;b<a;b++){var d=this.selecteds[b],c=mini._getMap(this.textField,d);if(mini.isNull(c)){c=""}c=c.replace(",","，");f.push(c)}return f.join(",")},getInputText:function(){return this.oOlo0O?this.oOlo0O.value:""},_createSelecteds:function(){var f=(this.text?this.text:"").split(","),a=(this.value?this.value:"").split(",");if(a[0]==""){a=[]}var b=a.length;this.selecteds.length=b;for(var j=0,g=b;j<g;j++){var c=this.selecteds[j];if(!c){c={};this.selecteds[j]=c}var i=!mini.isNull(f[j])?f[j]:"",d=!mini.isNull(a[j])?a[j]:"";mini._setMap(this.textField,i,c);mini._setMap(this.valueField,d,c)}this.value=this.getValue();this.text=this.getText()},removeItem:function(c){if(!c){return}var b=this.getItemEl(c);mini.removeNode(b);this.selecteds.remove(c);var a=this.getText(),d=this.getValue();this.setValue(d,false);this.setText(a,false);this.fireValueChanged()},insertItem:function(b,c){this.selecteds.insert(b,c);var a=this.getText(),d=this.getValue();this.setValue(d,false);this.setText(a,false);this._createSelecteds();this.doUpdate();this.showInput(b+1);this.fireValueChanged()},o0OO:function(){if(this.oOll0.getData().length==0){return}var b=this.oOll0.getSelected(),a=this.editIndex;if(b){b=mini.clone(b);this.insertItem(a,b)}},_doInsertInputValue:function(){var a=this.getInputText(),c={};c[this.textField]=a;c[this.valueField]=a;var b=this.editIndex;this.insertItem(b,c)},select:function(c){c=this.getItem(c);if(this.Oo1O){var a=this.getItemEl(this.Oo1O);__cls_rm(a,this.Oo1000)}this.Oo1O=c;if(this.Oo1O){a=this.getItemEl(this.Oo1O);__cls_add(a,this.Oo1000)}var b=this;if(this.Oo1O){this.focusEl.focus();var d=this;setTimeout(function(){try{d.focusEl.focus()}catch(f){}},50)}if(this.Oo1O){b.addCls(b.o10lo);b.OO0OO1=true}},showInput:function(d){this.select(null);if(mini.isNumber(d)){this.editIndex=d}else{this.editIndex=this.selecteds.length}if(this.editIndex<0){this.editIndex=0}if(this.editIndex>this.selecteds.length){this.editIndex=this.selecteds.length}var b=this.inputLi;b.style.display="block";if(mini.isNumber(d)&&d<this.selecteds.length){var c=this.selecteds[d],a=this.getItemEl(c);jQuery(a).before(b)}else{this.ulEl.appendChild(b)}if(d!==false){setTimeout(function(){try{b.firstChild.focus();mini.selectRange(b.firstChild,100)}catch(f){}},10)}else{this.lastInputText="";this.oOlo0O.value=""}return b},blurItem:function(){var c=this.selecteds.length;for(var b=0,a=c;b<a;b++){var d=this.selecteds[b],f=this.getItemEl(d);if(f){__cls_rm(f,this.o01Ool);__cls_rm(f.lastChild,this.OllOo1)}}},hoverItem:function(c,b){if(this.isReadOnly()||this.enabled==false){return}this.blurItem();var a=this.getItemEl(c);__cls_add(a,this.o01Ool);if(b&&__cls_has(b.target,"mini-textboxlist-close")){__cls_add(b.target,this.OllOo1)}},getItemEl:function(a){var c=this.selecteds.indexOf(a),b=this.uid+"$text$"+c;return document.getElementById(b)},getItem:function(a){if(typeof a=="number"){return this.selecteds[a]}if(typeof a=="object"){return a}},O1o1O:function(d){var c=__getByCls(d.target,"mini-textboxlist-item");if(c){var b=c.id.split("$"),a=b[b.length-1];return this.selecteds[a]}},doUpdate:function(){if(this.ol0Ol){clearInterval(this.ol0Ol)}if(this.oOlo0O){mini.un(this.oOlo0O,"keydown",this.o0oOlo,this)}var j=[],c=this.uid;for(var d=0,a=this.selecteds.length;d<a;d++){var i=this.selecteds[d],k=c+"$text$"+d,b=mini._getMap(this.textField,i);if(mini.isNull(b)){b=""}j[j.length]='<li id="'+k+'" class="mini-textboxlist-item">';j[j.length]=b;j[j.length]='<span class="mini-textboxlist-close"></span></li>'}var f=c+"$input";j[j.length]='<li id="'+f+'" class="mini-textboxlist-inputLi"><input class="mini-textboxlist-input" type="text" autocomplete="off"></li>';this.ulEl.innerHTML=j.join("");this.editIndex=this.selecteds.length;if(this.editIndex<0){this.editIndex=0}this.inputLi=this.ulEl.lastChild;this.oOlo0O=this.inputLi.firstChild;this.oOlo0O.placeholder=this.placeholder;mini.on(this.oOlo0O,"keydown",this.o0oOlo,this);var g=this;this.oOlo0O.onkeyup=function(){g.llOOl()};g.ol0Ol=null;g.O1Ol0=g.oOlo0O.value;this.oOlo0O.onfocus=function(){g.O1Ol0=g.oOlo0O.value;g.ol0Ol=setInterval(function(){if(!g.OO0OO1){clearInterval(g.ol0Ol);g.ol0Ol=null;return}if(g.O1Ol0!=g.oOlo0O.value){g.l10o();g.O1Ol0=g.oOlo0O.value}},10);g.addCls(g.o10lo);g.OO0OO1=true;g.fire("focus")};this.oOlo0O.onblur=function(){clearInterval(g.ol0Ol);g.ol0Ol=null;g.fire("blur");if(g.validateOnLeave&&g.isEditable()){g._tryValidate()}};this.doReadOnly()},doReadOnly:function(){if(this.isReadOnly()||this.allowInput==false){this.oOlo0O.readOnly=true}else{this.oOlo0O.readOnly=false}},doLayout:function(){if(this.canLayout()==false){return}TextBoxList.superclass.doLayout.call(this);this.doReadOnly()},o1011:function(){if(this.lO10){jQuery(this.lO10.parentNode).remove()}this.lO10=null},getErrorIconEl:function(){if(!this.lO10){var a=this.el.rows[0],b=a.insertCell(1);b.style.cssText="width:18px;vertical-align:top;";b.innerHTML='<div class="mini-errorIcon"></div>';this.lO10=b.firstChild}return this.lO10},oo10l1:function(a){if(this.isReadOnly()){return}if(this.isShowPopup){if(!__getById(this.popup.el,a.target)){this.hidePopup()}}var b=this;if(this.OO0OO1){if(this.within(a)==false){clearInterval(this.ol0Ol);this.select(null,false);setTimeout(function(){b.showInput(false)},100);this.removeCls(this.o10lo);this.OO0OO1=false}}},_initEvents:function(){TextBoxList.superclass._initEvents.call(this);mini.on(this.el,"mousemove",this.olOO,this);mini.on(this.el,"mouseout",this.lol11,this);mini.on(this.el,"mousedown",this.lOO1l1,this);mini.on(this.el,"click",this.l11o00,this);mini.on(this.el,"keydown",this.o110O,this);mini.on(document,"mousedown",this.oo10l1,this)},destroy:function(a){if(this.isShowPopup){this.hidePopup()}if(this.oOlo0O){mini.clearEvent(this.oOlo0O);this.oOlo0O.onkeyup=null;this.oOlo0O.onfocus=null;this.oOlo0O.onblur=null}mini.un(document,"mousedown",this.oo10l1,this);TextBoxList.superclass.destroy.call(this,a)},_create:function(){var a='<table class="mini-textboxlist" cellpadding="0" cellspacing="0"><tr ><td class="mini-textboxlist-border"><ul></ul><a href="#"></a><input type="hidden"/></td></tr></table>',b=document.createElement("div");b.innerHTML=a;this.el=b.firstChild;var c=this.el.getElementsByTagName("td")[0];this.ulEl=c.firstChild;this._valueEl=c.lastChild;this.focusEl=c.childNodes[1]},setRemote:function(a){this.remote=a},getRemote:function(){return this.remote},setData:function(a){this.data=a},getData:function(){return this.data},getTextName:function(){return this.textName},setTextName:function(a){this.textName=a}});mini.regClass(TextBoxList,"textboxlist");AutoComplete=function(){AutoComplete.superclass.constructor.apply(this,arguments);var a=this;a.ol0Ol=null;this._textEl.onfocus=function(){a.O1Ol0=a._textEl.value;a.ol0Ol=setInterval(function(){if(a.O1Ol0!=a._textEl.value){a.lOOoo();a.O1Ol0=a._textEl.value;if(a._textEl.value==""&&a.value!=""){a.setValue("");a.fireValueChanged()}}},10)};this._textEl.onblur=function(){clearInterval(a.ol0Ol);if(!a.isShowPopup()){if(a.O1Ol0!=a._textEl.value){if(a._textEl.value==""&&a.value!=""){a.setValue("");a.fireValueChanged()}}}};this._buttonEl.style.display="none";this._doInputLayout()};mini.extend(AutoComplete,ComboBox,{remote:true,url:"",allowInput:true,delay:150,showButton:false,searchField:"key",minChars:0,_buttonWidth:0,uiCls:"mini-autocomplete",popupEmptyText:"没有数据",loadingText:"数据加载中...",errorText:"错误",delay:200,enterQuery:false});mini.copyTo(AutoComplete.prototype,{getAttrs:function(b){var a=AutoComplete.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["searchField","popupEmptyText","loadingText","errorText"]);mini._ParseBool(b,a,["enterQuery","remote"]);return a},getEnterQuery:function(){return this.enterQuery},setEnterQuery:function(a){this.enterQuery=a},l00Ol:function(f){var i=this;if(mini.getActiveElement()!=i._textEl){i.hidePopup();return}if(!this.remote){AutoComplete.superclass.l00Ol.apply(this,arguments);return}if(this.lOol11){this.lOol11.abort()}var c=this.url,b="post";if(c){if(c.indexOf(".txt")!=-1||c.indexOf(".json")!=-1){b="get"}}var g={};g[this.searchField]=f;var j={url:c,async:true,params:g,data:g,type:this.ajaxType?this.ajaxType:b,cache:false,cancel:false};this.fire("beforeload",j);i=this;function d(k,l){if(!i.OO0OO1){return}if(i.Oll00()===false){return}if(i._doloadTimer){clearTimeout(i._doloadTimer);i._doloadTimer=null}i._doloadTimer=setTimeout(function(){i._doloadTimer=null;i.Oll00()},100);i.oOll0.setData(k);i.showPopup();i.oOll0.o10l0(0,true);i.data=k;i.fire("load",{data:k,result:l})}if(j.cancel){var a=j.result||[];d(a,a);return}i.loading=true;mini.copyTo(j,{success:function(n,p,k){delete j.params;var o={text:n,result:null,sender:i,options:j,xhr:k},l=null;try{mini_doload(o);l=o.result;if(!l){l=mini.decode(n)}}catch(q){}if(mini.isArray(l)){l={data:l}}if(i.dataField){l.data=mini._getMap(i.dataField,l)}if(!l.data){l.data=[]}d(l.data,l)},error:function(n,l,k){},complete:function(){i.loading=false;i._requestSearch=false;i.lOol11=null}});this.lOol11=mini.ajax(j)},blur:function(){var a=this;AutoComplete.superclass.blur.apply(this);if(a.lOol11){a.lOol11.abort();a.lOol11=null}if(a._doloadTimer){clearTimeout(a._doloadTimer);a._doloadTimer=null}if(a._queryTimer){clearTimeout(a._queryTimer);a._queryTimer=null}if(a._keydownTimer){clearTimeout(a._keydownTimer);a._keydownTimer=null}if(a.isShowPopup()){a.hidePopup()}},Oll00:function(){var a=this;if(mini.getActiveElement()!=a._textEl&&__cls_has(a.el,"mini-buttonedit-focus")){a.hidePopup();return false}},lOOoo:function(b){var a=this;if(this._queryTimer){clearTimeout(this._queryTimer);this._queryTimer=null}this._queryTimer=setTimeout(function(){var c=a._textEl.value;a.l00Ol(c)},this.delay);if(a.Oll00()!==false){this.showPopup("loading")}},doQuery:function(){this.lOOoo()},_keydownQuery:function(){var a=this;a._requestSearch=true;if(!a.remote){a._requestSearch=false}if(a._keydownTimer){clearTimeout(a._keydownTimer);a._keydownTimer=null}a._keydownTimer=setTimeout(function(){var b=a._textEl.value;if(b!=a.__oldText){a.lOOoo(b);a.__oldText=b}},a.delay)},o0oOlo:function(b){var a=this,d={htmlEvent:b};this.fire("keydown",d);if(b.keyCode==8&&(this.isReadOnly()||this.allowInput==false)){return false}if(b.keyCode==9){this.hidePopup();return}if(b.keyCode==16||b.keyCode==17||b.keyCode==18){return}if(this.isReadOnly()){return}switch(b.keyCode){case 27:if(this.isShowPopup()){b.stopPropagation()}this.hidePopup();break;case 13:var j=true;if(!this.isShowPopup()||this.oOll0.getData().length==0){if(this.enterQuery){j=false;var f=this._textEl.value;if(this._enterSearchText!=f||!a.loading){this._enterSearchText=f;this.lOOoo(f)}}}if(this.isShowPopup()){b.preventDefault();b.stopPropagation();if(a._requestSearch!==true){var k=this.oOll0.getFocusedIndex();if(k!=-1){var g=this.oOll0.getAt(k),c=this.oOll0.oO1l([g]),i=c[0];this.setText(c[1]);this.setValue(i);this.fireValueChanged()}}}else{this.fire("enter",d)}if(j){this.hidePopup();this.focus()}break;case 37:break;case 38:k=this.oOll0.getFocusedIndex();if(k==-1){k=0;if(!this.multiSelect){g=this.oOll0.findItems(this.value)[0];if(g){k=this.oOll0.indexOf(g)}}}if(this.isShowPopup()){if(!this.multiSelect){k-=1;if(k<0){k=0}this.oOll0.o10l0(k,true)}}break;case 39:break;case 40:k=this.oOll0.getFocusedIndex();if(this.isShowPopup()){if(!this.multiSelect){k+=1;if(k>this.oOll0.getCount()-1){k=this.oOll0.getCount()-1}this.oOll0.o10l0(k,true)}}else{this.lOOoo(this._textEl.value)}break;default:if(this.enterQuery==true){this.hidePopup();this.focus()}else{this._keydownQuery()}break}},showPopup:function(b){var c=this.getPopup(),a=this.oOll0;a.showEmpty=true;a.emptyText=this.getPopupEmptyHtml();if(b=="loading"){a.emptyText=this.getPopupLoadingHtml();this.oOll0.setData([])}else{if(b=="error"){a.emptyText=this.getPopupErrorHtml();this.oOll0.setData([])}}this.oOll0.doUpdate();AutoComplete.superclass.showPopup.call(this)},getPopupErrorHtml:function(){return"<span class='mini-textboxlist-popup-error'>"+this.errorText+"</span>"},getPopupLoadingHtml:function(){return"<span class='mini-textboxlist-popup-loading'>"+this.loadingText+"</span>"},getPopupEmptyHtml:function(){return"<span class='mini-textboxlist-popup-noresult'>"+this.popupEmptyText+"</span>"},getErrorText:function(a){return this.errorText},setErrorText:function(a){this.errorText=a},getLoadingText:function(a){return this.loadingText},setLoadingText:function(a){this.loadingText=a},getPopupEmptyText:function(a){return this.popupEmptyText},setPopupEmptyText:function(a){this.popupEmptyText=a},getSearchField:function(){return this.searchField},setSearchField:function(a){this.searchField=a},getMinChars:function(){return this.minChars},setMinChars:function(a){this.minChars=a},setText:function(a){if(mini.isNull(a)){a=""}if(this.text!=a){this.text=a;this.O1Ol0=a}this._textEl.value=this.text},setValue:function(a){if(mini.isNull(a)){a=""}if(this.value!=a){this.value=a;this._valueEl.value=this.value}this.__oldText=""},setUrl:function(a){this.url=a;if(!this.remote){AutoComplete.superclass.setUrl.call(this,a)}},setRemote:function(a){this.remote=a},getRemote:function(){return this.remote},_initInput:function(){var a=this;if(isFirefox){this._textEl.oninput=function(){if(!a.enterQuery){a.lOOoo()}}}}});mini.regClass(AutoComplete,"autocomplete");mini.ToolTip=function(){mini.ToolTip.superclass.constructor.apply(this,arguments)};mini.extend(mini.ToolTip,Control,{selector:"[title]",placement:"bottom",trigger:"hover focus",delay:200,uiCls:"mini-tooltip",_create:function(){this.el=jQuery('<div class="mini-tooltip"><div class="mini-tooltip-arrow"></div><div class="mini-tooltip-inner"></div></div>')[0];this.$element=jQuery(this.el);this.$element.appendTo(document.body)},_initEvents:function(){},_bindTooltip:function(){var f=jQuery(document),j=this.selector,d="tooltip";f.unbind("."+d);var c=this.trigger.split(" ");for(var a=c.length;a--;){var i=c[a];if(i=="click"){f.on("click."+d,j,jQuery.proxy(this._toggle,this))}else{if(i!="manual"){var g=i=="hover"?"mouseenter":"focus",b=i=="hover"?"mouseleave":"blur";f.on(g+"."+d,j,jQuery.proxy(this._enter,this));f.on(b+"."+d,j,jQuery.proxy(this._leave,this))}}}},setSelector:function(a){this.selector=a;this._bindTooltip()},getSelector:function(){return this.selector},setPlacement:function(a){this.placement=a},getPlacement:function(){return this.placement},setTrigger:function(a){this.trigger=a;this._bindTooltip()},getTrigger:function(){return this.trigger},openTimer:null,_enter:function(c){var b=this,a=c.currentTarget;this.getContent(a);clearTimeout(this.openTimer);this.openTimer=setTimeout(function(){b.openTimer=null;b.open(a)},b.delay)},_leave:function(a){clearTimeout(this.openTimer);this.close()},_toggle:function(a){if(this._getTip().css("display")=="none"){this.enter(a)}else{this.leave(a)}},open:function(d){var d=jQuery(d)[0]||this.target,a=jQuery(d),f=this.getContent(d),b={element:d,content:f,cancel:!f};this.fire("beforeopen",b);if(b.cancel){return}this.$element.show();this._target=d;try{this.setContent(b.content)}catch(c){}this.fire("open",{element:d})},close:function(){this._target=null;this.$element.hide()},showLoading:function(){this.setContent('<div class="mini-tooltip-loading"></div>')},setContent:function(a){this.$element.children(".mini-tooltip-inner").html(a||"&nbsp;");this.applyPlacement()},getContent:function(a){var b=a.title;if(b){jQuery(a).attr("data-tooltip",b).attr("title","")}if(!b){b=jQuery(a).attr("data-tooltip")}return b},applyPlacement:function(){if(!this._target){return}if(this.$element.css("display")=="none"){return}var a=this._target,d=jQuery(a),i=d.attr("data-placement")||this.placement,j=this.$element;if(!a||!j[0]){return}j.show().css({left:"-2000px",top:"-2000px"});function c(r){j.removeClass("mini-tooltip-left mini-tooltip-top mini-tooltip-right mini-tooltip-bottom mini-tooltip-bottomleft mini-tooltip-topleft mini-tooltip-bottomright mini-tooltip-topright").addClass("mini-tooltip-"+r)}function o(r){j.offset(r)}var b=__getBox(a),f=mini.getViewportBox(),p=b.top-f.top,q=f.bottom-b.bottom;c(i);var g=__getBox(j[0]),n=mini.getCalculatedOffset(i,b,g.width,g.height);if(i=="left"){}else{if(i=="right"){}else{if(i=="top"){}else{if(i=="bottom"){}else{if(i=="bottomleft"&&p>q){if(n.top+g.height>f.bottom){i="topleft"}}else{if(i=="topleft"){}}}}}}c(i);n=mini.getCalculatedOffset(i,b,g.width,g.height);if(i=="right"||i=="left"){var l=jQuery(j).children(".mini-tooltip-arrow");l.css("top","");function k(){var s=b.top+b.height/2-l.height()/2,r=s-n.top;l.css("top",r)}f=mini.getViewportBox();if(n.top<f.y){n.top=f.y;k()}else{if(n.top+g.height>f.bottom){n.top=f.bottom-g.height;k()}}}o(n)},getAttrs:function(b){var a=mini.ToolTip.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["selector","placement","onbeforeopen","onopen","onclose"]);return a}});mini.regClass(mini.ToolTip,"tooltip");mini.getCalculatedOffset=function(d,c,b,a){if(d=="bottom"){return{top:c.top+c.height,left:c.left+c.width/2-b/2}}if(d=="top"){return{top:c.top-a,left:c.left+c.width/2-b/2}}if(d=="left"){return{top:c.top+c.height/2-a/2,left:c.left-b}}if(d=="bottomleft"){return{top:c.top+c.height,left:c.left}}if(d=="bottomright"){return{top:c.top+c.height,left:c.left+c.width-b}}if(d=="topleft"){return{top:c.top-a,left:c.left}}if(d=="topright"){return{top:c.top-a,left:c.left+c.width-b}}return{top:c.top+c.height/2-a/2,left:c.left+c.width}};FileUpload=function(a){this.postParam={};FileUpload.superclass.constructor.call(this,a);this.on("validation",this.llO0O,this)};mini.extend(FileUpload,ButtonEdit,{buttonText:"浏览...",_buttonWidth:56,limitTypeErrorText:"上传文件格式为：",readOnly:true,l00OO0:0,limitSize:"",limitType:"",typesDescription:"上传文件格式",uploadLimit:0,queueLimit:"",flashUrl:"",uploadUrl:"",showUploadProgress:true,postParam:null,uploadOnSelect:false,uiCls:"mini-fileupload"});mini.copyTo(FileUpload.prototype,{getAttrs:function(b){var a=FileUpload.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["limitType","limitSize","flashUrl","uploadUrl","uploadLimit","buttonText","showUploadProgress","onuploadsuccess","onuploaderror","onuploadcomplete","onfileselect","onuploadprogress","onqueuederror"]);mini._ParseBool(b,a,["uploadOnSelect"]);return a},__fileError:function(){},__on_upload_complete:function(a){this._progressbarEl.style.display="none";this.fire("uploadcomplete",a)},__on_upload_error:function(c,b,d){if(d=="File Cancelled"){return}this._progressbarEl.style.display="none";var a={file:c,code:b,message:d};this.fire("uploaderror",a)},__on_upload_success:function(c,a){var b={file:c,serverData:a};this.fire("uploadsuccess",b);this._progressbarEl.style.display="none"},__on_file_queued:function(c){var a=this.swfUpload.getStats();if(a){var b=a.files_queued;if(b>1){for(var d=0;d<b-1;d++){this.swfUpload.cancelUpload()}}}var f={file:c};if(this.uploadOnSelect){this.startUpload()}this.setText(c.name);this.setValue(c.name);this.validate();this.fire("fileselect",f)},__on_file_queued_error:function(b,a,c){var d={file:b,code:a,msg:c,message:c};this.fire("queuederror",d)},__on_upload_progress:function(b,f,c){if(this.showUploadProgress){var d=__getWidth(this._progressbarEl),g=d*f/c;__setWidth(this._completeEl,g)}this._progressbarEl.style.display=this.showUploadProgress?"block":"none";var a={file:b,complete:f,total:c};this.fire("uploadprogress",a)},clear:function(){this.setValue("");this.setText("");if(this.swfUpload){this.swfUpload.cancelUpload()}},getShowUploadProgress:function(){return this.showUploadProgress},setShowUploadProgress:function(a){this.showUploadProgress=a;this._progressbarEl.style.display=a?"block":"none"},startUpload:function(a){var b={cancel:false};this.fire("beforeupload",b);if(b.cancel==true){return}if(this.swfUpload){this.swfUpload.setPostParams(this.postParam);this.swfUpload.startUpload()}},setName:function(a){this.name=a},getUploadUrl:function(){return this.uploadUrl},setUploadUrl:function(a){if(this.swfUpload){this.swfUpload.setUploadURL(a)}this.uploadUrl=a},setFlashUrl:function(a){this.flashUrl=a},setQueueLimit:function(a){this.queueLimit=a},setUploadLimit:function(a){this.uploadLimit=a},getButtonText:function(){return this.buttonText},setButtonText:function(a){this.buttonText=a;this._buttonEl.innerHTML=a},getTypesDescription:function(){return this.typesDescription},setTypesDescription:function(a){this.typesDescription=a;if(this.swfUpload){this.swfUpload.setFileTypes(this.limitType,this.typesDescription)}},getLimitType:function(){return this.limitType},setLimitType:function(a){this.limitType=a;if(this.swfUpload){this.swfUpload.setFileTypes(this.limitType,this.typesDescription)}},getPostParam:function(){return this.postParam},setPostParam:function(a){this.addPostParam(a)},addPostParam:function(a){mini.copyTo(this.postParam,a)},olOO:function(b){if(this.enabled==false){return}var a=this;if(!this.swfUpload){this._createSWFUpload()}},_createSWFUpload:function(){var c=this,b=new SWFUpload({file_post_name:this.name,upload_url:c.uploadUrl,flash_url:c.flashUrl,file_size_limit:c.limitSize,file_types:c.limitType,file_types_description:c.typesDescription,file_upload_limit:parseInt(c.uploadLimit),file_queue_limit:c.queueLimit,file_queued_handler:mini.createDelegate(this.__on_file_queued,this),upload_error_handler:mini.createDelegate(this.__on_upload_error,this),upload_success_handler:mini.createDelegate(this.__on_upload_success,this),upload_complete_handler:mini.createDelegate(this.__on_upload_complete,this),upload_progress_handler:mini.createDelegate(this.__on_upload_progress,this),file_queue_error_handler:mini.createDelegate(this.__on_file_queued_error,this),button_placeholder_id:this._uploadId,button_width:1000,button_height:50,button_window_mode:"transparent",button_action:SWFUpload.BUTTON_ACTION.SELECT_FILE,debug:false});b.flashReady();this.swfUpload=b;var a=this.swfUpload.movieElement;a.style.zIndex=1000;a.style.position="absolute";a.style.left="0px";a.style.top="0px";a.style.width="100%";a.style.height="50px"},destroy:function(a){if(this._innerEl){mini.clearEvent(this._innerEl);this._innerEl=null}if(this.swfUpload){this.swfUpload.destroy();this.swfUpload=null}if(!this.destroyed){mini.clearEvent(this._borderEl)}FileUpload.superclass.destroy.call(this,a)},OOO0OHtml:function(){var a="onmouseover=\"__cls_add(this,'"+this.O0l0+"');\" onmouseout=\"__cls_rm(this,'"+this.O0l0+"');\"";return'<span class="mini-buttonedit-button" '+a+">"+this.buttonText+"</span>"},_create:function(){FileUpload.superclass._create.call(this);__cls_add(this.el,"mini-htmlfile");this._progressbarEl=mini.append(this._borderEl,'<div id="'+this._id+'$progressbar"  class="mini-fileupload-progressbar"><div id="'+this._id+'$complete" class="mini-fileupload-complete"></div></div>');this._completeEl=this._progressbarEl.firstChild;this._uploadId=this._id+"$button_placeholder";this.OlOOO0=mini.append(this.el,'<span id="'+this._uploadId+'"></span>');this.uploadEl=this.OlOOO0;mini.on(this._borderEl,"mousemove",this.olOO,this)}});mini.regClass(FileUpload,"fileupload");mini.ProgressBar=function(){mini.ProgressBar.superclass.constructor.apply(this,arguments)};mini.extend(mini.ProgressBar,Control,{formField:true,uiCls:"mini-progressbar",showText:false,textAlign:"center",text:"",format:"{0}%",value:0,set:function(b){if(typeof b=="string"){return this}var a=b.value;delete b.value;mini.ProgressBar.superclass.set.call(this,b);if(!mini.isNull(a)){this.setValue(a)}return this},_create:function(){this.el=document.createElement("div");this.el.className="mini-progressbar";var a='<div class="mini-progressbar-border"><div class="mini-progressbar-bar"></div><div class="mini-progressbar-text"></div></div>';this.el.innerHTML=a;this._borderEl=this.el.firstChild;this._barEl=this._borderEl.firstChild;this._textEl=this._borderEl.lastChild},setText:function(a){this.text=a;this._textEl.innerHTML=a},setShowText:function(a){this.showText=a;this._textEl.style.display=a?"":"none"},getShowText:function(){return this.showText},setTextAlign:function(a){this.textAlign=a;this._textEl.style.textAlign=a},getTextAlign:function(){return this.textAlign},setValue:function(a){a=parseFloat(a);if(isNaN(a)){a=0}if(a<0){a=0}if(a>100){a=100}this.value=a;this._barEl.style.width=a+"%";var b=String.format(this.format,a);this.setText(b)},getValue:function(){return this.value},getAttrs:function(b){var a=mini.ProgressBar.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["text","format","textAlign"]);mini._ParseBool(b,a,["showText"]);return a}});mini.regClass(mini.ProgressBar,"progressbar");mini.Form=function(a){this.el=__get(a);if(!this.el){throw new Error("form element not null")}mini.Form.superclass.constructor.apply(this,arguments)};mini.extend(mini.Form,Component,{el:null,getFields:function(){if(!this.el){return[]}var a=mini.findControls(function(b){if(!b.el||b.formField!=true){return false}if(__getById(this.el,b.el)){return true}return false},this);return a},getFieldsMap:function(){var a=this.getFields(),d={};for(var b=0,f=a.length;b<f;b++){var c=a[b];if(c.name){d[c.name]=c}}return d},getField:function(a){if(!this.el){return null}return mini.getbyName(a,this.el)},getData:function(c,f){if(mini.isNull(f)){f=true}var b=c?"getFormValue":"getValue",g=this.getFields(),d={};for(var k=0,i=g.length;k<i;k++){var j=g[k],a=j[b];if(!a){continue}if(j.name){if(f==true){mini._setMap(j.name,a.call(j),d)}else{d[j.name]=a.call(j)}}if(j.textName&&j.getText){if(f==true){mini._setMap(j.textName,j.getText(),d)}else{d[j.textName]=j.getText()}}}return d},setData:function(j,f,b){if(mini.isNull(b)){b=true}if(typeof j!="object"){j={}}var c=this.getFieldsMap();for(var i in c){var g=c[i];if(!g){continue}if(g.setValue){var a=j[i];if(b==true){a=mini._getMap(i,j)}if(a===undefined&&f===false){continue}if(a===null){a=""}g.setValue(a)}if(g.setText&&g.textName){var d=j[g.textName];if(b==true){d=mini._getMap(g.textName,j)}if(mini.isNull(d)){d=""}g.setText(d)}}},reset:function(){var c=this.getFields();for(var b=0,d=c.length;b<d;b++){var a=c[b];if(!a.setValue){continue}if(a.setText&&a._clearText!==false){var f=a.defaultText;if(mini.isNull(f)){f=""}a.setText(f)}a.setValue(a.defaultValue);if(a.clear){a.clear()}}this.setIsValid(true)},clear:function(){var c=this.getFields();for(var b=0,d=c.length;b<d;b++){var a=c[b];if(!a.setValue){continue}if(a.setText&&a._clearText!==false){a.setText("")}a.setValue("");if(a.clear){a.clear()}}this.setIsValid(true)},getValidateFields:function(d){function c(j){return j.isDisplay(function(k){if(__cls_has(k,"mini-tabs-body")){return true}})}var g=[],b=this.getFields();for(var a=0,f=b.length;a<f;a++){var i=b[a];if(!i.validate||!i.isDisplay){continue}if(c(i)||i.forceValidate){if(i.enabled||d||i.forceValidate){g.push(i)}}}return g},validate:function(d,b){var a=this.getValidateFields(b);for(var g=0,c=a.length;g<c;g++){var f=a[g],i=f.validate();if(i==false&&d===false){break}}return this.isValid()},isValid:function(){var c=this.getValidateFields();for(var b=0,d=c.length;b<d;b++){var a=c[b];if(a.isValid()==false){return false}}return true},setIsValid:function(b){var c=this.getFields();for(var a=0,d=c.length;a<d;a++){var f=c[a];if(!f.setIsValid){continue}f.setIsValid(b)}},getErrorTexts:function(){var b=[],d=this.getErrors();for(var c=0,f=d.length;c<f;c++){var a=d[c];b.push(a.errorText)}return b},getErrors:function(){var d=[],c=this.getFields();for(var b=0,f=c.length;b<f;b++){var a=c[b];if(!a.isValid){continue}if(a.isValid()==false){d.push(a)}}return d},mask:function(a){if(typeof a=="string"){a={html:a}}a=a||{};a.el=this.el;if(!a.cls){a.cls=this._cls_mask}mini.mask(a)},unmask:function(){mini.unmask(this.el)},_cls_mask:"mini-mask-loading",loadingMsg:"数据加载中，请稍后...",loading:function(a){this.mask(a||this.loadingMsg)},lOlo:function(a){this._changed=true},_changed:false,setChanged:function(d){this._changed=d;var c=this.getFields();for(var b=0,f=c.length;b<f;b++){var a=c[b];a.on("valuechanged",this.lOlo,this)}},isChanged:function(){return this._changed},setEnabled:function(d){var c=this.getFields();for(var b=0,f=c.length;b<f;b++){var a=c[b];a.setEnabled(d)}}});Fit=function(){Fit.superclass.constructor.apply(this,arguments)};mini.extend(Fit,mini.Container,{style:"",_clearBorder:false,uiCls:"mini-fit"});mini.copyTo(Fit.prototype,{getAttrs:function(b){var a=Fit.superclass.getAttrs.call(this,b);a._bodyParent=b;return a},set_bodyParent:function(d){if(!d){return}var a=this.o0Olll,c=d;while(c.firstChild){try{a.appendChild(c.firstChild)}catch(b){}}this.doLayout()},doLayout:function(){if(!this.canLayout()){return}var o=this.el.parentNode,b=mini.getChildNodes(o);if(o==document.body){this.el.style.height="0px"}var g=__getHeight(o,true);for(var p=0,n=b.length;p<n;p++){var j=b[p],l=j.tagName?j.tagName.toLowerCase():"";if(j==this.el||(l=="style"||l=="script"||j.type=="hidden")){continue}var i=__getStyle(j,"position");if(i=="absolute"||i=="fixed"){continue}var a=__getHeight(j),d=__margin(j);g=g-a-d.top-d.bottom}var f=__border(this.el),k=__padding(this.el),d=__margin(this.el);g=g-d.top-d.bottom;if(jQuery.boxModel){g=g-k.top-k.bottom-f.top-f.bottom}if(g<0){g=0}this.el.style.height=g+"px";try{b=mini.getChildNodes(this.el);for(p=0,n=b.length;p<n;p++){j=b[p];mini.layout(j)}}catch(c){}},isFixedSize:function(){return false},_initEvents:function(){},_create:function(){this.el=document.createElement("div");this.el.className="mini-fit";this.o0Olll=this.el}});mini.regClass(Fit,"fit");Panel=function(){this.lllO1();Panel.superclass.constructor.apply(this,arguments);if(this.url){this.setUrl(this.url)}this._contentEl=this.o0Olll;this._doVisibleEls();this.olOolO=new lOl1l(this);this._doTools()};mini.extend(Panel,mini.Container,{width:250,title:"",iconCls:"",iconStyle:"",allowResize:false,url:"",refreshOnExpand:false,maskOnLoad:true,collapseOnTitleClick:false,showCollapseButton:false,showCloseButton:false,closeAction:"display",showHeader:true,showToolbar:false,showFooter:false,headerCls:"",headerStyle:"",bodyCls:"",bodyStyle:"",footerCls:"",footerStyle:"",toolbarCls:"",toolbarStyle:"",minWidth:180,minHeight:100,maxWidth:5000,maxHeight:3000,uiCls:"mini-panel",_setBodyWidth:true,clearTimeStamp:false,Ololoo:80,expanded:true});mini.copyTo(Panel.prototype,{getAttrs:function(a){var d=Panel.superclass.getAttrs.call(this,a);mini._ParseString(a,d,["title","iconCls","iconStyle","headerCls","headerStyle","bodyCls","bodyStyle","footerCls","footerStyle","toolbarCls","toolbarStyle","footer","toolbar","url","closeAction","loadingMsg","onbeforebuttonclick","onbuttonclick","onload","buttons"]);mini._ParseBool(a,d,["allowResize","showCloseButton","showHeader","showToolbar","showFooter","loadOnRefresh","showCollapseButton","refreshOnExpand","maskOnLoad","expanded","collapseOnTitleClick","clearTimeStamp"]);var c=mini.getChildNodes(a,true);for(var f=c.length-1;f>=0;f--){var b=c[f],g=mini.getAttr(b,"property");if(!g){continue}g=g.toLowerCase();if(g=="toolbar"){d.toolbar=b}else{if(g=="footer"){d.footer=b}}}d.body=c;return d},getCollapseOnTitleClick:function(){return this.collapseOnTitleClick},setCollapseOnTitleClick:function(a){this.collapseOnTitleClick=a;__cls_rm(this.el,"mini-panel-titleclick");if(a){__cls_add(this.el,"mini-panel-titleclick")}},expand:function(){this.expanded=true;if(this._height){this.el.style.height=this._height}this.O0l0o1.style.display="block";if(this.state!="max"){delete this._height}__cls_rm(this.el,"mini-panel-collapse");if(this.url&&this.url!=this.loadedUrl){this._doLoad()}this.doLayout()},collapse:function(){this.expanded=false;if(this.state!="max"){this._height=this.el.style.height}this.el.style.height="auto";this.O0l0o1.style.display="none";__cls_add(this.el,"mini-panel-collapse");this.doLayout()},toggle:function(){if(this.expanded){this.collapse()}else{this.expand()}},getExpanded:function(){return this.expanded},setExpanded:function(a){if(this.expanded!=a){this.expanded=a;if(this.expanded){this.expand()}else{this.collapse()}}},getLoadOnRefresh:function(a){return this.loadOnRefresh},setLoadOnRefresh:function(a){this.loadOnRefresh=a},getAllowResize:function(){return this.allowResize},setAllowResize:function(a){if(this.allowResize!=a){this.allowResize=a;this.doLayout()}},getMaskOnLoad:function(a){return this.maskOnLoad},setMaskOnLoad:function(a){this.maskOnLoad=a},getRefreshOnExpand:function(){return this.refreshOnExpand},setRefreshOnExpand:function(a){this.refreshOnExpand=a},getUrl:function(){return this.url},setUrl:function(b,a,c){this.url=b;this.__onLoad=a;this.__onDestroy=c;if(this.expanded&&b){this._doLoad()}},reload:function(){this.setUrl(this.url)},load:function(b,a,c){this.setUrl(b,a,c)},_doLoad:function(){if(!this.url){return}this.l1Olo(true);var c=new Date(),b=this;this.loadedUrl=this.url;if(this.maskOnLoad){this.loading()}jQuery(this.o0Olll).css("overflow","hidden");function d(i){b.__HideAction=i;var g=true;try{if(b.__onDestroy){g=b.__onDestroy(i)}}catch(f){}if(g===false){return false}var j={iframe:b.Oo111l,action:i};b.fire("unload",j);setTimeout(function(){b.destroy()},10)}b._CloseOwnerWindow=d;var a=mini.createIFrame(this.url,function(i,g){if(b.destroyed){return}var f=(c-new Date())+b.Ololoo;if(f<0){f=0}setTimeout(function(){b.unmask()},f);try{b.Oo111l.contentWindow.Owner=b.Owner;b.Oo111l.contentWindow.CloseOwnerWindow=d}catch(j){}if(g||b.loadOnRefresh){if(b.__onLoad){b.__onLoad()}var j={iframe:b.Oo111l};b.fire("load",j)}},this.clearTimeStamp);this.o0Olll.appendChild(a);this.Oo111l=a},l1Olo:function(c){if(this.Oo111l){var a=this.Oo111l;if(a._ondestroy){a._ondestroy()}a.onload=function(){};jQuery(a).unbind("load");a.src="";if(mini.isIE){try{a.contentWindow.document.write("");a.contentWindow.document.close()}catch(b){}}try{this.Oo111l.parentNode.removeChild(this.Oo111l);this.Oo111l.removeNode(true)}catch(b){}}this.Oo111l=null;if(c===true){mini.removeChilds(this.o0Olll)}},OO00:function(){return this.o0Olll},getClearTimeStamp:function(){return this.clearTimeStamp},setClearTimeStamp:function(a){this.clearTimeStamp=a},getIFrameEl:function(a){return this.Oo111l},getFooterEl:function(){return this.OooOo},getBodyEl:function(){return this.o0Olll},getToolbarEl:function(){return this.OlO0O},getHeaderEl:function(){return this.ll0O},setFooter:function(a){__mini_setControls(a,this.OooOo,this)},setToolbar:function(a){__mini_setControls(a,this.OlO0O,this)},set_bodyParent:function(a){},setBody:function(a){__mini_setControls(a,this.o0Olll,this)},getButton:function(b){if(typeof b=="number"){return this.buttons[b]}else{for(var a=0,d=this.buttons.length;a<d;a++){var c=this.buttons[a];if(c.name==b){return c}}}},removeButton:function(a){var b=this.getButton(a);if(!b){return}this.buttons.remove(b);this._doTools()},updateButton:function(a,b){var c=this.getButton(a);if(!c){return}mini.copyTo(c,b);this._doTools()},addButton:function(b,a){if(typeof b=="string"){b={iconCls:b}}b=this.createButton(b);if(typeof a!="number"){a=this.buttons.length}this.buttons.insert(a,b);this._doTools()},getButtons:function(){return this.buttons},setButtons:function(f){if(typeof f=="string"){f=f.split(" ")}if(!mini.isArray(f)){f=[]}var c=[];for(var b=0,a=f.length;b<a;b++){var d=f[b];if(typeof d=="string"){d=d.trim();if(!d){continue}d={name:d,cls:"mini-tools-"+d,html:""}}d=this.createButton(d);c.push(d)}this.buttons=c;this._doTools()},createButton:function(a){var b=mini.copyTo({name:"",cls:"",style:"",visible:true,enabled:true,html:""},a);return b},lllO1:function(){this.buttons=[];var a=this.createButton({name:"collapse",cls:"mini-tools-collapse",visible:this.showCollapseButton});this.buttons.push(a);var b=this.createButton({name:"close",cls:"mini-tools-close",visible:this.showCloseButton});this.buttons.push(b)},onButtonClick:function(a,b){this.on("buttonclick",a,b)},l01l:function(c,f){var d={button:c,index:this.buttons.indexOf(c),name:c.name.toLowerCase(),htmlEvent:f,cancel:false};this.fire("beforebuttonclick",d);var b=true;try{if(d.name=="close"&&this.closeAction=="destroy"&&this.Oo111l&&this.Oo111l.contentWindow){if(this.Oo111l.contentWindow.CloseWindow){b=this.Oo111l.contentWindow.CloseWindow("close")}else{if(this.Oo111l.contentWindow.CloseOwnerWindow){b=this.Oo111l.contentWindow.CloseOwnerWindow("close")}else{b=this._CloseOwnerWindow("close")}}}}catch(a){b=this._CloseOwnerWindow("close")}if(b===false){d.cancel=true}if(d.cancel==true){return d}this.fire("buttonclick",d);if(d.name=="close"){if(this.closeAction=="destroy"){this.__HideAction="close";this.destroy()}else{this.hide()}}if(d.name=="collapse"){this.toggle();if(this.refreshOnExpand&&this.expanded&&this.url){this.reload()}}return d},l11o00:function(b){if(__getById(this.ll0O,b.target)){var a=__getByCls(b.target,"mini-tools");if(a){var c=this.getButton(parseInt(b.target.id));if(c){this.l01l(c,b)}}else{if(this.collapseOnTitleClick){this.toggle()}}}},getShowFooter:function(){return this.showFooter},setShowFooter:function(a){this.showFooter=a;this._doVisibleEls();this.deferLayout()},getShowToolbar:function(){return this.showToolbar},setShowToolbar:function(a){this.showToolbar=a;this._doVisibleEls();this.deferLayout()},getShowHeader:function(){return this.showHeader},setShowHeader:function(a){this.showHeader=a;this._doVisibleEls();this.deferLayout()},getShowCollapseButton:function(){return this.showCollapseButton},setShowCollapseButton:function(a){this.showCollapseButton=a;var b=this.getButton("collapse");if(!b){return}b.visible=a;this._doTools()},getCloseAction:function(){return this.closeAction},setCloseAction:function(a){this.closeAction=a},getShowCloseButton:function(){return this.showCloseButton},setShowCloseButton:function(a){this.showCloseButton=a;var b=this.getButton("close");if(!b){return}b.visible=a;this._doTools()},_doTools:function(){var b="";for(var a=0,d=this.buttons.length;a<d;a++){var c=this.buttons[a];if(c.html){b+=c.html}else{b+='<span id="'+a+'" class="mini-iconfont fa '+c.cls+" "+(c.enabled?"":"mini-disabled")+'" style="'+c.style+";"+(c.visible?"":"display:none;")+'"></span>'}}this.oO000O.innerHTML=b},getIconStyle:function(){return this.iconStyle},setIconStyle:function(a){this.iconStyle=a;this._doTitle()},getIconCls:function(){return this.iconCls},setIconCls:function(a){this.iconCls=a;this._doTitle()},getTitle:function(){return this.title},setTitle:function(a){this.title=a;this._doTitle()},_doTitle:function(){var a=this.title==""?"&nbsp":this.title;this.loO100.innerHTML=a;this.Olo11.style.display=(this.iconCls||this.iconStyle)?"inline":"none";this.Olo11.className="mini-panel-icon mini-iconfont "+this.iconCls;__css_set(this.Olo11,this.iconStyle)},getFooterCls:function(){return this.footerCls},setFooterCls:function(a){jQuery(this.OooOo).removeClass(this.footerCls);jQuery(this.OooOo).addClass(a);this.footerCls=a;this.doLayout()},getToolbarCls:function(){return this.toolbarCls},setToolbarCls:function(a){jQuery(this.OlO0O).removeClass(this.toolbarCls);jQuery(this.OlO0O).addClass(a);this.toolbarCls=a;this.doLayout()},getBodyCls:function(){return this.bodyCls},setBodyCls:function(a){jQuery(this.o0Olll).removeClass(this.bodyCls);jQuery(this.o0Olll).addClass(a);this.bodyCls=a;this.doLayout()},getHeaderCls:function(){return this.headerCls},setHeaderCls:function(a){jQuery(this.ll0O).removeClass(this.headerCls);jQuery(this.ll0O).addClass(a);this.headerCls=a;this.doLayout()},getFooterStyle:function(){return this.footerStyle},setFooterStyle:function(a){this.footerStyle=a;__css_set(this.OooOo,a);this.doLayout()},getToolbarStyle:function(){return this.toolbarStyle},setToolbarStyle:function(a){this.toolbarStyle=a;__css_set(this.OlO0O,a);this.doLayout()},getBodyStyle:function(){return this.bodyStyle},setBodyStyle:function(a){this.bodyStyle=a;__css_set(this.o0Olll,a);this.doLayout()},getHeaderStyle:function(){return this.headerStyle},setHeaderStyle:function(a){this.headerStyle=a;__css_set(this.ll0O,a);this.doLayout()},getFooterHeight:function(){var a=this.showFooter?jQuery(this.OooOo).outerHeight():0;return a},getToolbarHeight:function(){var a=this.showToolbar?jQuery(this.OlO0O).outerHeight():0;return a},getHeaderHeight:function(){var a=this.showHeader?jQuery(this.ll0O).outerHeight():0;return a},getBodyHeight:function(d){var f=this.getViewportHeight(),f=f-this.getToolbarHeight()-this.getFooterHeight();if(d){var b=__padding(this.o0Olll),c=__border(this.o0Olll),a=__margin(this.o0Olll);if(jQuery.boxModel){f=f-b.top-b.bottom-c.top-c.bottom}f=f-a.top-a.bottom}if(f<0){f=0}return f},getViewportHeight:function(d){var f=this.getHeight(true)-this.getHeaderHeight();if(d){var a=__padding(this.O0l0o1),b=__border(this.O0l0o1),c=__margin(this.O0l0o1);if(jQuery.boxModel){f=f-a.top-a.bottom-b.top-b.bottom}f=f-c.top-c.bottom}return f},getViewportWidth:function(a){return this.getWidth(true)},_stopLayout:function(){clearTimeout(this.O1Oo);this.O1Oo=null},deferLayout:function(a){if(!a){a=10}if(this.O1Oo){return}var b=this;this.O1Oo=setTimeout(function(){b.O1Oo=null;b.doLayout()},a)},doLayout:function(){if(!this.canLayout()){return}var b=this.isAutoHeight(),d=this.isAutoWidth(),i=parseInt($(this.el).css("max-height"));if(b&&i){this.O0l0o1.style.height="auto";this.o0Olll.style.height="auto";var c=this.el.firstChild.offsetHeight;if(c>i){b=false}}this._autoHeight=b;var f=this.getWidth(true),j=f;if(mini.isIE6){__setWidth(this.o0Olll,f)}if(!b){var a=this.getViewportHeight();__setHeight(this.O0l0o1,a);var g=this.getBodyHeight();__setHeight(this.o0Olll,g)}else{this.O0l0o1.style.height="auto";this.o0Olll.style.height="auto"}mini.layout(this._borderEl);if(this.ol0oo){mini.repaint(this.ol0oo)}this.ol0oo.style.display=this.allowResize?"":"none";this.fire("layout")},_doVisibleEls:function(){this.ll0O.style.display=this.showHeader?"":"none";this.OlO0O.style.display=this.showToolbar?"":"none";this.OooOo.style.display=this.showFooter?"":"none"},_initEvents:function(){__initEvents(function(){mini.on(this.el,"click",this.l11o00,this)},this)},destroy:function(a){this.l1Olo();this.Oo111l=null;this.O0l0o1=this._borderEl=this.o0Olll=this.OooOo=this.OlO0O=null;this.oO000O=this.loO100=this.Olo11=this.ol0oo=null;Panel.superclass.destroy.call(this,a)},_create:function(){this.el=document.createElement("div");this.el.className="mini-panel";this.el.tabIndex=0;var a='<div class="mini-panel-border"><div class="mini-panel-header" ><div class="mini-panel-header-inner" ><span class="mini-panel-icon mini-iconfont"></span><div class="mini-panel-title" ></div><div class="mini-tools" ></div></div></div><div class="mini-panel-viewport"><div class="mini-panel-toolbar"></div><div class="mini-panel-body" ></div><div class="mini-panel-footer"></div><div class="mini-resizer-trigger"></div></div></div>';this.el.innerHTML=a;this.el.hideFocus=true;this._borderEl=this.el.firstChild;this.ll0O=this._borderEl.firstChild;this.O0l0o1=this._borderEl.lastChild;this.OlO0O=mini.byClass("mini-panel-toolbar",this.el);this.o0Olll=mini.byClass("mini-panel-body",this.el);this.OooOo=mini.byClass("mini-panel-footer",this.el);this.ol0oo=mini.byClass("mini-resizer-trigger",this.el);var b=mini.byClass("mini-panel-header-inner",this.el);this.Olo11=mini.byClass("mini-panel-icon",this.el);this.loO100=mini.byClass("mini-panel-title",this.el);this.oO000O=mini.byClass("mini-tools",this.el);__css_set(this.o0Olll,this.bodyStyle);this._doTitle()},set:function(g){if(typeof g=="string"){return this}var f=this._canLayout;this._canLayout=false;var c=g.toolbar;delete g.toolbar;var a=g.footer;delete g.footer;var d=g.url;delete g.url;var b=g.buttons;delete g.buttons;Panel.superclass.set.call(this,g);if(b){this.setButtons(b)}if(c){this.setToolbar(c)}if(a){this.setFooter(a)}if(d){this.setUrl(d)}this._canLayout=f;this.doLayout();return this}});mini.regClass(Panel,"panel");Window=function(){Window.superclass.constructor.apply(this,arguments);this.addCls("mini-window");this.setVisible(false);this.setAllowDrag(this.allowDrag);this.setAllowResize(this.allowResize)};mini.extend(Window,Panel,{x:0,y:0,state:"restore",l0110O:"mini-window-drag",O0lOO0:"mini-window-resize",allowDrag:true,showCloseButton:true,showMaxButton:false,showMinButton:false,showCollapseButton:false,showModal:true,minWidth:150,minHeight:80,maxWidth:2000,maxHeight:2000,uiCls:"mini-window",showInBody:true,containerEl:null,enableDragProxy:true,allowCrossBottom:true,xxx:0});mini.copyTo(Window.prototype,{showAtEl:function(k,j){k=__get(k);if(!k){return}if(!this.isRender()||this.el.parentNode!=document.body){this.render(document.body)}var d={xAlign:this.xAlign,yAlign:this.yAlign,xOffset:0,yOffset:0,popupCls:this.popupCls};mini.copyTo(d,j);this._popupEl=k;this.el.style.position="absolute";this.el.style.left="-2000px";this.el.style.top="-2000px";this.el.style.display="";this.doLayout();this.o11O();var o=mini.getViewportBox(),a=this.getBox(),q=__getBox(k),f=d.xy,b=d.xAlign,l=d.yAlign,i=o.width/2-a.width/2,g=0;if(f){i=f[0];g=f[1]}switch(d.xAlign){case"outleft":i=q.x-a.width;break;case"left":i=q.x;break;case"center":i=q.x+q.width/2-a.width/2;break;case"right":i=q.right-a.width;break;case"outright":i=q.right;break;default:break}switch(d.yAlign){case"above":g=q.y-a.height;break;case"top":g=q.y;break;case"middle":g=q.y+q.height/2-a.height/2;break;case"bottom":g=q.bottom-a.height;break;case"below":g=q.bottom;break;default:break}i=parseInt(i);g=parseInt(g);if(d.outYAlign||d.outXAlign){if(d.outYAlign=="above"){if(g+a.height>o.bottom){var p=q.y-o.y,c=o.bottom-q.bottom;if(p>c){g=q.y-a.height}}}if(d.outXAlign=="outleft"){if(i+a.width>o.right){var n=q.x-o.x,r=o.right-q.right;if(n>r){i=q.x-a.width}}}if(d.outXAlign=="right"){if(i+a.width>o.right){i=q.right-a.width}}this.O0O0lO(i,g)}else{this.showAtPos(i+d.xOffset,g+d.yOffset)}},getAttrs:function(b){var a=Window.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["modalStyle","onmoveend"]);mini._ParseBool(b,a,["showModal","showShadow","allowDrag","allowResize","showMaxButton","showMinButton","showInBody","enableDragProxy","allowCrossBottom"]);mini._ParseInt(b,a,["minWidth","minHeight","maxWidth","maxHeight"]);return a},destroy:function(b){mini.un(window,"resize",this.o0010,this);if(this.Oll0l0){jQuery(this.Oll0l0).remove();this.Oll0l0=null}if(this.shadowEl){jQuery(this.shadowEl).remove();this.shadowEl=null}var a="__modal"+this._id;jQuery("[id='"+a+"']").remove();Window.superclass.destroy.call(this,b)},olOl10:function(b){var c=this;if(this.state!="max"&&this.allowDrag&&__getById(this.ll0O,b.target)&&!__getByCls(b.target,"mini-tools")){c=this;if(this.el){this.el.style.zIndex=mini.getMaxZIndex()}var a=this.getBox(),d=new mini.Drag({capture:false,onStart:function(){c.l11ll1=mini.append(document.body,'<div class="mini-resizer-mask" style=""></div>');if(c.enableDragProxy){c.O0ollo=mini.append(document.body,'<div class="mini-drag-proxy"></div>');c.el.style.left="-2000px";c.el.style.top="-2000px"}else{c.O0ollo=c.el}var f=mini.append(document.body,'<div class="mini-resizer-mask"></div>');setTimeout(function(){mini.removeNode(f)},300)},onMove:function(i){var l=i.now[0]-i.init[0],k=i.now[1]-i.init[1];l=a.x+l;k=a.y+k;var f=c.getParentBox(),g=l+a.width,n=k+a.height;if(g>f.width){l=f.width-a.width}if(!c.allowCrossBottom){if(n>f.height){k=f.height-a.height}}if(l<0){l=0}if(k<0){k=0}c.x=l;c.y=k;var j={x:l,y:k,width:a.width,height:a.height};__setBox(c.O0ollo,j);this.moved=true},onStop:function(){if(c.el){c.el.style.display="block";if(this.moved){var f=__getBox(c.O0ollo);__setBox(c.el,f)}}jQuery(c.l11ll1).remove();c.l11ll1=null;if(c.enableDragProxy){jQuery(c.O0ollo).remove()}c.O0ollo=null;c.fire("moveend")}});d.start(b)}},getAllowCrossBottom:function(){return this.allowCrossBottom},setAllowCrossBottom:function(a){this.allowCrossBottom=a},getEnableDragProxy:function(a){return this.enableDragProxy},setEnableDragProxy:function(a){this.enableDragProxy=a},o0010:function(a){if(this.state=="max"){this.doLayout()}if(!mini.isIE6){this.o0lo()}},l01l:function(c,b){var a=Window.superclass.l01l.call(this,c,b);if(a.cancel==true){return a}if(a.name=="max"){if(this.state=="max"){this.restore()}else{this.max()}}return a},O1o11l:function(b,a){var c=this.getParentBox();if(this.state=="max"){if(!this._width){var d=this.getBox();this._width=d.width;if(this.expanded){this._height=d.height}this.x=d.x;this.y=d.y}this.el.style.left="-10000px";this.el.style.top="-10000px"}else{if(mini.isNull(b)){b="center"}if(mini.isNull(a)){a="middle"}this.el.style.position="absolute";this.el.style.left="-2000px";this.el.style.top="-2000px";this.el.style.display="";if(this._width){this.setWidth(this._width);this.setHeight(this._height);delete this._width;delete this._height}this.o11O();d=this.getBox();if(b=="left"){b=0}if(b=="center"){b=c.width/2-d.width/2}if(b=="right"){b=c.width-d.width}if(a=="top"){a=0}if(a=="middle"){a=c.y+c.height/2-d.height/2}if(a=="bottom"){a=c.height-d.height}if(b+d.width>c.right){b=c.right-d.width}if(a+d.height>c.bottom){a=c.bottom-d.height}if(b<0){b=0}if(a<0){a=0}this.el.style.display="";mini.setX(this.el,b);mini.setY(this.el,a)}this.doLayout()},o11O:function(){this.el.style.display="";var a=this.getBox();if(a.width>this.maxWidth){__setWidth(this.el,this.maxWidth);a=this.getBox()}if(this.expanded){if(a.height>this.maxHeight){__setHeight(this.el,this.maxHeight);a=this.getBox()}}if(a.width<this.minWidth){__setWidth(this.el,this.minWidth);a=this.getBox()}if(this.expanded){if(a.height<this.minHeight){__setHeight(this.el,this.minHeight);a=this.getBox()}}},getBox:function(){this.ll0O.style.width="50px";this.el.style.display="";var b=__getWidth(this.el);this.ll0O.style.width="auto";var a=__getBox(this.el);a.width=b;a.right=a.x+b;return a},getWidth:function(a){this.ll0O.style.width="50px";var b=__getWidth(this.el);this.ll0O.style.width="auto";if(a&&this._borderEl){var c=__border(this._borderEl);b=b-c.left-c.right}return b},hide:function(){this.setVisible(false);this.o0lo()},show:function(b,f,a){this._canLayout=false;var g=this._containerEl||document.body;if(!this.isRender()||(this.el.parentNode!=g&&this.showInBody)){this.render(g)}this.el.style.zIndex=mini.getMaxZIndex();this.O1o11l(b,f);this._canLayout=true;this.setVisible(true);if(this.state!="max"){var d=this.getBox();this.x=d.x;this.y=d.y}try{document.body.focus()}catch(c){}},showAtPos:function(c,a,b){this.show(c,a,b)},getShowInBody:function(){return this.showInBody},setShowInBody:function(a){this.showInBody=a},restore:function(){this.removeCls("mini-window-max");this.state="restore";this.show(this.x,this.y);var a=this.getButton("max");if(a){a.cls="mini-tools-max";this._doTools()}},max:function(){this.state="max";this.addCls("mini-window-max");this.show();var a=this.getButton("max");if(a){a.cls="mini-tools-restore";this._doTools()}},getShowMinButton:function(){return this.showMinButton},setShowMinButton:function(a){this.showMinButton=a;var b=this.getButton("min");if(!b){return}b.visible=a;this._doTools()},getShowMaxButton:function(){return this.showMaxButton},setShowMaxButton:function(a){this.showMaxButton=a;var b=this.getButton("max");if(!b){return}b.visible=a;this._doTools()},getAllowDrag:function(){return this.allowDrag},setAllowDrag:function(a){this.allowDrag=a;__cls_rm(this.el,this.l0110O);if(a){__cls_add(this.el,this.l0110O)}},getMaxHeight:function(){return this.maxHeight},setMaxHeight:function(a){if(isNaN(a)){return}this.maxHeight=a},getMaxWidth:function(){return this.maxWidth},setMaxWidth:function(a){if(isNaN(a)){return}this.maxWidth=a},getMinHeight:function(){return this.minHeight},setMinHeight:function(a){if(isNaN(a)){return}this.minHeight=a},getMinWidth:function(){return this.minWidth},setMinWidth:function(a){if(isNaN(a)){return}this.minWidth=a},getShowModal:function(){return this.showModal},setShowModal:function(a){this.showModal=a},getParentBox:function(){var b=mini.getViewportBox(),a=this._containerEl||document.body;if(a!=document.body){b=__getBox(a)}return b},o0lo:function(){if(!this.el){if(this.Oll0l0){mini.removeNode(this.Oll0l0)}return}var c=this.showModal&&this.isDisplay()&&this.visible;if(!this.Oll0l0&&this.showModal==false){if(this.Oll0l0){mini.removeNode(this.Oll0l0)}return}if(!this.Oll0l0){var b="__modal"+this._id,a=mini_useShims?"<iframe frameborder='0' style='position:absolute; z-index:-1; width:100%; height:100%; top:0;left:0;scrolling:no;'></iframe>":"";this.Oll0l0=mini.append(document.body,'<div id="'+b+'" class="mini-modal" style="display:none">'+a+"</div>")}if(c){this.Oll0l0.style.display="block";this.Oll0l0.style.zIndex=__getStyle(this.el,"zIndex")-1}else{this.Oll0l0.style.display="none"}},doLayout:function(){if(!this.canLayout()){return}if(this.state=="max"){var a=this.getParentBox();this.el.style.left="0px";this.el.style.top="0px";mini.setSize(this.el,a.width,a.height)}Window.superclass.doLayout.call(this);if(this.allowDrag){__cls_add(this.el,this.l0110O)}if(this.state=="max"){this.ol0oo.style.display="none";__cls_rm(this.el,this.l0110O)}this.o0lo()},_initEvents:function(){Window.superclass._initEvents.call(this);__initEvents(function(){mini.on(this.el,"mouseover",this.lloO,this);mini.on(window,"resize",this.o0010,this);mini.on(this.el,"mousedown",this.olOl10,this)},this)},lllO1:function(){this.buttons=[];var d=this.createButton({name:"collapse",cls:"mini-tools-collapse",visible:this.showCollapseButton});this.buttons.push(d);var c=this.createButton({name:"min",cls:"mini-tools-min",visible:this.showMinButton});this.buttons.push(c);var b=this.createButton({name:"max",cls:"mini-tools-max",visible:this.showMaxButton});this.buttons.push(b);var a=this.createButton({name:"close",cls:"mini-tools-close",visible:this.showCloseButton});this.buttons.push(a)},_create:function(){Window.superclass._create.call(this);if(mini.isIE&&mini_useShims){var a="<iframe frameborder='0' style='position:absolute; z-index:-1; width:100%; height:100%; top:0;left:0;scrolling:no;'></iframe>";mini.append(this.el,a)}}});mini.regClass(Window,"window");mini.MessageBox={alertTitle:"提醒",confirmTitle:"确认",prompTitle:"输入",prompMessage:"请输入内容：",buttonText:{ok:"确定",cancel:"取消",yes:"是",no:"否"},autoFocus:true,show:function(n){n=mini.copyTo({width:"auto",height:"auto",showModal:true,timeout:0,minWidth:150,maxWidth:800,minHeight:50,maxHeight:350,showHeader:true,title:"",titleIcon:"",iconCls:"",iconStyle:"",message:"",html:"",spaceStyle:"margin-right:15px",showCloseButton:true,buttons:null,buttonWidth:58,callback:null},n);n.message=String(n.message);var j=n.callback,v=new Window();v.addCls("mini-messagebox");v.setBodyStyle("overflow:hidden");v.setShowModal(n.showModal);v.setTitle(n.title||"");v.setIconCls(n.titleIcon);v.setShowHeader(n.showHeader);v.setShowCloseButton(n.showCloseButton);var o=v.uid+"$table",p=v.uid+"$content",a='<div class="'+n.iconCls+'" style="'+n.iconStyle+'"></div>',q='<table class="mini-messagebox-table" id="'+o+'" style="" cellspacing="0" cellpadding="0"><tr><td>'+a+'</td><td id="'+p+'" class="mini-messagebox-content-text">'+(n.message||"")+"</td></tr></table>",f='<div class="mini-messagebox-content"></div><div class="mini-messagebox-buttons"></div>';v.o0Olll.innerHTML=f;var d=v.o0Olll.firstChild;if(n.html){if(typeof n.html=="string"){d.innerHTML=n.html}else{if(mini.isElement(n.html)){d.appendChild(n.html)}}}else{d.innerHTML=q}v._Buttons=[];var l=v.o0Olll.lastChild;if(n.buttons&&n.buttons.length>0){for(var w=0,u=n.buttons.length;w<u;w++){var s=n.buttons[w],i=mini.MessageBox.buttonText[s];if(!i){i=s}var c=new Button();c.setText(i);c.setWidth(n.buttonWidth);c.render(l);c.action=s;c.on("click",function(x){var y=x.sender;if(j){if(j(y.action)===false){return}}mini.MessageBox.hide(v)});if(w!=u-1){c.setStyle(n.spaceStyle)}v._Buttons.push(c)}}else{l.style.display="none"}v.setMinWidth(n.minWidth);v.setMinHeight(n.minHeight);v.setMaxWidth(n.maxWidth);v.setMaxHeight(n.maxHeight);v.setWidth(n.width);v.setHeight(n.height);v.show(n.x,n.y,{animType:n.animType});var k=v.getWidth();v.setWidth(k);var b=v.getHeight();v.setHeight(b);var t=document.getElementById(o);if(t){t.style.width="100%"}var r=document.getElementById(p);if(r){r.style.width="100%"}if(mini.MessageBox.autoFocus){var g=v._Buttons[0];if(g){g.focus()}else{v.focus()}}v.on("beforebuttonclick",function(x){if(j){j("close")}x.cancel=true;mini.MessageBox.hide(v)});mini.on(v.el,"keydown",function(x){if(x.keyCode==27){if(j){j("close")}mini.MessageBox.hide(v)}});if(n.timeout){setTimeout(function(){mini.MessageBox.hide(v.uid)},n.timeout)}return v.uid},hide:function(f){if(!f){return}var a=typeof f=="object"?f:mini.getbyUID(f);if(!a){return}for(var b=0,d=a._Buttons.length;b<d;b++){var c=a._Buttons[b];c.destroy()}a._Buttons=null;a.destroy()},alert:function(b,a,c){return mini.MessageBox.show({minWidth:250,title:a||mini.MessageBox.alertTitle,buttons:["ok"],message:b,iconCls:"mini-messagebox-warning",callback:c})},confirm:function(b,a,c){return mini.MessageBox.show({minWidth:250,title:a||mini.MessageBox.confirmTitle,buttons:["ok","cancel"],message:b,iconCls:"mini-messagebox-question",callback:c})},prompt:function(a,k,c,i,j){var b="prompt$"+new Date().getTime(),d=a||mini.MessageBox.promptMessage;if(i){d=d+'<br/><textarea id="'+b+'" style="width:200px;height:60px;margin-top:3px;"></textarea>'}else{d=d+'<br/><input id="'+b+'" type="text" style="width:200px;margin-top:3px;"/>'}var f=mini.MessageBox.show({title:k||mini.MessageBox.promptTitle,buttons:["ok","cancel"],width:250,html:'<div style="padding:5px;padding-left:10px;">'+d+"</div>",callback:function(l){var n=document.getElementById(b);if(c){return c(l,n.value)}}}),g=document.getElementById(b);g.focus();if(j==null){j=""}g.value=j;return f},loading:function(b,a){return mini.MessageBox.show({minHeight:50,title:a,showCloseButton:false,message:b,iconCls:"mini-messagebox-waiting"})},showTips:function(a){var c=jQuery;a=jQuery.extend({content:"",state:"",x:"center",y:"top",offset:[10,10],fixed:true,timeout:2000},a);var d="mini-tips-"+a.state,f='<div class="mini-tips '+d+'">'+a.content+"</div>",b=jQuery(f).appendTo(document.body);a.el=b[0];a.timeoutHandler=function(){b.slideUp();setTimeout(function(){b.remove()},2000)};mini.showAt(a);b.hide().slideDown()}};mini.alert=mini.MessageBox.alert;mini.confirm=mini.MessageBox.confirm;mini.prompt=mini.MessageBox.prompt;mini.loading=mini.MessageBox.loading;mini.showMessageBox=mini.MessageBox.show;mini.hideMessageBox=mini.MessageBox.hide;mini.showTips=mini.MessageBox.showTips;Splitter=function(){this.ol01ol();Splitter.superclass.constructor.apply(this,arguments)};mini.extend(Splitter,Control,{width:300,height:180,vertical:false,allowResize:true,pane1:null,pane2:null,showHandleButton:true,handlerStyle:"",handlerCls:"",handlerSize:5,uiCls:"mini-splitter"});mini.copyTo(Splitter.prototype,{getAttrs:function(c){var j=Splitter.superclass.getAttrs.call(this,c);mini._ParseString(c,j,["onexpand","oncollapse","onresize"]);mini._ParseBool(c,j,["allowResize","vertical","showHandleButton"]);mini._ParseInt(c,j,["handlerSize"]);var g=[],d=mini.getChildNodes(c);for(var a=0,k=2;a<k;a++){var f=d[a],b=jQuery(f),i={};g.push(i);if(!f){continue}i.style=f.style.cssText;mini._ParseString(f,i,["cls","size","id","class","tooltip","collapseTooltip"]);mini._ParseBool(f,i,["visible","expanded","showCollapseButton"]);mini._ParseInt(f,i,["minSize","maxSize","handlerSize"]);i.bodyParent=f}j.panes=g;return j},oOOO1:function(i){var n=this.elBox.width,d=this.elBox.height,c=this.handlerSize,k=parseFloat(this.pane1.size),f=parseFloat(this.pane2.size),g=isNaN(k),a=isNaN(f),s=!isNaN(k)&&this.pane1.size.indexOf("%")!=-1,r=!isNaN(f)&&this.pane2.size.indexOf("%")!=-1,l=!g&&!s,q=!a&&!r,p=this.vertical?d-this.handlerSize:n-this.handlerSize,b=__getBox(this.O0ollo),j=b.x-this.elBox.x,o=p-j;if(this.vertical){j=b.y-this.elBox.y;o=p-j}if(g||a){if(g&&a){k=parseFloat(j/p*100).toFixed(1);this.pane1.size=k+"%"}else{if(l){k=j;this.pane1.size=k}else{if(s){k=parseFloat(j/p*100).toFixed(1);this.pane1.size=k+"%"}else{if(q){f=o;this.pane2.size=f}else{if(r){f=parseFloat(o/p*100).toFixed(1);this.pane2.size=f+"%"}}}}}}else{if(s&&q){this.pane2.size=o}else{if(l&&r){this.pane1.size=j}else{this.pane1.size=parseFloat(j/p*100).toFixed(1);this.pane2.size=100-this.pane1.size}}}jQuery(this.O0ollo).remove();jQuery(this.l11ll1).remove();this.l11ll1=null;this.O0ollo=null;this.elBox=this.handlerBox=null;this.doLayout();this.fire("resize")},OloO:function(g){if(!this.handlerBox){return}if(!this.elBox){this.elBox=__getBox(this._borderEl,true)}var k=this.elBox.width,b=this.elBox.height,a=this.handlerSize,n=this.vertical?b-this.handlerSize:k-this.handlerSize,p=this.pane1.minSize,l=this.pane1.maxSize,o=this.pane2.minSize,f=this.pane2.maxSize;if(this.vertical==true){var d=g.now[1]-g.init[1],i=this.handlerBox.y+d;if(i-this.elBox.y>l){i=this.elBox.y+l}if(i+this.handlerBox.height<this.elBox.bottom-f){i=this.elBox.bottom-f-this.handlerBox.height}if(i-this.elBox.y<p){i=this.elBox.y+p}if(i+this.handlerBox.height>this.elBox.bottom-o){i=this.elBox.bottom-o-this.handlerBox.height}mini.setY(this.O0ollo,i)}else{var c=g.now[0]-g.init[0],j=this.handlerBox.x+c;if(j-this.elBox.x>l){j=this.elBox.x+l}if(j+this.handlerBox.width<this.elBox.right-f){j=this.elBox.right-f-this.handlerBox.width}if(j-this.elBox.x<p){j=this.elBox.x+p}if(j+this.handlerBox.width>this.elBox.right-o){j=this.elBox.right-o-this.handlerBox.width}mini.setX(this.O0ollo,j)}},OolO0:function(a){this.handlerBox=__getBox(this.lO0O0l);this.l11ll1=mini.append(document.body,'<div class="mini-resizer-mask"></div>');this.O0ollo=mini.append(document.body,'<div class="mini-proxy"></div>');this.O0ollo.style.cursor=this.vertical?"n-resize":"w-resize";this.elBox=__getBox(this._borderEl,true);__setBox(this.O0ollo,this.handlerBox)},o00Oo0:function(){if(!this.drag){this.drag=new mini.Drag({capture:true,onStart:mini.createDelegate(this.OolO0,this),onMove:mini.createDelegate(this.OloO,this),onStop:mini.createDelegate(this.oOOO1,this)})}return this.drag},lOO1l1:function(b){var c=b.target;if(!this.allowResize){return}if(!this.pane1.visible||!this.pane2.visible||!this.pane1.expanded||!this.pane2.expanded){return}if(__getById(this.lO0O0l,c)){if(c.className=="mini-splitter-pane1-button"||c.className=="mini-splitter-pane2-button"){}else{var a=this.o00Oo0();a.start(b)}}},onButtonClick:function(b,a){this.on("buttonclick",b,a)},l01l:function(b,a){this.fire("buttonclick",{pane:b,index:this.pane1==b?1:2,htmlEvent:a})},l11o00:function(b){var c=b.target;if(!__getById(this.lO0O0l,c)){return}var a=parseInt(c.id),d=this.getPane(a),b={pane:d,paneIndex:a,cancel:false};if(d.expanded){this.fire("beforecollapse",b)}else{this.fire("beforeexpand",b)}if(b.cancel==true){return}if(c.className=="mini-splitter-pane1-button"){this.togglePane(a)}else{if(c.className=="mini-splitter-pane2-button"){this.togglePane(a)}}},getHandlerSize:function(){return this.handlerSize},setHandlerSize:function(a){if(this.handlerSize!=a){this.handlerSize=a;this.doLayout()}},getAllowResize:function(){return this.allowResize},setAllowResize:function(a){if(this.allowResize!=a){this.allowResize=a;this.doLayout()}},hidePane:function(b){var a=this.getPane(b);if(!a){return}a.visible=false;var c=a==this.pane1?this.pane2:this.pane1;if(c.visible==false){c.expanded=true;c.visible=true}this.doUpdate()},showPane:function(b){var a=this.getPane(b);if(!a){return}a.visible=true;this.doUpdate()},togglePane:function(b){var a=this.getPane(b);if(!a){return}if(a.expanded){this.collapsePane(a)}else{this.expandPane(a)}},collapsePane:function(a){var d=this.getPane(a);if(!d){return}d.expanded=false;var c=d==this.pane1?this.pane2:this.pane1;if(c.expanded==false){c.expanded=true;c.visible=true}this.doUpdate();var b={pane:d,paneIndex:this.pane1==d?1:2};this.fire("collapse",b)},expandPane:function(b){var a=this.getPane(b);if(!a){return}a.expanded=true;this.doUpdate();var c={pane:a,paneIndex:this.pane1==a?1:2};this.fire("expand",c)},getVertical:function(){return this.vertical},setVertical:function(a){this.vertical=a;this.doUpdate()},getShowHandleButton:function(a){return this.showHandleButton},setShowHandleButton:function(a){this.showHandleButton=a;this.doUpdate()},updatePane:function(i,j){var f=this.getPane(i);if(!f){return}mini.copyTo(f,j);var a=this.getPaneEl(i),d=f.body;delete f.body;if(d){if(!mini.isArray(d)){d=[d]}for(var g=0,c=d.length;g<c;g++){mini.append(a,d[g])}}if(f.bodyParent){var b=f.bodyParent;while(b.firstChild){a.appendChild(b.firstChild)}}delete f.bodyParent;a.id=f.id;__css_set(a,f.style);__cls_add(a,f["class"]);if(f.cls){__cls_add(a,f.cls)}if(f.controls){var i=f==this.pane1?1:2;this.setPaneControls(i,f.controls);delete f.controls}this.doUpdate()},getPaneEl:function(a){if(a==1){return this.lolo0o}return this.o1Ol00},setPaneControls:function(b,d){var a=this.getPane(b);if(!a){return}var c=this.getPaneEl(b);__mini_setControls(d,c,this)},setPanes:function(b){if(!mini.isArray(b)){return}for(var a=0;a<2;a++){var c=b[a];this.updatePane(a+1,c)}},getPane:function(a){if(a==1){return this.pane1}else{if(a==2){return this.pane2}}return a},getPaneBox:function(a){var b=this.getPaneEl(a);if(!b){return null}return __getBox(b)},doLayout:function(){if(!this.canLayout()){return}this.lO0O0l.style.cursor=this.allowResize?"":"default";__cls_rm(this.el,"mini-splitter-vertical");if(this.vertical){__cls_add(this.el,"mini-splitter-vertical")}__cls_rm(this.lolo0o,"mini-splitter-pane1-vertical");__cls_rm(this.o1Ol00,"mini-splitter-pane2-vertical");if(this.vertical){__cls_add(this.lolo0o,"mini-splitter-pane1-vertical");__cls_add(this.o1Ol00,"mini-splitter-pane2-vertical")}__cls_rm(this.lO0O0l,"mini-splitter-handler-vertical");if(this.vertical){__cls_add(this.lO0O0l,"mini-splitter-handler-vertical")}var u=this.getHeight(true),j=this.getWidth(true);if(!jQuery.boxModel){var o=__border(this._borderEl);u=u+o.top+o.bottom;j=j+o.left+o.right}if(j<0){j=0}if(u<0){u=0}this._borderEl.style.width=j+"px";this._borderEl.style.height=u+"px";var y=this.lolo0o,x=this.o1Ol00,f=jQuery(y),i=jQuery(x);y.style.display=x.style.display=this.lO0O0l.style.display="";var t=this.handlerSize;this.pane1.size=String(this.pane1.size);this.pane2.size=String(this.pane2.size);var d=parseFloat(this.pane1.size),v=parseFloat(this.pane2.size),a=isNaN(d),r=isNaN(v),q=!isNaN(d)&&this.pane1.size.indexOf("%")!=-1,p=!isNaN(v)&&this.pane2.size.indexOf("%")!=-1,g=!a&&!q,n=!r&&!p,k=this.vertical?u-this.handlerSize:j-this.handlerSize,c=p2Size=0;if(a||r){if(a&&r){c=parseInt(k/2);p2Size=k-c}else{if(g){c=d;p2Size=k-c}else{if(q){c=parseInt(k*d/100);p2Size=k-c}else{if(n){p2Size=v;c=k-p2Size}else{if(p){p2Size=parseInt(k*v/100);c=k-p2Size}}}}}}else{if(q&&n){p2Size=v;c=k-p2Size}else{if(g&&p){c=d;p2Size=k-c}else{var b=d+v;c=parseInt(k*d/b);p2Size=k-c}}}if(c>this.pane1.maxSize){c=this.pane1.maxSize;p2Size=k-c}if(p2Size>this.pane2.maxSize){p2Size=this.pane2.maxSize;c=k-p2Size}if(c<this.pane1.minSize){c=this.pane1.minSize;p2Size=k-c}if(p2Size<this.pane2.minSize){p2Size=this.pane2.minSize;c=k-p2Size}if(this.pane1.expanded==false){p2Size=k;c=0;y.style.display="none"}else{if(this.pane2.expanded==false){c=k;p2Size=0;x.style.display="none"}}if(this.pane1.visible==false){p2Size=k+t;c=t=0;y.style.display="none";this.lO0O0l.style.display="none"}else{if(this.pane2.visible==false){c=k+t;p2Size=t=0;x.style.display="none";this.lO0O0l.style.display="none"}}if(this.vertical){__setWidth(y,j);__setWidth(x,j);__setHeight(y,c);__setHeight(x,p2Size);x.style.top=(c+t)+"px";this.lO0O0l.style.left="0px";this.lO0O0l.style.top=c+"px";__setWidth(this.lO0O0l,j);__setHeight(this.lO0O0l,this.handlerSize);y.style.left="0px";x.style.left="0px"}else{__setWidth(y,c);__setWidth(x,p2Size);__setHeight(y,u);__setHeight(x,u);x.style.left=(c+t)+"px";this.lO0O0l.style.top="0px";this.lO0O0l.style.left=c+"px";__setWidth(this.lO0O0l,this.handlerSize);__setHeight(this.lO0O0l,u);y.style.top="0px";x.style.top="0px"}var l='<div class="mini-splitter-handler-buttons">';if(!this.pane1.expanded||!this.pane2.expanded){if(!this.pane1.expanded){if(this.pane1.showCollapseButton){l+='<a id="1" class="mini-splitter-pane2-button" title="'+(this.pane1.collapseTooltip||this.pane1.tooltip||"")+'"></a>'}}else{if(this.pane2.showCollapseButton){l+='<a id="2" class="mini-splitter-pane1-button" title="'+(this.pane2.collapseTooltip||this.pane2.tooltip||"")+'"></a>'}}}else{if(this.pane1.showCollapseButton){l+='<a id="1" class="mini-splitter-pane1-button" title="'+(this.pane1.tooltip||"")+'"></a>'}if(this.allowResize){if((!this.pane1.showCollapseButton&&!this.pane2.showCollapseButton)){l+='<span class="mini-splitter-resize-button"></span>'}}if(this.pane2.showCollapseButton){l+='<a id="2" class="mini-splitter-pane2-button" title="'+(this.pane2.tooltip||"")+'"></a>'}}l+="</div>";this.lO0O0l.innerHTML=l;var w=this.lO0O0l.firstChild;w.style.display=this.showHandleButton?"":"none";var s=__getBox(w);if(this.vertical){w.style.marginLeft=-s.width/2+"px"}else{w.style.marginTop=-s.height/2+"px"}if(!this.pane1.visible||!this.pane2.visible||!this.pane1.expanded||!this.pane2.expanded){__cls_add(this.lO0O0l,"mini-splitter-nodrag")}else{__cls_rm(this.lO0O0l,"mini-splitter-nodrag")}mini.layout(this._borderEl);this.fire("layout")},doUpdate:function(){this.doLayout()},ol01ol:function(){this.pane1={id:"",index:1,minSize:10,maxSize:100000,size:"",showCollapseButton:false,cls:"",style:"",visible:true,expanded:true};this.pane2=mini.copyTo({},this.pane1);this.pane2.index=2},_initEvents:function(){__initEvents(function(){mini.on(this.el,"click",this.l11o00,this);mini.on(this.el,"mousedown",this.lOO1l1,this)},this)},_create:function(){this.el=document.createElement("div");this.el.className="mini-splitter";this.el.innerHTML='<div class="mini-splitter-border"><div id="1" class="mini-splitter-pane mini-splitter-pane1"></div><div id="2" class="mini-splitter-pane mini-splitter-pane2"></div><div class="mini-splitter-handler"></div></div>';this._borderEl=this.el.firstChild;this.lolo0o=this._borderEl.firstChild;this.o1Ol00=this._borderEl.childNodes[1];this.lO0O0l=this._borderEl.lastChild}});mini.regClass(Splitter,"splitter");Layout=function(){this.regions=[];this.regionMap={};Layout.superclass.constructor.apply(this,arguments)};mini.extend(Layout,Control,{floatable:true,regions:[],splitSize:5,collapseWidth:28,collapseHeight:25,regionWidth:150,regionHeight:80,regionMinWidth:50,regionMinHeight:25,regionMaxWidth:2000,regionMaxHeight:2000,splitToolTip:"",uiCls:"mini-layout",hoverProxyEl:null});mini.copyTo(Layout.prototype,{onButtonMouseDown:function(a,b){this.on("buttonmousedown",a,b)},onButtonClick:function(a,b){this.on("buttonclick",a,b)},lol11:function(a){if(this.hoverProxyEl){__cls_rm(this.hoverProxyEl,"mini-layout-proxy-hover")}this.hoverProxyEl=null},lloO:function(a){var b=this.lo01O(a);if(b){__cls_add(b,"mini-layout-proxy-hover");this.hoverProxyEl=b}},lo00lo:function(a,c,b){this.fire("buttonmousedown",{htmlEvent:b,region:a,button:c,index:this.buttons.indexOf(c),name:c.name})},l01l:function(a,c,b){this.fire("buttonclick",{htmlEvent:b,region:a,button:c,index:this.buttons.indexOf(c),name:c.name})},l11o00:function(a){if(this.ooo0Oo){return}var i=__getByCls(a.target,"mini-layout");if(this.el!=i){return}var b=this.lo01O(a);if(b){var f=b.id,d=__getByCls(a.target,"mini-tools-collapse");if(d){this.O1o1l1(f)}else{this.O10OO(f)}}var c=this.olOo(a);if(c&&__getByCls(a.target,"mini-layout-region-header")){f=c.id,d=__getByCls(a.target,"mini-tools-collapse");if(d){this.O1o1l1(f)}var g=__getByCls(a.target,"mini-tools-close");if(g){this.updateRegion(f,{visible:false})}}if(__cls_has(a.target,"mini-layout-spliticon")){f=a.target.parentNode.id;this.O1o1l1(f)}},olOo:function(b){var a=__getByCls(b.target,"mini-layout-region");return a},lo01O:function(b){var a=__getByCls(b.target,"mini-layout-proxy");return a},O1o1l1:function(a){a=this.getRegion(a);var b={region:a,cancel:false};if(a.expanded){this.fire("BeforeCollapse",b);if(b.cancel==false){this.collapseRegion(a)}}else{this.fire("BeforeExpand",b);if(b.cancel==false){this.expandRegion(a)}}},isVisibleRegion:function(a){a=this.getRegion(a);if(!a){return null}return a.visible},isExpandRegion:function(a){a=this.getRegion(a);if(!a){return null}return a.expanded},hideRegion:function(a){a=this.getRegion(a);if(!a){return}a.visible=false;this.doUpdate()},showRegion:function(a){a=this.getRegion(a);if(!a){return}a.visible=true;this.doUpdate()},toggleRegion:function(a){a=this.getRegion(a);if(!a){return}if(a.expanded){this.collapseRegion(a)}else{this.expandRegion(a)}},collapseRegion:function(a){a=this.getRegion(a);if(!a){return}a.expanded=false;this.doUpdate();this.fire("collapse",{region:a})},expandRegion:function(a){a=this.getRegion(a);if(!a){return}a.expanded=true;this.doUpdate();this.fire("expand",{region:a})},updateRegion:function(a,b){a=this.getRegion(a);if(!a){return}if(b){delete b.region}mini.copyTo(a,b);this.O10OoO(a);this.doUpdate()},O10OoO:function(a){var b=this.OOO0O(a,"close");b.visible=a.showCloseButton;b=this.OOO0O(a,"collapse");b.visible=a.showCollapseButton;if(a.width<a.minWidth){a.width=a.minWidth}if(a.width>a.maxWidth){a.width=a.maxWidth}if(a.height<a.minHeight){a.height=a.minHeight}if(a.height>a.maxHeight){a.height=a.maxHeight}},moveRegion:function(a,b){var a=this.getRegion(a);if(!a){return}var c=this.regions[b];if(!c||c==a){return}this.regions.remove(a);var b=this.region.indexOf(c);this.regions.insert(b,a);this.doUpdate()},removeRegion:function(a){var a=this.getRegion(a);if(!a){return}this.regions.remove(a);delete this.regionMap[a.region];jQuery(a._el).remove();jQuery(a._split).remove();jQuery(a._proxy).remove();this.doUpdate()},addRegion:function(k,a){var i=k;k=this.O1o1l(k);if(!k.region){k.region="center"}k.region=k.region.toLowerCase();if(k.region=="center"&&i&&!i.showHeader){k.showHeader=false}if(k.region=="north"||k.region=="south"){if(!i.collapseSize){k.collapseSize=this.collapseHeight}}this.O10OoO(k);if(typeof a!="number"){a=this.regions.length}var d=this.regionMap[k.region];if(d){return}this.regions.insert(a,k);this.regionMap[k.region]=k;this.lll0o1(k);var b=this.getRegionBodyEl(k),f=k.body;delete k.body;if(f){if(!mini.isArray(f)){f=[f]}for(var l=0,j=f.length;l<j;l++){mini.append(b,f[l])}}if(k.bodyParent){var g=k.bodyParent;while(g.firstChild){var c=g.firstChild;b.appendChild(c)}}delete k.bodyParent;if(k.controls){this.setRegionControls(k,k.controls);delete k.controls}this.doUpdate()},setRegions:function(c){if(!mini.isArray(c)){return}for(var b=0,a=c.length;b<a;b++){this.addRegion(c[b])}},setRegionControls:function(b,a){var b=this.getRegion(b);if(!b){return}var c=this.getRegionBodyEl(b);__mini_setControls(a,c,this)},lll0o1:function(a){var a=this.getRegion(a);if(!a){return}mini.append(this._borderEl,'<div id="'+a.region+'" class="mini-layout-region"><div class="mini-layout-region-header" style="'+a.headerStyle+'"></div><div class="mini-layout-region-body '+a.bodyCls+'" style="'+a.bodyStyle+'"></div></div>');a._el=this._borderEl.lastChild;a._header=a._el.firstChild;a._body=a._el.lastChild;if(a.cls){__cls_add(a._el,a.cls)}if(a.style){__css_set(a._el,a.style)}if(a.headerCls){__cls_add(a._el.firstChild,a.headerCls)}__cls_add(a._el,"mini-layout-region-"+a.region);if(a.region!="center"){mini.append(this._borderEl,'<div uid="'+this.uid+'" id="'+a.region+'" class="mini-layout-split"><div class="mini-layout-spliticon" title="'+a.splitToolTip+'"></div></div>');a._split=this._borderEl.lastChild;__cls_add(a._split,"mini-layout-split-"+a.region)}if(a.region!="center"){mini.append(this._borderEl,'<div id="'+a.region+'" class="mini-layout-proxy"></div>');a._proxy=this._borderEl.lastChild;__cls_add(a._proxy,"mini-layout-proxy-"+a.region)}},O1o1l:function(b){var a=mini.copyTo({region:"",title:"",iconCls:"",iconStyle:"",showCloseButton:false,showCollapseButton:true,buttons:[{name:"close",cls:"mini-tools-close",html:"",visible:false},{name:"collapse",cls:"mini-tools-collapse",html:"",visible:true}],showSplitIcon:false,showSplit:true,splitToolTip:"",showHeader:true,splitSize:this.splitSize,collapseSize:this.collapseWidth,width:this.regionWidth,height:this.regionHeight,minWidth:this.regionMinWidth,minHeight:this.regionMinHeight,maxWidth:this.regionMaxWidth,maxHeight:this.regionMaxHeight,allowResize:true,showProxy:true,showProxyText:false,isShowProxyText:function(){return this.showProxyText&&!mini.isIE6&&!mini.isIE7&&!mini.isIE8},cls:"",style:"",headerCls:"",headerStyle:"",bodyCls:"",bodyStyle:"",visible:true,expanded:true},b);if(a.region=="center"){a.expanded=true}return a},OOO0O:function(f,a){var b=f.buttons;for(var g=0,d=b.length;g<d;g++){var c=b[g];if(c.name==a){return c}}},getRegion:function(a){if(typeof a=="string"){return this.regionMap[a]}return a},getRegionBox:function(a){var b=this.getRegionEl(a);if(b){return __getBox(b)}return null},getRegionProxyEl:function(a){var a=this.getRegion(a);if(!a){return null}return a._proxy},getRegionSplitEl:function(a){var a=this.getRegion(a);if(!a){return null}return a._split},getRegionBodyEl:function(a){var a=this.getRegion(a);if(!a){return null}return a._body},getRegionHeaderEl:function(a){var a=this.getRegion(a);if(!a){return null}return a._header},getRegionEl:function(a){var a=this.getRegion(a);if(!a){return null}return a._el},_initEvents:function(){__initEvents(function(){mini.on(this.el,"click",this.l11o00,this);mini.on(this.el,"mousedown",this.lOO1l1,this);mini.on(this.el,"mouseover",this.lloO,this);mini.on(this.el,"mouseout",this.lol11,this);mini.on(document,"mousedown",this.oo10l1,this)},this)},_create:function(){this.el=document.createElement("div");this.el.className="mini-layout";this.el.innerHTML='<div class="mini-layout-border"></div>';this._borderEl=this.el.firstChild;this.doUpdate()},o00oll:function(d,b){var a='<div class="mini-tools">';if(b){a+='<span class="mini-tools-collapse"></span>'}else{for(var f=d.buttons.length-1;f>=0;f--){var c=d.buttons[f];a+='<span class="'+c.cls+'" style="';a+=c.style+";"+(c.visible?"":"display:none;")+'">'+c.html+"</span>"}}a+="</div>";a+='<div class="mini-layout-region-icon '+d.iconCls+'" style="'+d.iconStyle+";"+((d.iconStyle||d.iconCls)?"":"display:none;")+'"></div>';a+='<div class="mini-layout-region-title">'+d.title+"</div>";return a},doUpdate:function(){for(var j=0,g=this.regions.length;j<g;j++){var f=this.regions[j],c=f.region,a=f._el,b=f._split,d=f._proxy;if(f.cls){__cls_add(a,f.cls)}if(f.headerCls){__cls_add(a.firstChild,f.headerCls)}f._header.style.display=f.showHeader?"":"none";f._header.innerHTML=this.o00oll(f);if(f._proxy){var i=this.o00oll(f,true);if(f.isShowProxyText()){if(f.region=="west"||f.region=="east"){i+='<div class="mini-layout-proxy-text" >'+f.title+"</div>"}}f._proxy.innerHTML=i}if(b){__cls_rm(b,"mini-layout-split-nodrag");if(f.expanded==false||!f.allowResize){__cls_add(b,"mini-layout-split-nodrag")}}}this.doLayout()},doLayout:function(){if(!this.canLayout()){return}if(this.ooo0Oo){return}var s=__getHeight(this.el,true),i=__getWidth(this.el,true),p={x:0,y:0,width:i,height:s};__setHeight(this._borderEl,s);var a=this.regions.clone(),u=this.getRegion("center");a.remove(u);if(u){a.push(u)}for(var q=0,o=a.length;q<o;q++){var c=a[q];c._Expanded=false;__cls_rm(c._el,"mini-layout-popup");var n=c.region,t=c._el,k=c._split,l=c._proxy;if(c.visible==false){t.style.display="none";if(n!="center"){k.style.display=l.style.display="none"}continue}t.style.display="";if(n!="center"){k.style.display="";l.style.display=c.showProxy?"":"none"}var g=p.x,f=p.y,i=p.width,s=p.height,j=c.width,v=c.height;if(!c.expanded){if(n=="west"||n=="east"){j=__getWidth(l);__setWidth(t,c.width)}else{if(n=="north"||n=="south"){v=__getHeight(l);__setHeight(t,c.height)}}}switch(n){case"north":s=v;p.y+=v;p.height-=v;break;case"south":s=v;f=p.y+p.height-v;p.height-=v;break;case"west":i=j;p.x+=j;p.width-=j;break;case"east":i=j;g=p.x+p.width-j;p.width-=j;break;case"center":break;default:continue}if(i<0){i=0}if(s<0){s=0}if(n=="west"||n=="east"){__setHeight(t,s)}if(n=="north"||n=="south"){__setWidth(t,i)}var d="left:"+g+"px;top:"+f+"px;",w=t;if(!c.expanded){w=l;t.style.top="-100px";t.style.left="-3000px"}else{if(l){l.style.left="-3000px";l.style.top="-100px"}}if(w){w.style.left=g+"px";w.style.top=f+"px"}if(w){if(w==l){if(n=="west"||n=="east"){__setHeight(w,s)}if(n=="north"||n=="south"){__setWidth(w,i)}}else{__setWidth(w,i);__setHeight(w,s)}}var r=jQuery(c._el).height(),b=c.showHeader?jQuery(c._header).outerHeight():0;__setHeight(c._body,r-b);if(n=="center"){continue}j=v=c.splitSize;g=p.x,f=p.y,i=p.width,s=p.height;switch(n){case"north":s=v;p.y+=v;p.height-=v;break;case"south":s=v;f=p.y+p.height-v;p.height-=v;break;case"west":i=j;p.x+=j;p.width-=j;break;case"east":i=j;g=p.x+p.width-j;p.width-=j;break;case"center":break}if(i<0){i=0}if(s<0){s=0}k.style.left=g+"px";k.style.top=f+"px";__setWidth(k,i);__setHeight(k,s);if(c.showSplit&&c.expanded&&c.allowResize==true){__cls_rm(k,"mini-layout-split-nodrag")}else{__cls_add(k,"mini-layout-split-nodrag")}k.firstChild.style.display=c.showSplitIcon?"block":"none";if(c.expanded){__cls_rm(k.firstChild,"mini-layout-spliticon-collapse")}else{__cls_add(k.firstChild,"mini-layout-spliticon-collapse")}}mini.layout(this._borderEl);this.fire("layout")},lOO1l1:function(b){if(this.ooo0Oo){return}if(__getByCls(b.target,"mini-layout-split")){var c=jQuery(b.target).attr("uid");if(c!=this.uid){return}var d=this.getRegion(b.target.id);if(d.expanded==false||!d.allowResize||!d.showSplit){return}this.dragRegion=d;var a=this.o00Oo0();a.start(b)}},o00Oo0:function(){if(!this.drag){this.drag=new mini.Drag({capture:true,onStart:mini.createDelegate(this.OolO0,this),onMove:mini.createDelegate(this.OloO,this),onStop:mini.createDelegate(this.oOOO1,this)})}return this.drag},OolO0:function(a){this.l11ll1=mini.append(document.body,'<div class="mini-resizer-mask"></div>');this.O0ollo=mini.append(document.body,'<div class="mini-proxy"></div>');this.O0ollo.style.cursor="n-resize";if(this.dragRegion.region=="west"||this.dragRegion.region=="east"){this.O0ollo.style.cursor="w-resize"}this.splitBox=__getBox(this.dragRegion._split);__setBox(this.O0ollo,this.splitBox);this.elBox=__getBox(this.el,true)},OloO:function(o){var j=o.now[0]-o.init[0],c=this.splitBox.x+j,d=o.now[1]-o.init[1],b=this.splitBox.y+d,f=c+this.splitBox.width,i=b+this.splitBox.height,p=this.getRegion("west"),t=this.getRegion("east"),y=this.getRegion("north"),W=this.getRegion("south"),g=this.getRegion("center"),r=p&&p.visible?p.width:0,k=t&&t.visible?t.width:0,x=y&&y.visible?y.height:0,n=W&&W.visible?W.height:0,w=p&&p.showSplit?__getWidth(p._split):0,z=t&&t.showSplit?__getWidth(t._split):0,v=y&&y.showSplit?__getHeight(y._split):0,q=W&&W.showSplit?__getHeight(W._split):0,a=this.dragRegion,u=a.region;if(u=="west"){var l=this.elBox.width-k-z-w-g.minWidth;if(c-this.elBox.x>l){c=l+this.elBox.x}if(c-this.elBox.x<a.minWidth){c=a.minWidth+this.elBox.x}if(c-this.elBox.x>a.maxWidth){c=a.maxWidth+this.elBox.x}mini.setX(this.O0ollo,c)}else{if(u=="east"){l=this.elBox.width-r-w-z-g.minWidth;if(this.elBox.right-(c+this.splitBox.width)>l){c=this.elBox.right-l-this.splitBox.width}if(this.elBox.right-(c+this.splitBox.width)<a.minWidth){c=this.elBox.right-a.minWidth-this.splitBox.width}if(this.elBox.right-(c+this.splitBox.width)>a.maxWidth){c=this.elBox.right-a.maxWidth-this.splitBox.width}mini.setX(this.O0ollo,c)}else{if(u=="north"){var s=this.elBox.height-n-q-v-g.minHeight;if(b-this.elBox.y>s){b=s+this.elBox.y}if(b-this.elBox.y<a.minHeight){b=a.minHeight+this.elBox.y}if(b-this.elBox.y>a.maxHeight){b=a.maxHeight+this.elBox.y}mini.setY(this.O0ollo,b)}else{if(u=="south"){s=this.elBox.height-x-v-q-g.minHeight;if(this.elBox.bottom-(b+this.splitBox.height)>s){b=this.elBox.bottom-s-this.splitBox.height}if(this.elBox.bottom-(b+this.splitBox.height)<a.minHeight){b=this.elBox.bottom-a.minHeight-this.splitBox.height}if(this.elBox.bottom-(b+this.splitBox.height)>a.maxHeight){b=this.elBox.bottom-a.maxHeight-this.splitBox.height}mini.setY(this.O0ollo,b)}}}}},oOOO1:function(a){var b=__getBox(this.O0ollo),g=this.dragRegion,f=g.region;if(f=="west"){var c=b.x-this.elBox.x;this.updateRegion(g,{width:c})}else{if(f=="east"){c=this.elBox.right-b.right;this.updateRegion(g,{width:c})}else{if(f=="north"){var d=b.y-this.elBox.y;this.updateRegion(g,{height:d})}else{if(f=="south"){d=this.elBox.bottom-b.bottom;this.updateRegion(g,{height:d})}}}}jQuery(this.O0ollo).remove();this.O0ollo=null;this.elBox=this.handlerBox=null;jQuery(this.l11ll1).remove();this.l11ll1=null},O10OO:function(a){if(!this.floatable){return}a=this.getRegion(a);if(a._Expanded===true){this.ll1oOl(a)}else{this.l0l1(a)}},l0l1:function(i){if(this.ooo0Oo){return}this.doLayout();var b=i.region,f=i._el;i._Expanded=true;__cls_add(f,"mini-layout-popup");var j=__getBox(i._proxy),c=__getBox(i._el),g={};if(b=="east"){var n=j.x,k=j.y,d=j.height;__setHeight(f,d);mini.setX(f,n);f.style.top=i._proxy.style.top;var p=parseInt(f.style.left);g={left:p-c.width}}else{if(b=="west"){n=j.right-c.width,k=j.y,d=j.height;__setHeight(f,d);mini.setX(f,n);f.style.top=i._proxy.style.top;p=parseInt(f.style.left);g={left:p+c.width}}else{if(b=="north"){var n=j.x,k=j.bottom-c.height,o=j.width;__setWidth(f,o);mini.setXY(f,n,k);var q=parseInt(f.style.top);g={top:q+c.height}}else{if(b=="south"){n=j.x,k=j.y,o=j.width;__setWidth(f,o);mini.setXY(f,n,k);q=parseInt(f.style.top);g={top:q-c.height}}}}}__cls_add(i._proxy,"mini-layout-maxZIndex");this.ooo0Oo=true;var a=this,l=jQuery(f);l.animate(g,250,function(){__cls_rm(i._proxy,"mini-layout-maxZIndex");a.ooo0Oo=false})},ll1oOl:function(k){if(this.ooo0Oo){return}k._Expanded=false;var j=k.region,c=k._el,a=__getBox(c),i={};if(j=="east"){var d=parseInt(c.style.left);i={left:d+a.width}}else{if(j=="west"){d=parseInt(c.style.left);i={left:d-a.width}}else{if(j=="north"){var g=parseInt(c.style.top);i={top:g-a.height}}else{if(j=="south"){g=parseInt(c.style.top);i={top:g+a.height}}}}}__cls_add(k._proxy,"mini-layout-maxZIndex");this.ooo0Oo=true;var f=this,b=jQuery(c);b.animate(i,250,function(){__cls_rm(k._proxy,"mini-layout-maxZIndex");f.ooo0Oo=false;f.doLayout()})},oo10l1:function(c){if(this.ooo0Oo){return}for(var b=0,a=this.regions.length;b<a;b++){var d=this.regions[b];if(!d._Expanded){continue}if(__getById(d._el,c.target)||__getById(d._proxy,c.target)){}else{this.ll1oOl(d)}}},getAttrs:function(b){var j=Layout.superclass.getAttrs.call(this,b),a=jQuery(b);mini._ParseBool(b,j,["floatable"]);var i=parseInt(a.attr("splitSize"));if(!isNaN(i)){j.splitSize=i}var d=[],c=mini.getChildNodes(b);for(var l=0,k=c.length;l<k;l++){var f=c[l],g={};d.push(g);g.cls=f.className;g.style=f.style.cssText;mini._ParseString(f,g,["region","title","iconCls","iconStyle","cls","headerCls","headerStyle","bodyCls","bodyStyle","splitToolTip","beforeexpand","expand","beforecollapse","collapse"]);mini._ParseBool(f,g,["allowResize","visible","showCloseButton","showCollapseButton","showSplit","showHeader","expanded","showSplitIcon","showProxyText","showProxy"]);mini._ParseInt(f,g,["splitSize","collapseSize","width","height","minWidth","minHeight","maxWidth","maxHeight"]);g.bodyParent=f}j.regions=d;return j}});mini.regClass(Layout,"layout");Box=function(){Box.superclass.constructor.apply(this,arguments)};mini.extend(Box,mini.Container,{style:"",borderStyle:"",bodyStyle:"",uiCls:"mini-box"});mini.copyTo(Box.prototype,{getAttrs:function(b){var a=Box.superclass.getAttrs.call(this,b);a._bodyParent=b;mini._ParseString(b,a,["bodyStyle"]);return a},setBodyStyle:function(a){__css_set(this.o0Olll,a);this.doLayout()},set_bodyParent:function(a){if(!a){return}var b=this.o0Olll,c=a;while(c.firstChild){b.appendChild(c.firstChild)}this.doLayout()},setBody:function(a){if(!a){return}if(!mini.isArray(a)){a=[a]}for(var c=0,b=a.length;c<b;c++){mini.append(this.o0Olll,a[c])}mini.parse(this.o0Olll);this.doLayout()},doLayout:function(){if(!this.canLayout()){return}var b=this.isAutoHeight(),f=this.isAutoWidth(),d=__padding(this.o0Olll),a=__margin(this.o0Olll);if(!b){var c=this.getHeight(true);if(jQuery.boxModel){c=c-d.top-d.bottom}c=c-a.top-a.bottom;if(c<0){c=0}this.o0Olll.style.height=c+"px"}else{this.o0Olll.style.height=""}var g=this.getWidth(true),i=g;g=g-a.left-a.right;if(jQuery.boxModel){g=g-d.left-d.right}if(g<0){g=0}this.o0Olll.style.width=g+"px";mini.layout(this._borderEl);this.fire("layout")},_initEvents:function(){},_create:function(){this.el=document.createElement("div");this.el.className="mini-box";this.el.innerHTML='<div class="mini-box-border"></div>';this.o0Olll=this._borderEl=this.el.firstChild;this._contentEl=this.o0Olll}});mini.regClass(Box,"box");Include=function(){Include.superclass.constructor.apply(this,arguments)};mini.extend(Include,Control,{url:"",uiCls:"mini-include"});mini.copyTo(Include.prototype,{getAttrs:function(b){var a=Include.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["url"]);return a},getUrl:function(a){return this.url},setUrl:function(a){this.url=a;mini.update({url:this.url,el:this.el,async:this.async});this.doLayout()},doLayout:function(){if(!this.canLayout()){return}var c=this.el.childNodes;if(c){for(var b=0,d=c.length;b<d;b++){var a=c[b];mini.layout(a)}}},_initEvents:function(){},_create:function(){this.el=document.createElement("div");this.el.className="mini-include"}});mini.regClass(Include,"include");Tabs=function(){this.O00Ol1();Tabs.superclass.constructor.apply(this,arguments)};mini.extend(Tabs,Control,{activeIndex:-1,tabAlign:"left",tabPosition:"top",showBody:true,showHeader:true,nameField:"name",titleField:"title",urlField:"url",url:"",maskOnLoad:true,plain:true,bodyStyle:"",Oo0l:"mini-tab-hover",ooO10:"mini-tab-active",uiCls:"mini-tabs",o00l:1,buttonsAlign:"right",Ololoo:180,allowClickWrap:true,arrowPosition:"right",showNavMenu:false,clearTimeStamp:false,hoverTab:null});mini.copyTo(Tabs.prototype,{getAttrs:function(A){var F=Tabs.superclass.getAttrs.call(this,A);mini._ParseString(A,F,["tabAlign","tabPosition","bodyStyle","onactivechanged","onbeforeactivechanged","url","ontabload","ontabdestroy","onbeforecloseclick","oncloseclick","ontabdblclick","titleField","urlField","nameField","loadingMsg","buttons","arrowPosition","buttonsAlign"]);mini._ParseBool(A,F,["allowAnim","showBody","showHeader","maskOnLoad","plain","allowClickWrap","showNavMenu","clearTimeStamp"]);mini._ParseInt(A,F,["activeIndex"]);var B=[],_=mini.getChildNodes(A);for(var D=0,E=_.length;D<E;D++){var $=_[D],G={};B.push(G);G.style=$.style.cssText;mini._ParseString($,G,["name","title","url","cls","iconCls","iconStyle","headerCls","headerStyle","bodyCls","bodyStyle","onload","ondestroy","data-options","tooltip"]);mini._ParseBool($,G,["newLine","visible","enabled","showCloseButton","refreshOnClick"]);G.bodyParent=$;var C=G["data-options"];if(C){C=window.eval("("+C+")");if(C){mini.copyTo(G,C)}}}F.tabs=B;return F},onActiveChanged:function(a,b){this.on("activechanged",a,b)},onCloseClick:function(a,b){this.on("closeclick",a,b)},onBeforeCloseClick:function(a,b){this.on("beforecloseclick",a,b)},oolo:function(a,f){var d={tab:a,index:this.tabs.indexOf(a),name:a.name.toLowerCase(),htmlEvent:f,cancel:false};this.fire("beforecloseclick",d);if(d.cancel==true){return}try{if(a.Oo111l&&a.Oo111l.contentWindow){var c=true;if(a.Oo111l.contentWindow.CloseWindow){c=a.Oo111l.contentWindow.CloseWindow("close")}else{if(a.Oo111l.contentWindow.CloseOwnerWindow){c=a.Oo111l.contentWindow.CloseOwnerWindow("close")}}if(c===false){d.cancel=true}}}catch(b){}if(d.cancel==true){return}a.removeAction="close";this.removeTab(a);this.fire("closeclick",d)},o100:function(){this.Ol1lO();__cls_rm(this.O1llo,"mini-tabs-header");__cls_rm(this.ll01ol,"mini-tabs-header");mini.append(this.ll01ol,this.O1llo.firstChild);this.ll0O=this.ll01ol},Ol1lO:function(){var j='<table cellspacing="0" cellpadding="0"><tr>',n=this.getTabRows();for(var b=0,a=n.length;b<a;b++){var k=n[b],o="";if(a>1&&b!=a-1){o="mini-tabs-header2"}j+='<td class="'+o+'"><table class="mini-tabs-header" cellspacing="0" cellpadding="0">';j+='<tr ><td class="mini-tabs-space mini-tabs-firstSpace" ><div></div></td></tr>';for(var d=0,l=k.length;d<l;d++){var i=k[d],g=this.OoOO00(i);if(!i.visible){continue}var c=this.tabs.indexOf(i),o=i.headerCls||"";if(i.enabled==false){o+=" mini-disabled"}j+='<tr><td id="'+g+'" index="'+c+'"  class="mini-tab '+o+'" style="'+i.headerStyle+'">';if(i.iconCls||i.iconStyle){j+='<span class="mini-tab-icon mini-iconfont '+i.iconCls+'" style="'+i.iconStyle+'"></span>'}j+='<span class="mini-tab-text">'+i.title+"</span>";if(i.showCloseButton){var f="";if(i.enabled){f="onmouseover=\"__cls_add(this,'mini-tab-close-hover')\" onmouseout=\"__cls_rm(this,'mini-tab-close-hover')\""}j+='<span class="mini-tab-close" '+f+"></span>"}j+="</td></tr>";if(d!=l-1){j+='<tr><td class="mini-tabs-space2"><div></div></td></tr>'}}j+='<tr ><td class="mini-tabs-space mini-tabs-lastSpace" ><div></div></td></tr>';j+="</table></td>"}j+="</tr ></table>";this.oOOol();__cls_add(this.O1llo,"mini-tabs-header");mini.append(this.O1llo,j);this.ll0O=this.O1llo},oo1l:function(){this.Ol0l();var a=this.o110l0;mini.append(a,a.firstChild);this.ll0O=a.lastChild.lastChild},Ol0l:function(){var j=this.tabPosition=="top",l="";l+='<div class="mini-tabs-scrollCt">';if(this.arrowPosition=="side"){l+='<div class="mini-tabs-leftnav"><a class="mini-tabs-leftButton" href="javascript:void(0)" hideFocus onclick="return false"></a></div>';l+='<div class="mini-tabs-nav"><a class="mini-tabs-rightButton" href="javascript:void(0)" hideFocus onclick="return false"></a></div>'}else{l+='<div class="mini-tabs-nav"><a class="mini-tabs-leftButton" href="javascript:void(0)" hideFocus onclick="return false"></a><a class="mini-tabs-rightButton" href="javascript:void(0)" hideFocus onclick="return false"></a></div>'}if(this.showNavMenu){l+='<a class="mini-tabs-tabmenu" href="javascript:void(0)" hideFocus onclick="return false"></a>'}l+='<div class="mini-tabs-buttons" a=1 style="'+(this.buttonsAlign=="right"?"":"right:auto;left:0;")+'"></div>';l+='<div class="mini-tabs-headers">';var r=this.getTabRows();for(var a=0,t=r.length;a<t;a++){var d=r[a],s="";l+='<table class="mini-tabs-header" cellspacing="0" cellpadding="0"><tr><td class="mini-tabs-space mini-tabs-firstSpace"><div></div></td>';for(var c=0,q=d.length;c<q;c++){var k=d[c],g=this.OoOO00(k);if(!k.visible){continue}var b=this.tabs.indexOf(k),s=k.headerCls||"";if(k.enabled==false){s+=" mini-disabled"}l+='<td title="'+k.tooltip+'" id="'+g+'" index="'+b+'"  class="mini-tab '+s+'" style="'+k.headerStyle+'">';if(k.iconCls||k.iconStyle){l+='<span class="mini-tab-icon mini-iconfont '+k.iconCls+'" style="'+k.iconStyle+'"></span>'}l+='<span class="mini-tab-text">'+k.title+"</span>";if(k.showCloseButton){var p="";if(k.enabled){p="onmouseover=\"__cls_add(this,'mini-tab-close-hover')\" onmouseout=\"__cls_rm(this,'mini-tab-close-hover')\""}l+='<span class="mini-tab-close" '+p+" ></span>"}l+="</td>";if(c!=q-1){l+='<td class="mini-tabs-space2"><div></div></td>'}}l+='<td class="mini-tabs-space mini-tabs-lastSpace" ><div></div></td></tr></table>'}l+="</div>";l+="</div>";this.oOOol();mini.prepend(this.o110l0,l);var n=this.o110l0;this.ll0O=n.firstChild.lastChild;if(this.arrowPosition=="side"){this._leftNavEl=n.firstChild.firstChild;this._navEl=this.ll0O.parentNode.children[1];this.O011l=this._leftNavEl.firstChild;this.o0Olo=this._navEl.firstChild;if(this.showNavMenu){this._headerMenuEl=this.ll0O.parentNode.children[2]}}else{this._navEl=this.ll0O.parentNode.firstChild;this.O011l=this._navEl.firstChild;this.o0Olo=this._navEl.childNodes[1];if(this.showNavMenu){this._headerMenuEl=this.ll0O.parentNode.children[1]}}switch(this.tabAlign){case"center":var i=this.ll0O.childNodes;for(c=0,q=i.length;c<q;c++){var o=i[c],f=o.getElementsByTagName("td");f[0].style.width="50%";f[f.length-1].style.width="50%"}break;case"right":i=this.ll0O.childNodes;for(c=0,q=i.length;c<q;c++){o=i[c],f=o.getElementsByTagName("td");f[0].style.width="100%"}break;case"fit":break;default:i=this.ll0O.childNodes;for(c=0,q=i.length;c<q;c++){o=i[c],f=o.getElementsByTagName("td");f[f.length-1].style.width="100%"}break}},OlO111:function(a){clearInterval(this.ll0llO);this.ll0llO=null;mini.un(document,"mouseup",this.OlO111,this)},lOO1l1:function(b){clearInterval(this.ll0llO);if(this.tabPosition=="top"||this.tabPosition=="bottom"){var c=this,d=0,a=10;if(b.target==this.O011l){this.ll0llO=setInterval(function(){c.ll0O.scrollLeft-=a;d++;if(d>5){a=18}if(d>10){a=25}c.ol1lll()},25)}else{if(b.target==this.o0Olo){this.ll0llO=setInterval(function(){c.ll0O.scrollLeft+=a;d++;if(d>5){a=18}if(d>10){a=25}c.ol1lll()},25)}else{if(b.target==this._headerMenuEl){this._setHeaderMenuItems()}}}mini.on(document,"mouseup",this.OlO111,this)}},lol11:function(b){if(this.hoverTab){var a=this.getTabEl(this.hoverTab);__cls_rm(a,this.Oo0l)}this.hoverTab=null},lloO:function(b){var c=this.l1oloo(b);if(c&&c.enabled){var a=this.getTabEl(c);__cls_add(a,this.Oo0l);this.hoverTab=c}},l11o00:function(b){var c=this.l1oloo(b);if(!c){return}var d=!!__getByCls(b.target,"mini-tab-close");if(!d&&c==this.getActiveTab()&&!c.refreshOnClick){return}if(c.enabled){var a=this;setTimeout(function(){if(d){a.oolo(c,b)}else{var f=c.loadedUrl;a.loo0(c);if(c.refreshOnClick&&c.url==f){a.reloadTab(c)}}},10)}},O1loO1:function(a){var b=this.l1oloo(a);if(!b){return}var a={tab:b};this.fire("tabdblclick",a)},l1oloo:function(c){var b=__getByCls(c.target,"mini-tab");if(!b){return null}var a=b.id.split("$");if(a[0]!=this.uid){return null}var d=parseInt(jQuery(b).attr("index"));return this.getTab(d)},getTabByEvent:function(a){return this.l1oloo(a)},getClearTimeStamp:function(){return this.clearTimeStamp},setClearTimeStamp:function(a){this.clearTimeStamp=a},getShowNavMenu:function(){return this.showNavMenu},setShowNavMenu:function(a){this.showNavMenu=a},getArrowPosition:function(){return this.arrowPosition},setArrowPosition:function(a){this.arrowPosition=a},getPlain:function(){return this.plain},setPlain:function(a){this.plain=a;this.doLayout()},getMaskOnLoad:function(){return this.maskOnLoad},setMaskOnLoad:function(a){this.maskOnLoad=a},getBodyStyle:function(){return this.bodyStyle},setBodyStyle:function(a){this.bodyStyle=a;__css_set(this.o0Olll,a);this.doLayout()},getShowBody:function(){return this.showBody},setShowBody:function(a){if(this.showBody!=a){this.showBody=a;this.doLayout()}},getShowHeader:function(){return this.showHeader},setShowHeader:function(a){if(this.showHeader!=a){this.showHeader=a;this.doLayout()}},loo0:function(c){c=this.getTab(c);if(!c){return}var a=this.tabs.indexOf(c);if(this.activeIndex==a){return}var b={tab:c,index:a,name:c.name,cancel:false};this.fire("BeforeActiveChanged",b);if(b.cancel==false){this.activeTab(c)}},getActiveIndex:function(){return this.activeIndex},getActiveTab:function(){return this.getTab(this.activeIndex)},activeTab:function(a){this.setActiveIndex(a)},_scrollToTab:function(a){var f=this.ll0O.scrollLeft;if(this.tabPosition=="top"||this.tabPosition=="bottom"){this.ll0O.scrollLeft=f;var d=this.getTabEl(a);if(d){var b=this,c=__getBox(d),g=__getBox(b.ll0O);if(c.x<g.x){b.ll0O.scrollLeft-=(g.x-c.x)}else{if(c.right>g.right){b.ll0O.scrollLeft+=(c.right-g.right)}}}}},setActiveIndex:function(b,k){var j=this.getTab(b),i=this.getTab(this.activeIndex),f=j!=i,t=this.getTabBodyEl(this.activeIndex);if(t){t.style.display="none"}if(j){this.activeIndex=this.tabs.indexOf(j)}else{this.activeIndex=-1}t=this.getTabBodyEl(this.activeIndex);if(t){t.style.display=""}t=this.getTabEl(i);if(t){__cls_rm(t,this.ooO10)}t=this.getTabEl(j);if(t){__cls_add(t,this.ooO10)}if(t&&f){if(this.tabPosition=="bottom"){var n=__getByCls(t,"mini-tabs-header");if(n){jQuery(this.ll0O).prepend(n)}}else{if(this.tabPosition=="left"){var l=__getByCls(t,"mini-tabs-header").parentNode;if(l){l.parentNode.appendChild(l)}}else{if(this.tabPosition=="right"){l=__getByCls(t,"mini-tabs-header").parentNode;if(l){jQuery(l.parentNode).prepend(l)}}else{n=__getByCls(t,"mini-tabs-header");if(n&&this.allowClickWrap){this.ll0O.appendChild(n)}}}}var d=this.ll0O.scrollLeft,i=this.getTab(this.activeIndex),r=i?!i._layouted:false,a=this.isAutoHeight();if(a||r){if(i){i._layouted=true}this.doLayout()}var q=this.getTabRows();if(q.length>1){}else{this._scrollToTab(this.activeIndex);this.ol1lll()}for(var s=0,p=this.tabs.length;s<p;s++){var o=this.getTabEl(this.tabs[s]);if(o){__cls_rm(o,this.Oo0l)}}}var g=this;if(f){var u={tab:j,index:this.tabs.indexOf(j),name:j?j.name:""};setTimeout(function(){g.fire("ActiveChanged",u)},1)}this._cancelLoadTabs(j);if(k!==false){if(j&&j.url&&!j.loadedUrl){g=this;g.loadTab(j.url,j)}}if(j){if(mini.isChrome){var c=this.getTabIFrameEl(j);if(c){c.style.position="relative";c.style.left="1px";c.offsetWidth;c.style.left="0px"}}}if(g.canLayout()){try{mini.layoutIFrames(g.el)}catch(u){}}},ol1lll:function(){if(this.tabPosition=="top"||this.tabPosition=="bottom"){__cls_rm(this.O011l,"mini-disabled");__cls_rm(this.o0Olo,"mini-disabled");if(this.ll0O.scrollLeft==0){__cls_add(this.O011l,"mini-disabled")}var a=this.getTabEl(this.tabs.length-1);if(a){var c=__getBox(a),b=__getBox(this.ll0O);if(c.right<=b.right){__cls_add(this.o0Olo,"mini-disabled")}}}},lO1o:function(a){return this.uid+"$body$"+a._id},OoOO00:function(a){return this.uid+"$"+a._id},getTabIFrameEl:function(a){var b=this.getTab(a);if(!b){return null}return b.Oo111l},getTabBodyEl:function(i){var b=this.getTab(i);if(!b){return null}var f=this.lO1o(b),d=this.o0Olll.childNodes;for(var g=0,c=d.length;g<c;g++){var a=d[g];if(a.id==f){return a}}return null},getTabEl:function(i){var b=this.getTab(i);if(!b){return null}var f=this.OoOO00(b),d=this.el.getElementsByTagName("*");for(var g=0,c=d.length;g<c;g++){var a=d[g];if(a.id==f){return a}}return null},getBodyEl:function(){return this.o0Olll},getHeaderEl:function(){return this.ll0O},getTab:function(b){if(typeof b=="object"){return b}if(typeof b=="number"){return this.tabs[b]}else{for(var a=0,d=this.tabs.length;a<d;a++){var c=this.tabs[a];if(c.name==b){return c}}}},getAllowClickWrap:function(){return this.allowClickWrap},setAllowClickWrap:function(a){this.allowClickWrap=a},setTabPosition:function(a){this.tabPosition=a;this.doUpdate()},setTabAlign:function(a){this.tabAlign=a;this.doUpdate()},_doMenuSelectTab:function(a){var c=a.item,b=this._getTabBy_Id(c.id);this.activeTab(b)},_setHeaderMenuItems:function(){var c=this.getTabs(),f=[];for(var b=0,a=c.length;b<a;b++){var d=c[b];f.push({id:d._id,text:d[this.titleField]})}this._headerMenu.setItems(f)},o00ollMenu:function(){this._headerMenu=new Menu();this._headerMenu.setIdField("_id");this._headerMenu.setTextField("title");this._headerMenu.setPopupEl(this._headerMenuEl);this._headerMenu.setShowAction("leftclick");this._headerMenu.setHideAction("outerclick");this._headerMenu.setXAlign("left");this._headerMenu.setYAlign("below");this._headerMenu.on("itemclick",this._doMenuSelectTab,this);this._headerMenu.hide();this._headerMenu.owner=this._headerMenuEl},_getTabBy_Id:function(a){for(var b=0,d=this.tabs.length;b<d;b++){var c=this.tabs[b];if(c._id==a){return c}}},doLayout:function(){var ae=this,ah=ae.ll0O,q=ae.o0Olll,ak=ae.tabPosition;if(!this.canLayout()){return}ah.style.display=this.showHeader?"":"none";this._handleIFrameOverflow();var z=this.isAutoHeight();w=this.getHeight(true);av=this.getWidth();var at=w,am=av;if(this.showBody){q.style.display=""}else{q.style.display="none"}var ad=this.el.firstChild;if(this.plain){__cls_add(ad,"mini-tabs-plain")}else{__cls_rm(ad,"mini-tabs-plain")}if(!z&&this.showBody){var ar=jQuery(ah).outerHeight(),x=jQuery(ah).outerWidth();if(ak=="top"||ak=="bottom"){ar=jQuery(ah.parentNode).outerHeight();ar-=1}if(ak=="left"||ak=="right"){av=av-x}else{w=w-ar}if(jQuery.boxModel){var aa=__padding(q),ab=__border(q);w=w-aa.top-aa.bottom-ab.top-ab.bottom;av=av-aa.left-aa.right-ab.left-ab.right}margin=__margin(q);w=w-margin.top-margin.bottom;av=av-margin.left-margin.right;if(w<0){w=0}if(av<0){av=0}q.style.width=av+"px";q.style.height=w+"px";if(ak=="left"||ak=="right"){var ap=ah.getElementsByTagName("tr")[0],an=ap.childNodes,aA=an[0].getElementsByTagName("tr"),ao=last=all=0;for(var v=0,t=aA.length;v<t;v++){var ap=aA[v],aj=jQuery(ap).outerHeight();all+=aj;if(v==0){ao=aj}if(v==t-1){last=aj}}switch(this.tabAlign){case"center":var ag=parseInt((at-(all-ao-last))/2);for(v=0,t=an.length;v<t;v++){an[v].firstChild.style.height=at+"px";var r=an[v].firstChild,aA=r.getElementsByTagName("tr"),n=aA[0],ay=aA[aA.length-1];n.style.height=ag+"px";ay.style.height=ag+"px"}break;case"right":for(v=0,t=an.length;v<t;v++){var r=an[v].firstChild,aA=r.getElementsByTagName("tr"),ap=aA[0],az=at-(all-ao);if(az>=0){ap.style.height=az+"px"}}break;case"fit":for(v=0,t=an.length;v<t;v++){an[v].firstChild.style.height=at+"px"}break;default:for(v=0,t=an.length;v<t;v++){r=an[v].firstChild,aA=r.getElementsByTagName("tr"),ap=aA[aA.length-1],az=at-(all-last);if(az>=0){ap.style.height=az+"px"}}break}}}else{q.style.width="auto";q.style.height="auto"}var aq=this.getTabBodyEl(this.activeIndex);if(aq){if(!z&&this.showBody){var w=__getHeight(q,true);if(jQuery.boxModel){aa=__padding(aq),ab=__border(aq);w=w-aa.top-aa.bottom-ab.top-ab.bottom}aq.style.height=w+"px"}else{aq.style.height="auto"}}switch(ak){case"bottom":var ax=ah.childNodes;for(v=0,t=ax.length;v<t;v++){r=ax[v];__cls_rm(r,"mini-tabs-header2");if(t>1&&v!=0){__cls_add(r,"mini-tabs-header2")}}break;case"left":an=ah.firstChild.rows[0].cells;for(v=0,t=an.length;v<t;v++){var p=an[v];__cls_rm(p,"mini-tabs-header2");if(t>1&&v==0){__cls_add(p,"mini-tabs-header2")}}break;case"right":an=ah.firstChild.rows[0].cells;for(v=0,t=an.length;v<t;v++){p=an[v];__cls_rm(p,"mini-tabs-header2");if(t>1&&v!=0){__cls_add(p,"mini-tabs-header2")}}break;default:ax=ah.childNodes;for(v=0,t=ax.length;v<t;v++){r=ax[v];__cls_rm(r,"mini-tabs-header2");if(t>1&&v==0){__cls_add(r,"mini-tabs-header2")}}break}__cls_rm(this.el,"mini-tabs-scroll");var p=mini.byClass("mini-tabs-lastSpace",this.el),y=mini.byClass("mini-tabs-buttons",this.el),o=ah.parentNode;o.style.paddingRight="0px";if(this._navEl){this._navEl.style.display="none"}if(this._leftNavEl){this._navEl.style.display="none"}if(y){y.style.display="none"}var s=this.buttonsAlign=="right";if(!s){y.style.right="auto";y.style.left="0"}__setWidth(o,am);if((ak=="top"||ak=="bottom")&&(this.tabAlign=="left"||this.tabAlign=="right")){ah.style.width="auto";y.style.display="block";var au=am,al=ah.firstChild.offsetWidth-p.offsetWidth,ac=y.firstChild?y.offsetWidth:0;if(al+ac>au){this._navEl.style.display="block";var aw=this._navEl.offsetWidth,aB=0;if(this.showNavMenu){this._headerMenuEl.style.display="inline-block";aB=this._headerMenuEl.offsetWidth;this._headerMenuEl.style.right=ac+"px";this.o00ollMenu()}var u=0;if(this.arrowPosition=="side"){this._leftNavEl.style.display="block";u=this._leftNavEl.offsetWidth;ah.style.left=u+"px"}this._navEl.style.right=(s?ac:0)+aB+"px";var av=au-ac-aw-u-aB;__setWidth(ah,av)}ah.style.marginLeft=(s?0:ac)+"px"}this._scrollToTab(this.activeIndex);this.ol1lll();mini.layout(q);var ai=this,af=this.getActiveTab();if(af&&af.repaint&&aq){av=aq.style.width;aq.style.width="0px";setTimeout(function(){aq.style.width=av},1)}this.fire("layout")},_handleIFrameOverflow:function(){var a=this.getTabBodyEl(this.activeIndex);if(a){__cls_rm(a,"mini-tabs-hideOverflow");var b=mini.getChildNodes(a)[0];if(b&&b.tagName&&b.tagName.toUpperCase()=="IFRAME"){__cls_add(a,"mini-tabs-hideOverflow")}}},doUpdate:function(){if(this._canUpdate===false){return}if(this._buttons&&this._buttons.parentNode){this._buttons.parentNode.removeChild(this._buttons)}__cls_rm(this.el,"mini-tabs-position-left");__cls_rm(this.el,"mini-tabs-position-top");__cls_rm(this.el,"mini-tabs-position-right");__cls_rm(this.el,"mini-tabs-position-bottom");if(this.tabPosition=="bottom"){__cls_add(this.el,"mini-tabs-position-bottom");this.oo1l()}else{if(this.tabPosition=="right"){__cls_add(this.el,"mini-tabs-position-right");this.o100()}else{if(this.tabPosition=="left"){__cls_add(this.el,"mini-tabs-position-left");this.Ol1lO()}else{__cls_add(this.el,"mini-tabs-position-top");this.Ol0l()}}}var b=this.ll0O,a="mini-tabs-header-";__cls_rm(b,a+"left");__cls_rm(b,a+"top");__cls_rm(b,a+"right");__cls_rm(b,a+"bottom");__cls_add(b,a+this.tabPosition);b=this.o0Olll,a="mini-tabs-body-";__cls_rm(b,a+"left");__cls_rm(b,a+"top");__cls_rm(b,a+"right");__cls_rm(b,a+"bottom");__cls_add(b,a+this.tabPosition);if(this._buttons){b=mini.byClass("mini-tabs-buttons",this.el);if(b){b.appendChild(this._buttons);mini.parse(b)}}this.doLayout();this.setActiveIndex(this.activeIndex,false)},getTabRows:function(){var f=[],a=[];for(var b=0,d=this.tabs.length;b<d;b++){var c=this.tabs[b];if(b!=0&&c.newLine){f.push(a);a=[]}a.push(c)}f.push(a);return f},reloadTab:function(a){a=this.getTab(a);if(!a){a=this.getActiveTab()}if(!a){return}this.loadTab(a.url,a)},loadTab:function(f,c,d,g){if(!f){return}c=this.getTab(c);if(!c){c=this.getActiveTab()}if(!c){return}var b=this.getTabBodyEl(c);if(b){__cls_add(b,"mini-tabs-hideOverflow")}c.url=f;delete c.loadedUrl;if(d){c.onload=d}if(g){c.ondestroy=g}var a=this;clearTimeout(this._loadTabTimer);this._loadTabTimer=null;this._loadTabTimer=setTimeout(function(){a.lOllo(c)},1)},OO01:function(b){var a=this._getTabEvent(b);this.fire("tabdestroy",a);return a.autoActive},_getTabEvent:function(b){var a={sender:this,tab:b,index:this.tabs.indexOf(b),name:b.name,iframe:b.Oo111l,autoActive:true};return a},lOllo:function(a){if(!a||a!=this.getActiveTab()){return}var d=this.getTabBodyEl(a);if(!d){return}this._cancelLoadTabs();this.l1Olo(a,true);this._loading=true;a._loading=true;this.unmask();if(this.maskOnLoad){this.loading()}var c=new Date(),b=this;b.isLoading=true;var f=mini.createIFrame(a.url,function(i,g){try{a.Oo111l.contentWindow.Owner=window;a.Oo111l.contentWindow.CloseOwnerWindow=function(n){a.removeAction=n;var l=true;if(a.ondestroy){if(typeof a.ondestroy=="string"){a.ondestroy=window[a.ondestroy]}if(a.ondestroy){var o=b._getTabEvent(a);o.action=n;l=a.ondestroy.call(b,o)}}if(l===false){return false}setTimeout(function(){b.removeTab(a)},10)}}catch(j){}if(a._loading!=true){return}var k=(c-new Date())+b.Ololoo;a._loading=false;a.loadedUrl=a.url;if(k<0){k=0}setTimeout(function(){b.unmask();b.doLayout();b.isLoading=false},k);if(g){var j={sender:b,tab:a,index:b.tabs.indexOf(a),name:a.name,iframe:a.Oo111l};if(a.onload){if(typeof a.onload=="string"){a.onload=window[a.onload]}if(a.onload){a.onload.call(b,j)}}}if(b.getActiveTab()==a){b.fire("tabload",j)}},this.clearTimeStamp,a.method,a.params);setTimeout(function(){if(a.Oo111l==f){d.appendChild(f)}},1);a.Oo111l=f},_cancelLoadTabs:function(c){var a=this.tabs;for(var f=0,d=a.length;f<d;f++){var b=a[f];if(b!=c){if(b._loading&&b.Oo111l){b._loading=false;this.l1Olo(b,true)}}}if(c&&c==this.getActiveTab()&&c._loading){}else{this._loading=false;this.unmask()}},l1Olo:function(c,g){if(c.Oo111l&&c.Oo111l.parentNode){var k=c.Oo111l;k.onload=function(){};jQuery(k).unbind("load");k.src="";if(mini.isIE){try{k.contentWindow.document.write("");k.contentWindow.document.close()}catch(d){}}if(c.Oo111l._ondestroy){c.Oo111l._ondestroy()}try{k.parentNode.removeChild(k);k.removeNode(true)}catch(d){}}c.Oo111l=null;c.loadedUrl=null;if(g===true){var i=this.getTabBodyEl(c);if(i){var f=mini.getChildNodes(i,true);for(var a=0,j=f.length;a<j;a++){var b=f[a];if(b&&b.parentNode){b.parentNode.removeChild(b)}}}}},OO00:function(){return this.o0Olll},updateTab:function(a,g){a=this.getTab(a);if(!a){return}mini.copyTo(a,g);if(!a.visible&&this.tabs.indexOf(a)==this.activeIndex){var c=-1;for(var f=this.activeIndex+1,d=this.tabs.length;f<d;f++){var b=this.tabs[f];if(b.visible){c=f;break}}this.setActiveIndex(c)}this.doUpdate()},moveTab:function(c,a){c=this.getTab(c);if(!c){return}var b=this.tabs[a];if(b==c){return}this.tabs.remove(c);var a=this.tabs.indexOf(b);if(a==-1){this.tabs.add(c)}else{this.tabs.insert(a,c)}this.doUpdate()},removeTab:function(c){c=this.getTab(c);if(!c||this.tabs.indexOf(c)==-1){return}var b=this.getActiveTab(),f=c==b,d=this.OO01(c);this.tabs.remove(c);this.l1Olo(c);var a=this.getTabBodyEl(c);if(a){this.o0Olll.removeChild(a)}if(d&&f){for(var g=this.activeIndex;g>=0;g--){var c=this.getTab(g);if(c&&c.enabled&&c.visible){this.activeIndex=g;break}}this.doUpdate();this.setActiveIndex(this.activeIndex);this.fire("activechanged")}else{this.activeIndex=this.tabs.indexOf(b);this.doUpdate()}return c},addTab:function(c,a){if(typeof c=="string"){c={title:c}}c=this.createTab(c);if(!c.name){c.name=""}var i=this.getActiveTab();if(typeof a!="number"){a=this.tabs.length}this.tabs.insert(a,c);if(i){this.activeIndex=this.tabs.indexOf(i)}var k=this.lO1o(c),d='<div id="'+k+'" class="mini-tabs-body '+c.bodyCls+'" style="'+c.bodyStyle+';display:none;"></div>';mini.append(this.o0Olll,d);var b=this.getTabBodyEl(c),f=c.body;delete c.body;if(f){if(!mini.isArray(f)){f=[f]}for(var l=0,j=f.length;l<j;l++){mini.append(b,f[l])}}if(c.bodyParent){var g=c.bodyParent;while(g.firstChild){if(g.firstChild.nodeType==8){g.removeChild(g.firstChild)}else{b.appendChild(g.firstChild)}}}delete c.bodyParent;if(c.controls){this.setTabControls(c,c.controls);delete c.controls}this.doUpdate();return c},removeAll:function(f){var d=this.getActiveTab();if(mini.isNull(f)){f=[]}if(!mini.isArray(f)){f=[f]}for(var g=f.length-1;g>=0;g--){var c=this.getTab(f[g]);if(!c){f.removeAt(g)}else{f[g]=c}}var i=this.tabs;for(g=i.length-1;g>=0;g--){var b=i[g];if(f.indexOf(b)==-1){this.removeTab(b)}}var a=f[0];if(d!=this.getActiveTab()){if(a){this.activeTab(a)}}},getTabs:function(){return this.tabs},setTabs:function(b){if(!mini.isArray(b)){return}this.beginUpdate();this.removeAll();for(var a=0,d=b.length;a<d;a++){var c=b[a];c.title=mini._getMap(this.titleField,c);c.url=mini._getMap(this.urlField,c);c.name=mini._getMap(this.nameField,c)}for(a=0,d=b.length;a<d;a++){this.addTab(b[a])}this.setActiveIndex(0);this.endUpdate()},setTabControls:function(c,a){var c=this.getTab(c);if(!c){return}var b=this.getTabBodyEl(c);__mini_setControls(a,b,this)},setButtons:function(a){this._buttons=__get(a);if(this._buttons){var b=mini.byClass("mini-tabs-buttons",this.el);if(b){b.appendChild(this._buttons);mini.parse(b);this.doLayout()}}},getButtonsAlign:function(){return this.buttonsAlign},setButtonsAlign:function(a){this.buttonsAlign=a},getUrlField:function(){return this.urlField},setUrlField:function(a){this.urlField=a},getTitleField:function(){return this.titleField},setTitleField:function(a){this.titleField=a},getNameField:function(){return this.nameField},setNameField:function(a){this.nameField=a},getUrl:function(){return this.url},setUrl:function(a){this.url=a;this._doLoad()},load:function(a){if(typeof a=="string"){this.setUrl(a)}else{this.setTabs(a)}},_doLoad:function(){var a=mini._getResult(this.url,null,null,null,null,this.dataField);if(this.dataField&&!mini.isArray(a)){a=mini._getMap(this.dataField,a)}if(!a){a=[]}this.setTabs(a);this.fire("load")},createTab:function(a){var b=mini.copyTo({_id:this.o00l++,name:"",title:"",newLine:false,tooltip:"",iconCls:"",iconStyle:"",headerCls:"",headerStyle:"",bodyCls:"",bodyStyle:"",visible:true,enabled:true,showCloseButton:false,active:false,url:"",loaded:false,refreshOnClick:false},a);if(a){a=mini.copyTo(a,b);b=a}return b},O00Ol1:function(){this.tabs=[]},_initEvents:function(){__initEvents(function(){mini.on(this.el,"mousedown",this.lOO1l1,this);mini.on(this.el,"click",this.l11o00,this);mini.on(this.el,"mouseover",this.lloO,this);mini.on(this.el,"mouseout",this.lol11,this);mini.on(this.el,"dblclick",this.O1loO1,this)},this)},oOOol:function(){__cls_rm(this.O1llo,"mini-tabs-header");__cls_rm(this.ll01ol,"mini-tabs-header");this.O1llo.innerHTML="";this.ll01ol.innerHTML="";mini.removeChilds(this.o110l0,this.o0Olll)},destroy:function(b){if(this.tabs){for(var a=0,d=this.tabs.length;a<d;a++){var c=this.tabs[a];c.Oo111l=null}}this.loOllO=this.O1llo=this.o110l0=this.ll01ol=null;this.o0Olll=this._borderEl=this.headerEl=null;this.tabs=null;Tabs.superclass.destroy.call(this,b)},_create:function(){this.el=document.createElement("div");this.el.className="mini-tabs";var a='<table class="mini-tabs-table" cellspacing="0" cellpadding="0"><tr style="width:100%;"><td></td><td style="text-align:left;vertical-align:top;width:100%;"><div class="mini-tabs-bodys"></div></td><td></td></tr></table>';this.el.innerHTML=a;this.loOllO=this.el.firstChild;var b=this.el.getElementsByTagName("td");this.O1llo=b[0];this.o110l0=b[1];this.ll01ol=b[2];this.o0Olll=this.o110l0.firstChild;this._borderEl=this.o0Olll;this.doUpdate()},set:function(b){if(typeof b=="string"){return this}var a=this._canLayout;this._canLayout=false;var c=b.activeIndex;delete b.activeIndex;var d=b.url;delete b.url;Tabs.superclass.set.call(this,b);if(d){this.setUrl(d)}if(mini.isNumber(c)){this.setActiveIndex(c)}this._canLayout=a;this.doLayout();return this}});mini.regClass(Tabs,"tabs");Menu=function(){this.items=[];Menu.superclass.constructor.apply(this,arguments)};mini.extend(Menu,Control);mini.copyTo(Menu.prototype,popup_prototype);var l011oO_prototype_hide=popup_prototype.hide;mini.copyTo(Menu.prototype,{height:"auto",width:"auto",minWidth:140,vertical:true,allowSelectItem:false,lO11O:null,_o01O:"mini-menuitem-selected",textField:"text",resultAsTree:false,idField:"id",parentField:"pid",itemsField:"children",iconClsField:"iconCls",showNavArrow:true,imgPath:"",overflow:false,_clearBorder:false,showAction:"none",hideAction:"outerclick",menuAlign:"",uiCls:"mini-menu",_disableContextMenu:false,_itemType:"menuitem",url:"",hideOnClick:true,hideOnClick:true});mini.copyTo(Menu.prototype,{getAttrs:function(c){var i=Menu.superclass.getAttrs.call(this,c),b=jQuery(c);mini._ParseString(c,i,["popupEl","popupCls","showAction","hideAction","xAlign","yAlign","modalStyle","onbeforeopen","open","onbeforeclose","onclose","url","onitemclick","onitemselect","textField","idField","parentField","toolbar","imgPath","iconClsField","menuAlign"]);mini._ParseBool(c,i,["resultAsTree","hideOnClick","showNavArrow","showShadow","overflow"]);var d=mini.getChildNodes(c);for(var l=d.length-1;l>=0;l--){var f=d[l],a=jQuery(f).attr("property");if(!a){continue}a=a.toLowerCase();if(a=="toolbar"){i.toolbar=f;f.parentNode.removeChild(f)}}var d=mini.getChildNodes(c),j=this.parseItems(d);if(j.length>0){i.items=j}var k=b.attr("vertical");if(k){i.vertical=k=="true"?true:false}var g=b.attr("allowSelectItem");if(g){i.allowSelectItem=g=="true"?true:false}return i},parseItems:function(i){var d=[];for(var c=0,a=i.length;c<a;c++){var f=i[c];if(f.className=="separator"){var j={type:"separator",id:f.id,name:f.name};d.add(j);continue}var g=mini.getChildNodes(f),k=g[0],b=g[1],j=new MenuItem();if(!b){mini.applyTo.call(j,f);d.add(j);continue}mini.applyTo.call(j,k);j.render(document.body);var l=new Menu();mini.applyTo.call(l,b);j.setMenu(l);l.render(document.body);d.add(j)}return d.clone()},setToolbar:function(a){__mini_setControls(a,this.OlO0O,this);this.OlO0O.style.display="block"},_startScrollMove:function(a){clearInterval(this.ll0llO);var c=function(){clearInterval(b.ll0llO);mini.un(document,"mouseup",c)};mini.on(document,"mouseup",c);var d=this._getMaxScrollLeft(),b=this;this.ll0llO=setInterval(function(){if(b.isVertical()==false){var f=b._innerEl.scrollLeft;f+=a;if(f>d){f=d}b._innerEl.scrollLeft=f}else{b._contentEl.scrollTop+=a}},50)},_getMaxScrollLeft:function(){return parseInt(this._getScrollWidth()-this._innerEl.offsetWidth+6)},_getScrollWidth:function(){var g=this,b=0,d=jQuery(".mini-menuitem",g.el).first()[0],c=jQuery(".mini-menuitem",g.el).last()[0];if(d&&c){var a=__getBox(d),f=__getBox(c);b=f.right-a.left}return b},__OnBottomMouseDown:function(a){this._startScrollMove(20)},__OnTopMouseDown:function(a){this._startScrollMove(-20)},onItemSelect:function(a,b){this.on("itemselect",a,b)},onItemClick:function(a,b){this.on("itemclick",a,b)},_OnItemSelect:function(b){if(this.lO11O){this.lO11O.removeCls(this._o01O)}this.lO11O=b;if(this.lO11O){this.lO11O.addCls(this._o01O)}var a={item:this.lO11O,isLeaf:this.lO11O?!this.lO11O.menu:false};this.fire("itemselect",a)},_OnItemClick:function(c,b){var a={item:c,isLeaf:!c.menu,htmlEvent:b};if(this.hideOnClick){if(this.isPopup){this.hide()}else{if(a.isLeaf){this.hideItems()}}}if(this.allowSelectItem&&this.lO11O!=c){this.setSelectedItem(c)}this.fire("itemclick",a);if(this.ownerItem){}},getImgPath:function(){return this.imgPath},setImgPath:function(a){this.imgPath=a},getHideOnClick:function(){return this.hideOnClick},setHideOnClick:function(a){this.hideOnClick=a},getUrl:function(){return this.url},setUrl:function(a){this.url=a;this._doLoad()},load:function(a){if(typeof a=="string"){this.setUrl(a)}else{this.setItems(a)}},loadList:function(i,d,f){if(!i){return}d=d||this.idField;f=f||this.parentField;for(var a=0,g=i.length;a<g;a++){var c=i[a];c.text=mini._getMap(this.textField,c);c.iconCls=mini._getMap(this.iconClsField,c);if(mini.isNull(c.text)){c.text=""}}var b=mini.arrayToTree(i,this.itemsField,d,f);this.load(b)},_doLoad:function(){var f=mini._getResult(this.url,null,null,null,null,this.dataField);if(this.dataField&&!mini.isArray(f)){f=mini._getMap(this.dataField,f)}if(!f){f=[]}if(this.resultAsTree==false){f=mini.arrayToTree(f,this.itemsField,this.idField,this.parentField)}var a=mini.treeToArray(f,this.itemsField,this.idField,this.parentField);for(var b=0,g=a.length;b<g;b++){var d=a[b];d.text=mini._getMap(this.textField,d);d.iconCls=mini._getMap(this.iconClsField,d);if(mini.isNull(d.text)){d.text=""}}var c=new Date();this.setItems(f);this.fire("load")},o11O:function(){if(this.height=="auto"){this.el.style.height="auto";this._borderEl.style.height="auto";this._contentEl.style.height="auto";this._topArrowEl.style.display=this._bottomArrowEl.style.display="none";var c=mini.getViewportBox(),d=__getBox(this.el);this.maxHeight=c.height-25;if(this.ownerItem){var d=__getBox(this.ownerItem.el),b=d.top,f=c.height-d.bottom,a=b>f?b:f;a-=10;this.maxHeight=a}}this.el.style.display="";d=__getBox(this.el);if(d.width>this.maxWidth){__setWidth(this.el,this.maxWidth);d=__getBox(this.el)}if(d.height>this.maxHeight){__setHeight(this.el,this.maxHeight);d=__getBox(this.el)}if(d.width<this.minWidth){__setWidth(this.el,this.minWidth);d=__getBox(this.el)}if(d.height<this.minHeight){__setHeight(this.el,this.minHeight);d=__getBox(this.el)}},doLayout:function(){if(!this.canLayout()){return}var g=this._innerEl,i=this._topArrowEl,f=this._bottomArrowEl;if(!this.isAutoHeight()){var c=__getHeight(this.el,true);__setHeight(this._borderEl,c);i.style.display=f.style.display="none";this._contentEl.style.height="auto";if(this.showNavArrow&&this._borderEl.scrollHeight>this._borderEl.clientHeight){i.style.display=f.style.display="block";c=__getHeight(this._borderEl,true);var d=__getHeight(i),b=__getHeight(f),a=c-d-b;if(a<0){a=0}__setHeight(this._contentEl,a);var j=__getWidth(this._borderEl,true);__setWidth(i,j);__setWidth(f,j)}else{this._contentEl.style.height="auto"}}else{this._borderEl.style.height="auto";this._contentEl.style.height="auto"}if(this.overflow){i.style.display=f.style.display="none";g.style.marginLeft=g.style.marginRight="0px";if(this._getScrollWidth()>this._innerEl.offsetWidth){i.style.display=f.style.display="block";g.style.marginLeft=g.style.marginRight="15px"}else{g.scrollLeft=0}}},getOverflow:function(){return this.overflow},setOverflow:function(a){this.overflow=a;if(a){__cls_add(this.el,"mini-menu-overflow")}else{__cls_rm(this.el,"mini-menu-overflow")}},getIconClsField:function(){return this.iconClsField},setIconClsField:function(a){this.iconClsField=a},getParentField:function(){return this.parentField},setParentField:function(a){this.parentField=a},getIdField:function(){return this.idField},setIdField:function(a){this.idField=a},getResultAsTree:function(){return this.resultAsTree},setResultAsTree:function(a){this.resultAsTree=a},getTextField:function(){return this.textField},setTextField:function(a){this.textField=a},getShowNavArrow:function(){return this.showNavArrow},setShowNavArrow:function(a){this.showNavArrow=a},getSelectedItem:function(a){return this.lO11O},setSelectedItem:function(a){a=this.getItem(a);this._OnItemSelect(a)},getAllowSelectItem:function(){return this.allowSelectItem},setAllowSelectItem:function(a){this.allowSelectItem=a},getItem:function(c){if(typeof c=="number"){return this.items[c]}if(typeof c=="string"){for(var b=0,d=this.items.length;b<d;b++){var a=this.items[b];if(a.id==c){return a}}return null}if(c&&this.items.indexOf(c)!=-1){return c}return null},getGroupItems:function(b){if(!b){return[]}var d=[];for(var a=0,f=this.items.length;a<f;a++){var c=this.items[a];if(c.groupName==b){d.push(c)}}return d},removeAll:function(){var a=this.items.clone();for(var b=a.length-1;b>=0;b--){this.removeItem(a[b])}this._contentEl.innerHTML=""},removeItemAt:function(a){var b=this.items[a];this.removeItem(b)},removeItem:function(a){a=mini.get(a);if(!a){return}this.items.remove(a);this._contentEl.removeChild(a.el);this.fire("itemschanged")},addItem:function(a){if(a=="-"||a=="|"||a.type=="separator"){mini.append(this._contentEl,'<span id="'+a.id+'" name="'+(a.name||"")+'" class="mini-separator"></span>');return}if(!mini.isControl(a)&&!mini.getClass(a.type)){a.type=this._itemType}a.ownerMenu=this;a=mini.getAndCreate(a);this.items.push(a);this._contentEl.appendChild(a.el);a.ownerMenu=this;this.fire("itemschanged")},getItems:function(){return this.items},setItems:function(d){if(!mini.isArray(d)){d=[]}this.removeAll();var c=new Date();for(var b=0,a=d.length;b<a;b++){this.addItem(d[b])}},getData:function(){return this.getItems()},setData:function(a){if(!mini.isArray(a)){a=[]}this.setItems(a)},hasShowItemMenu:function(){for(var c=0,b=this.items.length;c<b;c++){var a=this.items[c];if(a&&a.menu&&a.menu.isPopup){return true}}return false},showItemMenu:function(c){for(var b=0,a=this.items.length;b<a;b++){var d=this.items[b];if(d==c){d.showMenu()}else{d.hideMenu()}}},hideItems:function(){for(var c=0,b=this.items.length;c<b;c++){var a=this.items[c];a.hideMenu()}},hide:function(){this.hideItems();l011oO_prototype_hide.call(this)},show:function(){this.setVisible(true)},isVertical:function(){return this.vertical},getVertical:function(){return this.vertical},setVertical:function(a){this.vertical=a;if(!a){__cls_add(this.el,"mini-menu-horizontal")}else{__cls_rm(this.el,"mini-menu-horizontal")}},within:function(b){if(__getById(this.el,b.target)){return true}for(var a=0,d=this.items.length;a<d;a++){var c=this.items[a];if(c.within(b)){return true}}return false},_initEvents:function(){__initEvents(function(){mini.on(document,"mousedown",this.o0ll,this);mini.bind(this.el,"mouseover",this.lloO,this);mini.on(window,"resize",this.o0010,this);if(this._disableContextMenu){mini.bind(this.el,"contextmenu",function(a){a.preventDefault()},this)}mini.bind(this._topArrowEl,"mousedown",this.__OnTopMouseDown,this);mini.bind(this._bottomArrowEl,"mousedown",this.__OnBottomMouseDown,this)},this)},destroy:function(c){if(this.items){for(var b=0,a=this.items.length;b<a;b++){this.items[b].destroy()}}if(this._topArrowEl){this._topArrowEl.onmousedown=this._bottomArrowEl.onmousedown=null}this._popupEl=this.popupEl=this._borderEl=this._innerEl=this._contentEl=this.OlO0O=null;this._topArrowEl=this._bottomArrowEl=null;this.owner=null;this.window=null;mini.un(document,"mousedown",this.o0ll,this);mini.un(window,"resize",this.o0010,this);Menu.superclass.destroy.call(this,c)},_create:function(){this.el=document.createElement("div");this.el.className="mini-menu";this.el.innerHTML='<div class="mini-menu-border"><a class="mini-menu-topArrow" href="#" onclick="return false"></a><div class="mini-menu-inner"></div><a class="mini-menu-bottomArrow" href="#" onclick="return false"></a></div>';this._borderEl=this.el.firstChild;this._topArrowEl=this._borderEl.childNodes[0];this._bottomArrowEl=this._borderEl.childNodes[2];this._innerEl=this._borderEl.childNodes[1];this._innerEl.innerHTML='<div class="mini-menu-float"></div><div class="mini-menu-toolbar"></div><div style="clear:both;max-height:1px;"></div>';this._contentEl=this._innerEl.firstChild;this.OlO0O=this._innerEl.childNodes[1];if(this.isVertical()==false){__cls_add(this.el,"mini-menu-horizontal")}},set:function(b){if(typeof b=="string"){return this}var a=b.url;delete b.url;if(b.imgPath){this.setImgPath(b.imgPath)}delete b.imgPath;this.ownerItem=b.ownerItem;delete b.ownerItem;Menu.superclass.set.call(this,b);if(a){this.setUrl(a)}return this},getbyName:function(b){for(var a=0,d=this.items.length;a<d;a++){var c=this.items[a];if(c.name==b){return c}if(c.menu){var f=c.menu.getbyName(b);if(f){return f}}}return null},getMenuAlign:function(){return this.menuAlign},setMenuAlign:function(a){this.menuAlign=a}});mini.regClass(Menu,"menu");mini.MenuBar=function(){mini.MenuBar.superclass.constructor.apply(this,arguments)};mini.extend(mini.MenuBar,Menu,{uiCls:"mini-menubar",vertical:false,setVertical:function(a){this.vertical=false}});mini.regClass(mini.MenuBar,"menubar");mini.ContextMenu=function(){mini.ContextMenu.superclass.constructor.apply(this,arguments)};mini.extend(mini.ContextMenu,Menu,{uiCls:"mini-contextmenu",vertical:true,visible:false,_disableContextMenu:true,setVertical:function(a){this.vertical=true}});mini.regClass(mini.ContextMenu,"contextmenu");MenuItem=function(){MenuItem.superclass.constructor.apply(this,arguments)};mini.extend(MenuItem,Control,{text:"",iconCls:"",iconStyle:"",iconPosition:"left",img:"",showIcon:true,showAllow:true,checked:false,checkOnClick:false,groupName:"",_hoverCls:"mini-menuitem-hover",oll001:"mini-menuitem-pressed",OOoO1O:"mini-menuitem-checked",_clearBorder:false,menu:null,uiCls:"mini-menuitem",Ol0oo:false});mini.copyTo(MenuItem.prototype,{getAttrs:function(c){var a=MenuItem.superclass.getAttrs.call(this,c),b=jQuery(c);a.text=c.innerHTML;mini._ParseString(c,a,["text","iconCls","iconStyle","iconPosition","groupName","onclick","oncheckedchanged"]);mini._ParseBool(c,a,["checkOnClick","checked"]);return a},onCheckedChanged:function(a,b){this.on("checkedchanged",a,b)},onClick:function(a,b){this.on("click",a,b)},lol11:function(a){__cls_rm(this.el,this._hoverCls)},lloO:function(a){if(this.isReadOnly()){return}this.OOO11();__cls_add(this.el,this._hoverCls);this.el.title=this.text;if(this._textEl.scrollWidth>this._textEl.clientWidth){this.el.title=this.text}else{this.el.title=""}if(this.ownerMenu){if(this.ownerMenu.isVertical()==true){this.ownerMenu.showItemMenu(this)}else{if(this.ownerMenu.hasShowItemMenu()){this.ownerMenu.showItemMenu(this)}}}},loOll1:function(b){if(this.isReadOnly()){return}if(this.ownerMenu){var a=this;setTimeout(function(){if(a.isDisplay()){a.ownerMenu.showItemMenu(a)}},1)}},l11o00:function(b){if(this.isReadOnly()){return}if(this.checkOnClick){if(this.ownerMenu&&this.groupName){var a=this.ownerMenu.getGroupItems(this.groupName);if(a.length>0){if(this.checked==false){for(var g=0,f=a.length;g<f;g++){var c=a[g];if(c!=this){c.setChecked(false)}}this.setChecked(true)}}else{this.setChecked(!this.checked)}}else{this.setChecked(!this.checked)}}this.fire("click");var d=this.getTopMenu();if(d){d._OnItemClick(this,b)}},getTopMenu:function(){if(this.ownerMenu){if(this.ownerMenu.ownerItem){return this.ownerMenu.ownerItem.getTopMenu()}else{return this.ownerMenu}}return null},lO0OO:function(a){this.doUpdate()},hide:function(){this.hideMenu();this.setVisible(false)},hideMenu:function(){if(this.menu){this.menu.hide()}},showMenu:function(){if(this.menu&&this.menu.isDisplay()==false){this.menu.setHideAction("outerclick");var a={xAlign:"outright",yAlign:"top",outXAlign:"outleft",outYAlign:"below",popupCls:"mini-menu-popup"};a.alwaysView=true;if(this.ownerMenu&&this.ownerMenu.vertical==false){a.xAlign=this.ownerMenu.menuAlign||"left";a.yAlign="below";a.outXAlign="right"}this.menu.showAtEl(this.el,a);this.menu.addCls("mini-menu-open")}},getMenu:function(){return this.menu},setMenu:function(a){if(mini.isArray(a)){a={type:"menu",items:a}}if(this.menu!==a){a.ownerItem=this;this.menu=mini.getAndCreate(a);this.menu.hide();this.menu.ownerItem=this;this.doUpdate();this.menu.on("itemschanged",this.lO0OO,this)}},setChildren:function(a){this.setMenu(a)},getGroupName:function(){return this.groupName},setGroupName:function(a){if(this.groupName!=a){this.groupName=a}},getChecked:function(){return this.checked},setChecked:function(a){if(this.checked!=a){this.checked=a;this.doUpdate();this.fire("checkedchanged")}},getCheckOnClick:function(){return this.checkOnClick},setCheckOnClick:function(a){this.checkOnClick=a;if(a){__cls_add(this.el,"mini-menuitem-showcheck")}else{__cls_rm(this.el,"mini-menuitem-showcheck")}this.doUpdate()},getIconPosition:function(){return this.iconPosition},setIconPosition:function(a){this.iconPosition=a;this._doUpdateIcon()},getIconStyle:function(){return this.iconStyle},setIconStyle:function(a){this.iconStyle=a;this._doUpdateIcon()},getImg:function(){return this.img},setImg:function(a){this.img=a;this._doUpdateIcon()},getIconCls:function(){return this.iconCls},setIconCls:function(a){__cls_rm(this.Olo11,this.iconCls);this.iconCls=a;this._doUpdateIcon()},getText:function(){return this.text},setText:function(a){this.text=a;if(this._textEl){this._textEl.innerHTML=this.text}},doUpdate:function(){if(this._textEl){this._textEl.innerHTML=this.text}this._doUpdateIcon();if(this.checked){__cls_add(this.el,this.OOoO1O);jQuery(this.Olo11).css({"background-image":""})}else{__cls_rm(this.el,this.OOoO1O)}if(this.allowEl){if(this._hasChildMenu()){this.allowEl.style.display="block"}else{this.allowEl.style.display="none"}}},_hasChildMenu:function(){return this.menu&&this.menu.items.length>0},_doUpdateIcon:function(){var c=this._getIconImg(),b=!!(this.iconStyle||this.iconCls||this.checkOnClick||c);if(this.Olo11){__css_set(this.Olo11,this.iconStyle);__cls_add(this.Olo11,this.iconCls);if(c&&!this.checked){var a="background-image:url("+c+")";__css_set(this.Olo11,a)}if(this.checked){jQuery(this.Olo11).css({"background-image":""})}this.Olo11.style.display=b?"block":"none"}if(this.iconPosition=="top"){__cls_add(this.el,"mini-menuitem-icontop")}else{__cls_rm(this.el,"mini-menuitem-icontop")}},_getIconImg:function(){return this.img&&this.getTopMenu()?this.getTopMenu().imgPath+this.img:this.img},within:function(a){if(__getById(this.el,a.target)){return true}if(this.menu&&this.menu.within(a)){return true}return false},destroy:function(a){if(this.menu){this.menu.destroy()}this.menu=this._innerEl=this.Olo11=this._textEl=this.allowEl=null;MenuItem.superclass.destroy.call(this,a)},OOO11:function(){if(this.Ol0oo){return}this.Ol0oo=true;mini.bind(this.el,"click",this.l11o00,this);mini.bind(this.el,"mouseup",this.loOll1,this);mini.bind(this.el,"mouseout",this.lol11,this)},_initEvents:function(){__initEvents(function(){mini.bind(this.el,"mouseover",this.lloO,this)},this)},_create:function(){var a=this.el=document.createElement("div");this.el.className="mini-menuitem";this.el.innerHTML='<div class="mini-menuitem-inner"><div class="mini-menuitem-icon mini-iconfont"></div><div class="mini-menuitem-text"></div><div class="mini-menuitem-allow"></div></div>';this._innerEl=this.el.firstChild;this.Olo11=this._innerEl.firstChild;this._textEl=this._innerEl.childNodes[1];this.allowEl=this._innerEl.lastChild},set:function(a){if(typeof a=="string"){return this}this.ownerMenu=a.ownerMenu;delete a.ownerMenu;MenuItem.superclass.set.call(this,a);return this}});mini.regClass(MenuItem,"menuitem");mini.Separator=function(){mini.Separator.superclass.constructor.apply(this,arguments)};mini.extend(mini.Separator,Control,{_clearBorder:false,uiCls:"mini-separator",_create:function(){this.el=document.createElement("span");this.el.className="mini-separator"}});mini.regClass(mini.Separator,"separator");mini.ToolBar=function(){mini.ToolBar.superclass.constructor.apply(this,arguments)};mini.extend(mini.ToolBar,mini.Container,{_clearBorder:false,style:"",uiCls:"mini-toolbar",_create:function(){this.el=document.createElement("div");this.el.className="mini-toolbar"},_initEvents:function(){},doLayout:function(){if(!this.canLayout()){return}var c=mini.getChildNodes(this.el,true);for(var b=0,a=c.length;b<a;b++){mini.layout(c[b])}},set_bodyParent:function(a){if(!a){return}this.el=a;this.doLayout()},getAttrs:function($){var A={};mini._ParseString($,A,["id","borderStyle","data-options"]);this.el=$;this.el.uid=this.uid;this.addCls(this.uiCls);var _=A["data-options"];if(_){_=window.eval("("+_+")");if(_){mini.copyTo(A,_)}}return A}});mini.regClass(mini.ToolBar,"toolbar");Pager=function(){Pager.superclass.constructor.apply(this,arguments)};mini.extend(Pager,Control,{pageIndex:0,pageSize:10,totalCount:0,totalPage:0,showPageIndex:true,showPageSize:true,showTotalCount:true,showPageInfo:true,showReloadButton:true,_clearBorder:false,showButtonText:false,showButtonIcon:true,sizeText:"",firstText:"首页",prevText:"上一页",nextText:"下一页",lastText:"尾页",reloadText:"刷新",pageInfoText:"每页 {0} 条,共 {1} 条",sizeList:[10,20,50,100],uiCls:"mini-pager",pageSizeWidth:null});mini.copyTo(Pager.prototype,{getAttrs:function($){var _=Pager.superclass.getAttrs.call(this,$);mini._ParseString($,_,["onpagechanged","sizeList","onbeforepagechanged","buttons","sizeText"]);mini._ParseBool($,_,["showPageIndex","showPageSize","showTotalCount","showPageInfo","showReloadButton","showButtonText","showButtonIcon"]);mini._ParseInt($,_,["pageIndex","pageSize","totalCount","pageSizeWidth"]);if(typeof _.sizeList=="string"){_.sizeList=window.eval(_.sizeList)}if(_.buttons){_.buttons=__get(_.buttons)}return _},onPageChanged:function(a,b){this.on("pagechanged",a,b)},oOOlO:function(a,c){var b={pageIndex:mini.isNumber(a)?a:this.pageIndex,pageSize:mini.isNumber(c)?c:this.pageSize,cancel:false};if(this.totalCount>=0){if(b.pageIndex>this.totalPage-1){b.pageIndex=this.totalPage-1}}if(b.pageIndex<0){b.pageIndex=0}this.fire("beforepagechanged",b);if(b.cancel==true){return}this.fire("pagechanged",b);this.update(b.pageIndex,b.pageSize)},Oo01:function(a){var b=parseInt(this.sizeCombo.getValue());this.oOOlO(0,b)},update:function(b,k,p){if(mini.isNumber(b)){this.pageIndex=parseInt(b)}if(mini.isNumber(k)){this.pageSize=parseInt(k)}if(mini.isNumber(p)){this.totalCount=parseInt(p)}this.totalPage=parseInt(this.totalCount/this.pageSize)+1;if((this.totalPage-1)*this.pageSize==this.totalCount){this.totalPage-=1}if(this.totalCount==0){this.totalPage=0}if(this.totalCount>=0){if(this.pageIndex>this.totalPage-1){this.pageIndex=this.totalPage-1}}if(this.pageIndex<=0){this.pageIndex=0}if(this.totalPage<=0){this.totalPage=0}this.firstButton.enable();this.prevButton.enable();this.nextButton.enable();this.lastButton.enable();if(this.pageIndex==0){this.firstButton.disable();this.prevButton.disable()}if(this.pageIndex>=this.totalPage-1){this.nextButton.disable();this.lastButton.disable()}var i=this.pageIndex>-1?this.pageIndex+1:0;if(this.totalCount==0){i=0}this.numInput.value=i;this.pagesLabel.innerHTML="/ "+this.totalPage;var d=this.sizeList.clone();if(d.indexOf(this.pageSize)==-1){d.push(this.pageSize);d=d.sort(function(u,t){return u>t})}var j=[];for(var a=0,r=d.length;a<r;a++){var c=d[a],g={};g.text=c;g.id=c;j.push(g)}this.sizeCombo.setData(j);this.sizeCombo.setValue(this.pageSize);this.sizeTextEl.innerHTML=this.sizeText;this.sizeTextEl.style.display=this.sizeText?"":"none";var q=this.firstText,s=this.prevText,o=this.nextText,f=this.lastText,n=this.reloadText;if(this.showButtonText==false){q=s=o=f=n=""}this.firstButton.setText(q);this.prevButton.setText(s);this.nextButton.setText(o);this.lastButton.setText(f);this.reloadButton.setText(n);q=this.firstText,s=this.prevText,o=this.nextText,f=this.lastText;if(this.showButtonText){this.firstButton.setTooltip(q);this.prevButton.setTooltip(s);this.nextButton.setTooltip(o);this.lastButton.setTooltip(f);this.reloadButton.setTooltip(n)}this.firstButton.setIconCls(this.showButtonIcon?"mini-pager-first":"");this.prevButton.setIconCls(this.showButtonIcon?"mini-pager-prev":"");this.nextButton.setIconCls(this.showButtonIcon?"mini-pager-next":"");this.lastButton.setIconCls(this.showButtonIcon?"mini-pager-last":"");this.reloadButton.setIconCls(this.showButtonIcon?"mini-pager-reload":"");this.reloadButton.setVisible(this.showReloadButton);var l=this.reloadButton.el.previousSibling;if(l){l.style.display=this.showReloadButton?"":"none"}this._rightEl.innerHTML=String.format(this.pageInfoText,this.pageSize,this.totalCount);this.indexEl.style.display=this.showPageIndex?"":"none";this.sizeEl.style.display=this.showPageSize?"":"none";this._rightEl.style.display=this.showPageInfo?"":"none";this.firstButton.setVisible(this.totalCount>=0);this.lastButton.setVisible(this.totalCount>=0);if(this.totalCount<0){this.firstButton.enable();this.nextButton.enable();if(this.pageIndex==0){this.firstButton.disable()}}},getTotalPage:function(){return this.totalPage},getShowButtonIcon:function(){return this.showButtonIcon},setShowButtonIcon:function(a){this.showButtonIcon=a;this.update()},getShowButtonText:function(){return this.showButtonText},setShowButtonText:function(a){this.showButtonText=a;this.update()},getShowReloadButton:function(){return this.showReloadButton},setShowReloadButton:function(a){this.showReloadButton=a;this.update()},getShowPageInfo:function(){return this.showPageInfo},setShowPageInfo:function(a){this.showPageInfo=a;this.update()},getShowTotalCount:function(){return this.showTotalCount},setShowTotalCount:function(a){this.showTotalCount=a;this.update()},getShowPageIndex:function(){return this.showPageIndex},setShowPageIndex:function(a){this.showPageIndex=a;this.update()},getShowPageSize:function(){return this.showPageSize},setShowPageSize:function(a){this.showPageSize=a;this.update()},getPageSizeWidth:function(){return this.pageSizeWidth},setPageSizeWidth:function(a){a=parseInt(a);if(isNaN(a)){return}if(this.pageSizeWidth!=a){this.pageSizeWidth=a;this.sizeCombo.setWidth(a)}},getSizeList:function(){return this.sizeList},setSizeList:function(a){if(!mini.isArray(a)){return}this.sizeList=a;this.update()},getTotalCount:function(){return this.totalCount},setTotalCount:function(a){a=parseInt(a);if(isNaN(a)){return}this.totalCount=a;this.update()},getPageSize:function(){return this.pageSize},setPageSize:function(a){if(isNaN(a)){return}this.pageSize=a;this.update()},getPageIndex:function(){return this.pageIndex},setPageIndex:function(a){if(isNaN(a)){return}this.pageIndex=a;this.update()},doLayout:function(){if(!this.canLayout()){return}mini.layout(this._leftEl);mini.layout(this._rightEl)},_initEvents:function(){Pager.superclass._initEvents.call(this);this.firstButton.on("click",function(c){this.oOOlO(0)},this);this.prevButton.on("click",function(c){this.oOOlO(this.pageIndex-1)},this);this.nextButton.on("click",function(c){this.oOOlO(this.pageIndex+1)},this);this.lastButton.on("click",function(c){this.oOOlO(this.totalPage)},this);this.reloadButton.on("click",function(c){this.oOOlO()},this);function a(){if(b){return}b=true;var c=parseInt(this.numInput.value);if(isNaN(c)){this.update()}else{this.oOOlO(c-1)}setTimeout(function(){b=false},100)}var b=false;mini.on(this.numInput,"change",function(c){a.call(this)},this);mini.on(this.numInput,"keydown",function(c){if(c.keyCode==13){a.call(this);c.stopPropagation()}},this);this.sizeCombo.on("valuechanged",this.Oo01,this)},getButtonsEl:function(){return this.buttonsEl},setButtons:function(a){__mini_setControls(a,this.buttonsEl,this)},destroy:function(a){if(this.pageSelect){mini.clearEvent(this.pageSelect);this.pageSelect=null}if(this.numInput){mini.clearEvent(this.numInput);this.numInput=null}this.sizeEl=this.sizeTextEl=this._barEl=this._barEl2=this._leftEl=this._rightEl=this.indexEl=this.buttonsEl=null;Pager.superclass.destroy.call(this,a)},_create:function(){this.el=document.createElement("div");this.el.className="mini-pager";var a='<div class="mini-pager-left"><table cellspacing="0" cellpadding="0" border="0"><tr><td></td><td></td></tr></table></div><div class="mini-pager-right"></div>';this.el.innerHTML=a;this._leftEl=this.el.childNodes[0];this._rightEl=this.el.childNodes[1];var b=this._leftEl.getElementsByTagName("td");this._barEl=b[0];this._barEl2=b[1];this.sizeEl=mini.append(this._barEl,'<span class="mini-pager-size"></span>');this.sizeTextEl=mini.before(this.sizeEl,'<span class="mini-pager-sizetext"></span>');this.sizeCombo=new ComboBox();if(this.pageSizeWidth){this.sizeCombo.setWidth(this.pageSizeWidth)}this.sizeCombo.render(this.sizeEl);mini.append(this.sizeEl,'<span class="separator"></span>');this.firstButton=new Button();this.firstButton.addCls("mini-pager-firstbutton");this.firstButton.render(this._barEl);this.prevButton=new Button();this.prevButton.addCls("mini-pager-prevbutton");this.prevButton.render(this._barEl);this.indexEl=document.createElement("span");this.indexEl.className="mini-pager-index";this.indexEl.innerHTML='<input id="" type="text" class="mini-pager-num"/><span class="mini-pager-pages">/ 0</span>';this._barEl.appendChild(this.indexEl);this.numInput=this.indexEl.firstChild;this.pagesLabel=this.indexEl.lastChild;this.nextButton=new Button();this.nextButton.addCls("mini-pager-nextbutton");this.nextButton.render(this._barEl);this.lastButton=new Button();this.lastButton.addCls("mini-pager-lastbutton");this.lastButton.render(this._barEl);mini.append(this._barEl,'<span class="separator"></span>');this.reloadButton=new Button();this.reloadButton.render(this._barEl);this.firstButton.setPlain(true);this.prevButton.setPlain(true);this.nextButton.setPlain(true);this.lastButton.setPlain(true);this.reloadButton.setPlain(true);this.buttonsEl=mini.append(this._barEl2,'<div class="mini-page-buttons"></div>');this.update()},set:function(a){if(typeof a=="string"){return this}var b=a.pageIndex;delete a.pageIndex;Pager.superclass.set.call(this,a);if(!mini.isNull(b)){this.setPageIndex(b)}return this}});mini.regClass(Pager,"pager");DataBinding=function(){this._bindFields=[];this._bindForms=[];DataBinding.superclass.constructor.apply(this,arguments)};mini.extend(DataBinding,Component,{});mini.copyTo(DataBinding.prototype,{lOlo:function(d){if(this._doSetting){return}this._doSetting=true;var l=d.sender,g=l.getValue();for(var a=0,j=this._bindFields.length;a<j;a++){var i=this._bindFields[a];if(i.control!=l||i.mode===false){continue}var k=i.source,f=this._currentRecord;if(!f){continue}var c={};c[i.field]=g;if(l.getText&&l.textName){c[l.textName]=l.getText()}k.updateRow(f,c)}var b=this;setTimeout(function(){b._doSetting=false},10)},O00l:function(d){if(this._doSetting){return}this._doSetting=true;this._currentRecord=d.record;var k=d.sender,c=d.record;for(var a=0,j=this._bindFields.length;a<j;a++){var f=this._bindFields[a];if(f.source!=k){continue}var l=f.control,i=f.field;if(l.setValue){if(c){var g=mini._getMap(i,c);l.setValue(g)}else{l.setValue("")}}if(l.setText&&l.textName){if(c){l.setText(c[l.textName])}else{l.setText("")}}}var b=this;setTimeout(function(){b._doSetting=false},10)},bindForm:function(a,g,f,d){a=__get(a);g=mini.get(g);if(!a||!g){return}var a=new mini.Form(a),b=a.getFields();for(var j=0,c=b.length;j<c;j++){var i=b[j];this.bindField(i,g,i.getName(),f,d)}},bindField:function(g,f,a,c,d){g=mini.get(g);f=mini.get(f);if(!g||!f||!a){return}var b={control:g,source:f,field:a,convert:d,mode:c};this._bindFields.push(b);f.on("currentchanged",this.O00l,this);g.on("valuechanged",this.lOlo,this)}});mini.regClass(DataBinding,"databinding");DataSet=function(){this._sources={};this._data={};this._links=[];this.o1Oo={};DataSet.superclass.constructor.apply(this,arguments)};mini.extend(DataSet,Component,{});mini.copyTo(DataSet.prototype,{__OnDataSelectionChanged:function(g){var k=g.sender,d=k.getSelected(),a=this.O1llO1(k);for(var b=0,j=a.length;b<j;b++){var c=a[b],i=this._sources[c.childName];if(d){var f={};f[c.parentField]=d[k.getIdField()];i.load(f)}else{i.loadData([])}}},O1llO1:function(f){var c=this.OlOo0O(f),g=[];for(var a=0,d=this._links.length;a<d;a++){var b=this._links[a];if(b.parentName==c){g.push(b)}}return g},o1l00o:function(f){var c=this.OlOo0O(f);for(var a=0,d=this._links.length;a<d;a++){var b=this._links[a];if(b.childName==c){return this._sources[b.parentName]}}},OOOOOo:function(c){var s=c.sender,l=this.OlOo0O(s),f=c.sender.getIdField(),r=this._data[l],p={};for(var a=0,q=r.length;a<q;a++){var j=r[a];p[j[f]]=j}var o=this.o1Oo[l];if(o){s._seto1Oo(o)}var d=c.data||[];for(a=0,q=d.length;a<q;a++){var j=d[a],b=p[j[f]];if(b){delete b._uid;mini.copyTo(j,b)}}var k=this.o1l00o(s);if(s.getPageIndex&&s.getPageIndex()==0){var g=[];for(a=0,q=r.length;a<q;a++){j=r[a];if(j._state=="added"){if(k){var n=k.getSelected();if(n&&n[k.getIdField()]==j._parentId){g.push(j)}}else{g.push(j)}}}g.reverse();d.insertRange(0,g)}var i=[];for(a=d.length-1;a>=0;a--){j=d[a],b=p[j[f]];if(b&&b._state=="removed"){d.removeAt(a);i.push(b)}}},O0O0l:function(b){var f=b.type,a=b.record,j=this.OlOo0O(b.sender),g=this.O0lO0(j,a,b.sender.getIdField()),c=this._data[j];if(g){c=this._data[j];c.remove(g)}if(f=="removerow"&&a._state=="added"){}else{if(f=="beforeremove"&&a._state=="added"){}else{c.push(a)}}this.o1Oo[j]=b.sender._geto1Oo();if(a._state=="added"){var i=this.o1l00o(b.sender);if(i){var d=i.getSelected();if(d){a._parentId=d[i.getIdField()]}else{c.remove(a)}}}},O0lO0:function(a,b,d){var f=this._data[a];if(!f){return false}for(var i=0,c=f.length;i<c;i++){var g=f[i];if(g[d]==b[d]){return g}}return null},OlOo0O:function(a){for(var b in this._sources){var c=this._sources[b];if(c==a){return b}}},getData:function(){return this._data},clearData:function(){this._data={};this.o1Oo={};for(var a in this._sources){this._data=[]}},addLink:function(b,c,d){if(!b||!c||!d){return}if(!this._sources[b]||!this._sources[c]){return}var a={parentName:b,childName:c,parentField:d};this._links.push(a)},add:function(b,a){if(!b||!a){return}this._sources[b]=a;this._data[b]=[];a._set_autoCreateNewID(true);a._setl0ol0O(a.getIdField());a._setoOOl(false);a.on("addrow",this.O0O0l,this);a.on("updaterow",this.O0O0l,this);a.on("deleterow",this.O0O0l,this);a.on("removerow",this.O0O0l,this);a.on("preload",this.OOOOOo,this);a.on("selectionchanged",this.__OnDataSelectionChanged,this)}});mini.regClass(DataSet,"dataset");if(typeof mini_doload=="undefined"){mini_doload=function(a){}}mini.DataSource=function(){mini.DataSource.superclass.constructor.apply(this,arguments);this._init()};mini.extend(mini.DataSource,Component,{idField:"id",textField:"text",loaded:false,destroy:function(){this.source=[];this.dataview=[];this.visibleRows=null;this.list=null;this._ids={};this._removeds=[];if(this.oOOl){this.o1Oo={}}this._errors={};this.Oo1O=null;this.l1Oo=[];this.o1ll={};this._filterInfo=null;this._sortInfo=null;this.root={_id:-1,_level:-1};this.viewNodes=null;this.dataview=null;this.visibleRows=null;this.list=null;mini.DataSource.superclass.destroy.call(this)},l0ol0O:"_id",oOOl:true,_autoCreateNewID:false,_init:function(){this.source=[];this.dataview=[];this.visibleRows=null;this.list=null;this._ids={};this._removeds=[];if(this.oOOl){this.o1Oo={}}this._errors={};this.Oo1O=null;this.l1Oo=[];this.o1ll={};this.__changeCount=0},getSource:function(){return this.source},getList:function(){return this.source.clone()},getDataView:function(){return this.dataview.clone()},getVisibleRows:function(){if(!this.visibleRows){this.visibleRows=this.getDataView().clone()}return this.visibleRows},setData:function(a){this.loadData(a)},loadData:function(a){if(!mini.isArray(a)){a=[]}this._init();this.llo0l1(a);this.lOoo0("loaddata");this.fire("loaddata");return true},llo0l1:function(c){this.source=c;this.dataview=c;var d=this.source,a=this._ids;for(var g=0,f=d.length;g<f;g++){var b=d[g];b._id=mini.DataSource.RecordId++;a[b._id]=b;b._uid=b._id}},clearData:function(){this._init();this.lOoo0();this.fire("cleardata")},clear:function(){this.clearData()},updateRecord:function(a,b,f){if(mini.isNull(a)){return}var d=mini._getMap,i=mini._setMap;this.fire("beforeupdate",{record:a});if(typeof b=="string"){var g=d(b,a);if(mini.isEquals(g,f)){return false}this.beginChange();i(b,f,a);this._setModified(a,b,g);this.endChange()}else{this.beginChange();for(var c in b){var g=d(c,a),f=b[c];if(mini.isEquals(g,f)){continue}i(c,f,a);this._setModified(a,c,g)}this.endChange("update")}this.fire("update",{record:a})},deleteRecord:function(a){this._setDeleted(a);this.lOoo0();this.fire("delete",{record:a})},getby_id:function(a){a=typeof a=="object"?a._id:a;return this._ids[a]},getbyId:function(i){var f=typeof i;if(f=="number"){return this.getAt(i)}if(typeof i=="object"){if(this.getby_id(i)){return i}i=i[this.idField]}i=String(i);var a=this.ids;if(!a){a=this.ids={};var b=this.getList();for(var j=0,d=b.length;j<d;j++){var c=b[j],g=c[this.idField];if(!mini.isNull(g)){a[g]=c}}}return a[i]},getsByIds:function(d){if(mini.isNull(d)){d=""}d=String(d);var b=[],a=String(d).split(",");for(var g=0,f=a.length;g<f;g++){var c=this.getbyId(a[g]);if(c){b.push(c)}}return b},getRecord:function(a){if(typeof a=="object"){return a}return this.getRow(a)},getRow:function(a){var b=typeof a;if(b=="string"){return this.getbyId(a)}else{if(b=="number"){return this.getAt(a)}else{if(b=="object"){return a}}}},delimiter:",",oO1l:function(b,a){if(mini.isNull(b)){b=[]}a=a||this.delimiter;if(typeof b=="string"||typeof b=="number"){b=this.getsByIds(b)}else{if(!mini.isArray(b)){b=[b]}}var i=[],d=[];for(var f=0,c=b.length;f<c;f++){var g=b[f];if(g){i.push(this.getItemValue(g));d.push(this.getItemText(g))}}return[i.join(a),d.join(a)]},getItemValue:function(b){if(!b){return""}var a=mini._getMap(this.idField,b);return mini.isNull(a)?"":String(a)},getItemText:function(b){if(!b){return""}var a=mini._getMap(this.textField,b);return mini.isNull(a)?"":String(a)},isModified:function(c,a){var b=this.o1Oo[c[this.l0ol0O]];if(!b){return false}if(mini.isNull(a)){return false}return b.hasOwnProperty(a)},hasRecord:function(a){return !!this.getby_id(a)},findRecords:function(a,i){var j=typeof a=="function",n=a,b=i||this,d=this.source,c=[];for(var l=0,k=d.length;l<k;l++){var g=d[l];if(j){var f=n.call(b,g);if(f==true){c[c.length]=g}if(f===1){break}}else{if(g[a]==i){c[c.length]=g}}}return c},findRecord:function(b,a){var c=this.findRecords(b,a);return c[0]},each:function(a,b){var c=this.getDataView().clone();b=b||this;mini.forEach(c,a,b)},getCount:function(){return this.getDataView().length},setIdField:function(a){this.idField=a},setTextField:function(a){this.textField=a},__changeCount:0,beginChange:function(){this.__changeCount++},endChange:function(a,b){this.__changeCount--;if(this.__changeCount<0){this.__changeCount=0}if((b!==false&&this.__changeCount==0)||b==true){this.__changeCount=0;this.lOoo0(a)}},lOoo0:function(a){this.ids=null;this.visibleRows=null;this.list=null;if(this.__changeCount==0){this.fire("datachanged")}},_setAdded:function(a){a._id=mini.DataSource.RecordId++;if(this._autoCreateNewID&&!a[this.idField]){a[this.idField]=UUID()}a._uid=a._id;a._state="added";this._ids[a._id]=a;delete this.o1Oo[a[this.l0ol0O]]},_setModified:function(a,b,d){if(a._state!="added"&&a._state!="deleted"&&a._state!="removed"){a._state="modified";var c=this.olol1l(a);if(!c.hasOwnProperty(b)){c[b]=d}}},_setDeleted:function(a){if(a._state!="added"&&a._state!="deleted"&&a._state!="removed"){a._state="deleted"}},_setRemoved:function(a){delete this._ids[a._id];if(a._state!="added"&&a._state!="removed"){a._state="removed";delete this.o1Oo[a[this.l0ol0O]];this._removeds.push(a)}},olol1l:function(b){var a=b[this.l0ol0O],c=this.o1Oo[a];if(!c){c=this.o1Oo[a]={}}return c},Oo1O:null,l1Oo:[],o1ll:null,multiSelect:false,isSelected:function(a){if(!a){return false}if(typeof a!="string"){a=a._id}return !!this.o1ll[a]},setSelected:function(b){b=this.getby_id(b);var a=this.getSelected();if(a!=b){this.Oo1O=b;if(b){this.select(b)}else{this.deselect(this.getSelected())}this.l11l00(b)}},getSelected:function(){if(this.isSelected(this.Oo1O)){return this.Oo1O}return this.l1Oo[0]},setCurrent:function(a){this.setSelected(a)},getCurrent:function(){return this.getSelected()},getSelecteds:function(){return this.l1Oo.clone()},select:function(a,b){if(mini.isNull(a)){return}this.selects([a],b)},deselect:function(a,b){if(mini.isNull(a)){return}this.deselects([a],b)},selectAll:function(a){this.selects(this.getList(),a)},deselectAll:function(a){this.deselects(this.getSelecteds(),a)},_fireSelect:function(b,a){var c={record:b,cancel:false};this.fire(a,c);return !c.cancel},selects:function(c,a){if(!mini.isArray(c)){return}c=c.clone();if(this.multiSelect==false){this.deselects(this.getSelecteds());if(c.length>0){c.length=1}this.l1Oo=[];this.o1ll={}}var b=[];for(var f=0,d=c.length;f<d;f++){var g=this.getbyId(c[f]);if(!g){continue}if(!this.isSelected(g)){if(a!==false){if(!this._fireSelect(g,"beforeselect")){continue}}this.l1Oo.push(g);this.o1ll[g._id]=g;b.push(g);if(a!==false){this.fire("select",{record:g})}}}this._OnSelectionChanged(c,true,b,a)},deselects:function(b,i){if(!mini.isArray(b)){return}b=b.clone();var a=[];for(var f=b.length-1;f>=0;f--){var g=this.getbyId(b[f]);if(!g){continue}if(this.isSelected(g)){if(i!==false){if(!this._fireSelect(g,"beforedeselect")){continue}}delete this.o1ll[g._id];a.push(g)}}this.l1Oo=[];var d=this.o1ll;for(f in d){var c=d[f];if(c._id){this.l1Oo.push(c)}}for(f=b.length-1;f>=0;f--){g=this.getbyId(b[f]);if(!g){continue}if(i!==false){this.fire("deselect",{record:g})}}this._OnSelectionChanged(b,false,a,i)},_OnSelectionChanged:function(a,b,i,f){var g={fireEvent:f,records:a,select:b,selected:this.getSelected(),selecteds:this.getSelecteds(),_records:i};this.fire("SelectionChanged",g);var d=this._current,c=this.getCurrent();if(d!=c){this._current=c;this.l11l00(c)}},l11l00:function(b){if(this._currentTimer){clearTimeout(this._currentTimer)}var a=this;this._currentTimer=setTimeout(function(){a._currentTimer=null;var c={record:b};a.fire("CurrentChanged",c)},30)},l1oO0O:function(){for(var a=this.l1Oo.length-1;a>=0;a--){var b=this.l1Oo[a],c=this.getby_id(b._id);if(!c){this.l1Oo.removeAt(a);delete this.o1ll[b._id]}}if(this.Oo1O&&this.getby_id(this.Oo1O._id)==null){this.Oo1O=null}},setMultiSelect:function(a){if(this.multiSelect!=a){this.multiSelect=a;if(a==false){}}},getMultiSelect:function(){return this.multiSelect},selectPrev:function(){var b=this.getSelected();if(!b){b=this.getAt(0)}else{var a=this.indexOf(b);b=this.getAt(a-1)}if(b){this.deselectAll();this.select(b);this.setCurrent(b)}},selectNext:function(){var b=this.getSelected();if(!b){b=this.getAt(0)}else{var a=this.indexOf(b);b=this.getAt(a+1)}if(b){this.deselectAll();this.select(b);this.setCurrent(b)}},selectFirst:function(){var a=this.getAt(0);if(a){this.deselectAll();this.select(a);this.setCurrent(a)}},selectLast:function(){var b=this.getVisibleRows(),a=this.getAt(b.length-1);if(a){this.deselectAll();this.select(a);this.setCurrent(a)}},getSelectedsId:function(a){var c=this.getSelecteds(),b=this.oO1l(c,a);return b[0]},getSelectedsText:function(a){var c=this.getSelecteds(),b=this.oO1l(c,a);return b[1]},_filterInfo:null,_sortInfo:null,filter:function(a,b){if(typeof a!="function"){return}b=b||this;this._filterInfo=[a,b];this.o0oOl();this.lo0ool();this.lOoo0();this.fire("filter")},clearFilter:function(){if(!this._filterInfo){return}this._filterInfo=null;this.o0oOl();this.lo0ool();this.lOoo0();this.fire("filter")},sort:function(b,c,a){if(typeof b!="function"){return}c=c||this;this._sortInfo=[b,c,a];this.lo0ool();this.lOoo0();this.fire("sort")},clearSort:function(){this._sortInfo=null;this.sortField=this.sortOrder="";this.o0oOl();this.lOoo0();if(this.sortMode=="server"){var a=this.getLoadParams();a.sortField="";a.sortOrder="";this.load(a)}this.fire("filter")},_sortMulti:function(a){},_doClientSortField:function(a,c,b){var f=this._getSortFnByField(a,b);if(!f){return}var d=c=="desc";this.sort(f,this,d)},_getSortFnByField:function(c,b){if(!c){return null}var a=null,d=mini.sortTypes[b];if(!d){d=mini.sortTypes.string}function f(p,o){var g=mini._getMap(c,p),j=mini._getMap(c,o),k=mini.isNull(g)||g==="",i=mini.isNull(j)||j==="";if(k){return 0}if(i){return 1}if(b=="chinese"){return g.localeCompare(j)}var n=d(g),l=d(j);if(n>l){return 1}else{return 0}}a=f;return a},ajaxOptions:null,autoLoad:false,url:"",pageSize:10,pageIndex:0,totalCount:0,totalPage:0,sortField:"",sortOrder:"",loadParams:null,getLoadParams:function(){return this.loadParams||{}},sortMode:"server",pageIndexField:"pageIndex",pageSizeField:"pageSize",sortFieldField:"sortField",sortOrderField:"sortOrder",totalField:"total",dataField:"data",startField:"",limitField:"",errorField:"error",errorMsgField:"errorMsg",stackTraceField:"stackTrace",load:function(a,c,f,d){if(typeof a=="string"){this.setUrl(a);return}if(this._loadTimer){clearTimeout(this._loadTimer)}this.loadParams=a||{};if(!mini.isNumber(this.loadParams.pageIndex)){this.loadParams.pageIndex=0}if(this._xhr){this._xhr.abort()}if(this.ajaxAsync&&mini_ajaxAsyncInvoke){var b=this;this._loadTimer=setTimeout(function(){b._doLoadAjax(b.loadParams,c,f,d);b._loadTimer=null},1)}else{this._doLoadAjax(this.loadParams,c,f,d)}},reload:function(c,b,a){this.load(this.loadParams,c,b,a)},gotoPage:function(b,c){var a=this.loadParams||{};if(mini.isNumber(b)){a.pageIndex=b}if(mini.isNumber(c)){a.pageSize=c}this.load(a)},sortBy:function(b,c){this.sortField=b;this.sortOrder=c=="asc"?"asc":"desc";if(this.sortMode=="server"){var a=this.getLoadParams();a.sortField=b;a.sortOrder=c;a.pageIndex=this.pageIndex;this.load(a)}},setSortField:function(a){this.sortField=a;if(this.sortMode=="server"){var b=this.getLoadParams();b.sortField=a}},setSortOrder:function(a){this.sortOrder=a;if(this.sortMode=="server"){var b=this.getLoadParams();b.sortOrder=a}},checkSelectOnLoad:true,selectOnLoad:false,ajaxData:null,ajaxAsync:true,ajaxType:"",_doLoadAjax:function(r,j,t,d,l){r=r||{};if(mini.isNull(r.pageIndex)){r.pageIndex=this.pageIndex}if(mini.isNull(r.pageSize)){r.pageSize=this.pageSize}if(r.sortField){this.sortField=r.sortField}if(r.sortOrder){this.sortOrder=r.sortOrder}r.sortField=this.sortField;r.sortOrder=this.sortOrder;this.loadParams=r;var o=this._evalUrl(),q=this._evalType(o),i=__eval(this.ajaxData,this);jQuery.extend(true,r,i);var u={url:o,async:this.ajaxAsync,type:q,data:r,params:r,cache:false,cancel:false};jQuery.extend(true,u,this.ajaxOptions);this._OnBeforeLoad(u);if(u.cancel==true){r.pageIndex=this.getPageIndex();r.pageSize=this.getPageSize();return}if(u.data!=u.params&&u.params!=r){u.data=u.params}if(u.url!=o&&u.type==q){u.type=this._evalType(u.url)}var n={};n[this.pageIndexField]=r.pageIndex;n[this.pageSizeField]=r.pageSize;if(r.sortField){n[this.sortFieldField]=r.sortField}if(r.sortOrder){n[this.sortOrderField]=r.sortOrder}if(this.startField&&this.limitField){n[this.startField]=r.pageIndex*r.pageSize;n[this.limitField]=r.pageSize}jQuery.extend(true,r,n);jQuery.extend(true,u.data,n);if(this.sortMode=="client"){r[this.sortFieldField]="";r[this.sortOrderField]=""}var c=this.getSelected();this._currentSelectValue=c?c[this.idField]:null;if(mini.isNumber(this._currentSelectValue)){this._currentSelectValue=String(this._currentSelectValue)}var a=this.getSelecteds(),b=[];for(var s=0,p=a.length;s<p;s++){var f=a[s][this.idField];if(!mini.isNull(f)){f=String(f)}b.push(f)}this.Oo1OValue=b.length==0?null:b;if(mini.isNumber(this.Oo1OValue)){this.Oo1OValue=String(this.Oo1OValue)}var g=this;g._resultObject=null;var k=u.async;mini.copyTo(u,{success:function(y,w,F){if(!y||y=="null"){y="{total:0,data:[] }"}delete u.params;var z={text:y,result:null,sender:g,options:u,xhr:F},J=null;try{mini_doload(z);J=z.result;if(!J){J=mini.decode(y)}}catch(A){}if(J&&!mini.isArray(J)){J.total=parseInt(mini._getMap(g.totalField,J));J.data=mini._getMap(g.dataField,J)}else{if(J==null){J={};J.data=[];J.total=0}else{if(mini.isArray(J)){var H={};H.data=J;H.total=J.length;J=H}}}if(!J.data){J.data=[]}if(!J.total){J.total=0}g._resultObject=J;if(!mini.isArray(J.data)){J.data=[J.data]}var A={xhr:F,text:y,textStatus:w,result:J,total:J.total,data:J.data.clone(),pageIndex:r[g.pageIndexField],pageSize:r[g.pageSizeField]},Z=mini._getMap(g.errorField,J),X=mini._getMap(g.errorMsgField,J),x=mini._getMap(g.stackTraceField,J);if(mini.isNumber(Z)&&Z!=0||Z===false){A.textStatus="servererror";A.errorCode=Z;A.stackTrace=x||"";A.errorMsg=X||"";g.fire("loaderror",A);if(t){t.call(g,A)}}else{if(A.pageIndex>0&&A.data.length==0){g.gotoPage(A.pageIndex-1);return}if(l){l(A)}else{g.pageIndex=A.pageIndex;g.pageSize=A.pageSize;g.setTotalCount(A.total);g._OnPreLoad(A);g.loaded=true;var C=new Date();g.setData(A.data);if(g.Oo1OValue&&g.checkSelectOnLoad){var I=[],W=g.Oo1OValue;if(W.length>0){for(var v=0,Y=W.length;v<Y;v++){var L=g.getbyId(W[v]);if(L){I.push(L)}}if(I.length){g.selects(I)}g.Oo1O=g.getbyId(g._currentSelectValue)}}if(g.getSelected()==null&&g.selectOnLoad&&g.getDataView().length>0){g.select(0)}g.fire("load",A);if(j){if(k){setTimeout(function(){j.call(g,A)},20)}else{j.call(g,A)}}}}},error:function(w,y,x){if(y=="abort"){return}var v={xhr:w,text:w.responseText,textStatus:y};v.errorMsg=w.responseText;v.errorCode=w.status;g.fire("loaderror",v);if(t){t.call(g,v)}},complete:function(x,v){var w={xhr:x,text:x.responseText,textStatus:v};g.fire("loadcomplete",w);if(d){d.call(g,w)}g._xhr=null}});if(this._xhr){}this._xhr=mini.ajax(u)},_OnBeforeLoad:function(a){this.fire("beforeload",a)},_OnPreLoad:function(a){this.fire("preload",a)},_evalUrl:function(){var _=this.url;if(typeof _=="function"){_=_()}else{try{_=window.eval(_)}catch($){_=this.url}if(!_){_=this.url}}return _},_evalType:function(a){var b=this.ajaxType;if(!b){b="post";if(a){if(a.indexOf(".txt")!=-1||a.indexOf(".json")!=-1){b="get"}}else{b="get"}}return b},setSortMode:function(a){this.sortMode=a},getSortMode:function(){return this.sortMode},setAjaxOptions:function(a){this.ajaxOptions=a},getAjaxOptions:function(){return this.ajaxOptions},setAutoLoad:function(a){this.autoLoad=a},getAutoLoad:function(){return this.autoLoad},setUrl:function(a){this.url=a;if(this.autoLoad){this.load()}},getUrl:function(){return this.url},setPageIndex:function(a){this.pageIndex=a;var b=this.loadParams||{};if(mini.isNumber(a)){b.pageIndex=a}this.fire("pageinfochanged")},getPageIndex:function(){return this.pageIndex},setPageSize:function(a){this.pageSize=a;var b=this.loadParams||{};if(mini.isNumber(a)){b.pageSize=a}this.fire("pageinfochanged")},getPageSize:function(){return this.pageSize},setTotalCount:function(a){this.totalCount=parseInt(a);this.fire("pageinfochanged")},getTotalCount:function(){return this.totalCount},getTotalPage:function(){return this.totalPage},setCheckSelectOnLoad:function(a){this.checkSelectOnLoad=a},getCheckSelectOnLoad:function(){return this.checkSelectOnLoad},setSelectOnLoad:function(a){this.selectOnLoad=a},getSelectOnLoad:function(){return this.selectOnLoad}});mini.DataSource.RecordId=1;mini.DataTable=function(){mini.DataTable.superclass.constructor.apply(this,arguments)};mini.extend(mini.DataTable,mini.DataSource,{_init:function(){mini.DataTable.superclass._init.call(this);this._filterInfo=null;this._sortInfo=null},add:function(a){return this.insert(this.source.length,a)},addRange:function(a){this.insertRange(this.source.length,a)},insert:function(g,a){if(!a){return null}var b={index:g,record:a};this.fire("beforeadd",b);if(!mini.isNumber(g)){var c=this.getRecord(g);if(c){g=this.indexOf(c)}else{g=this.getDataView().length}}var d=this.dataview[g];if(d){this.dataview.insert(g,a)}else{this.dataview.add(a)}if(this.dataview!=this.source){if(d){var f=this.source.indexOf(d);this.source.insert(f,a)}else{this.source.add(a)}}this._setAdded(a);this.lOoo0();this.fire("add",b)},insertRange:function(a,c){if(!mini.isArray(c)){return}this.beginChange();c=c.clone();for(var f=0,d=c.length;f<d;f++){var b=c[f];this.insert(a+f,b)}this.endChange()},remove:function(b,c){var a=this.indexOf(b);return this.removeAt(a,c)},removeAt:function(d,c){var g=this.getAt(d);if(!g){return null}var b={record:g};this.fire("beforeremove",b);var f=this.isSelected(g);this.source.remove(g);if(this.dataview!==this.source){this.dataview.removeAt(d)}this._setRemoved(g);this.l1oO0O();this.lOoo0();this.fire("remove",b);if(f&&c){var a=this.getAt(d);if(!a){a=this.getAt(d-1)}this.deselectAll();this.select(a)}},removeRange:function(b,c){if(!mini.isArray(b)){return}this.beginChange();b=b.clone();for(var a=0,f=b.length;a<f;a++){var d=b[a];this.remove(d,c)}this.endChange()},move:function(i,o){if(!i||!mini.isNumber(o)){return}if(o<0){return}if(mini.isArray(i)){this.beginChange();var f=i,g=this.getAt(o),k=this;mini.sort(f,function(q,p){return k.indexOf(q)>k.indexOf(p)},this);for(var c=0,a=f.length;c<a;c++){var l=f[c],b=this.indexOf(g);this.move(l,b)}this.endChange();return}var d={index:o,record:i};this.fire("beforemove",d);var n=this.dataview[o];this.dataview.remove(i);var j=this.dataview.indexOf(n);if(j!=-1){o=j}if(n){this.dataview.insert(o,i)}else{this.dataview.add(i)}if(this.dataview!=this.source){this.source.remove(i);j=this.source.indexOf(n);if(j!=-1){o=j}if(n){this.source.insert(o,i)}else{this.source.add(i)}}this.lOoo0();this.fire("move",d)},indexOf:function(a){return this.getVisibleRows().indexOf(a)},getAt:function(a){return this.getVisibleRows()[a]},getRange:function(b,g){if(b>g){var d=b;b=g;g=d}var a=[];for(var i=b,f=g;i<=f;i++){var c=this.dataview[i];a.push(c)}return a},selectRange:function(b,a){if(!mini.isNumber(b)){b=this.indexOf(b)}if(!mini.isNumber(a)){a=this.indexOf(a)}if(mini.isNull(b)||mini.isNull(a)){return}var c=this.getRange(b,a);this.selects(c)},toArray:function(){return this.source.clone()},isChanged:function(){return this.getChanges().length>0},getChanges:function(k,j){var d=[];if(k=="removed"||k==null){d.addRange(this._removeds.clone())}for(var c=0,b=this.source.length;c<b;c++){var l=this.source[c];if(!l._state){continue}if(l._state==k||k==null){d[d.length]=l}}var a=d;if(j){for(c=0,b=a.length;c<b;c++){var i=a[c];if(i._state=="modified"){var f={};f._state=i._state;f[this.idField]=i[this.idField];for(var o in i){var g=this.isModified(i,o);if(g){f[o]=i[o]}}a[c]=f}}}var n=this;mini.sort(d,function(r,q){var p=n.indexOf(r),s=n.indexOf(q);if(p>s){return 1}if(p<s){return -1}return 0});return d},accept:function(){this.beginChange();for(var b=0,a=this.source.length;b<a;b++){var c=this.source[b];this.acceptRecord(c)}this._removeds=[];this.o1Oo={};this.endChange()},reject:function(){this.beginChange();var c=this.source.clone();for(var a=0,d=c.length;a<d;a++){var b=c[a];this.rejectRecord(b)}this._removeds=[];this.o1Oo={};this.endChange()},acceptRecord:function(a){if(!a._state){return}delete this.o1Oo[a[this.l0ol0O]];if(a._state=="deleted"){this.remove(a)}else{delete a._state;delete this.o1Oo[a[this.l0ol0O]];this.lOoo0()}this.fire("update",{record:a})},rejectRecord:function(b){if(!b._state){return}if(b._state=="added"){this.remove(b)}else{if(b._state=="modified"||b._state=="deleted"){var a=this.olol1l(b);for(var d in a){var c=a[d];mini._setMap(d,c,b)}delete b._state;delete this.o1Oo[b[this.l0ol0O]];this.lOoo0();this.fire("update",{record:b})}}},o0oOl:function(){if(!this._filterInfo){this.dataview=this.source;return}var g=this._filterInfo[0],i=this._filterInfo[1],b=[],j=this.source;for(var f=0,c=j.length;f<c;f++){var a=j[f],d=g.call(i,a,f,this);if(d!==false){b.push(a)}}this.dataview=b},lo0ool:function(){if(!this._sortInfo){return}var a=this._sortInfo[0],b=this._sortInfo[1],d=this._sortInfo[2],c=this.getDataView().clone();mini.sort(c,a,b);if(d){c.reverse()}this.dataview=c}});mini.regClass(mini.DataTable,"datatable");mini.DataTree=function(){mini.DataTree.superclass.constructor.apply(this,arguments)};mini.extend(mini.DataTree,mini.DataSource,{isTree:true,expandOnLoad:false,idField:"id",parentField:"pid",nodesField:"children",checkedField:"checked",resultAsTree:true,dataField:"",checkModel:"cascade",autoCheckParent:false,onlyLeafCheckable:false,setExpandOnLoad:function(a){this.expandOnLoad=a},getExpandOnLoad:function(){return this.expandOnLoad},setParentField:function(a){this.parentField=a},setNodesField:function(a){if(this.nodesField!=a){var b=this.root[this.nodesField];this.nodesField=a;this.llo0l1(b)}},setResultAsTree:function(a){this.resultAsTree=a},setCheckRecursive:function(a){this.checkModel=a?"cascade":"multiple"},getCheckRecursive:function(){return this.checkModel=="cascade"},setShowFolderCheckBox:function(a){this.onlyLeafCheckable=!a},getShowFolderCheckBox:function(){return !this.onlyLeafCheckable},_doExpandOnLoad:function(b){var d=this.nodesField,a=this.expandOnLoad;function c(l,k){for(var j=0,i=l.length;j<i;j++){var f=l[j];if(mini.isNull(f.expanded)){if(a===true||(mini.isNumber(a)&&k<=a)){f.expanded=true}else{f.expanded=false}}var g=f[d];if(g){c(g,k+1)}}}c(b,0)},_OnBeforeLoad:function(a){var b=this._loadingNode||this.root;a.node=b;if(this._isNodeLoading()){a.async=true;a.isRoot=a.node==this.root;if(!a.isRoot){a.data[this.idField]=this.getItemValue(a.node)}}this.fire("beforeload",a)},_OnPreLoad:function(a){if(this.resultAsTree==false){a.data=mini.arrayToTree(a.data,this.nodesField,this.idField,this.parentField)}this.fire("preload",a)},_init:function(){mini.DataTree.superclass._init.call(this);this.root={_id:-1,_level:-1};this.source=this.root[this.nodesField]=[];this.viewNodes=null;this.dataview=null;this.visibleRows=null;this.list=null;this._ids[this.root._id]=this.root},llo0l1:function(d){d=d||[];this._doExpandOnLoad(d);this.source=this.root[this.nodesField]=d;this.viewNodes=null;this.dataview=null;this.visibleRows=null;this.list=null;var j=new Date(),g=mini.treeToArray(d,this.nodesField),c=this._ids;c[this.root._id]=this.root;var n=mini.DataSource.RecordId;for(var b=0,k=g.length;b<k;b++){var f=g[b];f._id=n++;c[f._id]=f;f._uid=f._id}mini.DataSource.RecordId=n;var i=this.checkedField,g=mini.treeToArray(d,this.nodesField,"_id","_pid",this.root._id);this.list=g;var c=this._ids,f,l,a;for(b=0,k=g.length;b<k;b++){f=g[b];l=c[f._pid];f._level=l._level+1;if(f._state){delete f._state}a=f[i];if(a){f.checked=a;if(f.checked){f.checked=f.checked!="false"}}}this._doUpdateLoadedCheckedNodes()},_setAdded:function(b){var a=this.getParentNode(b);b._id=mini.DataSource.RecordId++;if(this._autoCreateNewID&&!b[this.idField]){b[this.idField]=UUID()}b._uid=b._id;b._pid=a._id;if(a[this.idField]){b[this.parentField]=a[this.idField]}b._level=a._level+1;b._state="added";this._ids[b._id]=b;delete this.o1Oo[b[this.l0ol0O]]},o1OO:function(b){var a=b[this.nodesField];if(!a){a=b[this.nodesField]=[]}if(this.viewNodes&&!this.viewNodes[b._id]){this.viewNodes[b._id]=[]}return a},addNode:function(b,a){if(!b){return}return this.insertNode(b,-1,a)},addNodes:function(b,f,a){if(!mini.isArray(b)){return}if(mini.isNull(a)){a="add"}for(var g=0,d=b.length;g<d;g++){var c=b[g];this.insertNode(c,a,f)}},insertNodes:function(b,a,f){if(!mini.isNumber(a)){return}if(!mini.isArray(b)){return}if(!f){f=this.root}this.beginChange();var c=this.o1OO(f);if(a<0||a>c.length){a=c.length}b=b.clone();for(var g=0,d=b.length;g<d;g++){this.insertNode(b[g],a+g,f)}this.endChange();return b},removeNode:function(c){var a=this.getParentNode(c);if(!a){return}var b=this.indexOfNode(c);return this.removeNodeAt(b,a)},removeNodes:function(c){if(!mini.isArray(c)){return}this.beginChange();c=c.clone();for(var b=0,a=c.length;b<a;b++){this.removeNode(c[b])}this.endChange()},moveNodes:function(b,d,i){if(!b||b.length==0||!d||!i){return}this.beginChange();var a=this;mini.sort(b,function(k,j){return a.indexOf(k)>a.indexOf(j)},this);for(var g=0,f=b.length;g<f;g++){var c=b[g];this.moveNode(c,d,i);if(g!=0){d=c;i="after"}}this.endChange()},moveNode:function(f,i,a){if(!f||!i||mini.isNull(a)){return}if(this.viewNodes){var k=i,l=a;if(l=="before"){k=this.getParentNode(i);l=this.indexOfNode(i)}else{if(l=="after"){k=this.getParentNode(i);l=this.indexOfNode(i)+1}else{if(l=="add"||l=="append"){if(!k[this.nodesField]){k[this.nodesField]=[]}l=k[this.nodesField].length}else{if(!mini.isNumber(l)){return}}}}if(this.isAncestor(f,k)){return false}var b=this.viewNodes[k._id];if(!b){b=this.viewNodes[k._id]=[]}b=this.getChildNodes(k);if(l<0||l>b.length){l=b.length}var j={};b.insert(l,j);var d=this.getParentNode(f),g=this.getChildNodes(d);g.remove(f);l=b.indexOf(j);b[l]=f}k=i,l=a,b=this.o1OO(k);if(l=="before"){k=this.getParentNode(i);b=this.o1OO(k);l=b.indexOf(i)}else{if(l=="after"){k=this.getParentNode(i);b=this.o1OO(k);l=b.indexOf(i)+1}else{if(l=="add"||l=="append"){l=b.length}else{if(!mini.isNumber(l)){return}}}}if(this.isAncestor(f,k)){return false}if(l<0||l>b.length){l=b.length}j={};b.insert(l,j);d=this.getParentNode(f);d[this.nodesField].remove(f);l=b.indexOf(j);b[l]=f;this.OlOO0(f,k);this.lOoo0();var c={oldParentNode:d,parentNode:k,index:l,node:f};this.fire("movenode",c)},insertNode:function(f,g,c){if(!f){return}if(!c){c=this.root;g="add"}if(!mini.isNumber(g)){switch(g){case"before":g=this.indexOfNode(c);c=this.getParentNode(c);f=this.insertNode(f,g,c);break;case"after":g=this.indexOfNode(c);c=this.getParentNode(c);f=this.insertNode(f,g+1,c);break;case"append":case"add":f=this.addNode(f,c);break;default:break}return f}var b=this.o1OO(c),a=this.getChildNodes(c);if(g<0||g>a.length){g=a.length}a.insert(g,f);if(this.viewNodes){var j=a[g-1];if(j){var d=b.indexOf(j);b.insert(d+1,f)}else{b.insert(0,f)}}f._pid=c._id;this._setAdded(f);if(f[this.nodesField]){this.cascadeChild(f,function(k,l,n){k._pid=n._id;this._setAdded(k)},this)}this.lOoo0();var i={parentNode:c,index:g,node:f};this.fire("addnode",i);return f},removeNodeAt:function(f,d){if(!d){d=this.root}var a=this.getChildNodes(d),c=a[f];if(!c){return null}a.removeAt(f);if(this.viewNodes){var b=d[this.nodesField];b.remove(c)}this._setRemoved(c);this.cascadeChild(c,function(i,j,k){this._setRemoved(i)},this);this.l1oO0O();this.lOoo0();var g={parentNode:d,index:f,node:c};this.fire("removenode",g);return c},bubbleParent:function(c,a,b){b=b||this;if(c){a.call(this,c)}var d=this.getParentNode(c);if(d&&d!=this.root){this.bubbleParent(d,a,b)}},cascadeChild:function(d,g,i){if(!g){return}if(!d){d=this.root}var b=this.getChildNodes(d);if(b){b=b.clone();for(var f=0,c=b.length;f<c;f++){var a=b[f];if(g.call(i||this,a,f,d)===false){return}this.cascadeChild(a,g,i)}}},eachChild:function(f,j,a){if(!j||!f){return}var b=f[this.nodesField];if(b){var g=b.clone();for(var i=0,d=g.length;i<d;i++){var c=g[i];if(j.call(a||this,c,i,f)===false){break}}}},collapse:function(c,b){c=this.getNode(c);if(!c){return}this.beginChange();c.expanded=false;if(b){this.eachChild(c,function(d){if(d[this.nodesField]!=null){this.collapse(d,b)}},this)}this.endChange("collapse");var a={node:c};this.fire("collapse",a)},expand:function(c,b){c=this.getNode(c);if(!c){return}this.beginChange();c.expanded=true;if(b){this.eachChild(c,function(d){if(d[this.nodesField]!=null){this.expand(d,b)}},this)}this.endChange("expand");var a={node:c};this.fire("expand",a)},toggle:function(a){if(this.isExpandedNode(a)){this.collapse(a)}else{this.expand(a)}},expandNode:function(a){this.expand(a)},collapseNode:function(a){this.collapse(a)},collapseAll:function(){this.collapse(this.root,true)},expandAll:function(){this.expand(this.root,true)},collapseLevel:function(a,b){this.beginChange();this.each(function(c){var d=this.getLevel(c);if(a==d){this.collapse(c,b)}},this);this.endChange()},expandLevel:function(a,b){this.beginChange();this.each(function(c){var d=this.getLevel(c);if(a==d){this.expand(c,b)}},this);this.endChange()},expandPath:function(c){c=this.getNode(c);if(!c){return}var b=this.getAncestors(c);for(var a=0,d=b.length;a<d;a++){this.expandNode(b[a])}},collapsePath:function(c){c=this.getNode(c);if(!c){return}var b=this.getAncestors(c);for(var a=0,d=b.length;a<d;a++){this.collapseNode(b[a])}},isAncestor:function(f,c){if(f==c){return true}if(!f||!c){return false}if(f==this.getRootNode()){return true}var b=this.getAncestors(c);for(var a=0,d=b.length;a<d;a++){if(b[a]==f){return true}}return false},getAncestors:function(c){var b=[];while(1){var a=this.getParentNode(c);if(!a||a==this.root){break}b[b.length]=a;c=a}b.reverse();return b},getNode:function(a){if(typeof a=="object"){return a}return this.getRecord(a)},getRootNode:function(){return this.root},getParentNode:function(a){if(!a){return null}return this.getby_id(a._pid)},getAllChildNodes:function(a){return this.getChildNodes(a,true)},getChildNodes:function(g,f,d){g=this.getNode(g);if(!g){g=this.getRootNode()}var b=g[this.nodesField];if(this.viewNodes&&d!==false){b=this.viewNodes[g._id]}if(f===true&&b){var c=[];for(var k=0,j=b.length;k<j;k++){var a=b[k];c[c.length]=a;var i=this.getChildNodes(a,f,d);if(i&&i.length>0){c.addRange(i)}}b=c}return b||[]},getChildNodeAt:function(a,c){var b=this.getChildNodes(c);if(b){return b[a]}return null},hasChildNodes:function(b){var a=this.getChildNodes(b);return a.length>0},getLevel:function(a){return a._level},_is_true:function(a){return String(a)=="true"||a===1||a==="Y"||a==="y"},_is_false:function(a){return String(a)=="false"||a===0||a==="N"||a==="n"},leafField:"isLeaf",isLeafNode:function(a){return this.isLeaf(a)},isLeaf:function(c){if(!c){return false}var a=c[this.leafField];if(!c||this._is_false(a)){return false}var b=this.getChildNodes(c,false,false);if(b.length>0){return false}return true},hasChildren:function(b){var a=this.getChildNodes(b);return !!(a&&a.length>0)},isFirstNode:function(b){if(b==this.root){return true}var a=this.getParentNode(b);if(!a){return false}return this.getFirstNode(a)==b},isLastNode:function(b){if(b==this.root){return true}var a=this.getParentNode(b);if(!a){return false}return this.getLastNode(a)==b},isCheckedNode:function(a){return a.checked===true},isExpandedNode:function(a){return a.expanded==true||a.expanded==1||mini.isNull(a.expanded)},isEnabledNode:function(a){return a.enabled!==false},isVisibleNode:function(b){if(b.visible==false){return false}var a=this._ids[b._pid];if(!a||a==this.root){return true}if(a.expanded===false){return false}return this.isVisibleNode(a)},getNextNode:function(c){var a=this.getby_id(c._pid);if(!a){return null}var b=this.indexOfNode(c);return this.getChildNodes(a)[b+1]},getPrevNode:function(c){var a=this.getby_id(c._pid);if(!a){return null}var b=this.indexOfNode(c);return this.getChildNodes(a)[b-1]},getFirstNode:function(a){return this.getChildNodes(a)[0]},getLastNode:function(a){var b=this.getChildNodes(a);return b[b.length-1]},indexOfNode:function(b){var a=this.getby_id(b._pid);if(a){return this.getChildNodes(a).indexOf(b)}return -1},indexOfList:function(a){return this.getList().indexOf(a)},getAt:function(a){return this.getVisibleRows()[a]},indexOf:function(a){return this.getVisibleRows().indexOf(a)},getRange:function(a,g){if(a>g){var f=a;a=g;g=f}var b=this.getChildNodes(this.root,true),j=[];for(var i=a,d=g;i<=d;i++){var c=b[i];if(c){j.push(c)}}return j},selectRange:function(a,d){var b=this.getChildNodes(this.root,true);if(!mini.isNumber(a)){a=b.indexOf(a)}if(!mini.isNumber(d)){d=b.indexOf(d)}if(mini.isNull(a)||mini.isNull(d)){return}var c=this.getRange(a,d);this.selects(c)},findRecords:function(j,g){var o=this.toArray(),p=typeof j=="function",c=j,k=g||this,d=[];if(!mini.isNull(g)){g=String(g)}for(var b=0,r=o.length;b<r;b++){var q=o[b];if(p){var f=c.call(k,q);if(f==true){d[d.length]=q}if(f===1){break}}else{if(g.indexOf(",")!=-1){var i=g.split(",");for(var a=0,n=i.length;a<n;a++){var l=i[a];if(q[j]==l){d[d.length]=q}}}else{if(q[j]==g){d[d.length]=q}}}}return d},lOoo0Count:0,lOoo0:function(a){this.lOoo0Count++;if(a!="update"){this.ids=null;this.dataview=null;this.visibleRows=null;if(a=="collapse"||a=="expand"||a=="loaddata"){}else{this.list=null}}if(this.__changeCount==0){this.fire("datachanged")}},oO1OView:function(){var a=!this.viewNodes?this.getList():this.getChildNodes(this.root,true);return a},_createVisibleRows:function(){var a=[],i=this.nodesField,g=this.viewNodes,f=!!g,d,j;function b(k){return f?g[k._id]:k[i]}function c(n){for(var l=0,k=n.length;l<k;l++){d=n[l];a[a.length]=d;if(d.expanded===false){}else{j=b(d);if(j){c(j)}}}}c(b(this.root));return a},getList:function(){if(!this.list){this.list=mini.treeToList(this.source,this.nodesField)}return this.list},getDataView:function(){if(!this.dataview){this.dataview=this.oO1OView()}return this.dataview},getVisibleRows:function(){if(!this.visibleRows){this.visibleRows=this._createVisibleRows()}return this.visibleRows},o0oOl:function(){if(!this._filterInfo){this.viewNodes=null;return}var d=this._filterInfo[0],b=this._filterInfo[1],a=this.viewNodes={},f=this.nodesField;function c(p){var n=p[f];if(!n){return false}var k=p._id,i=a[k]=[];for(var l=0,j=n.length;l<j;l++){var o=n[l],g=c(o),q=d.call(b,o,l,this);if(q===true||g){i.push(o)}}return i.length>0}c(this.root)},lo0ool:function(){if(!this._filterInfo&&!this._sortInfo){this.viewNodes=null;return}if(!this._sortInfo){return}var g=this._sortInfo[0],b=this._sortInfo[1],d=this._sortInfo[2],a=this.nodesField;if(!this.viewNodes){var i=this.viewNodes={};i[this.root._id]=this.root[a].clone();this.cascadeChild(this.root,function(j,l,k){var n=j[a];if(n){i[j._id]=n.clone()}})}var c=this;function f(j){var n=c.getChildNodes(j);mini.sort(n,g,b);if(d){n.reverse()}for(var l=0,k=n.length;l<k;l++){var o=n[l];f(o)}}f(this.root)},toArray:function(){if(!this._array||this.lOoo0Count!=this.lOoo0Count2){this.lOoo0Count2=this.lOoo0Count;this._array=this.getChildNodes(this.root,true,false)}return this._array},toTree:function(){return this.root[this.nodesField]},isChanged:function(){return this.getChanges().length>0},getChanges:function(d,a){var c=[];if(d=="removed"||d==null){c.addRange(this._removeds.clone())}this.cascadeChild(this.root,function(n,p,o){if(n._state==null||n._state==""){return}if(n._state==d||d==null){c[c.length]=n}},this);var k=c;if(a){for(var b=0,j=k.length;b<j;b++){var l=k[b];if(l._state=="modified"){var f={};f._state=l._state;f[this.idField]=l[this.idField];for(var i in l){var g=this.isModified(l,i);if(g){f[i]=l[i]}}k[b]=f}}}return c},accept:function(a){a=a||this.root;this.beginChange();this.cascadeChild(this.root,function(b){this.acceptRecord(b)},this);this._removeds=[];this.o1Oo={};this.endChange()},reject:function(a){this.beginChange();this.cascadeChild(this.root,function(b){this.rejectRecord(b)},this);this._removeds=[];this.o1Oo={};this.endChange()},acceptRecord:function(a){if(!a._state){return}delete this.o1Oo[a[this.l0ol0O]];if(a._state=="deleted"){this.removeNode(a)}else{delete a._state;delete this.o1Oo[a[this.l0ol0O]];this.lOoo0();this.fire("update",{record:a})}},rejectRecord:function(b){if(!b._state){return}if(b._state=="added"){this.removeNode(b)}else{if(b._state=="modified"||b._state=="deleted"){var a=this.olol1l(b);mini.copyTo(b,a);delete b._state;delete this.o1Oo[b[this.l0ol0O]];this.lOoo0();this.fire("update",{record:b})}}},upGrade:function(g){var d=this.getParentNode(g);if(d==this.root||g==this.root){return false}var j=d[this.nodesField],a=j.indexOf(g),f=g[this.nodesField]?g[this.nodesField].length:0;for(var k=j.length-1;k>=a;k--){var i=j[k];j.removeAt(k);if(i!=g){if(!g[this.nodesField]){g[this.nodesField]=[]}g[this.nodesField].insert(f,i)}}var b=this.getParentNode(d),c=b[this.nodesField],a=c.indexOf(d);c.insert(a+1,g);this.OlOO0(g,b);this.o0oOl();this.lOoo0()},downGrade:function(c){if(this.isFirstNode(c)){return false}var a=this.getParentNode(c),b=a[this.nodesField],f=b.indexOf(c),d=b[f-1];b.removeAt(f);if(!d[this.nodesField]){d[this.nodesField]=[]}d[this.nodesField].add(c);this.OlOO0(c,d);this.o0oOl();this.lOoo0()},OlOO0:function(c,a){var b=this;c._pid=a._id;c._level=a._level+1;c[b.parentField]=a[b.idField];if(!c[b.parentField]){c[b.parentField]=a._id}this.cascadeChild(c,function(g,d,f){g._pid=f._id;g._level=f._level+1;g[b.parentField]=f[b.idField]},this);this._setModified(c)},setCheckModel:function(a){this.checkModel=a},getCheckModel:function(){return this.checkModel},setOnlyLeafCheckable:function(a){this.onlyLeafCheckable=a},getOnlyLeafCheckable:function(){return this.onlyLeafCheckable},setAutoCheckParent:function(a){this.autoCheckParent=a},getAutoCheckParent:function(){return this.autoCheckParent},_doUpdateLoadedCheckedNodes:function(){var b=this.getList();for(var a=0,d=b.length;a<d;a++){var c=b[a];if(c.checked==true){if(this.autoCheckParent==false||!this.hasChildNodes(c)){this._doUpdateNodeCheckState(c)}}}},_doUpdateNodeCheckState:function(j){if(!j){return}var g=this.isChecked(j);if(this.checkModel=="cascade"||this.autoCheckParent){this.cascadeChild(j,function(q){this.doCheckNodes(q,g)},this);if(!this.autoCheckParent){var p=this.getAncestors(j);p.reverse();for(var o=0,n=p.length;o<n;o++){var l=p[o],b=this.getChildNodes(l),d=true;for(var f=0,k=b.length;f<k;f++){var c=b[f];if(!this.isCheckedNode(c)){d=false}}if(d){this.doCheckNodes(l,true)}else{this.doCheckNodes(l,false)}this.fire("checkchanged",{nodes:[l],_nodes:[l]})}}}var i=this;function a(t){var u=i.getChildNodes(t);for(var s=0,r=u.length;s<r;s++){var q=u[s];if(i.isCheckedNode(q)){return true}}return false}if(this.autoCheckParent){p=this.getAncestors(j);p.reverse();for(o=0,n=p.length;o<n;o++){l=p[o];l.checked=a(l);this.fire("checkchanged",{nodes:[l],_nodes:[l]})}}},doCheckNodes:function(b,g,a){if(!b){return}if(typeof b=="string"){b=b.split(",")}if(!mini.isArray(b)){b=[b]}b=b.clone();var d=[];g=g!==false;if(a===true){if(this.checkModel=="single"){this.uncheckAllNodes()}}for(var f=b.length-1;f>=0;f--){var c=this.getRecord(b[f]);if(!c||(g&&c.checked===true)||(!g&&c.checked!==true)){if(c){if(a===true){this._doUpdateNodeCheckState(c)}if(!g&&!this.isLeaf(c)){d.push(c)}}continue}c.checked=g;d.push(c);if(a===true){this._doUpdateNodeCheckState(c)}}var i=this;setTimeout(function(){i.fire("_checkchanged",{nodes:b,_nodes:d,checked:g})},1)},checkNode:function(b,a){this.doCheckNodes([b],true,a!==false)},uncheckNode:function(b,a){this.doCheckNodes([b],false,a!==false)},checkNodes:function(b,a){if(!mini.isArray(b)){b=[]}this.doCheckNodes(b,true,a!==false)},uncheckNodes:function(b,a){if(!mini.isArray(b)){b=[]}this.doCheckNodes(b,false,a!==false)},checkAllNodes:function(){var a=this.getList();this.doCheckNodes(a,true,false)},uncheckAllNodes:function(){var a=this.getList();this.doCheckNodes(a,false,false)},doGetCheckedNodes:function(g,l){if(l===false){l="leaf"}var i=[],f={};for(var b=0,a=g.length;b<a;b++){var k=g[b],n=this.isLeafNode(k);if(l===true){if(!f[k._id]){f[k._id]=k;i.push(k)}var j=this.getAncestors(k);for(var d=0,o=j.length;d<o;d++){var c=j[d];if(!f[c._id]){f[c._id]=c;i.push(c)}}}else{if(l==="parent"){if(!n){if(!f[k._id]){f[k._id]=k;i.push(k)}}}else{if(l==="leaf"){if(n){if(!f[k._id]){f[k._id]=k;i.push(k)}}}else{if(!f[k._id]){f[k._id]=k;i.push(k)}}}}}return i},getCheckedNodes:function(b){var a=[];this.cascadeChild(this.root,function(c){if(c.checked==true){a.push(c)}});a=this.doGetCheckedNodes(a,b);return a},getCheckedNodesId:function(c,d){var b=this.getCheckedNodes(c),a=this.oO1l(b,d);return a[0]},getCheckedNodesText:function(c,d){var b=this.getCheckedNodes(c),a=this.oO1l(b,d);return a[1]},isChecked:function(a){a=this.getRecord(a);if(!a){return null}return a.checked===true||a.checked===1},getCheckState:function(c){c=this.getRecord(c);if(!c){return null}if(c.checked===true){return"checked"}if(!c[this.nodesField]){return"unchecked"}if(c.indeterminate){return"indeterminate"}var b=this.getChildNodes(c,true);for(var a=0,d=b.length;a<d;a++){var c=b[a];if(c.checked===true){return"indeterminate"}}return"unchecked"},getUnCheckableNodes:function(){var a=[];this.cascadeChild(this.root,function(c){var b=this.getCheckable(c);if(b==false){a.push(c)}},this);return a},setCheckable:function(b,a){if(!b){return}if(!mini.isArray(b)){b=[b]}b=b.clone();a=!!a;for(var d=b.length-1;d>=0;d--){var c=this.getRecord(b[d]);if(!c){continue}c.checkable=checked}},getCheckable:function(a){a=this.getRecord(a);if(!a){return false}if(a.checkable===true){return true}if(a.checkable===false){return false}return this.isLeafNode(a)?true:!this.onlyLeafCheckable},showNodeCheckbox:function(b,a){},reload:function(c,b,a){this._loadingNode=null;this.load(this.loadParams,c,b,a)},_isNodeLoading:function(){return !!this._loadingNode},loadNode:function(c,b){this._loadingNode=c;var a={node:c};this.fire("beforeloadnode",a);var d=new Date(),f=this;f._doLoadAjax(f.loadParams,null,null,null,function(i){var g=new Date()-d;if(g<60){g=60-g}setTimeout(function(){i.node=c;f._OnPreLoad(i);f._loadingNode=null;if(f.loadParams){delete f.loadParams[f.idField]}var k=c[f.nodesField];f.removeNodes(k);var p=i.data;if(p&&p.length>0){f.collapse(c);f.addNodes(p,c);var j=f.getAllChildNodes(c);for(var o=0,n=j.length;o<n;o++){var l=j[o];delete l._state}if(b!==false){f.expand(c,true)}else{f.collapse(c,true)}}else{delete c[f.leafField];f.expand(c,true)}f.fire("loadnode",i);f.fire("load",i)},g)},true)}});mini.regClass(mini.DataTree,"datatree");mini.ColumnModel=function(a){this.owner=a;mini.ColumnModel.superclass.constructor.apply(this,arguments);this._init()};mini.ColumnModel_ColumnID=1;mini.extend(mini.ColumnModel,Component,{_defaultColumnWidth:100,_init:function(){this.columns=[];this._columnsRow=[];this._visibleColumnsRow=[];this.lo10=[];this._visibleColumns=[];this.l0oo={};this.OOlllO={};this._fieldColumns={}},getColumns:function(){return this.columns},getAllColumns:function(){var c=[];for(var a in this.l0oo){var b=this.l0oo[a];c.push(b)}return c},getColumnsRow:function(){return this._columnsRow},getVisibleColumnsRow:function(){return this._visibleColumnsRow},getBottomColumns:function(){return this.lo10},getVisibleColumns:function(){return this._visibleColumns},_getBottomColumnsByColumn:function(g){g=this.getColumn(g);var a=this.lo10,c=[];for(var f=0,d=a.length;f<d;f++){var b=a[f];if(this.isAncestorColumn(g,b)){c.push(b)}}return c},_getVisibleColumnsByColumn:function(g){g=this.getColumn(g);var a=this._visibleColumns,c=[];for(var f=0,d=a.length;f<d;f++){var b=a[f];if(this.isAncestorColumn(g,b)){c.push(b)}}return c},setColumns:function(a){if(!mini.isArray(a)){a=[]}this._init();this.columns=a;this._columnsChanged()},_columnsChanged:function(){this._updateColumnsView();this.fire("columnschanged")},columnDefaults:{allowCellWrap:false},_updateColumnsView:function(){this._maxColumnLevel=0;var A=0;function $(B,D,F){if(B.type){if(!mini.isNull(B.header)&&typeof B.header!=="function"){if(B.header.trim()==""){delete B.header}}var _=mini._getColumn(B.type);if(_){var E=mini.copyTo({},B);mini.copyTo(B,_);mini.copyTo(B,E)}}if(!B._id){B._id=mini.ColumnModel_ColumnID++}B._pid=F==this?-1:F._id;this.l0oo[B._id]=B;if(B.name){this.OOlllO[B.name]=B}B._level=A;A+=1;this.eachColumns(B,$,this);A-=1;if(B._level>this._maxColumnLevel){this._maxColumnLevel=B._level}var C=parseInt(B.width);if(mini.isNumber(C)&&String(C)==B.width){B.width=C+"px"}if(mini.isNull(B.width)){B.width=this._defaultColumnWidth+"px"}if(String(B.width).indexOf("px")){B.pxWidth=parseInt(B.width)}B.visible=B.visible!==false;B.allowResize=B.allowResize!==false;B.allowMove=B.allowMove!==false;B.allowSort=B.allowSort===true;B.allowDrag=!!B.allowDrag;B.readOnly=!!B.readOnly;B.autoEscape=!!B.autoEscape;B.enabled=B.enabled!==false;B.showCellTip=B.showCellTip!==false;B.valueFromSelect=B.valueFromSelect!==false;B.vtype=B.vtype||"";if(B.allowCellWrap==null){B.allowCellWrap=this.columnDefaults.allowCellWrap}if(typeof B.filter=="string"){B.filter=window.eval("("+B.filter+")")}if(B.filter&&!B.filter.el){B.filter=mini.create(B.filter)}if(typeof B.init=="function"&&B.inited!=true){B.init(this.owner)}B.inited=true;B._gridUID=this.owner.uid;B._rowIdField=this.owner._rowIdField}this.eachColumns(this,$,this);this._createColumnsRow();var D=0,_=this._visibleColumns=[],G=this.lo10=[];this.cascadeColumns(this,function($){if(!$.columns||$.columns.length==0){G.push($);if(this.isVisibleColumn($)){_.push($);$._index=D++}}},this);this._fieldColumns={};var B=this.getAllColumns();for(var E=0,F=B.length;E<F;E++){var C=B[E];if(C.field&&!this._fieldColumns[C.field]){this._fieldColumns[C.field]=C}}this._createFrozenColSpan()},_frozenStartColumn:-1,_frozenEndColumn:-1,isFrozen:function(){return this._frozenStartColumn>=0&&this._frozenEndColumn>=this._frozenStartColumn},isFrozenColumn:function(b){if(!this.isFrozen()){return false}b=this.getColumn(b);if(!b){return false}var a=this.getVisibleColumns().indexOf(b);return this._frozenStartColumn<=a&&a<=this._frozenEndColumn},frozen:function(b,c){b=this.getColumn(b);c=this.getColumn(c);var a=this.getVisibleColumns();this._frozenStartColumn=a.indexOf(b);this._frozenEndColumn=a.indexOf(c);if(b&&c){this._columnsChanged()}},unFrozen:function(){this._frozenStartColumn=-1;this._frozenEndColumn=-1;this._columnsChanged()},setFrozenStartColumn:function(a){this.frozen(a,this._frozenEndColumn)},setFrozenEndColumn:function(a){this.frozen(this._frozenStartColumn,a)},getFrozenColumns:function(){var c=[],a=this.isFrozen();for(var b=0,d=this._visibleColumns.length;b<d;b++){if(a&&this._frozenStartColumn<=b&&b<=this._frozenEndColumn){c.push(this._visibleColumns[b])}}return c},getUnFrozenColumns:function(){var c=[],a=this.isFrozen();for(var b=0,d=this._visibleColumns.length;b<d;b++){if((a&&b>this._frozenEndColumn)||!a){c.push(this._visibleColumns[b])}}return c},getFrozenColumnsRow:function(){return this.isFrozen()?this._columnsRow1:[]},getUnFrozenColumnsRow:function(){return this.isFrozen()?this._columnsRow2:this.getVisibleColumnsRow()},_createFrozenColSpan:function(){var i=this,j=this.getVisibleColumns(),t=this._frozenStartColumn,g=this._frozenEndColumn;function q(u,E){var v=i.isBottomColumn(u)?[u]:i._getVisibleColumnsByColumn(u);for(var z=0,w=v.length;z<w;z++){var x=v[z],y=j.indexOf(x);if(E==0&&y<t){return true}if(E==1&&t<=y&&y<=g){return true}if(E==2&&y>g){return true}}return false}function k(x,y){var G=mini.treeToList(x.columns,"columns"),z=0;for(var w=0,v=G.length;w<v;w++){var u=G[w];if(i.isVisibleColumn(u)==false||q(u,y)==false){continue}if(!u.columns||u.columns.length==0){z+=1}}return z}var n=mini.treeToList(this.columns,"columns");for(var r=0,l=n.length;r<l;r++){var s=n[r];delete s.colspan0;delete s.colspan1;delete s.colspan2;delete s.viewIndex0;delete s.viewIndex1;delete s.viewIndex2;if(this.isFrozen()){if(s.columns&&s.columns.length>0){s.colspan1=k(s,1);s.colspan2=k(s,2);s.colspan0=k(s,0)}else{s.colspan1=1;s.colspan2=1;s.colspan0=1}if(q(s,0)){s["viewIndex"+0]=true}if(q(s,1)){s["viewIndex"+1]=true}if(q(s,2)){s["viewIndex"+2]=true}}}var f=this._getMaxColumnLevel();this._columnsRow1=[];this._columnsRow2=[];for(r=0,l=this._visibleColumnsRow.length;r<l;r++){var a=this._visibleColumnsRow[r],c=[],d=[];this._columnsRow1.push(c);this._columnsRow2.push(d);for(var p=0,o=a.length;p<o;p++){var b=a[p];if(b.viewIndex1){c.push(b)}if(b.viewIndex2){d.push(b)}}}},_createColumnsRow:function(){var f=this._getMaxColumnLevel(),d=[],j=[];for(var n=0,l=f;n<=l;n++){d.push([]);j.push([])}var b=this;function g(r){var o=mini.treeToList(r.columns,"columns"),t=0;for(var s=0,q=o.length;s<q;s++){var p=o[s];if(b.isVisibleColumn(p)==false){continue}if(!p.columns||p.columns.length==0){t+=1}}return t}var k=mini.treeToList(this.columns,"columns");for(n=0,l=k.length;n<l;n++){var a=k[n],i=d[a._level],c=j[a._level];delete a.rowspan;delete a.colspan;if(a.columns&&a.columns.length>0){a.colspan=g(a)}if((!a.columns||a.columns.length==0)&&a._level<f){a.rowspan=f-a._level+1}i.push(a);if(this.isVisibleColumn(a)){c.push(a)}}this._columnsRow=d;this._visibleColumnsRow=j},_getMaxColumnLevel:function(){return this._maxColumnLevel},cascadeColumns:function(d,g,i){if(!g){return}var b=d.columns;if(b){b=b.clone();for(var f=0,c=b.length;f<c;f++){var a=b[f];if(g.call(i||this,a,f,d)===false){return}this.cascadeColumns(a,g,i)}}},eachColumns:function(a,j,b){var f=a.columns;if(f){var g=f.clone();for(var i=0,d=g.length;i<d;i++){var c=g[i];if(j.call(b,c,i,a)===false){break}}}},getColumn:function(a){var b=typeof a;if(b=="number"){return this.lo10[a]}else{if(b=="object"){return a}else{return this.OOlllO[a]}}},getColumnByField:function(a){if(!a){return null}return this._fieldColumns[a]},llO0:function(a){return this.l0oo[a]},_getDataTypeByField:function(c){var b="string",a=this.getBottomColumns();for(var f=0,d=a.length;f<d;f++){var g=a[f];if(g.field==c){if(g.sortType){b=g.sortType.toLowerCase()}else{if(g.dataType){b=g.dataType.toLowerCase()}}break}}return b},getParentColumn:function(b){b=this.getColumn(b);var a=b._pid;if(a==-1){return this}return this.l0oo[a]},getAncestorColumns:function(c){var b=[c];while(1){var a=this.getParentColumn(c);if(!a||a==this){break}b[b.length]=a;c=a}b.reverse();return b},isAncestorColumn:function(f,c){if(f==c){return true}if(!f||!c){return false}var b=this.getAncestorColumns(c);for(var a=0,d=b.length;a<d;a++){if(b[a]==f){return true}}return false},isVisibleColumn:function(i){i=this.getColumn(i);if(i.visible==false){return false}var a=this.getAncestorColumns(i);for(var g=0,f=a.length;g<f;g++){if(a[g].visible==false){return false}}var b=i.columns;if(b){var d=true;for(g=0,f=b.length;g<f;g++){var c=b[g];if(this.isVisibleColumn(c)){d=false;break}}if(d){return false}}return true},isBottomColumn:function(a){a=this.getColumn(a);return !(a.columns&&a.columns.length>0)},updateColumn:function(b,a){b=this.getColumn(b);if(!b){return}mini.copyTo(b,a);this._columnsChanged()},moveColumn:function(b,c,a){b=this.getColumn(b);c=this.getColumn(c);if(!b||!c||!a||b==c){return}if(this.isAncestorColumn(b,c)){return}var d=this.getParentColumn(b);if(d){d.columns.remove(b)}var f=c,g=a;if(g=="before"){f=this.getParentColumn(c);g=f.columns.indexOf(c)}else{if(g=="after"){f=this.getParentColumn(c);g=f.columns.indexOf(c)+1}else{if(g=="add"||g=="append"){if(!f.columns){f.columns=[]}g=f.columns.length}else{if(!mini.isNumber(g)){return}}}}f.columns.insert(g,b);this._columnsChanged()},addColumn:function(a){if(!a){return}delete a._id;this._columnsChanged()},removeColumn:function(){this._columnsChanged()}});mini.GridView=function(){this._createTime=new Date();this._createColumnModel();this._bindColumnModel();this.data=[];this._createSource();this.oOlOoO();this._initData();mini.GridView.superclass.constructor.apply(this,arguments);this.ooo1O();this.lolOOO();this.doUpdate();if(mini.isNull(this._paddingTop)){if(mini.isNull(mini.GridView._paddingTop)){var a=jQuery('<div class="mini-grid-cell-inner" style="position:absolute;left:-1000px;top:-1000px;"></div>').appendTo("body"),b=__padding(a);mini.GridView._paddingTop=b.top;mini.GridView._paddingBottom=b.bottom}this._paddingTop=mini.GridView._paddingTop;this._paddingBottom=mini.GridView._paddingBottom}this.o0olo1Hash={}};mini.extend(mini.GridView,Panel,{_style_display:"block",_rowIdField:"_id",width:"100%",showSortIcon:false,showColumns:true,showFilterRow:false,showSummaryRow:false,summaryRows:1,showPager:false,allowCellWrap:false,allowHeaderWrap:false,showModified:true,showNewRow:true,showEmptyText:false,emptyText:"没有返回的数据",showHGridLines:true,showVGridLines:true,o0olo1:"mini-grid-row",_cellCls:"mini-grid-cell",_headerCellCls:"mini-grid-headerCell",o1lo:"mini-grid-row-selected",o1OlOl:"mini-grid-row-hover",ololo:"mini-grid-cell-selected",defaultRowHeight:25,fixedRowHeight:false,isFixedRowHeight:function(){return this.fixedRowHeight},fitColumns:true,isFitColumns:function(){return this.fitColumns},allowAlternating:false,l1llo0:"mini-grid-row-alt",getAllowAlternating:function(){return this.allowAlternating},setAllowAlternating:function(a){this.allowAlternating=a;this.doUpdate()},showGroupSummary:false,getShowGroupSummary:function(){return this.showGroupSummary},setShowGroupSummary:function(a){this.showGroupSummary=a},summaryPosition:"bottom",getSummaryPosition:function(){return this.summaryPosition},setSummaryPosition:function(a){this.summaryPosition=a;if(this.summaryPosition=="top"){mini.before(this._rowsEl,this.ol1Olo);mini.before(this._summaryViewEl,this._summaryLockEl)}jQuery(this.el).toggleClass("mini-grid-summary-top",a=="top")},uiCls:"mini-gridview",_create:function(){mini.GridView.superclass._create.call(this);var f=this.el;__cls_add(f,"mini-grid");__cls_add(this._borderEl,"mini-grid-border");__cls_add(this.O0l0o1,"mini-grid-viewport");var d='<div class="mini-grid-pager"></div>',b='<div class="mini-grid-filterRow"><div class="mini-grid-filterRow-view"></div><div class="mini-grid-scrollHeaderCell"></div></div>',a='<div class="mini-grid-summaryRow"><div class="mini-grid-summaryRow-view"></div><div class="mini-grid-scrollHeaderCell"></div></div>',g='<div class="mini-grid-columns"><div class="mini-grid-columns-view"></div><div class="mini-grid-scrollHeaderCell"></div></div>';this._columnsEl=mini.after(this.OlO0O,g);this.oOOOo1=mini.after(this._columnsEl,b);this._rowsEl=this.o0Olll;__cls_add(this._rowsEl,"mini-grid-rows");this.ol1Olo=mini.after(this._rowsEl,a);this._bottomPagerEl=mini.after(this.ol1Olo,d);this._columnsViewEl=this._columnsEl.childNodes[0];this._rowsViewEl=mini.append(this._rowsEl,'<div class="mini-grid-rows-view"><div class="mini-grid-rows-content"></div></div>');this._rowsViewContentEl=this._rowsViewEl.firstChild;this._filterViewEl=this.oOOOo1.childNodes[0];this._summaryViewEl=this.ol1Olo.childNodes[0];var i='<a href="#" class="mini-grid-focus" style="position:absolute;left:0px;top:0px;width:0px;height:0px;outline:none;" hideFocus onclick="return false" ></a>';this._focusEl=mini.append(this._borderEl,i);var c=this;mini.on(this._filterViewEl,"scroll",function(j){if(c._filterViewEl.scrollLeft>0){c._filterViewEl.scrollLeft=0}})},destroy:function(b){if(this._dataSource){this._dataSource.destroy();this._dataSource=null}if(this._columnModel){this._columnModel.destroy();this._columnModel=null}if(this._pagers){var c=this._pagers.clone();for(var a=0,d=c.length;a<d;a++){c[a].destroy(b)}this._pagers=null}if(this.O0l0o1){mini.clearEvent(this.O0l0o1)}if(this._rowsViewEl){mini.clearEvent(this._rowsViewEl)}if(this._rowsEl){mini.clearEvent(this._rowsEl)}if(this._vscrollEl){mini.clearEvent(this._vscrollEl)}if(this.ll0O){mini.clearEvent(this.ll0O)}if(this._columnsEl){jQuery(this._columnsEl).unbind("mouseenter");jQuery(this._columnsEl).unbind("mouseleave")}this._columnsEl=this._rowsEl=this.oOOOo1=this.ol1Olo=this._bottomPagerEl=null;this._columnsViewEl=this._topRightCellEl=this._rowsViewEl=this._rowsViewContentEl=null;this._filterViewEl=this._summaryViewEl=this._focusEl=null;this.O0l0o1=this._vscrollEl=this._bottomPager=null;mini.GridView.superclass.destroy.call(this,b)},_initEvents:function(){mini.GridView.superclass._initEvents.call(this);this._bindScrollEvent()},_bindScrollEvent:function(){var a=this;this._unbindScrollEvent();this._scrollBindTimer=setTimeout(function(){mini.on(a._rowsViewEl,"scroll",a.__OnRowViewScroll,a)},100)},_unbindScrollEvent:function(){var a=this;if(this._scrollBindTimer){clearTimeout(this._scrollBindTimer);this._scrollBindTimer=null}mini.un(this._rowsViewEl,"scroll",this.__OnRowViewScroll,this)},_syncScrollOffset:function(a,b){this._unbindScrollEvent();if(a!=null){this._rowsViewEl.scrollLeft=a}if(b!=null){this._rowsViewEl.scrollTop=b;if(this._vscrollEl){}}this._bindScrollEvent()},_sizeChanged:function(){mini.GridView.superclass._sizeChanged.call(this);var a=this.isAutoHeight();if(mini.isIE){if(a){__cls_add(this._rowsViewEl,"mini-grid-hidden-y")}else{__cls_rm(this._rowsViewEl,"mini-grid-hidden-y")}}},_setBodyWidth:false,doLayoutCardView:function(){var a=this,c=this._rowsViewEl.scrollHeight>this._rowsViewEl.clientHeight+1,d=this._columnsViewEl.firstChild,b=c?mini.getScrollOffset():0;d.parentNode.style.paddingRight=b+"px";d.style.width="100%"},doLayout:function(){var p=this;if(!this.canLayout()){return}mini.GridView.superclass.doLayout.call(this);this._stopLayout();if(this.viewType=="cardview"){this.doLayoutCardView();return}var n=this._autoHeight;if(mini.isIE){if(n){__cls_add(this._rowsViewEl,"mini-grid-hidden-y")}else{__cls_rm(this._rowsViewEl,"mini-grid-hidden-y")}}var a=this._columnsViewEl.firstChild,k=this._rowsViewContentEl.firstChild,c=this._filterViewEl.firstChild,o=this._summaryViewEl.firstChild,l=jQuery(this._columnsViewEl).height(),f=c.offsetHeight,d=this._rowsViewEl.scrollHeight>this._rowsViewEl.clientHeight+1,q=this._rowsViewEl.scrollWidth>this._rowsViewEl.clientWidth+1,g=this._rowsViewContentEl.parentNode.offsetWidth,b=g-(d?mini.getScrollOffset():0);function i(r){if(this.isFitColumns()){k.style.width="100%";if(mini.isSafari||mini.isIE6){r.style.width=b+"px"}else{if(d){r.style.width="100%";r.parentNode.style.width="auto";if(c!=r){r.parentNode.style.paddingRight=mini.getScrollOffset()+"px"}if(mini.isIE8){__cls_rm(this._rowsViewEl,"mini-grid-hidden-y")}}else{r.style.width="100%";r.parentNode.style.width="auto";r.parentNode.style.paddingRight="0px";if(mini.isIE8){__cls_add(this._rowsViewEl,"mini-grid-hidden-y")}}}}else{k.style.width="0px";r.style.width="0px";if(mini.isSafari||mini.isChrome||mini.isIE6){}else{r.parentNode.style.width="100%";r.parentNode.style.paddingRight="0px"}}}i.call(this,a);i.call(this,c);i.call(this,o);this._syncScroll();var j=this;setTimeout(function(){mini.layout(j.oOOOo1);mini.layout(j.ol1Olo)},10);if(mini.isIE6){setTimeout(function(){i.call(p,a)},1)}if(mini.isIE10){setTimeout(function(){if(j.isFitColumns()){a.style.width="auto";a.offsetWidth;a.style.width="100%"}else{a.style.width="0px"}},0);mini.repaint(k)}this._topRightCellEl=this._columnsViewEl.childNodes[1];if(mini.isIE6){this._topRightCellEl.style.height=l}if(mini.isIE6||mini.isIE7){this._rowsViewContentEl.style.paddingBottom="0px";if(n){if(q){this._rowsViewContentEl.style.paddingBottom="17px"}}}this._filterViewEl.style.height=f+"px";c.style.width=this.isFitColumns()?(b+"px"):""},setBody:function(){},_createTopRowHTML:function(c,f,d){var g="";if(mini.isIE){if(mini.isIE6||mini.isIE7||!mini.boxModel){g+='<tr style="display:none;height:0px;">'}else{g+='<tr style="height:0px;">'}}else{if(mini.isChrome&&d&&d.length==0){g+='<tr style="height:1px;">'}else{g+='<tr style="height:0px;">'}}if(this._userEmptyTd!==false){g+='<td style="height:0px;width:0;"></td>'}for(var k=0,i=c.length;k<i;k++){var b=c[k],a=b.width,j=b._id;g+='<td id="'+j+'" style="padding:0;border:0;margin:0;height:0px;';if(b.width){g+="width:"+b.width}if(b.minWidth){g+=";min-width:"+b.minWidth+"px"}g+='" ></td>'}g+='<td style="width:0px;"></td>';g+="</tr>";return g},_createColumnsHTML:function(l,r,i){var i=i?i:this.getVisibleColumns(),j=['<table class="mini-grid-table" cellspacing="0" cellpadding="0" border="0">'];j.push(this._createTopRowHTML(i));var d=this.getSortField(),f=this.getSortOrder();for(var p=0,o=l.length;p<o;p++){var u=l[p];j[j.length]="<tr>";j[j.length]='<td style="width:0;"></td>';for(var q=0,k=u.length;q<k;q++){var s=u[q],c=s.sortField||s.field,a=this.o00ollText(s,r),t=this.o1001Id(s,r),b="";if(d&&d==c){b=f=="asc"?"mini-grid-asc":"mini-grid-desc"}var n="";if(this.allowHeaderWrap==false){n=" mini-grid-headerCell-nowrap "}j[j.length]='<td id="';j[j.length]=t;j[j.length]='" class="mini-grid-headerCell '+b+" "+(s.headerCls||"")+" ";var g=!(s.columns&&s.columns.length>0);if(g){j[j.length]=" mini-grid-bottomCell "}if(q==k-1){j[j.length]=" mini-grid-rightCell "}j[j.length]='" style="';if(s.headerStyle){j[j.length]=s.headerStyle+";"}if(s.headerAlign){j[j.length]="text-align:"+s.headerAlign+";"}j[j.length]='" ';if(s.rowspan){j[j.length]='rowspan="'+s.rowspan+'" '}this._createColumnColSpan(s,j,r);j[j.length]='><div class="mini-grid-headerCell-outer"><div class="mini-grid-headerCell-inner '+n+'">';j[j.length]=a;if(b){j[j.length]='<span class="mini-grid-sortIcon"></span>'}else{if(this.showSortIcon){if(s.allowSort){j[j.length]='<span class="mini-grid-allowsort"></span>'}}}j[j.length]='</div><div id="'+s._id+'" class="mini-grid-column-splitter"></div>';j[j.length]="</div></td>"}if(this.isFrozen()&&r==1){j[j.length]='<td class="mini-grid-headerCell" style="width:0;"><div class="mini-grid-headerCell-inner" style="';j[j.length]='">0</div></td>'}j[j.length]="</tr>"}j.push("</table>");return j.join("")},o00ollText:function(c,b){var a=c.header;if(typeof a=="function"){a=a.call(this,c)}if(mini.isNull(a)||a===""){a="&nbsp;"}return a},_createColumnColSpan:function(c,a,b){if(c.colspan){a[a.length]='colspan="'+c.colspan+'" '}},doUpdateColumns:function(){var a=this._columnsViewEl.scrollLeft,d=this.getVisibleColumnsRow(),b=this._createColumnsHTML(d,2),c='<div class="mini-grid-topRightCell"></div>';b+=c;this._columnsViewEl.innerHTML=b;this._columnsViewEl.scrollLeft=a},doUpdate:function(){if(this.canUpdate()==false){return}var c=this,b=this._isCreating(),a=new Date();this.lolOOO();var g=this,d=this.getScrollLeft();function f(){if(!g.el){return}g.doUpdateColumns();if(c.viewType=="cardview"){g.updateCardView()}else{g.doUpdateRows()}g.doLayout();g._doUpdateTimer=null}g.doUpdateColumns();if(b){this._useEmptyView=true}this._doRemoveRowContent();if(c.viewType=="cardview"){g.updateCardView()}else{g.doUpdateRows()}if(d>0&&g.isVirtualScroll()){g._syncScrollOffset(d)}if(b){this._useEmptyView=false}g.doLayout();if(b&&!this._doUpdateTimer){this._doUpdateTimer=setTimeout(f,15)}this.unmask();if(c._fireUpdateTimer){clearTimeout(c._fireUpdateTimer);c._fireUpdateTimer=null}c._fireUpdateTimer=setTimeout(function(){c._fireUpdateTimer=null;c.fire("update")},100)},_doRemoveRowContent:function(){if(this._rowsViewContentEl&&this._rowsViewContentEl.firstChild){this._rowsViewContentEl.removeChild(this._rowsViewContentEl.firstChild)}if(this._rowsLockContentEl&&this._rowsLockContentEl.firstChild){this._rowsLockContentEl.removeChild(this._rowsLockContentEl.firstChild)}},_isCreating:function(){return(new Date()-this._createTime)<1000},deferUpdate:function(a){if(!a){a=5}if(this._updateTimer||this._doUpdateTimer){return}var b=this;this._updateTimer=setTimeout(function(){b._updateTimer=null;b.doUpdate()},a)},_stopDeferUpdate:function(){if(this._updateTimer){clearTimeout(this._updateTimer);this._updateTimer=null}},_pushUpdateCallback:function(a,b,c){var d=0;if(this._doUpdateTimer||this._updateTimer){d=20}if(d==0){a.apply(b,c)}else{setTimeout(function(){a.apply(b,c)},d)}},_updateCount:0,beginUpdate:function(){this._updateCount++},endUpdate:function(a){this._updateCount--;if(this._updateCount==0||a===true){this._updateCount=0;this.doUpdate()}},canUpdate:function(){return this._updateCount==0},setDefaultRowHeight:function(a){this.defaultRowHeight=a},getDefaultRowHeight:function(){return this.defaultRowHeight},_getRowHeight:function(b){var a=this.defaultRowHeight;if(b._height){a=parseInt(b._height);if(isNaN(parseInt(b._height))){a=rowHeight}}a=a-this._paddingTop-this._paddingBottom;a-=1;return a},_createGroupingHTML:function(x,v){var u=this.getGroupingView(),c=this.showGroupSummary,d=this.isFrozen(),i=0,j=this;function o(F,B){n.push('<table class="mini-grid-table" cellspacing="0" cellpadding="0" border="0">');if(x.length>0){n.push(j._createTopRowHTML(x));for(var z=0,y=F.length;z<y;z++){var G=F[z];j.O11lOHTML(G,i++,x,v,n)}}n.push("</table>")}var k=this.groupTitleCollapsible!==false,n=['<table class="mini-grid-table" cellspacing="0" cellpadding="0" border="0">'];n.push(this._createTopRowHTML(x));for(var s=0,r=u.length;s<r;s++){if(v==1&&!this.isFrozen()){continue}var b=u[s],f=this.O11lOGroupId(b,v),l=this.O11lOGroupRowsId(b,v),a=this.O1o1(b),q=b.expanded?"":" mini-grid-group-collapse ";n[n.length]='<tr id="';n[n.length]=f;n[n.length]='" class="mini-grid-groupRow';n[n.length]=q;n[n.length]='"><td style="width:0;"></td><td class="mini-grid-groupCell ';n[n.length]=a.cls;n[n.length]='" style="';n[n.length]=a.style;n[n.length]='" colspan="';n[n.length]=x.length;n[n.length]='"><div class="mini-grid-groupHeader ';if(k){n[n.length]="mini-grid-groupHeader-collapsible"}n[n.length]='">';if(!d||(d&&v==1)){n[n.length]='<div class="mini-grid-group-ecicon"></div>';n[n.length]='<div class="mini-grid-groupTitle">'+a.cellHtml+"</div>"}else{n[n.length]="&nbsp;"}n[n.length]="</div></td></tr>";var g=b.expanded?"":"display:none";n[n.length]='<tr class="mini-grid-groupRows-tr" style="';n[n.length]='"><td style="width:0;"></td><td class="mini-grid-groupRows-td" colspan="';n[n.length]=x.length;n[n.length]='"><div id="';n[n.length]=l;n[n.length]='" class="mini-grid-groupRows" style="';if(mini.isChrome){n[n.length]="margin-left:-1px;"}n[n.length]=g;n[n.length]='">';o(b.rows,b);n[n.length]="</div></td></tr>";if(c){if(x.length>0){n[n.length]='<tr class="mini-grid-groupFooter">';n[n.length]='<td style="width:0;"></td>';for(var t=0,p=x.length;t<p;t++){var w=x[t],f="",a=this._OnDrawSummaryCell(b.rows,w,b);n[n.length]='<td id="';n[n.length]=f;n[n.length]='" class="mini-grid-cell '+a.cellCls+'" style="'+a.cellStyle+";";n[n.length]='"><div class="mini-grid-cell-inner">';n[n.length]=a.cellHtml;n[n.length]="</div></td>"}n[n.length]="</tr>"}}}n.push("</table>");return n.join("")},_isFastCreating:function(){var a=this.getVisibleRows();if(a.length>50){return this._isCreating()||this.getScrollTop()<50*this._defaultRowHeight}return false},isShowRowDetail:function(a){return false},isCellValid:function(b,a){return true},updateCardView:function(){var b=this,f=this.getVisibleRows(),g=this.getVisibleColumns(),i=[];for(var a=0,j=f.length;a<j;a++){var c=f[a],d={rowCls:"",rowStyle:""},k=b.itemRenderer(c,a,d,b);i[i.length]='<div class="mini-grid-row ';i[i.length]=d.rowCls;i[i.length]='" style="';i[i.length]=d.rowStyle;i[i.length]='" id="';i[i.length]=b.l00o(c,1);i[i.length]='">';i[i.length]=k;i[i.length]="</div>"}b._rowsViewContentEl.innerHTML=i.join("")},itemRenderer:function(a,d,c,b){return""},O11lOHTML:function(u,d,Z,o,z){var i=!z;if(!z){z=[]}var r="",b=this.isFixedRowHeight();if(b){r=this._getRowHeight(u)}var y=this.defaultRowHeight-1,Y=-1,l=" ",c=-1,aa=" ";z[z.length]='<tr class="mini-grid-row ';if(u._state=="added"&&this.showNewRow){z[z.length]="mini-grid-newRow "}if(this.isShowRowDetail(u)){z[z.length]="mini-grid-expandRow "}if(this.allowAlternating&&d%2==1){z[z.length]=this.l1llo0;z[z.length]=" "}var x=this.o0olo1Hash[u._id];if(x){z[z.length]=x.join(" ");z[z.length]=" "}var t=this._dataSource.isSelected(u);if(t){z[z.length]=this.o1lo;z[z.length]=" "}Y=z.length;z[z.length]=l;z[z.length]='" style="';c=z.length;z[z.length]=aa;z[z.length]='" id="';z[z.length]=this.l00o(u,o);z[z.length]='">';if(this._userEmptyTd!==false){z[z.length]='<td style="width:0;"></td>'}var a=this.loo1ll;for(var n=0,j=Z.length;n<j;n++){var p=Z[n],g=this.l110Oo(u,p),k="",q=this._OnDrawCell(u,p,d,p._index);if(q.cellHtml===null||q.cellHtml===undefined||q.cellHtml===""){q.cellHtml="&nbsp;"}z[z.length]="<td ";if(q.rowSpan){z[z.length]='rowspan="'+q.rowSpan+'"'}if(q.colSpan){z[z.length]='colspan="'+q.colSpan+'"'}z[z.length]=' id="';z[z.length]=g;z[z.length]='" class="mini-grid-cell ';if(!this.isCellValid(u,p)){z[z.length]=" mini-grid-cell-error "}if(n==j-1){z[z.length]=" mini-grid-rightCell "}if(q.cellCls){z[z.length]=" "+q.cellCls+" "}if(k){z[z.length]=k}if(a&&a[0]==u&&a[1]==p){z[z.length]=" ";z[z.length]=this.ololo}z[z.length]='" style="';if(q.showHGridLines==false){z[z.length]="border-bottom:0;"}if(q.showVGridLines==false){z[z.length]="border-right:0;"}if(!q.visible){z[z.length]="display:none;"}if(p.align){z[z.length]="text-align:";z[z.length]=p.align;z[z.length]=";"}if(q.cellStyle){z[z.length]=q.cellStyle}z[z.length]='">';z[z.length]='<div class="mini-grid-cell-inner ';var s=p.allowCellWrap;if(!s){s=q.allowCellWrap}if(!s){z[z.length]=" mini-grid-cell-nowrap "}if(q.cellInnerCls){z[z.length]=q.cellInnerCls}var w=p.field?this._dataSource.isModified(u,p.field):false;if(w&&this.showModified){z[z.length]=" mini-grid-cell-dirty"}z[z.length]='" style="';if(b){z[z.length]="height:";if(!p.name||this._treeColumn!==p.name){z[z.length]=r}else{z[z.length]=y}z[z.length]="px;";z[z.length]="line-height:";if(!p.name||this._treeColumn!==p.name){z[z.length]=r}else{z[z.length]=y}z[z.length]="px;"}if(q.cellInnerStyle){z[z.length]=q.cellInnerStyle}z[z.length]='">';z[z.length]=q.cellHtml;z[z.length]="</div>";z[z.length]="</td>";if(q.rowCls){l=q.rowCls}if(q.rowStyle){aa=q.rowStyle}}if(this.isFrozen()&&o==1){z[z.length]='<td class="mini-grid-cell" style="width:0;';if(this.showHGridLines==false){z[z.length]="border-bottom:0;"}z[z.length]='"><div class="mini-grid-cell-inner" style="';if(b){z[z.length]="height:";z[z.length]=r;z[z.length]="px;"}z[z.length]='">0</div></td>'}z[Y]=l;z[c]=aa;z[z.length]="</tr>";if(i){var f=z.join(""),v=/(<script(.*)<\/script(\s*)>)/i;f=f.replace(v,"");return f}},O11lOsHTML:function(l,c,f,d){f=f||this.getVisibleRows();var p=['<table class="mini-grid-table mini-grid-rowstable" cellspacing="0" cellpadding="0" border="0">'];p.push(this._createTopRowHTML(l,true,f));var i=this.uid+"$emptytext"+c;if(c==2&&(this._dataSource.loaded||this.alwaysShowEmptyText)){var k=(this.showEmptyText&&f.length==0)?"":"display:none;";p.push('<tr id="'+i+'" style="'+k+'"><td style="width:0"></td><td class="mini-grid-emptyText" colspan="'+l.length+'">'+this.emptyText+"</td></tr>")}var o=0;if(f.length>0){var g=f[0];o=this.getVisibleRows().indexOf(g)}for(var b=0,a=f.length;b<a;b++){var j=o+b,n=f[b];this.O11lOHTML(n,j,l,c,p)}if(d){p.push(d)}p.push("</table>");return p.join("")},doUpdateRows:function(){var b=this.getVisibleRows(),c=new Date(),a=this.getVisibleColumns();if(this.isGrouping()){var d=this._createGroupingHTML(a,2);this._rowsViewContentEl.innerHTML=d}else{d=this.O11lOsHTML(a,2,b);this._rowsViewContentEl.innerHTML=d}},_createFilterRowHTML:function(b,j){var c=['<table class="mini-grid-table" cellspacing="0" cellpadding="0" border="0" style="position:absolute;top:0;left:0;height:100%;">'];c.push(this._createTopRowHTML(b));c[c.length]="<tr>";c[c.length]='<td style="width:0;"></td>';for(var i=0,f=b.length;i<f;i++){var a=b[i],g=this.l1011(a);c[c.length]='<td id="';c[c.length]=g;c[c.length]='" class="mini-grid-filterCell" style="';c[c.length]='">&nbsp;</td>'}c[c.length]='</tr></table><div class="mini-grid-scrollHeaderCell"></div>';var d=c.join("");return d},_doRenderFilters:function(){var c=this.getVisibleColumns();for(var f=0,d=c.length;f<d;f++){var b=c[f];if(b.filter){var a=this.getFilterCellEl(b);if(a){a.innerHTML="";b.filter.render(a)}}}},ooo1O:function(){if(this._filterViewEl.firstChild){this._filterViewEl.removeChild(this._filterViewEl.firstChild)}var a=this.isFrozen(),c=this.getVisibleColumns(),b=this._createFilterRowHTML(c,2);this._filterViewEl.innerHTML=b;this._doRenderFilters()},_createSummaryRowHTML:function(d,b){var f=this.getDataView(),k=['<table class="mini-grid-table" cellspacing="0" cellpadding="0" border="0">'];k.push(this._createTopRowHTML(d));for(var o=0,n=this.summaryRows;o<n;o++){k[k.length]="<tr>";k[k.length]='<td style="width:0;"></td>';for(var a=0,l=d.length;a<l;a++){var c=d[a],g=this.Ol1l(c,o),j=this._OnDrawSummaryCell(f,c,null,o);k[k.length]='<td id="';k[k.length]=g;k[k.length]='" class="mini-grid-summaryCell '+j.cellCls+'" style="'+j.cellStyle+";";k[k.length]='">';k[k.length]=j.cellHtml;k[k.length]="</td>"}k[k.length]="</tr>"}k[k.length]='</table><div class="mini-grid-scrollHeaderCell"></div>';var i=k.join("");return i},lolOOO:function(){if(!this.showSummaryRow){return}var b=this.getVisibleColumns(),a=this._createSummaryRowHTML(b,2);this._summaryViewEl.innerHTML=a},lo0oolByField:function(a,c){if(!a){return null}var b=this._columnModel._getDataTypeByField(a);this._dataSource._doClientSortField(a,c,b)},_expandGroupOnLoad:true,lOo0ol:1,l10ol:"",l010O:"",groupBy:function(b,a){if(!b){return}this.l10ol=b;if(typeof a=="string"){a=a.toLowerCase()}this.l010O=a;this._createGroupingView();this.deferUpdate()},clearGroup:function(){this.l10ol="";this.l010O="";this.OoO1o1=null;this.deferUpdate()},setGroupField:function(a){this.groupBy(a)},getGroupField:function(){return this.l10ol},getGroupDir:function(){return this.l010O},setGroupDir:function(a){this.l010O=field;this.groupBy(this.l10ol,a)},isGrouping:function(){return this.l10ol!=""},getGroupingView:function(){return this.OoO1o1},enableGroupOrder:true,_createGroupingView:function(){if(this.isGrouping()==false){return}this.OoO1o1=null;var a=this._dataSource,l=this.l10ol,t=this.l010O;if(this.enableGroupOrder||t){this.lo0oolByField(l,t)}var f=this.getVisibleRows(),d=[],q={};for(var c=0,s=f.length;c<s;c++){var o=f[c],k=o[l],n=mini.isDate(k)?k.getTime():k,g=q[n];if(!g){g=q[n]={};g.field=l,g.dir=t;g.value=k;g.rows=[];d.push(g);g.id="g"+this.lOo0ol++;g.expanded=this._expandGroupOnLoad}g.rows.push(o)}var i=a.sortField,j=a.sortOrder;if(i){var p=this._columnModel._getDataTypeByField(i),b=a._getSortFnByField(i,p);if(b){var r=j=="desc";for(c=0,s=d.length;c<s;c++){g=d[c];mini.sort(g.rows,b);if(r){g.rows.reverse()}}}}this.OoO1o1=d},O1o1:function(a){var b={group:a,rows:a.rows,field:a.field,dir:a.dir,value:a.value,cls:"",style:"",cellHtml:a.field+" ("+a.rows.length+" Items)"};this.fire("drawgroup",b);return b},getRowGroup:function(a){var b=typeof a;if(b=="number"){return this.getGroupingView()[a]}if(b=="string"){return this._getRowGroupById(a)}return a},_getRowGroupByEvent:function(b){var c=__getByCls(b.target,"mini-grid-groupRow");if(c){var a=c.id.split("$");if(a[0]!=this._id){return null}var d=a[a.length-1];return this._getRowGroupById(d)}return null},_getRowGroupById:function(f){var b=this.getGroupingView();for(var a=0,d=b.length;a<d;a++){var c=b[a];if(c.id==f){return c}}return null},O11lOGroupId:function(a,b){return this._id+"$group"+b+"$"+a.id},O11lOGroupRowsId:function(a,b){return this._id+"$grouprows"+b+"$"+a.id},l00o:function(b,c){var a=this._id+"$row"+c+"$"+b._id;return a},o1001Id:function(c,b){var a=this._id+"$headerCell"+b+"$"+c._id;return a},l110Oo:function(b,c){var a=b._id+"$cell$"+c._id;return a},l1011:function(a){return this._id+"$filter$"+a._id},Ol1l:function(b,a){return this._id+"$summary$"+b._id+"_"+a},getFilterCellEl:function(a){a=this.getColumn(a);if(!a){return null}return document.getElementById(this.l1011(a))},getSummaryCellEl:function(b,a){if(!a){a=0}b=this.getColumn(b);if(!b){return null}return document.getElementById(this.Ol1l(b,a))},_doVisibleEls:function(){mini.GridView.superclass._doVisibleEls.call(this);this._columnsEl.style.display=this.showColumns?"block":"none";this.oOOOo1.style.display=this.showFilterRow?"block":"none";this.ol1Olo.style.display=this.showSummaryRow?"block":"none";this._bottomPagerEl.style.display=this.showPager?"block":"none"},setShowColumns:function(a){this.showColumns=a;this._doVisibleEls();this.deferLayout()},setShowFilterRow:function(a){this.showFilterRow=a;this._doVisibleEls();this.deferLayout()},setShowSummaryRow:function(a){this.showSummaryRow=a;this._doVisibleEls();this.deferLayout()},setShowPager:function(a){this.showPager=a;this._doVisibleEls();this.deferLayout()},setFitColumns:function(a){this.fitColumns=a;__cls_rm(this.el,"mini-grid-fixwidth");if(this.fitColumns==false){__cls_add(this.el,"mini-grid-fixwidth")}this.deferLayout()},getBodyHeight:function(a){var b=mini.GridView.superclass.getBodyHeight.call(this,a);b=b-this.getColumnsHeight()-this.getFilterHeight()-this.getSummaryHeight()-this.getPagerHeight();return b},getColumnsHeight:function(){if(!this.showColumns){return 0}var a=__getHeight(this._columnsEl);return a},getFilterHeight:function(){return this.showFilterRow?__getHeight(this.oOOOo1):0},getSummaryHeight:function(){return this.showSummaryRow?__getHeight(this.ol1Olo):0},getPagerHeight:function(){return this.showPager?__getHeight(this._bottomPagerEl):0},getGridViewBox:function(a){var c=__getBox(this._columnsEl),b=__getBox(this.o0Olll);c.height=b.bottom-c.top;c.bottom=c.top+c.height;return c},getSortField:function(a){return this._dataSource.sortField},getSortOrder:function(a){return this._dataSource.sortOrder},_createSource:function(){this._dataSource=new mini.DataTable()},oOlOoO:function(){var a=this._dataSource;a.on("loaddata",this.__OnSourceLoadData,this);a.on("cleardata",this.__OnSourceClearData,this)},__OnSourceLoadData:function(a){this._initData();this.doUpdate()},__OnSourceClearData:function(a){this._initData();this.doUpdate()},_initData:function(){},isFrozen:function(){var b=this._columnModel._frozenStartColumn,a=this._columnModel._frozenEndColumn;return this._columnModel.isFrozen()},_createColumnModel:function(){this._columnModel=new mini.ColumnModel(this)},_bindColumnModel:function(){this._columnModel.on("columnschanged",this.__OnColumnsChanged,this)},__OnColumnsChanged:function(a){this.columns=this._columnModel.columns;this.ooo1O();this.lolOOO();this.doUpdate();this.fire("columnschanged")},setColumns:function(a){this._columnModel.setColumns(a);this.columns=this._columnModel.columns},getColumns:function(){return this._columnModel.getColumns()},getBottomColumns:function(){return this._columnModel.getBottomColumns()},getVisibleColumnsRow:function(){var a=this._columnModel.getVisibleColumnsRow().clone();return a},getVisibleColumns:function(){var a=this._columnModel.getVisibleColumns().clone();return a},getFrozenColumns:function(){var a=this._columnModel.getFrozenColumns().clone();return a},getUnFrozenColumns:function(){var a=this._columnModel.getUnFrozenColumns().clone();return a},getColumn:function(a){return this._columnModel.getColumn(a)},updateColumn:function(b,a){this._columnModel.updateColumn(b,a)},showColumns:function(c){for(var a=0,d=c.length;a<d;a++){var b=this.getColumn(c[a]);if(!b){continue}b.visible=true}this._columnModel._columnsChanged()},hideColumns:function(c){for(var a=0,d=c.length;a<d;a++){var b=this.getColumn(c[a]);if(!b){continue}b.visible=false}this._columnModel._columnsChanged()},showColumn:function(a){this.updateColumn(a,{visible:true})},hideColumn:function(a){this.updateColumn(a,{visible:false})},moveColumn:function(b,c,a){this._columnModel.moveColumn(b,c,a)},removeColumn:function(b){b=this.getColumn(b);if(!b){return}var a=this.getParentColumn(b);if(b&&a){a.columns.remove(b);this._columnModel._columnsChanged()}return b},setDefaultColumnWidth:function(a){this._columnModel._defaultColumnWidth=a},getDefaultColumnWidth:function(){return this._columnModel._defaultColumnWidth},setColumnWidth:function(b,a){this.updateColumn(b,{width:a})},getColumnWidth:function(b){var a=this.getColumnBox(b);return a.width},getParentColumn:function(a){return this._columnModel.getParentColumn(a)},getMaxColumnLevel:function(){return this._columnModel._getMaxColumnLevel()},_isCellVisible:function(b,a){return true},_createDrawCellEvent:function(b,a,i,g){var d=mini._getMap(a.field,b),c={sender:this,rowIndex:i,columnIndex:g,record:b,row:b,column:a,field:a.field,value:d,cellHtml:d,rowCls:"",rowStyle:null,cellCls:a.cellCls||"",cellStyle:a.cellStyle||"",allowCellWrap:this.allowCellWrap,showHGridLines:this.showHGridLines,showVGridLines:this.showVGridLines,cellInnerCls:"",cellInnnerStyle:"",autoEscape:a.autoEscape};c.visible=this._isCellVisible(i,g);if(c.visible==true&&this._mergedCellMaps){var f=this._mergedCellMaps[i+":"+g];if(f){c.rowSpan=f.rowSpan;c.colSpan=f.colSpan}}return c},defaultColumnDateFormat:"yyyy-MM-dd",_OnDrawCell:function(b,a,k,j){var d=this._createDrawCellEvent(b,a,k,j),i=d.value,c=a.dateFormat||(a.dataType=="date"?this.defaultColumnDateFormat:"");if(c){if(mini.isDate(d.value)){d.cellHtml=mini.formatDate(i,c)}else{d.cellHtml=i}}if(a.dataType=="float"){i=parseFloat(d.value);if(!isNaN(i)){decimalPlaces=parseInt(a.decimalPlaces);if(isNaN(decimalPlaces)){decimalPlaces=2}d.cellHtml=i.toFixed(decimalPlaces)}}if(a.dataType=="currency"){d.cellHtml=mini.formatCurrency(d.value,a.currencyUnit)}if(a.displayField){d.cellHtml=mini._getMap(a.displayField,b)}if(a.numberFormat){var f=parseFloat(d.cellHtml);if(!isNaN(f)){d.cellHtml=mini.formatNumber(f,a.numberFormat)}}if(d.autoEscape==true){d.cellHtml=mini.htmlEncode(d.cellHtml)}var g=a.renderer;if(g){var l=typeof g=="function"?g:__parseFn(g);if(l){d.cellHtml=l.call(a,d)}}d.cellHtml=(d.cellHtml===0||d.cellHtml===false||d.cellHtml)?String(d.cellHtml).trim():"";this.fire("drawcell",d);if(d.cellHtml&&!!d.cellHtml.unshift&&d.cellHtml.length==0){d.cellHtml="&nbsp;"}if(d.cellHtml===null||d.cellHtml===undefined||d.cellHtml===""){d.cellHtml="&nbsp;"}return d},_OnDrawSummaryCell:function(b,j,c,g){var a={row:g,group:c,result:this.getResultObject(),sender:this,data:b,column:j,field:j.field,value:"",cellHtml:"",cellCls:j.cellCls||"",cellStyle:j.cellStyle||"",allowCellWrap:this.allowCellWrap};if(j.summaryType){var i=mini.summaryTypes[j.summaryType];if(i){a.value=i(b,j.field)}}var f=a.value;a.cellHtml=a.value;if(a.value&&parseInt(a.value)!=a.value&&a.value.toFixed){decimalPlaces=parseInt(j.decimalPlaces);if(isNaN(decimalPlaces)){decimalPlaces=2}a.cellHtml=parseFloat(a.value.toFixed(decimalPlaces))}if(j.dateFormat){if(mini.isDate(a.value)){a.cellHtml=mini.formatDate(f,j.dateFormat)}else{a.cellHtml=f}}if(a.cellHtml){if(j.dataType=="currency"){a.cellHtml=mini.formatCurrency(a.cellHtml,j.currencyUnit)}}var d=j.summaryRenderer;if(d){i=typeof d=="function"?d:window[d];if(i){a.cellHtml=i.call(j,a)}}j.summaryValue=a.value;this.fire("drawsummarycell",a);if(a.cellHtml===null||a.cellHtml===undefined||a.cellHtml===""){a.cellHtml="&nbsp;"}return a},getScrollTop:function(){return this._rowsViewEl.scrollTop},setScrollTop:function(a){this._rowsViewEl.scrollTop=a},getScrollLeft:function(){return this._rowsViewEl.scrollLeft},setScrollLeft:function(a){this._rowsViewEl.scrollLeft=a},_syncScroll:function(){var a=this._rowsViewEl.scrollLeft,b=this._filterViewEl.firstChild;b.style.left=-a+"px";this._summaryViewEl.scrollLeft=a;this._columnsViewEl.scrollLeft=a},__OnRowViewScroll:function(a){this._syncScroll()},pagerType:"pager",getPagerType:function(){return this.pagerType},setPagerType:function(a){this.pagerType=a;var b=mini.create({type:this.pagerType});if(b){this._setBottomPager(b)}},_pagers:[],o0olO1s:function(){this._pagers=[];var a=new Pager();this._setBottomPager(a)},_setBottomPager:function(a){a=mini.create(a);if(!a){return}if(this._bottomPager){this.unbindPager(this._bottomPager);this._bottomPagerEl.removeChild(this._bottomPager.el)}this._bottomPager=a;a.render(this._bottomPagerEl);this.bindPager(a)},bindPager:function(a){this._pagers.add(a)},unbindPager:function(a){this._pagers.remove(a)},alwaysShowEmptyText:false,setAlwaysShowEmptyText:function(a){this.alwaysShowEmptyText=a},getAlwaysShowEmptyText:function(){return this.alwaysShowEmptyText},setShowEmptyText:function(a){this.showEmptyText=a;if(this.data.length==0){this.deferUpdate()}},getShowEmptyText:function(){return this.showEmptyText},setEmptyText:function(a){this.emptyText=a},getEmptyText:function(){return this.emptyText},setShowModified:function(a){this.showModified=a},getShowModified:function(){return this.showModified},setShowNewRow:function(a){this.showNewRow=a},getShowNewRow:function(){return this.showNewRow},setAllowCellWrap:function(a){this.allowCellWrap=a},getAllowCellWrap:function(){return this.allowCellWrap},setAllowHeaderWrap:function(a){this.allowHeaderWrap=a},getAllowHeaderWrap:function(){return this.allowHeaderWrap},setEnableGroupOrder:function(a){this.enableGroupOrder=a},getEnableGroupOrder:function(){return this.enableGroupOrder},setShowHGridLines:function(a){if(this.showHGridLines!=a){this.showHGridLines=a;this.deferUpdate()}},getShowHGridLines:function(){return this.showHGridLines},setShowVGridLines:function(a){if(this.showVGridLines!=a){this.showVGridLines=a;this.deferUpdate()}},getShowVGridLines:function(){return this.showVGridLines},setShowSortIcon:function(a){if(this.showSortIcon!=a){this.showSortIcon=a;this.deferUpdate()}},getShowSortIcon:function(){return this.showSortIcon}});mini.copyTo(mini.GridView.prototype,{idField:"id",textField:"text",setAjaxData:function(a){this._dataSource.ajaxData=a},getby_id:function(a){return this._dataSource.getby_id(a)},oO1l:function(b,a){return this._dataSource.oO1l(b,a)},setIdField:function(a){this._dataSource.setIdField(a);this.idField=a},getIdField:function(){return this._dataSource.idField},setTextField:function(a){this._dataSource.setTextField(a);this.textField=a},getTextField:function(){return this._dataSource.textField},getLoadParams:function(){return this._dataSource.loadParams},clearData:function(){this._dataSource.clearData()},loadData:function(a){this._dataSource.loadData(a)},setData:function(a){this._dataSource.loadData(a)},getData:function(){return this._dataSource.getSource().clone()},getList:function(){return this._dataSource.getList()},getDataView:function(){return this._dataSource.getDataView()},getVisibleRows:function(){if(this._useEmptyView){return[]}return this._dataSource.getVisibleRows()},toArray:function(){return this._dataSource.toArray()},getRecord:function(a){if(typeof a=="object"){return a}return this._dataSource.getRecord(a)},getRow:function(a){if(typeof a=="object"){return a}return this._dataSource.getRow(a)},getRange:function(b,a){if(mini.isNull(b)||mini.isNull(a)){return}return this._dataSource.getRange(b,a)},getAt:function(a){return this._dataSource.getAt(a)},indexOf:function(a){return this._dataSource.indexOf(a)},getRowByUID:function(a){return this._dataSource.getby_id(a)},getRowByUid:function(a){return this.getRowByUID(a)},getRowById:function(a){return this._dataSource.getbyId(a)},clearRows:function(){this._dataSource.clearData()},updateRow:function(b,c,a){this._dataSource.updateRecord(b,c,a)},addRow:function(b,a){return this._dataSource.insert(a,b)},removeRow:function(a,b){return this._dataSource.remove(a,b)},removeRows:function(a,b){return this._dataSource.removeRange(a,b)},removeSelected:function(){var a=this.getSelected();if(a){this.removeRow(a,true)}},removeRowAt:function(a,b){return this._dataSource.removeAt(a,b)},moveRow:function(a,b){this._dataSource.move(a,b)},addRows:function(b,a){return this._dataSource.insertRange(a,b)},findRows:function(b,a){return this._dataSource.findRecords(b,a)},findRow:function(b,a){return this._dataSource.findRecord(b,a)},multiSelect:false,setMultiSelect:function(a){this._dataSource.setMultiSelect(a);this.multiSelect=a},getMultiSelect:function(){return this._dataSource.getMultiSelect()},setCurrent:function(a){this._dataSource.setCurrent(a)},getCurrent:function(){return this._dataSource.getCurrent()},isSelected:function(a){return this._dataSource.isSelected(a)},setSelected:function(a){this._dataSource.setSelected(a)},getSelected:function(){return this._dataSource.getSelected()},getSelecteds:function(){return this._dataSource.getSelecteds()},select:function(a,b){this._dataSource.select(a,b)},selects:function(b,a){this._dataSource.selects(b,a)},deselect:function(a,b){this._dataSource.deselect(a,b)},deselects:function(b,a){this._dataSource.deselects(b,a)},selectAll:function(a){this._dataSource.selectAll(a)},deselectAll:function(a){this._dataSource.deselectAll(a)},clearSelect:function(a){this.deselectAll(a)},selectPrev:function(){this._dataSource.selectPrev()},selectNext:function(){this._dataSource.selectNext()},selectFirst:function(){this._dataSource.selectFirst()},selectLast:function(){this._dataSource.selectLast()},selectRange:function(b,a){this._dataSource.selectRange(b,a)},filter:function(a,b){this._dataSource.filter(a,b)},clearFilter:function(){this._dataSource.clearFilter()},sort:function(b,c,a){this._dataSource.sort(b,c,a)},clearSort:function(){this._dataSource.clearSort()},findItems:function(c,b,a){return this._dataSource.findRecords(a,b,a)},getResultObject:function(){return this._dataSource._resultObject||{}},isChanged:function(){return this._dataSource.isChanged()},getChanges:function(a,b){return this._dataSource.getChanges(a,b)},accept:function(){this._dataSource.accept()},reject:function(){this._dataSource.reject()},acceptRecord:function(a){this._dataSource.acceptRecord(a)},rejectRecord:function(a){this._dataSource.rejectRecord(a)}});mini.regClass(mini.GridView,"gridview");mini.FrozenGridView=function(){mini.FrozenGridView.superclass.constructor.apply(this,arguments)};mini.extend(mini.FrozenGridView,mini.GridView,{isFixedRowHeight:function(){return this.fixedRowHeight},frozenPosition:"left",isRightFrozen:function(){return this.frozenPosition=="right"},_create:function(){mini.FrozenGridView.superclass._create.call(this);var c=this.el,d='<div class="mini-grid-columns-lock"></div>',a='<div class="mini-grid-rows-lock"><div class="mini-grid-rows-content"></div></div>';this._columnsLockEl=mini.before(this._columnsViewEl,d);this._rowsLockEl=mini.before(this._rowsViewEl,a);this._rowsLockContentEl=this._rowsLockEl.firstChild;var b='<div class="mini-grid-filterRow-lock" style="height:100%;"></div>';this._filterLockEl=mini.before(this._filterViewEl,b);var f='<div class="mini-grid-summaryRow-lock"></div>';this._summaryLockEl=mini.before(this._summaryViewEl,f)},_initEvents:function(){mini.FrozenGridView.superclass._initEvents.call(this);mini.on(this._rowsEl,"mousewheel",this.__OnMouseWheel,this)},o00ollText:function(c,b){var a=c.header;if(typeof a=="function"){a=a.call(this,c)}if(mini.isNull(a)||a===""){a="&nbsp;"}if(this.isFrozen()&&b==2){if(c.viewIndex1){a="&nbsp;"}}return a},_createColumnColSpan:function(b,d,a){if(this.isFrozen()){var c=b["colspan"+a];if(c){d[d.length]='colspan="'+c+'" '}}else{if(b.colspan){d[d.length]='colspan="'+b.colspan+'" '}}},doUpdateColumns:function(){var a=this._columnsViewEl.scrollLeft,d=this.isFrozen()?this.getFrozenColumnsRow():[],j=this.isFrozen()?this.getUnFrozenColumnsRow():this.getVisibleColumnsRow(),f=this.isFrozen()?this.getFrozenColumns():[],c=this.isFrozen()?this.getUnFrozenColumns():this.getVisibleColumns(),i=this._createColumnsHTML(d,1,f),b=this._createColumnsHTML(j,2,c),g='<div class="mini-grid-topRightCell"></div>';i+=g;b+=g;this._columnsLockEl.innerHTML=i;this._columnsViewEl.innerHTML=b;var k=this._columnsLockEl.firstChild;k.style.width="0px";this._columnsViewEl.scrollLeft=a},doUpdateRows:function(){var a=this.getVisibleRows(),b=this.getFrozenColumns(),c=this.getUnFrozenColumns();if(this.isGrouping()){var d=this._createGroupingHTML(b,1),g=this._createGroupingHTML(c,2);this._rowsLockContentEl.innerHTML=d;this._rowsViewContentEl.innerHTML=g}else{d=this.O11lOsHTML(b,1,this.isFrozen()?a:[]),g=this.O11lOsHTML(c,2,a);this._rowsLockContentEl.innerHTML=d;this._rowsViewContentEl.innerHTML=g}var f=this._rowsLockContentEl.firstChild;f.style.width="0px"},ooo1O:function(){if(this._filterLockEl.firstChild){this._filterLockEl.removeChild(this._filterLockEl.firstChild)}if(this._filterViewEl.firstChild){this._filterViewEl.removeChild(this._filterViewEl.firstChild)}var b=this.getFrozenColumns(),c=this.getUnFrozenColumns(),d=this._createFilterRowHTML(b,1),a=this._createFilterRowHTML(c,2);this._filterLockEl.innerHTML=d;this._filterViewEl.innerHTML=a;this._doRenderFilters()},lolOOO:function(){var b=this.getFrozenColumns(),c=this.getUnFrozenColumns(),d=this._createSummaryRowHTML(b,1),a=this._createSummaryRowHTML(c,2);this._summaryLockEl.innerHTML=d;this._summaryViewEl.innerHTML=a},_syncRowsHeightTimer:null,syncRowDetail:function(b){var c=this._getRowDetailEl(b,1),a=this._getRowDetailEl(b,2);if(c&&a){this._doSyncRowHeight(c,a)}},_doSyncRowHeight:function(b,d){b.style.height=d.style.height="auto";var c=b.cells[0],a=d.cells[0],g=c.offsetHeight,f=a.offsetHeight;if(g<f){g=f}b.style.height=d.style.height=g+"px"},_syncRowsHeight:function(){var a=this;function b(i,g){i.style.height=g.style.height="auto"}function f(i,k){var j=i.cells[0],g=k.cells[0],n=j.offsetHeight,l=g.offsetHeight;if(n<l){n=l}return n}function c(j,i,g){j.style.height=i.style.height=g+"px"}function d(){var i=new Date(),r=document,q=a.getDataView(),p={};for(var o=0,l=q.length;o<l;o++){var n=q[o],g=a.l0011(n,1),k=a.l0011(n,2);if(!g||!k){continue}b(g,k);p[o]={row1:g,row2:k}}for(o=0,l=q.length;o<l;o++){var n=q[o],j=p[o];if(!j){continue}j.height=f(j.row1,j.row2)}for(o=0,l=q.length;o<l;o++){n=q[o],j=p[o];if(!j){continue}c(j.row1,j.row2,j.height)}a._syncRowsHeightTimer=null}if(this.isFrozen()&&this.isFixedRowHeight()==false){if(this._syncRowsHeightTimer){clearTimeout(this._syncRowsHeightTimer)}this._syncRowsHeightTimer=setTimeout(d,2)}},_syncColumnHeight:function(){var a=this._columnsLockEl,c=this._columnsViewEl;a.style.height=c.style.height="auto";if(this.isFrozen()){var b=a.offsetHeight,d=c.offsetHeight;b=b>d?b:d;a.style.height=c.style.height=b+"px"}a=this._summaryLockEl,c=this._summaryViewEl;a.style.height=c.style.height="auto";if(this.isFrozen()){b=a.offsetHeight,d=c.offsetHeight;b=b>d?b:d;a.style.height=c.style.height=b+"px"}},_layoutColumns:function(){function k(s){return s.offsetHeight}function o(v){var t=[];for(var s=0,w=v.cells.length;s<w;s++){var u=v.cells[s];if(u.style.width=="0px"){continue}t.push(u)}return t}function g(u){var s=o(u);for(var w=0,v=s.length;w<v;w++){var t=s[w];t.style.height="auto"}}function l(){i.style.height=i.style.height="auto";for(var t=0,s=i.rows.length;t<s;t++){var u=i.rows[t],v=j.rows[t];g(u);g(v)}}function c(x,z){var s=0,v=o(x);for(var I=0,y=v.length;I<y;I++){var w=v[I],t=parseInt(w.rowSpan)>1;if(t&&z){continue}var u=w.offsetHeight;if(u>s){s=u}}return s}if(!this.isFrozen()){return}var i=this._columnsLockEl.firstChild,j=this._columnsViewEl.firstChild;function n(t,z){var x=c(z,true),s=o(t);for(var v=0,u=s.length;v<u;v++){var w=s[v],y=parseInt(w.rowSpan)>1;if(y){}else{__setHeight(w,x)}}}function d(t,z){var x=c(z),s=o(t);for(var v=0,u=s.length;v<u;v++){var w=s[v],y=parseInt(w.rowSpan)>1;if(y){__setHeight(w,x)}}}l();for(var b=0,q=i.rows.length;b<q;b++){var f=i.rows[b],p=j.rows[b],a=c(f),r=c(p);if(a==r){}else{if(a<r){n(f,p);d(f,p)}else{if(a>r){n(p,f);d(p,f)}}}}a=k(i),r=k(j);if(a<r){__setHeight(i,r)}else{if(a>r){__setHeight(j,a)}}},doLayout:function(){if(this.canLayout()==false){return}this._doLayoutScroll=false;var d=this.isFrozen(),g=this.getViewportWidth(true),c=this.getLockedWidth(),f=g-c;this.O0llo0Text();var b=this.isRightFrozen()?"marginRight":"marginLeft",a=this.isRightFrozen()?"right":"left";if(d){this._filterViewEl.style[b]=c+"px";this._summaryViewEl.style[b]=c+"px";this._columnsViewEl.style[b]=c+"px";this._rowsViewEl.style[b]=c+"px";if(mini.isSafari||mini.isChrome||mini.isIE6){this._filterViewEl.style.width=f+"px";this._summaryViewEl.style.width=f+"px";this._columnsViewEl.style.width=f+"px"}else{this._filterViewEl.style.width="auto";this._summaryViewEl.style.width="auto";this._columnsViewEl.style.width="auto"}if(mini.isSafari||mini.isChrome||mini.isIE6){this._rowsViewEl.style.width=f+"px"}__setWidth(this._filterLockEl,c);__setWidth(this._summaryLockEl,c);__setWidth(this._columnsLockEl,c);__setWidth(this._rowsLockEl,c);this._filterLockEl.style[a]="0px";this._summaryLockEl.style[a]="0px";this._columnsLockEl.style[a]="0px";this._rowsLockEl.style[a]="0px"}else{this._doClearFrozen()}this._layoutColumns();this._syncColumnHeight();mini.FrozenGridView.superclass.doLayout.call(this);var i=this._autoHeight;if(d){if(mini.isChrome||mini.isIE6){this._layoutColumns();this._syncColumnHeight();mini.FrozenGridView.superclass.doLayout.call(this)}}if(i){this._rowsLockEl.style.height="auto"}else{this._rowsLockEl.style.height="100%"}this._syncRowsHeight()},O0llo0Text:function(){},l0011:function(a,b){a=this.getRecord(a);var d=this.l00o(a,b),c=document.getElementById(d);return c},_doClearFrozen:function(){var b=this.isRightFrozen()?"marginRight":"marginLeft",a=this.isRightFrozen()?"right":"left";this._filterLockEl.style.left="-10px";this._summaryLockEl.style.left="-10px";this._columnsLockEl.style.left="-10px";this._rowsLockEl.style.left="-10px";this._filterLockEl.style.width="0px";this._summaryLockEl.style.width="0px";this._columnsLockEl.style.width="0px";this._rowsLockEl.style.width="0px";this._filterViewEl.style.marginLeft="0px";this._summaryViewEl.style.marginLeft="0px";this._columnsViewEl.style.marginLeft="0px";this._rowsViewEl.style.marginLeft="0px";this._filterViewEl.style.width="auto";this._summaryViewEl.style.width="auto";this._columnsViewEl.style.width="auto";this._rowsViewEl.style.width="auto";if(mini.isSafari||mini.isChrome||mini.isIE6){this._filterViewEl.style.width="100%";this._summaryViewEl.style.width="100%";this._columnsViewEl.style.width="100%";this._rowsViewEl.style.width="100%"}},frozenColumns:function(a,b){this.frozen(a,b)},unFrozenColumns:function(){this.unFrozen()},frozen:function(a,b){this._doClearFrozen();this._columnModel.frozen(a,b)},unFrozen:function(){this._doClearFrozen();this._columnModel.unFrozen()},setFrozenStartColumn:function(a){this._columnModel.setFrozenStartColumn(a)},setFrozenEndColumn:function(a){return this._columnModel.setFrozenEndColumn(a)},getFrozenStartColumn:function(a){return this._columnModel._frozenStartColumn},getFrozenEndColumn:function(a){return this._columnModel._frozenEndColumn},getFrozenColumnsRow:function(){return this._columnModel.getFrozenColumnsRow()},getUnFrozenColumnsRow:function(){return this._columnModel.getUnFrozenColumnsRow()},getLockedWidth:function(){if(!this.isFrozen()){return 0}var a=this._rowsLockContentEl.firstChild.firstChild,b=a?a.offsetWidth:0;return b},_canDeferSyncScroll:function(){return this.isFrozen()},_syncScroll:function(){var a=this._rowsViewEl.scrollLeft,c=this._filterViewEl.firstChild;c.style.left=-a+"px";this._summaryViewEl.scrollLeft=a;this._columnsViewEl.scrollLeft=a;var b=this,d=b._rowsViewEl.scrollTop;b._rowsLockEl.scrollTop=d},__OnMouseWheel:function(b){var a=this.getScrollTop()-b.wheelDelta,c=this.getScrollTop();this.setScrollTop(a);if(c!=this.getScrollTop()){b.preventDefault()}}});mini.regClass(mini.FrozenGridView,"FrozenGridView");mini.ScrollGridView=function(){mini.ScrollGridView.superclass.constructor.apply(this,arguments)};mini.extend(mini.ScrollGridView,mini.FrozenGridView,{virtualScroll:true,virtualRows:25,defaultRowHeight:25,virtualColumns:false,_canDeferSyncScroll:function(){return this.isFrozen()&&!this.isVirtualScroll()},setVirtualScroll:function(a){this.virtualScroll=a;this.doUpdate()},getVirtualScroll:function(a){return this.virtualScroll},isFitColumns:function(){return this.fitColumns&&!this.virtualColumns},setVirtualColumns:function(a){this.virtualColumns=a;this.doUpdate()},getVirtualColumns:function(a){return this.virtualColumns},isFixedRowHeight:function(){return this.fixedRowHeight||this.virtualScroll},isVirtualScroll:function(){if(this.virtualScroll){return this.isAutoHeight()==false&&this.isGrouping()==false}return false},_getScrollView:function(){var a=this.getVisibleRows();return a},_getScrollViewCount:function(){return this._getScrollView().length},_getScrollRowHeight:function(b,a){if(a&&a._height){var c=parseInt(a._height);if(!isNaN(c)){return c}}return this.defaultRowHeight},_getRangeHeight:function(b,a){return(a-b)*this.defaultRowHeight},_getIndexByScrollTop:function(a){var b=parseInt(a/this.defaultRowHeight);return b},__getScrollViewRange:function(b,a){var c=this._getScrollView();return c.getRange(b,a)},_getColumnByScrollLeft:function(f){var j=0,b=this.getUnFrozenColumns(),i=b.length;for(var g=0,c=i;g<c;g++){var d=b[g],a=d.pxWidth;if(!isNaN(a)){j+=a}if(j>=f){return g}}return i},_getRangeWidth:function(i,d){var g=0,b=this.getUnFrozenColumns();for(var f=i;f<d;f++){var c=b[f];if(c){var a=c.pxWidth;if(!isNaN(a)){g+=a}}}return g},_getColumnAllWidth:function(){var i=0,b=this.getUnFrozenColumns(),g=b.length;for(var f=0,d=g;f<d;f++){var c=b[f],a=c.pxWidth;if(!isNaN(a)){i+=a}}return i},_getViewRegion:function(){var f=this._getScrollView();if(this.isVirtualScroll()==false){var j={top:0,bottom:0,rows:f,start:0,end:0};return j}var g=this.defaultRowHeight,n=this._getViewNowRegion(),q=this.getScrollTop(),d=this._vscrollEl.offsetHeight,c=this._getScrollViewCount(),b=n.start,l=n.end;for(var a=0,r=c;a<r;a+=this.virtualRows){var s=a+this.virtualRows;if(a<=b&&b<s){b=a}if(a<l&&l<=s){l=s}}if(l>c){l=c}if(l==0){l=this.virtualRows}var p=this._getRangeHeight(0,b),o=this._getRangeHeight(l,this._getScrollViewCount()),f=this.__getScrollViewRange(b,l),j={top:p,bottom:o,rows:f,start:b,end:l,viewStart:b,viewEnd:l};j.viewTop=this._getRangeHeight(0,j.viewStart);j.viewBottom=this._getRangeHeight(j.viewEnd,this._getScrollViewCount());if(this.virtualColumns){var k=this.getScrollLeft(),i=this._rowsViewEl.offsetWidth;j.startColumn=this._getColumnByScrollLeft(k);j.endColumn=this._getColumnByScrollLeft(k+i);j.columns=this.getUnFrozenColumns().slice(j.startColumn,j.endColumn+1);j.right=this._getColumnAllWidth();j.viewLeft=this._getRangeWidth(0,j.startColumn)}else{j.columns=this.getUnFrozenColumns()}return j},_getViewNowRegion:function(){var d=this.defaultRowHeight,f=this.getScrollTop(),b=this._rowsViewEl.offsetHeight,c=this._getIndexByScrollTop(f),i=this._getIndexByScrollTop(f+b+30),a=this._getScrollViewCount();if(i>a){i=a}var g={start:c,end:i};return g},_canVirtualUpdate:function(){if(!this._viewRegion){return true}var a=this._getViewNowRegion();if(this._viewRegion.start<=a.start&&a.end<=this._viewRegion.end){return false}return true},__OnColumnsChanged:function(a){var b=this;this.columns=this._columnModel.columns;this.ooo1O();this.lolOOO();if(this.getVisibleRows().length==0){this.doUpdate()}else{this.deferUpdate()}if(this.isVirtualScroll()){this.__OnVScroll()}this.fire("columnschanged")},doLayout:function(){if(this.canLayout()==false){return}mini.ScrollGridView.superclass.doLayout.call(this);this._layoutScroll();if(mini.isNumber(this._scrollTop)&&this._vscrollEl.scrollTop!=this._scrollTop){this._vscrollEl.scrollTop=this._scrollTop}},O11lOsHTML:function(n,c,f,l,d,j){var b=this.isVirtualScroll();if(!b){return mini.ScrollGridView.superclass.O11lOsHTML.apply(this,arguments)}var g=b?this._viewRegion:null,p=['<table class="mini-grid-table" cellspacing="0" cellpadding="0" border="0" >'];p.push(this._createTopRowHTML(n));if(this.isVirtualScroll()){var i=l==0?"display:none;":"";p.push('<tr class="mini-grid-virtualscroll-top" style="padding:0;border:0;'+i+'"><td colspan="'+n.length+'" style="height:'+l+"px;padding:0;border:0;"+i+'"></td></tr>')}var o=new Date();if(c==1&&this.isFrozen()==false){}else{for(var a=0,q=f.length;a<q;a++){var k=f[a];this.O11lOHTML(k,j,n,c,p);j++}}if(this.isVirtualScroll()){p.push('<tr class="mini-grid-virtualscroll-bottom" style="padding:0;border:0;"><td colspan="'+n.length+'" style="height:'+d+'px;padding:0;border:0;"></td></tr>')}p.push("</table>");return p.join("")},doUpdateRows:function(){if(this.isVirtualScroll()==false){mini.ScrollGridView.superclass.doUpdateRows.call(this);return}var n=this._getViewRegion();this._viewRegion=n;var j=this.getFrozenColumns(),f=n.columns,b=n.viewStart,d=n.start,l=n.viewEnd;if(this._scrollPaging){var c=this.getPageIndex()*this.getPageSize();b-=c;d-=c;l-=c}var k=this.O11lOsHTML(j,1,n.rows,n.viewTop,n.viewBottom,b),a=this.O11lOsHTML(f,2,n.rows,n.viewTop,n.viewBottom,b);this._rowsLockContentEl.innerHTML=k;this._rowsViewContentEl.innerHTML=a;var i=this._rowsViewContentEl.firstChild;if(this.virtualColumns){a='<div style="position:absolute;top:0px;left:'+n.right+'px;width:1px;height:1px;overflow:hidden;"></div>';jQuery(a).appendTo(this._rowsViewContentEl);i.style.width="0px";i.style.position="absolute";i.style.top="0px";i.style.left=n.viewLeft+"px"}var g=this.getScrollTop();if(this._rowsViewEl.scrollTop!=g){this._syncScrollOffset(null,g)}},_create:function(){mini.ScrollGridView.superclass._create.call(this);this._vscrollEl=mini.append(this._rowsEl,'<div class="mini-grid-vscroll"><div class="mini-grid-vscroll-content"></div></div>');this._vscrollContentEl=this._vscrollEl.firstChild},_initEvents:function(){mini.ScrollGridView.superclass._initEvents.call(this);var a=this;mini.on(this._vscrollEl,"scroll",this.__OnVScroll,this);mini._onScrollDownUp(this._vscrollEl,function(b){a._VScrollMouseDown=true},function(b){a._VScrollMouseDown=false})},_layoutScroll:function(){var d=this.isVirtualScroll();if(d){var b=this.getScrollHeight(),c=b>this._rowsViewEl.offsetHeight;if(d&&c){this._vscrollEl.style.display="block";this._vscrollContentEl.style.height=b+"px"}else{this._vscrollEl.style.display="none"}if(this._rowsViewEl.scrollWidth>this._rowsViewEl.clientWidth+1){var a=this.getBodyHeight(true)-18;if(a<0){a=0}this._vscrollEl.style.height=a+"px"}else{this._vscrollEl.style.height="100%"}}else{this._vscrollEl.style.display="none"}},getScrollHeight:function(){var a=this.getVisibleRows();return this._getRangeHeight(0,a.length)},setScrollTop:function(a){if(this.isVirtualScroll()){this._vscrollEl.scrollTop=a}else{this._rowsViewEl.scrollTop=a}},getScrollTop:function(){if(this.isVirtualScroll()){return this._vscrollEl.scrollTop}else{return this._rowsViewEl.scrollTop}},__OnVScroll:function(c){var a=this.isVirtualScroll();if(a){this._scrollTop=this._vscrollEl.scrollTop;var b=this;setTimeout(function(){b._syncScrollOffset(null,b._scrollTop);b._ll0llO=null},8);if(this._scrollTopTimer){clearTimeout(this._scrollTopTimer)}this._scrollTopTimer=setTimeout(function(){b._scrollTopTimer=null;b._tryUpdateScroll();b._syncScrollOffset(null,b._scrollTop)},150)}},wheelIncrement:0,setWheelIncrement:function(a){this.wheelIncrement=a},getWheelIncrement:function(){return this.wheelIncrement},__OnMouseWheel:function(a){var c=a.wheelDelta?a:a.originalEvent,f=c.wheelDelta||-c.detail*40;if(f>0){f=f+this.wheelIncrement}else{f=f-this.wheelIncrement}var d=this.getScrollTop()-f,b=this.getScrollTop();this.setScrollTop(d);if(b!=this.getScrollTop()||this.isVirtualScroll()){a.preventDefault()}},_tryUpdateScroll:function(){var a=this._canVirtualUpdate();if(a){if(this._scrollPaging){var b=this;this.reload(null,null,function(f){})}else{var c=new Date(),d=this._rowsViewEl.scrollLeft;this._doRemoveRowContent();this.doUpdateRows();this.deferLayout(50);this._syncScrollOffset(d)}}},_updateScrollTop:function(a){this._syncScrollOffset(null,a);this._tryUpdateScroll()},__OnRowViewScroll:function(a){this._syncScroll();if(this.virtualColumns){this.doVirtualColumns()}},doVirtualColumns:function(){var a=this;if(a._virtualColumnTimer){clearTimeout(a._virtualColumnTimer);a._virtualColumnTimer=null}a._virtualColumnTimer=setTimeout(function(){a._virtualColumnTimer=null;a._doRemoveRowContent();a.doUpdateRows();a.deferLayout(50)},500)}});mini.regClass(mini.ScrollGridView,"ScrollGridView");mini._onScrollDownUp=function(a,d,g){function f(i){if(mini.isFirefox){mini.on(document,"mouseup",b)}else{mini.on(document,"mousemove",c)}d(i)}function c(i){mini.un(document,"mousemove",c);g(i)}function b(i){mini.un(document,"mouseup",b);g(i)}mini.on(a,"mousedown",f)};mini.mousewheelEditable=false;mini._Gridl0l0o0=function(a){this.owner=a,el=a.el;a.on("rowmousemove",this.__OnRowMouseMove,this);mini.on(a.O0l0o1,"mouseout",this.lol11,this);mini.on(a.O0l0o1,"mousewheel",this.__OnMouseWheel,this);mini.on(document,"mousewheel",this.__OnMouseWheel,this);a.on("cellmousedown",this.__OnCellMouseDown,this);a.on("cellmouseup",this.__OnGridCellClick,this);a.on("celldblclick",this.__OnGridCellClick,this);mini.on(a.el,"keydown",this.ll000O,this);jQuery(a._columnsEl).on("mouseenter",".mini-grid-headerCell",function(b){jQuery(b.currentTarget).addClass("mini-grid-header-over")});jQuery(a._columnsEl).on("mouseleave",".mini-grid-headerCell",function(b){jQuery(b.currentTarget).removeClass("mini-grid-header-over")})};mini._Gridl0l0o0.prototype={ll000O:function(f){var p=this.owner,b=__getByCls(f.target,"mini-grid-detailRow"),n=b?__getById(p.el,b):false;if(__getById(p.oOOOo1,f.target)||__getById(p.ol1Olo,f.target)||__getById(p.OlO0O,f.target)||__getById(p.OooOo,f.target)||(__getByCls(f.target,"mini-grid-detailRow")&&n)||__getByCls(f.target,"mini-grid-rowEdit")||__getByCls(f.target,"mini-tree-editinput")){return}var q=p.getCurrentCell();if(f.shiftKey||f.ctrlKey||f.altKey){return}if(f.keyCode==37||f.keyCode==38||f.keyCode==39||f.keyCode==40){f.preventDefault()}var o=p.getVisibleColumns();function a(s){return p.getVisibleRows()[s]}function i(s){return p.getVisibleRows().indexOf(s)}function g(){return p.getVisibleRows().length}var d=q?q[1]:null,l=q?q[0]:null;if(!q){l=p.getCurrent()}var k=o.indexOf(d),j=i(l),c=g();switch(f.keyCode){case 9:if(p.allowCellEdit&&p.editOnTabKey){f.preventDefault();p._beginEditNextCell(f.shiftKey==false,true);return}break;case 27:break;case 13:if(p.allowCellEdit&&p.editNextOnEnterKey){if(d){if(p.isEditingCell(q)||!d.editor){p._beginEditNextCell(f.shiftKey==false);return}}}if(p.allowCellEdit&&q&&!d.readOnly&&!p.isReadOnly()){p.beginEditCell()}break;case 37:if(d){if(k>0){k-=1}}else{k=0}break;case 38:if(l){if(j>0){j-=1}}else{j=0}if(j!=0&&p.isVirtualScroll()){}break;case 39:if(d){if(k<o.length-1){k+=1}}else{k=0}break;case 40:if(l){if(j<c-1){j+=1}}else{j=0}break;default:return;break}d=o[k];l=a(j);if(d&&l&&p.allowCellSelect){q=[l,d];p.setCurrentCell(q);p.scrollIntoView(l,d,false)}if(!p.onlyCheckSelection){if(f.keyCode!=37&&f.keyCode!=39){if(l&&p.allowRowSelect){var r={record:l,selected:l,cancel:false,htmlEvent:f};if(l){p.fire("beforerowselect",r);p.fire("beforeselect",r)}if(r.cancel){return}p.deselectAll();p.setCurrent(l);if(l){p.scrollIntoView(l,null,false)}}}}},__OnMouseWheel:function(b){var a=this.owner;b.stopPropagation();if(mini.mousewheelEditable){return}var c=a.l00OOl;if(c&&c.within(b)){return}if(a.allowCellEdit){a.commitEdit()}},__OnGridCellClick:function(b){var a=this.owner,d=b.type,c=new Date();if(d=="cellmouseup"){d="cellclick"}if(a.allowCellEdit==false){return}if(a.cellEditAction!=d){return}var g=b.record,f=b.column;if(!f.readOnly&&!a.isReadOnly()){if(b.htmlEvent.shiftKey||b.htmlEvent.ctrlKey){}else{a.beginEditCell()}}},__OnCellMouseDown:function(b){var a=this;if(!a.owner.selectOnRightClick){if(b.htmlEvent.which==3){return}}setTimeout(function(){a.__doSelect(b)},1)},__OnRowMouseMove:function(c){var b=this.owner,a=c.record;if(!b.enabled||b.enableHotTrack==false){return}b.focusRow(a)},lol11:function(a){if(this.owner.allowHotTrackOut){this.owner.focusRow(null)}},__doSelect:function(a){var g=a.record,f=a.column,i=this.owner;if(g.enabled===false){return}if(i.allowCellSelect){var d=[g,f];i.setCurrentCell(d)}if(i.onlyCheckSelection&&!f._multiRowSelect){return}if(i.allowRowSelect){var b={record:g,selected:g,cancel:false,htmlEvent:a};if(g){i.fire("beforerowselect",b);i.fire("beforeselect",b)}if(b.cancel){return}if(i.getMultiSelect()){i.el.onselectstart=function(){};if(a.htmlEvent.shiftKey){i.el.onselectstart=function(){return false};try{a.htmlEvent.preventDefault()}catch(b){}var c=i.getCurrent();if(c){i.deselectAll();i.selectRange(c,g);i.setCurrent(c)}else{i.select(g);i.setCurrent(g)}}else{i.el.onselectstart=function(){};if(a.htmlEvent.ctrlKey){i.el.onselectstart=function(){return false};try{a.htmlEvent.preventDefault()}catch(b){}}if(a.column._multiRowSelect===true||a.htmlEvent.ctrlKey||i.allowUnselect){if(i.isSelected(g)){i.deselect(g)}else{i.select(g);i.setCurrent(g)}}else{if(i.isSelected(g)){}else{i.deselectAll();i.select(g);i.setCurrent(g)}}}}else{if(!i.isSelected(g)){i.deselectAll();i.select(g)}else{if(a.htmlEvent.ctrlKey||i.allowUnselect){i.deselectAll()}}}}}};mini._Grid_RowGroup=function(a){this.owner=a,el=a.el;mini.on(a.o0Olll,"click",this.l11o00,this)};mini._Grid_RowGroup.prototype={l11o00:function(b){var a=this.owner,d=a._getRowGroupByEvent(b);if(d){if(!a.groupTitleCollapsible&&!__cls_has(b.target,"mini-grid-group-ecicon")){return}var c={htmlEvent:b,cancel:false,group:d};a.fire("beforegroupclick",c);if(c.cancel===true){return}a.toggleRowGroup(d)}}};mini._GridlllOMenu=function(a){this.owner=a;this.menu=this.createMenu();mini.on(a.el,"contextmenu",this.lOOo,this);a.on("destroy",this.__OnGridDestroy,this)};mini._GridlllOMenu.prototype={__OnGridDestroy:function(a){if(this.menu){this.menu.destroy()}this.menu=null},createMenu:function(){var a=mini.create({type:"menu",hideOnClick:false});a.on("itemclick",this.O100,this);return a},updateMenu:function(){var b=this.owner,g=this.menu,a=b.getBottomColumns(),c=[];for(var i=0,f=a.length;i<f;i++){var j=a[i];if(j.hideable){continue}var d={};d.checked=j.visible;d.checkOnClick=true;d.text=b.o00ollText(j);if(d.text=="&nbsp;"){if(j.type=="indexcolumn"){d.text="序号"}if(j.type=="checkcolumn"){d.text="选择"}}c.push(d);d.enabled=j.enabled;d._column=j}g.setItems(c)},lOOo:function(b){var a=this.owner;if(a.showColumnsMenu==false){return}if(__getById(a._columnsEl,b.target)==false){return}this.updateMenu();this.menu.showAtPos(b.pageX,b.pageY);return false},O100:function(d){var j=this.owner,n=this.menu,c=j.getBottomColumns(),g=n.getItems(),k=d.item,b=k._column,f=0;for(var a=0,l=g.length;a<l;a++){var o=g[a];if(o.getChecked()){f++}}if(f<1){k.setChecked(true)}var i=k.getChecked();if(i){j.showColumn(b)}else{j.hideColumn(b)}}};mini._Grid_CellToolTip=function(a){this.owner=a;mini.on(this.owner.el,"mousemove",this.__OnGridMouseMove,this)};mini._Grid_CellToolTip.prototype={__OnGridMouseMove:function(b){var a=this.owner;if(__cls_has(b.target,"mini-grid-headerCell-inner")){var g=b.target;if(g.scrollWidth>g.clientWidth){var c=g.innerText||g.textContent||"";g.title=c.trim()}else{g.title=""}return}var f=a.ol1Ol(b),g=a.ol010(f[0],f[1]),d=a.getCellError(f[0],f[1]);if(g){if(d){setTimeout(function(){g.title=d.errorText},10);return}setTimeout(function(){var i=g;if(g.firstChild){if(__cls_has(g.firstChild,"mini-grid-cell-inner")){i=g.firstChild}if(__cls_has(g.firstChild,"mini-tree-nodetitle")){i=g.firstChild}}if(i.scrollWidth>i.clientWidth&&a.getShowCellTip()&&f[1].showCellTip){var j=i.innerText||i.textContent||"";g.title=j.trim()}else{g.title=""}},10)}}};mini._Grid_Sorter=function(a){this.owner=a;this.owner.on("headercellclick",this.__OnGridHeaderCellClick,this);this.owner.on("headercelldblclick",this.__OnGridHeaderCellClick,this);mini.on(a.ll0O,"mousemove",this.__OnGridHeaderMouseMove,this);mini.on(a.ll0O,"mouseout",this.__OnGridHeaderMouseOut,this)};mini._Grid_Sorter.prototype={__OnGridHeaderMouseOut:function(a){if(this.OO0OO1ColumnEl){__cls_rm(this.OO0OO1ColumnEl,"mini-grid-headerCell-hover")}},__OnGridHeaderMouseMove:function(a){var b=__getByCls(a.target,"mini-grid-headerCell");if(b){__cls_add(b,"mini-grid-headerCell-hover");this.OO0OO1ColumnEl=b}},__OnGridHeaderCellClick:function(c){var b=this.owner,d=c.htmlEvent.type;if(d=="dblclick"&&!b.sortDblClick){return}if(d=="click"&&b.sortDblClick){return}if(!__cls_has(c.htmlEvent.target,"mini-grid-column-splitter")){if(b.allowSortColumn&&b.isEditing()==false){var g=c.column;if(!g.columns||g.columns.length==0){var f=g.sortField||g.field;if(f&&g.allowSort!==false){var a="asc";if(b.getSortField()==f){a=b.getSortOrder()=="asc"?"desc":"asc"}b.sortBy(f,a)}}}}}};mini._Grid_ColumnMove=function(a){this.owner=a;mini.on(this.owner.el,"mousedown",this.OoO0l1,this)};mini._Grid_ColumnMove.prototype={OoO0l1:function(b){var a=this.owner;if(a.isEditing()){return}if(__cls_has(b.target,"mini-grid-column-splitter")){return}if(b.button==mini.MouseButton.Right){return}var c=__getByCls(b.target,a._headerCellCls);if(c){this._remove();var d=a.O01l(b);if(a.allowMoveColumn&&d&&d.allowMove){this.dragColumn=d;this._columnEl=c;this.getDrag().start(b)}}},getDrag:function(){if(!this.drag){this.drag=new mini.Drag({capture:false,onStart:mini.createDelegate(this.OolO0,this),onMove:mini.createDelegate(this.OloO,this),onStop:mini.createDelegate(this.oOOO1,this)})}return this.drag},OolO0:function(b){function a(f){var d=f.header;if(typeof d=="function"){d=d.call(c,f)}if(mini.isNull(d)||d===""){d="&nbsp;"}return d}var c=this.owner;this.O0ollo=mini.append(document.body,'<div class="mini-grid-columnproxy"></div>');this.O0ollo.innerHTML='<div class="mini-grid-columnproxy-inner" style="height:26px;">'+a(this.dragColumn)+"</div>";mini.setXY(this.O0ollo,b.now[0]+15,b.now[1]+18);__cls_add(this.O0ollo,"mini-grid-no");this.moveTop=mini.append(document.body,'<div class="mini-grid-movetop"></div>');this.moveBottom=mini.append(document.body,'<div class="mini-grid-movebottom"></div>')},OloO:function(i){var b=this.owner,a=i.now[0];mini.setXY(this.O0ollo,a+15,i.now[1]+18);this.targetColumn=this.insertAction=null;var c=__getByCls(i.event.target,b._headerCellCls);if(c){var k=b.O01l(i.event);if(k&&k!=this.dragColumn){var f=b.getParentColumn(this.dragColumn),d=b.getParentColumn(k);if(f==d){this.targetColumn=k;this.insertAction="before";var g=b.getColumnBox(this.targetColumn);if(a>g.x+g.width/2){this.insertAction="after"}}}}if(this.targetColumn){__cls_add(this.O0ollo,"mini-grid-ok");__cls_rm(this.O0ollo,"mini-grid-no");var j=b.getColumnBox(this.targetColumn);this.moveTop.style.display="block";this.moveBottom.style.display="block";if(this.insertAction=="before"){mini.setXY(this.moveTop,j.x-4,j.y-9);mini.setXY(this.moveBottom,j.x-4,j.bottom)}else{mini.setXY(this.moveTop,j.right-4,j.y-9);mini.setXY(this.moveBottom,j.right-4,j.bottom)}}else{__cls_rm(this.O0ollo,"mini-grid-ok");__cls_add(this.O0ollo,"mini-grid-no");this.moveTop.style.display="none";this.moveBottom.style.display="none"}},_remove:function(){var a=this.owner;mini.removeNode(this.O0ollo);mini.removeNode(this.moveTop);mini.removeNode(this.moveBottom);this.O0ollo=this.moveTop=this.moveBottom=this.dragColumn=this.targetColumn=null},oOOO1:function(a){var b=this.owner;b.moveColumn(this.dragColumn,this.targetColumn,this.insertAction);this._remove()}};mini._Grid_ColumnSplitter=function(a){this.owner=a;mini.on(a.el,"mousedown",this.lOO1l1,this)};mini._Grid_ColumnSplitter.prototype={lOO1l1:function(b){var a=this.owner,c=b.target;if(__cls_has(c,"mini-grid-column-splitter")){var d=a.llO0(c.id);if(a.isEditing()){return}if(a.allowResizeColumn&&d&&d.allowResize){this.splitterColumn=d;this.getDrag().start(b)}}},getDrag:function(){if(!this.drag){this.drag=new mini.Drag({capture:true,onStart:mini.createDelegate(this.OolO0,this),onMove:mini.createDelegate(this.OloO,this),onStop:mini.createDelegate(this.oOOO1,this)})}return this.drag},OolO0:function(d){var b=this.owner,c=b.getColumnBox(this.splitterColumn);this.columnBox=c;this.O0ollo=mini.append(document.body,'<div class="mini-grid-proxy"></div>');var a=b.getGridViewBox();a.x=c.x;a.width=c.width;a.right=c.right;__setBox(this.O0ollo,a)},OloO:function(d){var c=this.owner,a=mini.copyTo({},this.columnBox),b=a.width+(d.now[0]-d.init[0]);if(b<c.columnMinWidth){b=c.columnMinWidth}if(b>c.columnMaxWidth){b=c.columnMaxWidth}__setWidth(this.O0ollo,b)},oOOO1:function(j){var g=this.owner,k=__getBox(this.O0ollo),f=this,i=g.allowSortColumn;g.allowSortColumn=false;setTimeout(function(){jQuery(f.O0ollo).remove();f.O0ollo=null;g.allowSortColumn=i},10);var c=this.splitterColumn,a=parseInt(c.width);if(a+"%"!=c.width){var b=g.getColumnWidth(c),d=parseInt(a/b*k.width);if(d<g.columnMinWidth){d=g.columnMinWidth}g.setColumnWidth(c,d)}}};mini._Grid_DragDrop=function(a){this.owner=a;this.owner.on("CellMouseDown",this.__OnGridCellMouseDown,this)};mini._Grid_DragDrop.prototype={__OnGridCellMouseDown:function(b){if(b.htmlEvent.button==mini.MouseButton.Right){return}var a=this.owner;if(a._dragging){return}this.dropObj=a;if(__getByCls(b.htmlEvent.target,"mini-tree-editinput")){return}if(a.isReadOnly()||a.isAllowDrag(b.record,b.column)==false){return}var c=a.OolO0(b.record,b.column);if(c.cancel){return}this.dragText=c.dragText;var f=b.record;this.isTree=!!a.isTree;this.beginRecord=f;var d=this.o00Oo0();d.start(b.htmlEvent)},OolO0:function(a){var c=this.owner;c._dragging=true;var b=this.beginRecord;this.dragData=c.o00Oo0Data();if(this.dragData.indexOf(b)==-1){this.dragData.push(b)}this.feedbackEl=mini.append(document.body,'<div class="mini-feedback"></div>');this.feedbackEl.innerHTML=this.dragText;this.lastFeedbackClass="";this.enableHotTrack=c.getEnableHotTrack();c.setEnableHotTrack(false)},_getDropTargetObj:function(a){var b=__getByCls(a.target,"mini-grid",500);if(b){return mini.get(b)}},OloO:function(f){var c=this.owner,d=this._getDropTargetObj(f.event);this.dropObj=d;var b=f.now[0],a=f.now[1];mini.setXY(this.feedbackEl,b+15,a+18);if(d&&d.allowDrop){this.isTree=d.isTree;var g=d.O0lO0ByEvent(f.event);this.dropRecord=g;if(g){if(this.isTree){this.dragAction=this.getFeedback(g,a,3)}else{this.dragAction=this.getFeedback(g,a,2)}}else{this.dragAction="no"}}else{this.dragAction="no"}if(d&&d.allowDrop&&!g&&d.getData().length==0){this.dragAction="add"}this.lastFeedbackClass="mini-feedback-"+this.dragAction;this.feedbackEl.className="mini-feedback "+this.lastFeedbackClass;if(this.dragAction=="no"){g=null}this.setRowFeedback(g,this.dragAction)},oOOO1:function(j){var n=this.owner,p=this.dropObj;n._dragging=false;mini.removeNode(this.feedbackEl);n.setEnableHotTrack(this.enableHotTrack);this.feedbackEl=null;this.setRowFeedback(null);if(this.isTree){var i=[];for(var o=0,a=this.dragData.length;o<a;o++){var r=this.dragData[o],g=false;for(var c=0,b=this.dragData.length;c<b;c++){var q=this.dragData[c];if(q!=r){g=n.isAncestor(q,r);if(g){break}}}if(!g){i.push(r)}}this.dragData=i}if(this.dragAction=="add"&&!this.dropRecord){this.dropRecord=p.getRootNode?p.getRootNode():{__root:true}}if(this.dropRecord&&p&&this.dragAction!="no"){var f=p.O10011(this.dragData,this.dropRecord,this.dragAction);if(!f.cancel){var i=f.dragNodes,k=f.targetNode,l=f.action;if(p.isTree){if(n==p){p.moveNodes(i,k,l)}else{if(p.dropAction=="move"){n.removeNodes(i)}else{if(p.dropAction=="copy"){i=mini.clone(i)}}p.addNodes(i,k,l)}}else{var d=p.indexOf(k);if(l=="after"){d+=1}if(n==p){p.moveRow(i,d)}else{if(p.dropAction=="move"){n.removeRows(i)}else{if(p.dropAction=="copy"){i=mini.clone(i)}}if(this.dragAction=="add"){p.addRows(i)}else{p.addRows(i,d)}}}f={dragNode:f.dragNodes[0],dropNode:f.targetNode,dragAction:f.action,dragNodes:f.dragNodes,targetNode:f.targetNode};p.fire("drop",f)}}this.dropRecord=null;this.dragData=null},setRowFeedback:function(a,f){var b=this.owner,c=this.dropObj;if(this.lastAddDomRow&&c){c.removeRowCls(this.lastAddDomRow,"mini-tree-feedback-add")}if(a==null||this.dragAction=="add"){mini.removeNode(this.feedbackLine);this.feedbackLine=null}this.lastRowFeedback=a;if(a!=null){if(f=="before"||f=="after"){if(!this.feedbackLine){this.feedbackLine=mini.append(document.body,"<div class='mini-feedback-line'></div>")}this.feedbackLine.style.display="block";var g=c.getRowBox(a),j=g.x,i=g.y-1;if(f=="after"){i+=g.height}mini.setXY(this.feedbackLine,j,i);var d=c.getBox(true);__setWidth(this.feedbackLine,d.width)}else{c.addRowCls(a,"mini-tree-feedback-add");this.lastAddDomRow=a}}},getFeedback:function(o,g,q){var j=this.owner,p=this.dropObj,b=p.getRowBox(o),d=b.height,k=g-b.y,i=null;if(this.dragData.indexOf(o)!=-1){return"no"}var f=false;if(q==3){f=p.isLeaf(o);for(var c=0,a=this.dragData.length;c<a;c++){var r=this.dragData[c],l=p.isAncestor(r,o);if(l){i="no";break}}}if(i==null){if(q==2){if(k>d/2){i="after"}else{i="before"}}else{if(f&&p.allowLeafDropIn===false){if(k>d/2){i="after"}else{i="before"}}else{if(k>(d/3)*2){i="after"}else{if(d/3<=k&&k<=(d/3*2)){i="add"}else{i="before"}}}}}var n=p.lOOO00(i,this.dragData,o,j);return n.effect},o00Oo0:function(){if(!this.drag){this.drag=new mini.Drag({onStart:mini.createDelegate(this.OolO0,this),onMove:mini.createDelegate(this.OloO,this),onStop:mini.createDelegate(this.oOOO1,this)})}return this.drag}};mini._Grid_Events=function(a){this.owner=a,el=a.el;mini.on(el,"click",this.l11o00,this);mini.on(el,"dblclick",this.O1loO1,this);mini.on(el,"mousedown",this.lOO1l1,this);mini.on(el,"mouseup",this.loOll1,this);mini.on(el,"mousemove",this.olOO,this);mini.on(el,"mouseover",this.lloO,this);mini.on(el,"mouseout",this.lol11,this);mini.on(el,"keydown",this.o110O,this);mini.on(el,"keyup",this.oO11O,this);mini.on(el,"contextmenu",this.lOOo,this);a.on("rowmousemove",this.__OnRowMouseMove,this);mini.on(window,"resize",this.__windowResize,this)};mini._Grid_Events.prototype={__windowResize:function(){var b=this.owner;function a(){var d=b._getEditingControl();if(d){var c=b.getCurrentCell(),f=b.getCellBox(c[0],c[1]);b.OOoOoO(f,d);b._setEditorBox(d,f)}}setTimeout(function(){a()},100)},_row:null,__OnRowMouseMove:function(c){var b=this.owner,a=c.record;if(this._row!=a){c.record=a;c.row=a;b.fire("rowmouseenter",c)}this._row=a},l11o00:function(a){this.oO1Oo0(a,"Click")},O1loO1:function(a){this.oO1Oo0(a,"Dblclick")},lOO1l1:function(b){var a=this.owner;if(__getByCls(b.target,"mini-tree-editinput")){return}if(__getByCls(b.target,"mini-tree-node-ecicon")){return}this.oO1Oo0(b,"MouseDown");var c=300;if(b.target.tagName.toLowerCase()=="a"&&b.target.href){c=10}function d(){var f=__getByCls(b.target,"mini-grid-detailRow");if(__getById(a.el,f)){return}if(!!a.o110){return}a._tryFocus(b)}setTimeout(function(){d()},c)},loOll1:function(b){if(__getByCls(b.target,"mini-tree-editinput")){return}if(__getByCls(b.target,"mini-tree-node-ecicon")){return}if(__getByCls(b.target,"mini-tree-checkbox")){return}var a=this.owner;if(__getById(a.el,b.target)){this.oO1Oo0(b,"MouseUp")}},olOO:function(a){this.oO1Oo0(a,"MouseMove")},lloO:function(a){this.oO1Oo0(a,"MouseOver")},lol11:function(a){this.oO1Oo0(a,"MouseOut")},o110O:function(a){this.oO1Oo0(a,"KeyDown")},oO11O:function(a){this.oO1Oo0(a,"KeyUp")},lOOo:function(a){this.oO1Oo0(a,"ContextMenu")},oO1Oo0:function(g,a){var c=this.owner,i=c.ol1Ol(g),b=i[0],k=i[1];if(b){var d={record:b,row:b,htmlEvent:g},j=c["_OnRow"+a];if(j){j.call(c,d)}else{c.fire("row"+a,d)}}if(k){d={column:k,field:k.field,htmlEvent:g},j=c["_OnColumn"+a];if(j){j.call(c,d)}else{c.fire("column"+a,d)}}if(b&&k){d={sender:c,record:b,row:b,column:k,field:k.field,htmlEvent:g},j=c["_OnCell"+a];if(j){j.call(c,d)}else{c.fire("cell"+a,d)}if(k["onCell"+a]){k["onCell"+a].call(k,d)}}if(!b&&k&&__getByCls(g.target,"mini-grid-headerCell")){d={column:k,htmlEvent:g},j=c["_OnHeaderCell"+a];if(j){j.call(c,d)}else{var f="onheadercell"+a.toLowerCase();if(k[f]){d.sender=c;k[f](d)}c.fire("headercell"+a,d)}}}};DataGrid=function(a){DataGrid.superclass.constructor.call(this,null);this._Events=new mini._Grid_Events(this);this.l0l0o0=new mini._Gridl0l0o0(this);this._DragDrop=new mini._Grid_DragDrop(this);this._RowGroup=new mini._Grid_RowGroup(this);this.o11o1=new mini._Grid_ColumnSplitter(this);this._ColumnMove=new mini._Grid_ColumnMove(this);this._Sorter=new mini._Grid_Sorter(this);this._CellToolTip=new mini._Grid_CellToolTip(this);this.lllOMenu=new mini._GridlllOMenu(this);this.o0olO1s();if(a){mini.applyTo.call(this,a)}};mini.extend(DataGrid,mini.ScrollGridView,{uiCls:"mini-datagrid",selectOnLoad:false,showHeader:false,showPager:true,dropAction:"move",onlyCheckSelection:false,_$onlyCheckSelection:true,allowUnselect:false,allowRowSelect:true,allowCellSelect:false,allowCellEdit:false,cellEditAction:"cellclick",allowCellValid:false,allowResizeColumn:true,allowSortColumn:true,allowMoveColumn:true,showColumnsMenu:false,virtualScroll:false,enableHotTrack:true,allowHotTrackOut:true,showLoading:true,columnMinWidth:8,o00Oo:true,loo1ll:null,o110:null,navEditMode:false,editNextRowCell:false,editNextOnEnterKey:false,editOnTabKey:true,createOnEnter:false,skipReadOnlyCell:false,autoHideRowDetail:true,allowDrag:false,allowDrop:false,allowLeafDropIn:false,pageSize:20,pageIndex:0,totalCount:0,totalPage:0,sortField:"",sortOrder:"",url:"",sortDblClick:false,showCellTip:true,sizeText:"",showPagerButtonText:false,showPagerButtonIcon:false,groupTitleCollapsible:true,allowEmptyContextMenu:false,headerContextMenu:null,selectOnRightClick:true});mini.copyTo(DataGrid.prototype,{getAttrs:function(A){var E=DataGrid.superclass.getAttrs.call(this,A),$=mini.getChildNodes(A);for(var C=0,D=$.length;C<D;C++){var _=$[C],B=mini.getAttr(_,"property");if(!B){continue}B=B.toLowerCase();if(B=="columns"){E.columns=mini.O0O1O1(_);mini.removeNode(_)}else{if(B=="data"){E.data=_.innerHTML;mini.removeNode(_)}}}mini._ParseString(A,E,["oncelleditenter","onselect","ondeselect","onbeforeselect","onbeforedeselect","url","sizeList","bodyCls","bodyStyle","footerCls","footerStyle","pagerCls","pagerStyle","onheadercellclick","onheadercellmousedown","onheadercellcontextmenu","onrowdblclick","onrowclick","onrowmousedown","onrowcontextmenu","onrowmouseenter","onrowmouseleave","oncellclick","oncellmousedown","oncellcontextmenu","oncelldblclick","onbeforeload","onpreload","onloaderror","onload","onupdate","ondrawcell","oncellbeginedit","onselectionchanged","ondrawgroup","onbeforeshowrowdetail","onbeforehiderowdetail","onshowrowdetail","onhiderowdetail","idField","valueField","pager","oncellcommitedit","oncellendedit","headerContextMenu","loadingMsg","emptyText","cellEditAction","sortMode","oncellvalidation","onsort","ondrawsummarycell","ondrawgroupsummarycell","onresize","oncolumnschanged","ajaxMethod","ajaxOptions","onaddrow","onupdaterow","onremoverow","onmoverow","onbeforeaddrow","onbeforeupdaterow","onbeforeremoverow","onbeforemoverow","pageIndexField","pageSizeField","sortFieldField","sortOrderField","startField","limitField","totalField","dataField","sortField","sortOrder","stackTraceField","errorField","errorMsgField","pagerButtons","onbeforegroupclick","dropAction","sizeText","pagerType","viewType","itemRenderer","summaryPosition"]);mini._ParseBool(A,E,["showColumns","showFilterRow","showSummaryRow","showPager","showFooter","enableGroupOrder","showHGridLines","showVGridLines","showSortIcon","allowSortColumn","allowMoveColumn","allowResizeColumn","fitColumns","showLoading","multiSelect","allowAlternating","resultAsData","allowRowSelect","allowUnselect","onlyCheckSelection","allowHotTrackOut","enableHotTrack","showPageIndex","showPageSize","showTotalCount","checkSelectOnLoad","allowResize","autoLoad","autoHideRowDetail","allowCellSelect","allowCellEdit","allowCellWrap","allowHeaderWrap","selectOnLoad","virtualScroll","virtualColumns","collapseGroupOnLoad","showGroupSummary","showEmptyText","alwaysShowEmptyText","allowCellValid","showModified","showColumnsMenu","showPageInfo","showReloadButton","showNewRow","editNextOnEnterKey","createOnEnter","skipReadOnlyCell","ajaxAsync","allowDrag","allowDrop","allowLeafDropIn","editNextRowCell","fixedRowHeight","showCellTip","showPagerButtonText","showPagerButtonIcon","groupTitleCollapsible","navEditMode","selectOnRightClick","sortDblClick","allowEmptyContextMenu","showGroupSummary"]);mini._ParseInt(A,E,["frozenStartColumn","frozenEndColumn","pageSizeWidth","pageIndex","pageSize","defaultRowHeight","defaultColumnWidth","wheelIncrement","summaryRows"]);if(typeof E.ajaxOptions=="string"){E.ajaxOptions=window.eval("("+E.ajaxOptions+")")}if(typeof E.sizeList=="string"){E.sizeList=window.eval("("+E.sizeList+")")}if(!E.idField&&E.valueField){E.idField=E.valueField}if(E.pagerButtons){E.pagerButtons=__get(E.pagerButtons)}if(E.itemRenderer){E.itemRenderer=window[E.itemRenderer]}return E},_set_autoCreateNewID:function(a){this._dataSource._autoCreateNewID=a},_setl0ol0O:function(a){this._dataSource.l0ol0O=a},_setoOOl:function(a){this._dataSource.oOOl=a},_seto1Oo:function(a){this._dataSource.o1Oo=a},_geto1Oo:function(){return this._dataSource.o1Oo},getSelectOnRightClick:function(){return this.selectOnRightClick},setSelectOnRightClick:function(a){this.selectOnRightClick=a},getHeaderContextMenu:function(){return this.headerContextMenu},setHeaderContextMenu:function(a){var b=this.Ol1loO(a);if(!b){return}if(this.headerContextMenu!==b){this.headerContextMenu=b;this.headerContextMenu.owner=this;mini.on(this.el,"contextmenu",function(c){var f={popupEl:this.el,htmlEvent:c,cancel:false};if(__getById(this._columnsEl,c.target)){if(this.headerContextMenu){this.headerContextMenu.fire("BeforeOpen",f);if(f.cancel==true){return}this.headerContextMenu.fire("opening",f);if(f.cancel==true){return}this.headerContextMenu.showAtPos(c.pageX,c.pageY);this.headerContextMenu.fire("Open",f)}}else{var d=__getByCls(c.target,"mini-grid-detailRow");if(d&&__getById(this.el,d)){return}var g=__getByCls(c.target,"mini-tree-nodeshow");if(!g&&this.type=="tree"&&!this.allowEmptyContextMenu){return}if(!this.allowEmptyContextMenu&&!__getByCls(c.target,"mini-grid-table")){return}if(__getByCls(c.target,"mini-grid-filterRow")){return}if(__getByCls(c.target,"mini-grid-summaryRow")){return}if(this.contextMenu){this._beforeOpenContentMenu(this.contextMenu,f);if(f.cancel==true){return}this.contextMenu.fire("opening",f);if(f.cancel==true){return}this.contextMenu.showAtPos(c.pageX,c.pageY);this.contextMenu.fire("Open",f)}}return false},this)}},_beforeOpenContentMenu:function(a,b){var c=__getById(this.o0Olll,b.htmlEvent.target);if(c){a.fire("BeforeOpen",b)}else{b.cancel=true}},getAllowEmptyContextMenu:function(){return this.allowEmptyContextMenu},setAllowEmptyContextMenu:function(a){this.allowEmptyContextMenu=a},getGroupTitleCollapsible:function(){return this.groupTitleCollapsible},setGroupTitleCollapsible:function(a){this.groupTitleCollapsible=a},getDropAction:function(){return this.dropAction},setDropAction:function(a){this.dropAction=a},setPagerCls:function(a){this.pagerCls=a;__cls_add(this._bottomPager.el,a)},setPagerStyle:function(a){this.pagerStyle=a;__css_set(this._bottomPager.el,a)},getShowTotalCount:function(){return this._bottomPager.getShowTotalCount()},setShowTotalCount:function(a){this._bottomPager.setShowTotalCount(a)},getShowPageIndex:function(){return this._bottomPager.getShowPageIndex()},setShowPageIndex:function(a){this.showPageIndex=a;this._bottomPager.setShowPageIndex(a)},getShowPageSize:function(){return this._bottomPager.getShowPageSize()},setShowPageSize:function(a){this._bottomPager.setShowPageSize(a)},getSizeList:function(){return this._bottomPager.getSizeList()},setSizeList:function(a){if(!mini.isArray(a)){return}this._bottomPager.setSizeList(a)},getShowPageInfo:function(){return this._bottomPager.getShowPageInfo()},setShowPageInfo:function(a){this._bottomPager.setShowPageInfo(a)},getShowReloadButton:function(){return this._bottomPager.getShowReloadButton()},setShowReloadButton:function(a){this._bottomPager.setShowReloadButton(a)},getShowPagerButtonIcon:function(){return this.showPagerButtonIcon},setShowPagerButtonIcon:function(a){this._bottomPager.setShowButtonIcon(a)},getShowPagerButtonText:function(){return this.showPagerButtonText},setShowPagerButtonText:function(a){this._bottomPager.setShowButtonText(a)},getSizeText:function(){return this.sizeText},setSizeText:function(a){this._bottomPager.sizeText=a},getBottomPager:function(){return this._bottomPager},getPageSizeWidth:function(){return this._bottomPager.getPageSizeWidth()},setPageSizeWidth:function(a){this._bottomPager.setPageSizeWidth(a)},getStackTraceField:function(){return this._dataSource.stackTraceField},setStackTraceField:function(a){this._dataSource.stackTraceField=a;this.stackTraceField=a},getErrorMsgField:function(){return this._dataSource.errorMsgField},setErrorMsgField:function(a){this._dataSource.errorMsgField=a;this.errorMsgField=a},getErrorField:function(){return this._dataSource.errorField},setErrorField:function(a){this._dataSource.errorField=a;this.errorField=a},getDataField:function(){return this._dataSource.dataField},setDataField:function(a){this._dataSource.dataField=a;this.dataField=a},getTotalField:function(){return this._dataSource.totalField},setTotalField:function(a){this._dataSource.totalField=a;this.totalField=a},getSortOrderField:function(){return this._dataSource.sortOrderField},setSortOrderField:function(a){this._dataSource.sortOrderField=a;this.sortOrderField=a},getSortFieldField:function(){return this._dataSource.sortFieldField},setSortFieldField:function(a){this._dataSource.sortFieldField=a;this.sortFieldField=a},getLimitField:function(){return this._dataSource.limitField},setLimitField:function(a){this._dataSource.limitField=a;this.limitField=a},getStartField:function(){return this._dataSource.startField},setStartField:function(a){this._dataSource.startField=a;this.startField=a},getPageSizeField:function(){return this._dataSource.pageSizeField},setPageSizeField:function(a){this._dataSource.pageSizeField=a;this.pageSizeField=a},getPageIndexField:function(){return this._dataSource.pageIndexField},setPageIndexField:function(a){this._dataSource.pageIndexField=a;this.pageIndexField=a},getSortOrder:function(){return this._dataSource.sortOrder},setSortOrder:function(a){this._dataSource.setSortOrder(a);this.sortOrder=a},getSortField:function(){return this._dataSource.sortField},setSortField:function(a){this._dataSource.setSortField(a);this.sortField=a},getTotalPage:function(){return this._dataSource.getTotalPage()},getTotalCount:function(){return this._dataSource.getTotalCount()},setTotalCount:function(a){this._dataSource.setTotalCount(a);this.totalCount=a},getPageSize:function(){return this._dataSource.getPageSize()},setPageSize:function(a){this._dataSource.setPageSize(a);this._virtualRows=a;this.pageSize=a},getPageIndex:function(){return this._dataSource.getPageIndex()},setPageIndex:function(a){this._dataSource.setPageIndex(a);this.pageIndex=a},getSortMode:function(){return this._dataSource.getSortMode()},setSortMode:function(a){this._dataSource.setSortMode(a);this.sortMode=a},getSelectOnLoad:function(){return this._dataSource.getSelectOnLoad()},setSelectOnLoad:function(a){this._dataSource.setSelectOnLoad(a);this.selectOnLoad=a},getCheckSelectOnLoad:function(){return this._dataSource.getCheckSelectOnLoad()},setCheckSelectOnLoad:function(a){this._dataSource.setCheckSelectOnLoad(a);this.checkSelectOnLoad=a},getShowCellTip:function(){return this.showCellTip},setShowCellTip:function(a){this.showCellTip=a},getSortDblClick:function(){return this.sortDblClick},setSortDblClick:function(a){this.sortDblClick=a},sortBy:function(a,c){if(!a){return null}var d=this._dataSource;this.sortField=d.sortField=a;this.sortOrder=d.sortOrder=c;if(this._dataSource.sortMode=="server"){this._dataSource.sortBy(a,c)}else{var b=this._columnModel._getDataTypeByField(a);this._dataSource._doClientSortField(a,c,b)}},gotoPage:function(a,b){this._dataSource.gotoPage(a,b)},reload:function(c,b,a){this.accept();this._dataSource.reload(c,b,a)},load:function(b,c,a,d){this._dataSource.load(b,c,a,d)},getUrl:function(){return this._dataSource.getUrl()},setUrl:function(a){this._dataSource.setUrl(a);this.url=a},getAutoLoad:function(){return this._dataSource.getAutoLoad()},setAutoLoad:function(a){this._dataSource.setAutoLoad(a)},getAjaxOptions:function(){return this._dataSource.getAjaxOptions()},setAjaxOptions:function(a){this._dataSource.setAjaxOptions(a)},getAjaxType:function(){return this._dataSource.ajaxType},setAjaxType:function(a){this._dataSource.ajaxType=a;this.ajaxType=a},getAjaxMethod:function(){return this._dataSource.ajaxMethod},setAjaxMethod:function(a){this._dataSource.ajaxMethod=a;this.ajaxMethod=a},getAjaxAsync:function(){return this._dataSource.ajaxAsync},setAjaxAsync:function(a){this._dataSource.ajaxAsync=a;this.ajaxAsync=a},moveDown:function(d){if(!mini.isArray(d)){return}var b=this;d=d.sort(function(j,i){var l=b.indexOf(j),k=b.indexOf(i);if(l>k){return 1}return -1});d.reverse();for(var a=0,f=d.length;a<f;a++){var c=d[a],g=this.indexOf(c);this.moveRow(c,g+2)}},moveUp:function(d){if(!mini.isArray(d)){return}var b=this;d=d.sort(function(j,i){var l=b.indexOf(j),k=b.indexOf(i);if(l>k){return 1}return -1});for(var a=0,f=d.length;a<f;a++){var c=d[a],g=this.indexOf(c);this.moveRow(c,g-1)}},O10011:function(d,c,a){d=d.clone();var b={dragNodes:d,targetNode:c,action:a,cancel:false};b.dragNode=b.dragNodes[0];b.dropNode=b.targetNode;b.dragAction=b.action;this.fire("beforedrop",b);this.fire("dragdrop",b);return b},lOOO00:function(a,d,c,f){var b={};b.from=f;b.effect=a;b.nodes=d;b.node=b.nodes[0];b.targetNode=c;b.dragNodes=d;b.dragNode=b.dragNodes[0];b.dropNode=b.targetNode;b.dragAction=b.action;this.fire("givefeedback",b);return b},OolO0:function(c,a){var b={node:c,nodes:this.o00Oo0Data(),column:a,cancel:false};b.record=b.node;b.records=b.nodes;b.dragText=this.o00Oo0Text(b.nodes);this.fire("dragstart",b);return b},isAllowDrag:function(b,a){if(this.isReadOnly()||this.enabled==false){return false}if(!this.allowDrag||!a.allowDrag){return false}if(b.allowDrag===false){return false}return true},getAllowDrop:function(){return this.allowDrop},setAllowDrop:function(a){this.allowDrop=a},getAllowDrag:function(){return this.allowDrag},setAllowDrag:function(a){this.allowDrag=a},getAllowLeafDropIn:function(){return this.allowLeafDropIn},setAllowLeafDropIn:function(a){this.allowLeafDropIn=a},o00Oo0Text:function(a){return"Records "+a.length},o00Oo0Data:function(){var b=this.getSelecteds().clone(),a=this;mini.sort(b,function(d,c){var g=a.indexOf(d),f=a.indexOf(c);if(g>f){return 1}if(g<f){return -1}return 0},this);return b},olOO0o:function(i,g,f,d){var j=[];if(!mini.isNumber(i)){return[]}if(!mini.isNumber(g)){return[]}var c=this.getVisibleColumns(),k=this.getDataView();for(var b=i,n=i+f;b<n;b++){for(var a=g,o=g+d;a<o;a++){var l=this.ol010(b,a);if(l){j.push(l)}}}return j},_getAnchorCell:function(d,c){if(!this._mergedCellMaps){return null}var b=this.indexOf(d),a=this.getBottomColumns().indexOf(c);return this._mergedCellMaps[b+":"+a]},_isCellVisible:function(b,a){if(!this._mergedCellMaps){return true}var c=this._mergedCellMaps[b+":"+a];return !(c===true)},margeCells:function(a){this.mergeCells(a)},mergeCells:function(c){if(!mini.isArray(c)){return}this._mergedCells=c;var b=this._mergedCellMaps={};function d(j,i,n,l,p){for(var k=j,o=j+n;k<o;k++){for(var r=i,q=i+l;r<q;r++){if(k==j&&r==i){b[k+":"+r]=p}else{b[k+":"+r]=true}}}}var c=this._mergedCells;if(c){for(var a=0,g=c.length;a<g;a++){var f=c[a];if(!f.rowSpan){f.rowSpan=1}if(!f.colSpan){f.colSpan=1}d(f.rowIndex,f.columnIndex,f.rowSpan,f.colSpan,f)}}this.deferUpdate()},mergeColumns:function(b){if(b&&mini.isArray(b)==false){b=[b]}var a=this,c=a.getVisibleColumns();if(!b){b=c}var d=a.getDataView();d.push({});var i=[];for(var k=0,j=b.length;k<j;k++){var l=b[k];l=a.getColumn(l);if(!l){continue}var g=f(l);i.addRange(g)}function f(o){if(!o.field){return}var u=[],x=-1,p=1,w=c.indexOf(o),t=null;for(var n=0,s=d.length;n<s;n++){var v=d[n],q=mini._getMap(o.field,v);if(x==-1||!mini.isEquals(q,t)){if(p>1){var r={rowIndex:x,columnIndex:w,rowSpan:p,colSpan:1};u.push(r)}x=n;p=1;t=q}else{p++}}return u}a.mergeCells(i)},getAutoHideRowDetail:function(){return this.autoHideRowDetail},setAutoHideRowDetail:function(a){this.autoHideRowDetail=a},getRowDetailCellEl:function(a,b){if(!b){b=2}var c=this._getRowDetailEl(a,b);if(c){return c.cells[1]}},ooO1:function(a,b){return this._id+"$detail"+b+"$"+a._id},l111O:function(f,g){var a=this.getFrozenColumns(),b=this.getUnFrozenColumns(),d=a.length;if(g==2){d=b.length}var i=this.l0011(f,g);if(!i){return null}var c=this.ooO1(f,g),j='<tr id="'+c+'" class="mini-grid-detailRow"><td style="width:0"></td><td class="mini-grid-detailCell" colspan="'+d+'"></td></tr>';jQuery(i).after(j);return document.getElementById(c)},_getRowDetailEl:function(f,b,a){f=this.getRow(f);if(!f){return null}var d=this.ooO1(f,b),c=document.getElementById(d);if(!c&&a===true){c=this.l111O(f,b)}return c},hideRowDetail:function(a){a=this.getRow(a);if(!a||a._showDetail!==true){return}a._showDetail=false;var d=this._getRowDetailEl(a,1),c=this._getRowDetailEl(a,2);if(d){d.style.display="none"}if(c){c.style.display="none"}var f=this.l0011(a,1),b=this.l0011(a,2);if(f){__cls_rm(f,"mini-grid-expandRow")}if(b){__cls_rm(b,"mini-grid-expandRow")}this.fire("hiderowdetail",{record:a});this.doLayout()},showRowDetail:function(g){g=this.getRow(g);if(!g||g._showDetail==true){return}g._showDetail=true;var d=this._getRowDetailEl(g,1,true),c=this._getRowDetailEl(g,2,true);if(d){d.style.display=""}if(c){c.style.display=""}var f=this.l0011(g,1),a=this.l0011(g,2);if(f){__cls_add(f,"mini-grid-expandRow")}if(a){__cls_add(a,"mini-grid-expandRow")}this.fire("showrowdetail",{record:g});var b=this;if(this.isFrozen()){setTimeout(function(){b.syncRowDetail(g)},1)}this.doLayout()},toggleRowDetail:function(a){a=this.getRow(a);if(!a){return}if(grid.isShowRowDetail(a)){grid.hideRowDetail(a)}else{grid.showRowDetail(a)}},isShowRowDetail:function(a){a=typeof a=="object"?a:this.getRow(a);if(!a){return false}return !!a._showDetail},hideAllRowDetail:function(){this._canLayout=false;var c=this.getDataView();for(var b=0,d=c.length;b<d;b++){var a=c[b];this.hideRowDetail(a)}this._canLayout=true;this.doLayout()},showAllRowDetail:function(){this._canLayout=false;var c=this.getDataView();for(var b=0,d=c.length;b<d;b++){var a=c[b];this.showRowDetail(a)}this._canLayout=true;this.doLayout()},expandRowGroup:function(d){d=this.getRowGroup(d);if(!d){return}d.expanded=true;var b=this._getRowGroupEl(d,1),f=this._getRowGroupRowsEl(d,1),a=this._getRowGroupEl(d,2),c=this._getRowGroupRowsEl(d,2);if(f){f.style.display=""}if(c){c.style.display=""}if(b){__cls_rm(b,"mini-grid-group-collapse")}if(a){__cls_rm(a,"mini-grid-group-collapse")}this.doLayout()},collapseRowGroup:function(d){d=this.getRowGroup(d);if(!d){return}d.expanded=false;var b=this._getRowGroupEl(d,1),f=this._getRowGroupRowsEl(d,1),a=this._getRowGroupEl(d,2),c=this._getRowGroupRowsEl(d,2);if(f){f.style.display="none"}if(c){c.style.display="none"}if(b){__cls_add(b,"mini-grid-group-collapse")}if(a){__cls_add(a,"mini-grid-group-collapse")}this.doLayout()},toggleRowGroup:function(a){if(a.expanded){this.collapseRowGroup(a)}else{this.expandRowGroup(a)}},expandGroups:function(){if(!this.isGrouping()){return}this._canLayout=false;var b=this.getGroupingView();for(var a=0,d=b.length;a<d;a++){var c=b[a];this.expandRowGroup(c)}this._canLayout=true;this.doLayout()},collapseGroups:function(){if(!this.isGrouping()){return}this._canLayout=false;var b=this.getGroupingView();for(var a=0,d=b.length;a<d;a++){var c=b[a];this.collapseRowGroup(c)}this._canLayout=true;this.doLayout()},getEditRowData:function(d,a,s){d=this.getRow(d);if(!d||!d._editing){return null}var u=this.getIdField(),k=this.getParentField?this.getParentField():null,g={},q=this.getVisibleColumns();for(var o=0,n=q.length;o<n;o++){var p=q[o],l=this.l110Oo(d,q[o]),i=document.getElementById(l);if(!i){continue}var r=null;if(p.type=="checkboxcolumn"||p.type=="radiobuttoncolumn"){var f=p.isChecked(d,p),c=f?p.trueValue:p.falseValue;r=this.O0l10o(d,p,c)}else{var b=i.firstChild,t=mini.get(b);if(!t){continue}r=this.O0l10o(d,p,null,t)}if(s!==false){mini._setMap(p.field,r.value,g);if(p.displayField){mini._setMap(p.displayField,r.text,g)}}else{g[p.field]=r.value;if(p.displayField){g[p.displayField]=r.text}}}g[u]=d[u];if(k){g[k]=d[k]}if(a){var j=mini.copyTo({},d);g=mini.copyTo(j,g)}return g},getEditData:function(d){var b=[],f=this.getDataView();for(var a=0,c=f.length;a<c;a++){var g=f[a];if(g._editing==true){var i=this.getEditRowData(a,d);b.push(i)}}return b},getEditingRow:function(){var a=this.getEditingRows();return a[0]},getEditingRows:function(){var f=[],c=this.getDataView();for(var b=0,d=c.length;b<d;b++){var a=c[b];if(a._editing==true){f.push(a)}}return f},isNewRow:function(a){return a._state=="added"},isEditingRow:function(a){a=this.getRow(a);if(!a){return false}return !!a._editing},isEditing:function(){var c=this.getDataView();for(var b=0,d=c.length;b<d;b++){var a=c[b];if(a._editing==true){return true}}return false},commitEditRow:function(a){if(this.allowCellEdit){return}a=this.getRow(a);if(!a||!a._editing){return}var b=this.getEditRowData(a,false,false);this.o00Oo=false;this.updateRow(a,b);this.o00Oo=true;this.cancelEditRow(a)},cancelEditRow:function(a){if(this.allowCellEdit){return}a=this.getRow(a);if(!a||!a._editing){return}delete a._editing;var l=this.l0011(a),i=this.getVisibleColumns();for(var b=0,k=i.length;b<k;b++){var d=i[b],j=this.l110Oo(a,i[b]),c=document.getElementById(j);if(!c){continue}var g=c.firstChild,f=mini.get(g);if(!f){continue}f.destroy()}this.o010oEl(a);this.doLayout()},beginEditRow:function(_){if(this.allowCellEdit){return}function $(F){var _=new Date();F=this.getRow(F);if(!F){return}var G=this.l0011(F,2);if(!G){return}F._editing=true;this.o010oEl(F);G=this.l0011(F,2);__cls_add(G,"mini-grid-rowEdit");var B=this.getVisibleColumns();for(var E=0,H=B.length;E<H;E++){var C=B[E],I=F[C.field],D=this.ol010(F,C);if(!D){continue}if(typeof C.editor=="string"){C.editor=window.eval("("+C.editor+")")}var A=mini.copyTo({},C.editor);A.id=this.uid+"$"+F._uid+"$"+C._id+"$editor";var $=mini.create(A);if(this.oO0100(F,C,$)){if($){__cls_add(D,"mini-grid-cellEdit");D.innerHTML="";D.appendChild($.el);__cls_add($.el,"mini-grid-editor")}}}this.doLayout()}this._pushUpdateCallback($,this,[_])},getEditorOwnerRow:function(b){var a=b.ownerRowID;return this.getRowByUID(a)},_beginEditNextCell:function(b,o){var f=new Date();if(this._editTimestamp&&(f-this._editTimestamp<80)){return}this._editTimestamp=f;var l=this,n=this.getCurrentCell();if(!n){return}this.focus();var y=l.getVisibleColumns(),x=n?n[1]:null,k=n?n[0]:null;function r(z){return l.getVisibleRows()[z]}function c(z){return l.getVisibleRows().indexOf(z)}function a(){return l.getVisibleRows().length}var i=y.indexOf(x),g=c(k),w=a();if(b===false){if(this.skipReadOnlyCell){var j=this,d=s();function s(){var A=0,D=(i-1===0)?y.length:i-1;for(;D>A;D--){x=y[D];var z=j.isCellCanEdit(k,x);if(z){return x}}}if(!d||i==0){i=y.length;var v=s();q()}}else{i-=1;x=y[i];if(!x){x=y[y.length-1];q()}}function q(){k=r(g-1);if(!k){return}}}else{if(this.editNextRowCell&&!o){if(g+1<w){k=r(g+1)}}else{function p(){k=l.getAt(g+1);if(!k){if(l.createOnEnter){k={};l.addRow(k)}else{return}}}function u(){var A=(i+1==t)?0:(i+1);for(;A<t;A++){x=y[A];var z=j.isCellCanEdit(k,x);if(z){return x}}}if(this.skipReadOnlyCell){var j=this,t=y.length,d=u();if(!d||i+1==t){i=0;v=u();p()}}else{i+=1;x=y[i];if(!x){x=y[0];p()}}}}n=[k,x];l.setCurrentCell(n);if(!l.onlyCheckSelection&&l.allowRowSelect){if(l.getCurrent()!=k){l.deselectAll();l.setCurrent(k)}}l.scrollIntoView(k,x,false);if(l.isReadOnly()||x.readOnly){return false}l.beginEditCell()},isCellCanEdit:function(a,b){var c=this.oO0100(a,b,this.getCellEditor(b),false);return c},getSkipReadOnlyCell:function(){return this.skipReadOnlyCell},setSkipReadOnlyCell:function(a){this.skipReadOnlyCell=a},getNavEditMode:function(){return this.navEditMode},setNavEditMode:function(a){this.navEditMode=a},OO0O:function(d){var f=this.l00OOl;if(d.keyCode==13&&f&&f.type=="textarea"){return}if(d.keyCode==13){var k=new Date();if(this._enterTimestamp&&(k-this._enterTimestamp<80)){return}this._enterTimestamp=k;var j=this.o110;if(j&&j[1]&&j[1].enterCommit===false){return}this.commitEdit();this.focus();if(this.editNextOnEnterKey){this.fire("celleditenter",{record:j[0],column:j[1]});this._beginEditNextCell(d.shiftKey==false)}}else{if(d.keyCode==27){this.cancelEdit();this.focus()}else{if(d.keyCode==9){this.commitEdit();if(this.editOnTabKey){d.preventDefault();this.commitEdit();this._beginEditNextCell(d.shiftKey==false,true)}}}}if(this.navEditMode){j=this.o110;if(j){var b=j[1];if(b&&b.navUpdown===false){if(f&&(d.keyCode==38||d.keyCode==40)){return}}}switch(d.keyCode){case 37:this.focus();d.preventDefault();this.commitEdit();this._beginEditNextCell(d.shiftKey!==false);break;case 39:this.focus();this.commitEdit();if(this.editOnTabKey){d.preventDefault();this.commitEdit();this._beginEditNextCell(d.shiftKey==false,true)}break;case 38:this.focus();d.preventDefault();j=this.o110;this.commitEdit();var c=j[0],b=j[1];if(c){var l=this.indexOf(c);if(l>0){l-=1}}else{return}var i=this.getRow(l),g=[i,b];this.setCurrentCell(g);this.beginEditCell();break;case 40:this.focus();d.preventDefault();j=this.o110;this.commitEdit();c=j[0],b=j[1];if(c){var l=this.indexOf(c),a=this.getData().length;if(l<a-1){l+=1}}else{return}i=this.getRow(l),g=[i,b];this.setCurrentCell(g);this.beginEditCell();break}}},OOoOoO:function(a){if(!this.OlOoo){this.OlOoo=mini.append(this.cellEditorContainer||mini.cellEditorContainer||document.body,'<div class="mini-grid-editwrap" style="position:absolute;"></div>');mini.on(this.OlOoo,"keydown",this.OO0O,this)}this.OlOoo.style.zIndex=1000000000;this.OlOoo.style.display="block";if(a.render){a.render(this.OlOoo);setTimeout(function(){a.focus();if(a.selectText){setTimeout(function(){a.selectText()},11)}},50);if(a.setVisible){a.setVisible(true)}}else{if(a.el){this.OlOoo.appendChild(a.el);setTimeout(function(){try{a.el.focus()}catch(b){}},50)}}return this.OlOoo},getEditWrap:function(){return this.OlOoo},o0ll:function(c){if(this.l00OOl){var f=this.ol1Ol(c);if(this.o110&&f){if(this.o110[0]==f.record&&this.o110[1]==f.column){return false}}var b=false;if(this.l00OOl.within){b=this.l00OOl.within(c)}else{b=__getById(this.OlOoo,c.target)}if(b==false){var a=this;if(__getById(this.o0Olll,c.target)==false){setTimeout(function(){a.commitEdit()},1)}else{var d=a.o110;setTimeout(function(){var g=a.o110;if(d==g){a.commitEdit()}},70)}mini.un(document,"mousedown",this.o0ll,this)}}},_setEditorBox:function(b,f){if(b.setWidth){var j=f.width;if(j<20){j=20}b.setWidth(j)}if(b.setHeight&&b.type=="textarea"){var c=f.height-1;if(b.minHeight&&c<b.minHeight){c=b.minHeight}b.setHeight(c)}if(b.setWidth){j=f.width-1;if(b.minWidth&&j<b.minWidth){j=b.minWidth}b.setWidth(j)}var g=f,d=b.getHeight(),i=g.y;if(d<g.height-2){i=Math.round(g.y+g.height/2-d/2)}mini.setXY(this.OlOoo,g.x,i);__setWidth(this.OlOoo,g.width);var a=document.body.scrollWidth;if(g.x>a){mini.setX(this.OlOoo,-1000)}},_getEditingControl:function(){return this.l00OOl},O1O1l0:function(i,g){if(!this.l00OOl){return false}var d=this.getCellBox(i,g);if(d){var a=document.body.scrollWidth;if(d.right>a){d.width=a-d.left;if(d.width<10){d.width=10}d.right=d.left+d.width}}var b={sender:this,rowIndex:this.indexOf(i),record:i,row:i,column:g,field:g.field,cellBox:d,editor:this.l00OOl};this.fire("cellshowingedit",b);var c=b.editor;if(c&&c.setIsValid){c.setIsValid(true)}if(d){var f=this.OOoOoO(c);this.OlOoo.style.zIndex=mini.getMaxZIndex();this._setEditorBox(c,d);mini.on(document,"mousedown",this.o0ll,this);if(g.autoShowPopup&&c.showPopup){c.showPopup()}}if(c){if(this.navEditMode){c.keyNavEnabled=!(g.navUpdown!==false)}}},ll0l0O:function(j,g){if(!this.o110&&!j){return}if(!j){j=this.o110[0]}if(!g){g=this.o110[1]}var c=mini._getMap(g.field,j),b={sender:this,rowIndex:this.indexOf(j),record:j,row:j,column:g,field:g.field,editor:this.l00OOl,value:c};this.fire("cellendedit",b);if(this.allowCellEdit&&b.editor){var f=b.editor;if(f&&f.setIsValid){f.setIsValid(true)}if(this.OlOoo){this.OlOoo.style.display="none"}var a=this.OlOoo.childNodes;for(var d=a.length-1;d>=0;d--){var i=a[d];this.OlOoo.removeChild(i)}if(f&&f.hidePopup){f.hidePopup()}if(f&&f.setValue){f.setValue("")}this.l00OOl=null;this.o110=null;if(this.allowCellValid){this.validateCell(j,g)}}},O0l10o:function(b,a,j,f){var c={sender:this,rowIndex:this.indexOf(b),record:b,row:b,column:a,field:a.field,editor:f?f:this.getCellEditor(a),value:mini.isNull(j)?"":j,text:"",cancel:false};if(c.editor&&c.editor.getValue){try{c.editor.blur()}catch(d){}c.value=c.editor.getValue()}if(c.editor&&c.editor.getText){c.text=c.editor.getText()}var k=mini._getMap(a.field,b),g=c.value;c.oldValue=k;if(mini.isEquals(k,g)){return c}this.fire("cellcommitedit",c);if(c.cancel==false){if(this.allowCellEdit){var i={};i[a.field]=c.value;if(a.displayField){i[a.displayField]=c.text}this.updateRow(b,i)}}return c},oO0100:function(b,a,f,k){var i=mini._getMap(a.field,b),g={sender:this,rowIndex:this.indexOf(b),row:b,record:b,column:a,field:a.field,editor:f,value:i,cancel:false};this.fire("cellbeginedit",g);if(!mini.isNull(a.defaultValue)&&(mini.isNull(g.value)||g.value==="")){var d=a.defaultValue,c=mini.clone({d:d});g.value=c.d}var f=g.editor;i=g.value;if(g.cancel){return false}if(!f&&a.editMode!="inline"){return false}if(a.readOnly===true){return false}if(k===false){return true}if(a.editMode!="inline"){if(mini.isNull(i)){i=""}if(f.setValue){f.setValue(i)}f.ownerRowID=b._uid;if(a.displayField&&f.setText){var j=mini._getMap(a.displayField,b);if(!mini.isNull(a.defaultText)&&(mini.isNull(j)||j==="")){c=mini.clone({d:a.defaultText});j=c.d}f.setText(j)}if(this.allowCellEdit){this.l00OOl=g.editor}}return true},getCellEditor:function(b,a){b=this.getColumn(b);if(!b){return}if(this.allowCellEdit){var c=b.__editor;if(!c){c=mini.getAndCreate(b.editor)}if(c&&c!=b.editor){b.editor=c}return c}else{a=this.getRow(a);b=this.getColumn(b);if(!a){a=this.getEditingRow()}if(!a||!b){return null}var d=this.uid+"$"+a._uid+"$"+b._id+"$editor";return mini.get(d)}},commitEdit:function(){if(this.allowCellEdit){if(this.o110){this.O0l10o(this.o110[0],this.o110[1]);this.ll0l0O()}}else{if(this.isEditing()){this._canLayout=false;var c=this.getDataView();for(var b=0,d=c.length;b<d;b++){var a=c[b];if(a._editing==true){this.commitEditRow(a)}}this._canLayout=true;this.doLayout()}}},cancelEdit:function(){if(this.allowCellEdit){if(this.o110){this.ll0l0O()}}else{if(this.isEditing()){this._canLayout=false;var c=this.getDataView();for(var b=0,d=c.length;b<d;b++){var a=c[b];if(a._editing==true){this.cancelEditRow(b)}}this._canLayout=true;this.doLayout()}}},beginEditCell:function(a,b){function c(j,d){var g=new Date();j=this.getRow(j);d=this.getColumn(d);var i=[j,d];if(j&&d){this.setCurrentCell(i)}i=this.getCurrentCell();if(this.o110&&i){if(this.o110[0]==i[0]&&this.o110[1]==i[1]){return}}if(this.o110){this.commitEdit()}if(i){var j=i[0],d=i[1];if(d.editMode!="inline"){var f=this.oO0100(j,d,this.getCellEditor(d));if(f!==false){this.scrollIntoView(j,d,false);this.o110=i;this.O1O1l0(j,d)}}}}this._pushUpdateCallback(c,this,[a,b])},isEditingCell:function(a){return this.o110&&this.o110[0]==a[0]&&this.o110[1]==a[1]},getCurrentCell:function(){var a=this.loo1ll;if(a){if(this.indexOf(a[0])==-1){this.loo1ll=null;a=null}}return a},setCurrentCell:function(d){if(this.loo1ll!=d){this.lO0lo(false);this.loo1ll=d;if(d){var a=this.getRow(d[0]),b=this.getColumn(d[1]);if(a&&b){this.loo1ll=[a,b]}else{this.loo1ll=null}}this.lO0lo(true);if(d){var c=this._getAnchorCell(d[0],d[1]);if(!c){if(this.isFrozen()){this.scrollIntoView(d[0],null,false)}else{this.scrollIntoView(d[0],d[1],false)}}}this.fire("currentcellchanged")}},lO0lo:function(c){if(this.loo1ll){var b=this.loo1ll[0],a=this.loo1ll[1],d=this.ol010(b,a);if(d){if(c){__cls_add(d,this.ololo)}else{__cls_rm(d,this.ololo)}}}},getCreateOnEnter:function(){return this.createOnEnter},setCreateOnEnter:function(a){this.createOnEnter=a},getEditOnTabKey:function(){return this.editOnTabKey},setEditOnTabKey:function(a){this.editOnTabKey=a},getEditNextOnEnterKey:function(){return this.editNextOnEnterKey},setEditNextOnEnterKey:function(a){this.editNextOnEnterKey=a},getEditNextRowCell:function(){return this.editNextRowCell},setEditNextRowCell:function(a){this.editNextRowCell=a},getShowColumnsMenu:function(){return this.showColumnsMenu},setShowColumnsMenu:function(a){this.showColumnsMenu=a},getAllowMoveColumn:function(){return this.allowMoveColumn},setAllowMoveColumn:function(a){this.allowMoveColumn=a},getAllowSortColumn:function(){return this.allowSortColumn},setAllowSortColumn:function(a){this.allowSortColumn=a},getAllowResizeColumn:function(){return this.allowResizeColumn},setAllowResizeColumn:function(a){this.allowResizeColumn=a;__cls_rm(this.el,"mini-grid-resizeColumns-no");if(!a){__cls_add(this.el,"mini-grid-resizeColumns-no")}},getAllowCellValid:function(){return this.allowCellValid},setAllowCellValid:function(a){this.allowCellValid=a},getCellEditAction:function(){return this.cellEditAction},setCellEditAction:function(a){this.cellEditAction=a},getAllowCellEdit:function(){return this.allowCellEdit},setAllowCellEdit:function(a){this.allowCellEdit=a},getAllowCellSelect:function(){return this.allowCellSelect},setAllowCellSelect:function(a){this.allowCellSelect=a},getAllowRowSelect:function(){return this.allowRowSelect},setAllowRowSelect:function(a){this.allowRowSelect=a},getAllowUnselect:function(){return this.allowUnselect},setAllowUnselect:function(a){this.allowUnselect=a},getOnlyCheckSelection:function(){return this.onlyCheckSelection},setOnlyCheckSelection:function(a){this.onlyCheckSelection=a},getAllowHotTrackOut:function(){return this.allowHotTrackOut},setAllowHotTrackOut:function(a){this.allowHotTrackOut=a},getEnableHotTrack:function(){return this.enableHotTrack},setEnableHotTrack:function(a){this.enableHotTrack=a},getShowLoading:function(){return this.showLoading},setShowLoading:function(a){this.showLoading=a},scrollIntoView:function(o,d,i){o=this.getRow(o);if(!o){return}var i=this.isVirtualScroll();try{if(d){if(this._columnModel.isFrozenColumn(d)){d=null}}if(d){var p=this.ol010(o,d);mini.scrollIntoView(p,this._rowsViewEl,true,i!=true);this._syncScroll()}if(this.isVirtualScroll()){i=true;var a=this.getScrollTop(),q=this._vscrollEl.offsetHeight,k=this._getViewRegion(),b=this.getVisibleRows(),c=b.indexOf(o),f=this._getRangeHeight(0,c),g=o._height||this.defaultRowHeight,j=f+g;if(f<a){this.setScrollTop(f);this._updateScrollTop(f)}else{if(j>a+q){f=a+j-(a+q);this.setScrollTop(f);this._updateScrollTop(f)}}}else{var n=this.l0011(o,2);mini.scrollIntoView(n,this._rowsViewEl,false);this._syncScroll()}}catch(l){}},focusRow:function(a){if(this.lllll==a){return}if(this.lllll){this.removeRowCls(this.lllll,this.o1OlOl)}this.lllll=a;if(a){this.addRowCls(a,this.o1OlOl,false)}if(mini.isIE6){mini.repaint()}},focus:function(c){try{var f=this,d=this.getCurrentCell();if(d&&c!==false){var a=this.getCellBox(d[0],d[1]);mini.setX(this._focusEl,a.x)}var i=this.getCurrent();if(i){var g=this.l0011(i,2);if(g){if(c!==false){var j=__getBox(g);mini.setY(f._focusEl,j.top)}if(mini.isIE||mini.isIE11||mini.isChrome){if(mini.isChrome){f.el.focus()}else{f._focusEl.focus()}}else{f.el.focus()}}}else{if(mini.isIE||mini.isIE11||mini.isChrome){f._focusEl.focus()}else{f.el.focus()}}}catch(b){}},_tryFocus:function(b){try{var a=b.target.tagName.toLowerCase();if(a=="input"||a=="textarea"||a=="select"){return}if(__cls_has(b.target,"mini-placeholder-label")){return}if(__getByCls(b.target,"mini-grid-rows-content")){mini.setXY(this._focusEl,b.pageX,b.pageY);this.focus(false)}}catch(c){}},_doRowSelect:function(a,l){var f=this.isVirtualScroll(),i=this._viewRegion,c=f?i.start:-1,k=f?i.end:-1,g={};if(c!=-1){var d=this.getVisibleRows();for(var b=c,p=k;b<p;b++){var j=d[b];if(j){g[j._id]=true}}}var o=new Date();for(b=0,p=a.length;b<p;b++){var n=a[b];if(c!=-1){if(!g[n._id]){continue}}if(l){this.addRowCls(n,this.o1lo,false)}else{this.removeRowCls(n,this.o1lo)}}},getRowBox:function(f){var d=this.l0011(f,1),b=this.l0011(f,2);if(!b){return null}var a=__getBox(b);if(d){var c=__getBox(d);a.x=a.left=c.left;a.width=a.right-a.x}return a},getColumnBox:function(b){var d=this.o1001Id(b,2),c=document.getElementById(d);if(!c){d=this.o1001Id(b,1);c=document.getElementById(d)}if(c){var a=__getBox(c);a.x-=1;a.left=a.x;a.right=a.x+a.width;return a}},getCellBox:function(a,c){a=this.getRow(a);c=this.getColumn(c);if(!a||!c){return null}var b=this.ol010(a,c);if(!b){return null}return __getBox(b)},removeRowCls:function(c,b){var a=this.l0011(c,1),f=this.l0011(c,2);if(a){__cls_rm(a,b)}if(f){__cls_rm(f,b)}if(c){var d=this.o0olo1Hash[c._id];if(d){d.remove(b);if(d.length==0){delete this.o0olo1Hash[c._id]}}}},addRowCls:function(b,a,c){var g=this.l0011(b,1),f=this.l0011(b,2);if(g){__cls_add(g,a)}if(f){__cls_add(f,a)}if(b&&c!==false){var d=this.o0olo1Hash[b._id];if(!d){d=this.o0olo1Hash[b._id]=[]}else{d.remove(a)}d.push(a)}},hasRowCls:function(c,b){var a=this.o0olo1Hash[c._id];if(a){return a.indexOf(b)!=-1}return false},llO0:function(a){return this._columnModel.llO0(a)},_getRowByID:function(a){return this._dataSource.getby_id(a)},getCellByEvent:function(a){return this.getCellFromEvent(a)},getColumnByEvent:function(a){return this.getColumnFromEvent(a)},getRowByEvent:function(a){return this.getRowFromEvent(a)},getRowFromEvent:function(b){var a=this.ol1Ol(b);return a?a[0]:null},getCellFromEvent:function(a){return this.ol1Ol(a)},getColumnFromEvent:function(a){if(!a){return null}return this.O01l(a)},ol1Ol:function(c){var b=this.O0lO0ByEvent(c),a=this.O01l(c);return[b,a]},O01l:function(b){var c=__getByCls(b.target,this._cellCls);if(!c){c=__getByCls(b.target,this._headerCellCls)}if(c){var a=c.id.split("$"),d=a[a.length-1];return this.llO0(d)}return null},O0lO0ByEvent:function(a){var b=__getByCls(a.target,this.o0olo1);if(!b){return null}var d=b.id.split("$"),c=d[d.length-1];return this._getRowByID(c)},getRecordByEvent:function(a){return this.O0lO0ByEvent(a)},getCellEl:function(a,b){return this.ol010(a,b)},ol010:function(a,b){a=this.getRecord(a);b=this.getColumn(b);if(!a||!b){return null}var d=this.l110Oo(a,b),c=__get(d,this.el);return c},getHeaderCellEl:function(b,a){return this.o0o0O(b,a)},getRowEl:function(a,b){return this.l0011(a,b)},o0o0O:function(b,a){if(a==1&&!this.isFrozen()){return null}b=this.getColumn(b);var d=this.o1001Id(b,a),c=__get(d,this.el);return c},l0011:function(a,b){if(b==1&&!this.isFrozen()){return null}a=this.getRecord(a);var d=this.l00o(a,b),c=__get(d,this.el);return c},_getRowGroupRowsEl:function(d,b){if(b==1&&!this.isFrozen()){return null}var a=this.O11lOGroupRowsId(d,b),c=__get(a,this.el);return c},_getRowGroupEl:function(d,b){if(b==1&&!this.isFrozen()){return null}var a=this.O11lOGroupId(d,b),c=__get(a,this.el);return c},_doMoveRowEl:function(a,b){this._doRemoveRowEl(a);this._doAddRowEl(a)},_doRemoveRowEl:function(g){var f=this.l0011(g,1),a=this.l0011(g,2);if(f){f.parentNode.removeChild(f)}if(a){a.parentNode.removeChild(a)}if(!a){return}var d=this._getRowDetailEl(g,1),c=this._getRowDetailEl(g,2);if(d){d.parentNode.removeChild(d)}if(c){c.parentNode.removeChild(c)}this.deferLayout();if(this.showEmptyText&&this.getVisibleRows().length==0){var b=jQuery(".mini-grid-emptyText",this.o0Olll)[0];if(b){b.style.display="";b.parentNode.style.display=""}}},_doAddRowEl:function(j){var d=this.getFrozenColumns(),f=this.getUnFrozenColumns(),i=this._rowsLockContentEl.firstChild,a=this._rowsViewContentEl.firstChild,k=this.indexOf(j),c=this.getAt(k+1);function g(o,q,l,r){var n=this.O11lOHTML(o,k,l,q);if(c){var p=this.l0011(c,q);jQuery(p).before(n)}else{mini.append(r,n)}}g.call(this,j,2,f,a);if(this.isFrozen()){g.call(this,j,1,d,i)}this.deferLayout();if(this.showEmptyText){var b=jQuery(".mini-grid-emptyText",this.o0Olll)[0];if(b){b.style.display="none";b.parentNode.style.display="none"}}},o010oEl:function(g){var b=this.getFrozenColumns(),f=this.getUnFrozenColumns(),d,j,i=this.indexOf(g),a=this.O11lOHTML(g,i,f,2),c=this.l0011(g,2);if(!c){return}jQuery(c).before(a);d=c.previousSibling;if(c){c.parentNode.removeChild(c)}if(this.isFrozen()){a=this.O11lOHTML(g,i,b,1),c=this.l0011(g,1);jQuery(c).before(a);j=c.previousSibling;jQuery(c).remove()}this.deferLayout();if(d&&j){this._doSyncRowHeight(d,j)}},oool:function(a){a.cancel=true;this.gotoPage(a.pageIndex,a.pageSize)},unbindPager:function(a){if(!a){return}this._pagers.remove(a);a.un("pagechanged",this.oool,this)},bindPager:function(a){if(!a){return}this.unbindPager(a);this._pagers.add(a);a.on("beforepagechanged",this.oool,this)},setPager:function(a){if(typeof a=="string"){var b=__get(a);if(!b){return}mini.parse(a);a=mini.get(a)}if(a){this.bindPager(a)}},setPagerButtons:function(a){this._bottomPager.setButtons(a)},_updatePagesInfo:function(){var b=this.getPageIndex(),i=this.getPageSize(),f=this.getTotalCount(),j=this.getTotalPage(),a=this._pagers;for(var g=0,c=a.length;g<c;g++){var d=a[g];d.update(b,i,f);this._dataSource.totalPage=d.totalPage}},__OnPageInfoChanged:function(a){this._updatePagesInfo()},__OnSelectionChanged:function(b){if(b.fireEvent!==false){if(b.select){this.fire("rowselect",b)}else{this.fire("rowdeselect",b)}}var a=this;if(this.o0olO){clearTimeout(this.o0olO);this.o0olO=null}this.o0olO=setTimeout(function(){a.o0olO=null;if(b.fireEvent!==false){a.fire("SelectionChanged",b)}a.fire("_selectchange",b)},1);var c=new Date();this._doRowSelect(b._records,b.select)},__OnSourceMove:function(a){this._doMoveRowEl(a.record,a.index);this.lolOOO();this.fire("moverow",a)},__OnSourceRemove:function(a){this._doRemoveRowEl(a.record);this.lolOOO();this.fire("removerow",a);if(this.isVirtualScroll()){this.deferUpdate()}},__OnSourceUpdate:function(a){this.o010oEl(a.record);this.lolOOO();this.fire("updaterow",a)},__OnSourceAdd:function(a){this._doAddRowEl(a.record);this.lolOOO();this._viewRegion=this._getViewRegion();this.fire("addrow",a)},__OnSourceFilter:function(a){this.deferUpdate();this.fire("filter",a)},__OnSourceSort:function(a){this.deferUpdate();this.fire("sort",a)},__OnSourceLoadError:function(a){this.fire("loaderror",a);this.unmask()},__OnSourceLoadSuccess:function(a){this.fire("load",a);this.unmask()},__OnSourcePreLoad:function(a){this.fire("preload",a)},__OnSourceBeforeLoad:function(a){this.fire("beforeload",a);if(a.cancel==true){return}if(this.showLoading){this.loading()}},_initData:function(){this.data=this._dataSource.getSource();this.pageIndex=this.getPageIndex();this.pageSize=this.getPageSize();this.totalCount=this.getTotalCount();this.totalPage=this.getTotalPage();this.sortField=this.getSortField();this.sortOrder=this.getSortOrder();this.url=this.getUrl();this._mergedCellMaps={};this._mergedCells={};this._cellErrors=[];this._cellMapErrors={};if(this.isGrouping()){this.groupBy(this.l10ol,this.l010O);if(this.collapseGroupOnLoad){this.collapseGroups()}}},OO00:function(){return this.el},oOlOoO:function(){var a=this._dataSource;a.on("beforeload",this.__OnSourceBeforeLoad,this);a.on("preload",this.__OnSourcePreLoad,this);a.on("load",this.__OnSourceLoadSuccess,this);a.on("loaderror",this.__OnSourceLoadError,this);a.on("loaddata",this.__OnSourceLoadData,this);a.on("cleardata",this.__OnSourceClearData,this);a.on("sort",this.__OnSourceSort,this);a.on("filter",this.__OnSourceFilter,this);a.on("pageinfochanged",this.__OnPageInfoChanged,this);a.on("selectionchanged",this.__OnSelectionChanged,this);a.on("currentchanged",function(b){this.fire("currentchanged",b)},this);a.on("add",this.__OnSourceAdd,this);a.on("update",this.__OnSourceUpdate,this);a.on("remove",this.__OnSourceRemove,this);a.on("move",this.__OnSourceMove,this);a.on("beforeadd",function(b){this.fire("beforeaddrow",b)},this);a.on("beforeupdate",function(b){this.fire("beforeupdaterow",b)},this);a.on("beforeremove",function(b){this.fire("beforeremoverow",b)},this);a.on("beforemove",function(b){this.fire("beforemoverow",b)},this);a.on("beforeselect",function(b){this.fire("beforeselect",b)},this);a.on("beforedeselect",function(b){this.fire("beforedeselect",b)},this);a.on("select",function(b){this.fire("select",b)},this);a.on("deselect",function(b){this.fire("deselect",b)},this)},_OnDrawCell:function(){var a=DataGrid.superclass._OnDrawCell.apply(this,arguments);return a},_destroyEditors:function(){var c=mini.getChildControls(this),d=[];for(var a=0,f=c.length;a<f;a++){var b=c[a];if(b.el&&__getByCls(b.el,this.o0olo1)){d.push(b);b.destroy()}}},doUpdate:function(){this._destroyEditors();DataGrid.superclass.doUpdate.apply(this,arguments)},set:function(g){if(typeof g=="string"){return this}var f=g.value;delete g.value;var d=g.url;delete g.url;var c=g.data;delete g.data;var b=g.columns;delete g.columns;var a=g.defaultColumnWidth;delete g.defaultColumnWidth;if(a){this.setDefaultColumnWidth(a)}if(!mini.isNull(b)){this.setColumns(b)}DataGrid.superclass.set.call(this,g);if(!mini.isNull(c)){this.setData(c)}if(!mini.isNull(d)){this.setUrl(d)}if(!mini.isNull(f)){this.setValue(f)}return this},getCellErrors:function(){var c=this._cellErrors.clone(),a=this._dataSource;for(var b=0,g=c.length;b<g;b++){var f=c[b],j=f.record;if(!a.getby_id(j._id)){var d=f.column,i=j[this._rowIdField]+"$"+d._id;delete this._cellMapErrors[i];this._cellErrors.remove(f)}}return this._cellErrors},getCellError:function(b,c){b=this.getNode?this.getNode(b):this.getRow(b);c=this.getColumn(c);if(!b||!c){return}var a=b[this._rowIdField]+"$"+c._id;return this._cellMapErrors?this._cellMapErrors[a]:null},isValid:function(){return this.getCellErrors().length==0},isCellValid:function(c,b){if(!this._cellMapErrors){return true}var a=c[this._rowIdField]+"$"+b._id;return !this._cellMapErrors[a]},validate:function(c){c=c||this.getDataView();if(!mini.isArray(c)){c=[]}for(var b=0,d=c.length;b<d;b++){var a=c[b];this.validateRow(a)}},validateRow:function(f){var c=this.getBottomColumns();for(var a=0,d=c.length;a<d;a++){var b=c[a];this.validateCell(f,b)}},validateCell:function(i,b){i=this.getNode?this.getNode(i):this.getRow(i);b=this.getColumn(b);if(!i||!b||b.visible==false){return}var g=mini._getMap(b.field,i),d={record:i,row:i,node:i,column:b,field:b.field,value:g,isValid:true,errorText:""};if(b.vtype){mini.lll1oo(b.vtype,d.value,d,b)}if(d.isValid==true&&b.unique&&b.field){var f={},k=this.data,l=b.field;for(var a=0,o=k.length;a<o;a++){var n=k[a],j=n[l];if(mini.isNull(j)||String(j).trim()===""){}else{var c=f[j];if(c&&n==i){d.isValid=false;d.errorText=mini.lOo0(b,"uniqueErrorText");this.setCellIsValid(c,b,d.isValid,d.errorText);break}f[j]=n}}}this.fire("cellvalidation",d);this.setCellIsValid(i,b,d.isValid,d.errorText)},setIsValid:function(f){if(f){var d=this._cellErrors.clone();for(var c=0,b=d.length;c<b;c++){var a=d[c];this.setCellIsValid(a.record,a.column,true)}}},_removeRowError:function(i){var d=this.getColumns();for(var a=0,f=d.length;a<f;a++){var b=d[a],g=i[this._rowIdField]+"$"+b._id,c=this._cellMapErrors[g];if(c){delete this._cellMapErrors[g];this._cellErrors.remove(c)}}},setCellIsValid:function(g,a,b,d){g=this.getRow(g);a=this.getColumn(a);if(!g||!a){return}var f=g[this._rowIdField]+"$"+a._id,i=this.ol010(g,a),c=this._cellMapErrors[f];delete this._cellMapErrors[f];this._cellErrors.remove(c);if(b===true){if(i&&c){__cls_rm(i,"mini-grid-cell-error")}}else{c={record:g,column:a,isValid:b,errorText:d};this._cellMapErrors[f]=c;this._cellErrors.add(c);if(i){__cls_add(i,"mini-grid-cell-error")}}}});mini.regClass(DataGrid,"datagrid");TreeGrid=function(){TreeGrid.superclass.constructor.apply(this,arguments);__cls_add(this.el,"mini-tree");this.setAjaxAsync(false);this.setAutoLoad(true);if(this.showTreeLines==true){__cls_add(this.el,"mini-tree-treeLine")}this._AsyncLoader=new mini._Tree_AsyncLoader(this);this._Expander=new mini._Tree_Expander(this);this.setShowArrow(this.showArrow)};mini.extend(TreeGrid,DataGrid,{isTree:true,uiCls:"mini-treegrid",showPager:false,showNewRow:false,showCheckBox:false,showRadioButton:false,showTreeIcon:true,showExpandButtons:true,showTreeLines:false,showArrow:false,expandOnDblClick:true,expandOnNodeClick:false,loadOnExpand:true,_checkBoxType:"checkbox",iconField:"iconCls",_treeColumn:null,leafIconCls:"mini-tree-leaf",folderIconCls:"mini-tree-folder",fixedRowHeight:false,ool1oO:"mini-tree-checkbox",Ol1O:"mini-tree-expand",Ol0oOo:"mini-tree-collapse",O10l1O:"mini-tree-node-ecicon",lo1O0:"mini-tree-nodeshow",checkOnTextClick:false,useAnimation:true,_updateNodeTimer:null,imgPath:"",imgField:"img"});mini.copyTo(TreeGrid.prototype,{addRow:null,removeRow:null,removeRows:null,removeRowAt:null,moveRow:null,setExpandOnLoad:function(a){this._dataSource.setExpandOnLoad(a)},getExpandOnLoad:function(){return this._dataSource.getExpandOnLoad()},isSelectedNode:function(a){a=this.getNode(a);return this.getSelectedNode()===a},selectNode:function(b,a){if(b){this._dataSource.select(b,a)}else{this._dataSource.deselect(this.getSelectedNode(),a)}},getSelectedNode:function(){return this.getSelected()},getSelectedNodes:function(){return this.getSelecteds()},updateNode:function(c,b,a){this._dataSource.updateRecord(c,b,a)},addNode:function(c,b,a){return this._dataSource.insertNode(c,b,a)},removeNodeAt:function(b,a){return this._dataSource.removeNodeAt(b,a);this._changed=true},removeNode:function(a){return this._dataSource.removeNode(a)},moveNode:function(c,b,a){this._dataSource.moveNode(c,b,a)},addNodes:function(c,a,b){return this._dataSource.addNodes(c,a,b)},insertNodes:function(c,b,a){return this._dataSource.insertNodes(b,c,a)},moveNodes:function(c,a,b){this._dataSource.moveNodes(c,a,b)},removeNodes:function(a){return this._dataSource.removeNodes(a)},expandOnLoad:false,checkRecursive:true,autoCheckParent:false,showFolderCheckBox:true,idField:"id",textField:"text",parentField:"pid",nodesField:"children",checkedField:"checked",leafField:"isLeaf",resultAsTree:true,setShowFolderCheckBox:function(a){this._dataSource.setShowFolderCheckBox(a);if(this.doUpdate){this.doUpdate()}this.showFolderCheckBox=a},getShowFolderCheckBox:function(){return this._dataSource.getShowFolderCheckBox()},setCheckRecursive:function(a){this._dataSource.setCheckRecursive(a);this.checkRecursive=a},getCheckRecursive:function(){return this._dataSource.getCheckRecursive()},setResultAsTree:function(a){this._dataSource.setResultAsTree(a)},getResultAsTree:function(a){return this._dataSource.resultAsTree},setParentField:function(a){this._dataSource.setParentField(a);this.parentField=a},getParentField:function(){return this._dataSource.parentField},setLeafField:function(a){this._dataSource.leafField=a;this.leafField=a},getLeafField:function(){return this._dataSource.leafField},setNodesField:function(a){this._dataSource.setNodesField(a);this.nodesField=a},getNodesField:function(){return this._dataSource.nodesField},setCheckedField:function(a){this._dataSource.checkedField=a;this.checkedField=a},getCheckedField:function(){return this.checkedField},findNodes:function(b,a){return this._dataSource.findRecords(b,a)},getLevel:function(a){return this._dataSource.getLevel(a)},isVisibleNode:function(a){return this._dataSource.isVisibleNode(a)},isEnabledNode:function(a){return this._dataSource.isEnabledNode(a)},isExpandedNode:function(a){return this._dataSource.isExpandedNode(a)},isCheckedNode:function(a){return this._dataSource.isCheckedNode(a)},isLeaf:function(a){return this._dataSource.isLeafNode(a)},hasChildren:function(a){return this._dataSource.hasChildren(a)},isAncestor:function(a,b){return this._dataSource.isAncestor(a,b)},getNode:function(a){return this._dataSource.getRecord(a)},getRootNode:function(){return this._dataSource.getRootNode()},getParentNode:function(a){return this._dataSource.getParentNode.apply(this._dataSource,arguments)},getAncestors:function(a){return this._dataSource.getAncestors(a)},getAllChildNodes:function(a){return this._dataSource.getAllChildNodes.apply(this._dataSource,arguments)},getChildNodes:function(a,b){return this._dataSource.getChildNodes.apply(this._dataSource,arguments)},getChildNodeAt:function(a,b){return this._dataSource.getChildNodeAt.apply(this._dataSource,arguments)},indexOfNode:function(a){return this._dataSource.indexOfNode.apply(this._dataSource,arguments)},hasChildNodes:function(a){return this._dataSource.hasChildNodes.apply(this._dataSource,arguments)},isFirstNode:function(a){return this._dataSource.isFirstNode.apply(this._dataSource,arguments)},isLastNode:function(a){return this._dataSource.isLastNode.apply(this._dataSource,arguments)},getNextNode:function(a){return this._dataSource.getNextNode.apply(this._dataSource,arguments)},getPrevNode:function(a){return this._dataSource.getPrevNode.apply(this._dataSource,arguments)},getFirstNode:function(a){return this._dataSource.getFirstNode.apply(this._dataSource,arguments)},getLastNode:function(a){return this._dataSource.getLastNode.apply(this._dataSource,arguments)},toggleNode:function(a){this._dataSource.toggle(a)},collapseNode:function(b,a){this._dataSource.collapse(b,a)},expandNode:function(b,a){this._dataSource.expand(b,a)},collapseAll:function(){this.useAnimation=false;this._dataSource.collapseAll();this.useAnimation=true},expandAll:function(){this.useAnimation=false;this._dataSource.expandAll();this.useAnimation=true},expandLevel:function(a){this.useAnimation=false;this._dataSource.expandLevel(a);this.useAnimation=true},collapseLevel:function(a){this.useAnimation=false;this._dataSource.collapseLevel(a);this.useAnimation=true},expandPath:function(a){this.useAnimation=false;this._dataSource.expandPath(a);this.useAnimation=true},collapsePath:function(a){this.useAnimation=false;this._dataSource.collapsePath(a);this.useAnimation=true},loadNode:function(b,a){this._dataSource.loadNode(b,a)},setCheckModel:function(a){this._dataSource.setCheckModel(a)},getCheckModel:function(){return this._dataSource.getCheckModel()},setOnlyLeafCheckable:function(a){this._dataSource.setOnlyLeafCheckable(a)},getOnlyLeafCheckable:function(){return this._dataSource.getOnlyLeafCheckable()},setAutoCheckParent:function(a){this._dataSource.setAutoCheckParent(a)},getAutoCheckParent:function(){return this._dataSource.getAutoCheckParent()},checkNode:function(b,a){this._dataSource.checkNode(b,a)},uncheckNode:function(b,a){this._dataSource.uncheckNode(b,a)},checkNodes:function(b,a){this._dataSource.checkNodes(b,a)},uncheckNodes:function(b,a){this._dataSource.uncheckNodes(b,a)},checkAllNodes:function(){this._dataSource.checkAllNodes()},uncheckAllNodes:function(){this._dataSource.uncheckAllNodes()},getCheckedNodes:function(){return this._dataSource.getCheckedNodes.apply(this._dataSource,arguments)},getCheckedNodesId:function(){return this._dataSource.getCheckedNodesId.apply(this._dataSource,arguments)},getCheckedNodesText:function(){return this._dataSource.getCheckedNodesText.apply(this._dataSource,arguments)},getNodesByValue:function(d){if(mini.isNull(d)){d=""}d=String(d);var b=[],a=String(d).split(",");for(var g=0,f=a.length;g<f;g++){var c=this.getNode(a[g]);if(c){b.push(c)}}return b},isChecked:function(a){return this._dataSource.isChecked.apply(this._dataSource,arguments)},getCheckState:function(a){return this._dataSource.getCheckState.apply(this._dataSource,arguments)},setCheckable:function(b,a){this._dataSource.setCheckable.apply(this._dataSource,arguments)},getCheckable:function(a){return this._dataSource.getCheckable.apply(this._dataSource,arguments)},bubbleParent:function(c,a,b){this._dataSource.bubbleParent.apply(this._dataSource,arguments)},cascadeChild:function(c,a,b){this._dataSource.cascadeChild.apply(this._dataSource,arguments)},eachChild:function(c,a,b){this._dataSource.eachChild.apply(this._dataSource,arguments)},getAttrs:function(b){var j=TreeGrid.superclass.getAttrs.call(this,b);mini._ParseString(b,j,["value","url","idField","textField","iconField","nodesField","parentField","valueField","checkedField","leafIcon","folderIcon","leafField","ondrawnode","onbeforenodeselect","onnodeselect","onnodemousedown","onnodeclick","onnodedblclick","onbeforenodecheck","onnodecheck","onbeforeexpand","onexpand","onbeforecollapse","oncollapse","dragGroupName","dropGroupName","onendedit","expandOnLoad","ondragstart","onbeforedrop","ondrop","ongivefeedback","treeColumn","onaddnode","onremovenode","onmovenode","imgPath","imgField","hoverMode"]);mini._ParseBool(b,j,["allowSelect","showCheckBox","showRadioButton","showExpandButtons","showTreeIcon","showTreeLines","checkRecursive","enableHotTrack","showFolderCheckBox","resultAsTree","allowDrag","allowDrop","showArrow","expandOnDblClick","removeOnCollapse","autoCheckParent","loadOnExpand","expandOnNodeClick","useAnimation","checkOnTextClick"]);if(j.expandOnLoad){var c=parseInt(j.expandOnLoad);if(mini.isNumber(c)){j.expandOnLoad=c}else{j.expandOnLoad=j.expandOnLoad=="true"?true:false}}var f=j.idField||this.getIdField(),i=j.textField||this.getTextField(),k=j.iconField||this.getIconField(),a=j.nodesField||this.getNodesField();function d(r){var z=[];for(var l=0,x=r.length;l<x;l++){var t=r[l],o=mini.getChildNodes(t),q=o[0],A=o[1];if(!q||!A){q=t}var n=jQuery(q),w={},p=w[f]=q.getAttribute("value");w[k]=n.attr("iconCls");w[i]=q.innerHTML;z.add(w);var s=n.attr("expanded");if(s){w.expanded=s=="false"?false:true}var y=n.attr("allowSelect");if(y){w.allowSelect=y=="false"?false:true}if(!A){continue}var u=mini.getChildNodes(A),v=d(u);if(v.length>0){w[a]=v}}return z}var g=d(mini.getChildNodes(b));if(g.length>0){j.data=g}if(!j.idField&&j.valueField){j.idField=j.valueField}return j},getImgField:function(){return this.imgField},setImgField:function(a){this.imgField=a},getImgPath:function(){return this.imgPath},setImgPath:function(a){this.imgPath=a},disableNode:function(c){c=this.getNode(c);if(!c){return}c.enabled=false;var d=this._getNodeEl(c,1),a=this._getNodeEl(c,2);if(d){__cls_add(d,"mini-disabled")}if(a){__cls_add(a,"mini-disabled")}var b=this.OOolO1(c);if(b){b.disabled=true}},enableNode:function(c){c=this.getNode(c);if(!c){return}c.enabled=true;var d=this._getNodeEl(c,1),a=this._getNodeEl(c,2);if(d){__cls_rm(d,"mini-disabled")}if(a){__cls_rm(a,"mini-disabled")}var b=this.OOolO1(c);if(b){b.disabled=false}},showNode:function(a){a=this.getNode(a);if(!a){return}a.visible=true;this._doUpdateTreeNodeEl(a)},hideNode:function(c){c=this.getNode(c);if(!c){return}c.visible=false;this._doUpdateTreeNodeEl(c);var a=this._getNodeEl(c,1),b=this._getNodeEl(c,2);if(a){a.style.display="none"}if(b){b.style.display="none"}},getLoadOnExpand:function(){return this.loadOnExpand},setLoadOnExpand:function(a){this.loadOnExpand=a},getExpandOnNodeClick:function(){return this.expandOnNodeClick},setExpandOnNodeClick:function(a){this.expandOnNodeClick=a;if(a){__cls_add(this.el,"mini-tree-nodeclick")}else{__cls_rm(this.el,"mini-tree-nodeclick")}},getExpandOnDblClick:function(){return this.expandOnDblClick},getFolderIcon:function(){return this.folderIcon},setFolderIcon:function(a){this.folderIcon=a},getLeafIcon:function(){return this.leafIcon},setLeafIcon:function(a){this.leafIcon=a},getShowArrow:function(){return this.showArrow},setShowArrow:function(a){this.showArrow=a;if(a==true){__cls_add(this.el,"mini-tree-showArrows")}else{__cls_rm(this.el,"mini-tree-showArrows")}},getShowTreeLines:function(){return this.showTreeLines},setShowTreeLines:function(a){this.showTreeLines=a;if(a==true){__cls_add(this.el,"mini-tree-treeLine")}else{__cls_rm(this.el,"mini-tree-treeLine")}},getShowExpandButtons:function(){return this.showExpandButtons},setShowExpandButtons:function(a){if(this.showExpandButtons!=a){this.showExpandButtons=a;this.doUpdate()}},getAllowSelect:function(){return this.getAllowRowSelect()},setAllowSelect:function(a){this.setAllowRowSelect(a)},getIconField:function(){return this.iconField},setIconField:function(a){this.iconField=a},setNodeIconCls:function(c,a){c=this.getNode(c);if(!c){return}var b={};b[this.iconField]=a;this.updateNode(c,b)},setNodeText:function(c,a){c=this.getNode(c);if(!c){return}var b={};b[this.getTextField()]=a;this.updateNode(c,b)},l1OO:function(a){},__OnNodeDblClick:function(a){},_OnCellClick:function(a){if(__getByCls(a.htmlEvent.target,this.O10l1O)){return}if(__getByCls(a.htmlEvent.target,"mini-tree-checkbox")||this.checkOnTextClick){this._tryToggleCheckNode(a.record)}else{this.fire("cellclick",a)}},_OnCellMouseDown:function(a){if(__getByCls(a.htmlEvent.target,this.O10l1O)){}else{if(__getByCls(a.htmlEvent.target,"mini-tree-checkbox")){}else{this.fire("cellmousedown",a)}}},_tryToggleNode:function(b){var c=this.isExpandedNode(b),a={node:b,cancel:false};if(c){this.fire("beforecollapse",a);if(a.cancel==true){return}this.collapseNode(b);a.type="collapse";this.fire("collapse",a)}else{this.fire("beforeexpand",a);if(a.cancel==true){return}this.expandNode(b);a.type="expand";this.fire("expand",a)}},_tryToggleCheckNode:function(c){if(c.enabled===false){return}var b=this.getCheckable(c);if(b==false){return}var d=this.isCheckedNode(c),a={node:c,cancel:false,checked:d,isLeaf:this.isLeaf(c)};this.fire("beforenodecheck",a);if(a.cancel){return}this._dataSource.doCheckNodes(c,!d,true);this.fire("nodecheck",a)},__OnCheckChanged:function(b){for(var f=0,d=b._nodes.length;f<d;f++){var c=b._nodes[f];this._doCheckNodeEl(c)}if(this._checkChangedTimer){clearTimeout(this._checkChangedTimer);this._checkChangedTimer=null}var a=this;this._checkChangedTimer=setTimeout(function(){a._checkChangedTimer=null;a.fire("_checkchanged")},1)},_doCheckNodeEl:function(c){var b=this.OOolO1(c);if(b){var f=this.getCheckModel();__cls_rm(b,"mini-tree-checkbox-indeterminate");var d=c.indeterminate&&!c.checked;if(f=="cascade"||d){var a=d?"indeterminate":this.getCheckState(c);if(a=="indeterminate"){__cls_add(b,"mini-tree-checkbox-indeterminate")}else{__cls_rm(b,"mini-tree-checkbox-indeterminate")}}if(c.checked){__cls_add(b,"mini-tree-checkbox-checked")}else{__cls_rm(b,"mini-tree-checkbox-checked")}}},loo1O1:function(a){this._doExpandCollapseNode(a.node)},OloOOo:function(a){this._doExpandCollapseNode(a.node)},_doExpandCollapseNode:function(d){var b=this;if(b._updateNodeTimer){clearTimeout(b._updateNodeTimer);b._updateNodeTimer=null}var a=new Date();if(this.isVirtualScroll()==true){if(!this._updateTimer){b._updateNodeTimer=setTimeout(function(){b._updateNodeTimer=null;b.doUpdateRows();b.deferLayout(50)},5)}return}function g(){this._doUpdateTreeNodeEl(d);this.deferLayout(20)}if(false||mini.isIE6||!this.useAnimation||this.isFrozen()){g.call(this)}else{var i=this.isExpandedNode(d);function f(k,o,j){var n=this.oO00(k,o);if(n){var p=__getHeight(n);n.style.overflow="hidden";n.style.height="0px";var l={height:p+"px"},r=this;r.ooo0Oo=true;var q=jQuery(n);q.animate(l,250,function(){n.style.height="auto";r.ooo0Oo=false;r.doLayout();mini.repaint(n)})}}function c(k,o,j){var n=this.oO00(k,o);if(n){var p=__getHeight(n),l={height:0+"px"},r=this;r.ooo0Oo=true;var q=jQuery(n);q.animate(l,180,function(){n.style.height="auto";r.ooo0Oo=false;if(j){j.call(r)}r.doLayout();mini.repaint(n)})}else{if(j){j.call(this)}}}b=this;if(i){g.call(this);f.call(this,d,2);f.call(this,d,1)}else{c.call(this,d,2,g);c.call(this,d,1)}}},OOolO1:function(b){if(this.isVisibleNode(b)==false){return null}var a=this._id+"$checkbox$"+b._id;return __get(a,this.el)},_getNodeIcon:function(b){var a=b[this.iconField];if(!a){if(this.isLeaf(b)){a=this.leafIconCls}else{a=this.folderIconCls}}return a},getIconsField:function(){return this._iconsField},setIconsField:function(a){this._iconsField=a},getCheckBoxType:function(){return this._checkBoxType},setCheckBoxType:function(a){this._checkBoxType=a;this._doUpdateCheckState()},getShowRadioButton:function(){return this.showRadioButton},setShowRadioButton:function(a){this.showRadioButton=a;this.deferUpdate()},getShowCheckBox:function(){return this.showCheckBox},setShowCheckBox:function(a){this.showCheckBox=a;this.deferUpdate()},getShowTreeIcon:function(){return this.showTreeIcon},setShowTreeIcon:function(a){this.showTreeIcon=a;this.deferUpdate()},getTreeColumn:function(){return this._treeColumn},setTreeColumn:function(a){this._treeColumn=a;this.deferUpdate()},getCheckOnTextClick:function(){return this.checkOnTextClick},setCheckOnTextClick:function(a){this.checkOnTextClick=a},_getNodesTr:function(c,a){var b=this.oO00(c,a);if(b){return b.parentNode.parentNode}},oO00:function(c,b){c=this.getNode(c);var a=this.o110o0(c,b);return document.getElementById(a)},_getNodeEl:function(b,a){return this.l0011(b,a)},o110o0:function(c,b){var a=this._id+"$nodes"+b+"$"+c._id;return a},O11lOsHTML:function(a,i){if(this.isVirtualScroll()){return TreeGrid.superclass.O11lOsHTML.apply(this,arguments)}var g=this._dataSource,j=this,f=[],b=[],c=g.getRootNode();if(this._useEmptyView!==true){b=g.getChildNodes(c)}var d=i==2?this._rowsViewEl.firstChild:this._rowsLockEl.firstChild;d.id=this.o110o0(c,i);this.o1OOHTML(b,a,i,f);return f.join("")},o1OOHTML:function(a,j,i,c){if(!a){return""}var f=!c;if(!c){c=[]}c.push('<table class="mini-grid-table" cellspacing="0" cellpadding="0" border="0">');c.push(this._createTopRowHTML(j,true));if(j.length>0){for(var g=0,d=a.length;g<d;g++){var b=a[g];this.olO10HTML(b,j,i,c)}}c.push("</table>");if(f){return c.join("")}},olO10HTML:function(o,d,c,p,l){var f=!p;if(!p){p=[]}var b=this._dataSource,j=b.getDataView().indexOf(o);this.O11lOHTML(o,j,d,c,p);if(l!==false){var g=b.getChildNodes(o),a=this.isVisibleNode(o);if(g&&g.length>0){var n=this.isExpandedNode(o);if(n==true){var i=(n&&a)?"":"display:none",k=this.o110o0(o,c);p[p.length]='<tr class="mini-tree-nodes-tr" style="';if(mini.isIE){p[p.length]=i}p[p.length]='" ><td class="mini-tree-nodes-td" colspan="';p[p.length]=d.length+1;p[p.length]='" >';p[p.length]='<div class="mini-tree-nodes" id="';p[p.length]=k;p[p.length]='" style="';p[p.length]=i;p[p.length]='">';this.o1OOHTML(g,d,c,p);p[p.length]="</div>";p[p.length]="</td></tr>"}}}if(f){return p.join("")}},_renderCheckState:function(b){if(!this._renderCheckStateNodes){this._renderCheckStateNodes=[]}this._renderCheckStateNodes.push(b);if(this._renderCheckStateTimer){return}var a=this;this._renderCheckStateTimer=setTimeout(function(){a._renderCheckStateTimer=null;var d=a._renderCheckStateNodes;a._renderCheckStateNodes=null;for(var c=0,f=d.length;c<f;c++){a._doCheckNodeEl(d[c])}},1)},_createTreeColumn:function(b){var c=b.record,a=b.column;b.headerCls+=" mini-tree-treecolumn";b.cellCls+=" mini-tree-treecell";b.cellStyle+=";padding:0;";var d=this.isLeaf(c);b.cellHtml=this.l0Ol(c,null,b);if(c.checked!=true&&!d){if(b.showCheckBox){this._renderCheckState(c)}}},OoOOol:function(a){return this._id+"$checkbox$"+a._id},l0Ol:function(g,j,u){var w=!j;if(!j){j=[]}var n=this.isLeaf(g),t=this.getLevel(g),q=u.nodeCls;if(!n){q=this.isExpandedNode(g)?this.Ol1O:this.Ol0oOo}if(g.enabled===false){q+=" mini-disabled"}if(!n){q+=" mini-tree-parentNode"}var p=this.getChildNodes(g),c=p&&p.length>0;j[j.length]='<div class="mini-tree-nodetitle '+q+'" >';var o=this.getParentNode(g),a=0;for(var s=a;s<=t;s++){if(s==t){continue}if(n){if(s>t-1){continue}}var i="";if(this._isInViewLastNode(g,s)){i="background:none"}j[j.length]='<span class="mini-tree-indent " style="'+i+'"></span>'}var f="";if(this._isViewFirstNode(g)&&t==0){f="mini-tree-node-ecicon-first"}else{if(this._isViewLastNode(g)){f="mini-tree-node-ecicon-last"}}if(this._isViewFirstNode(g)&&this._isViewLastNode(g)){f="mini-tree-node-ecicon-firstAndlast";if(o==this.root){f="mini-tree-node-ecicon-firstLast"}}if(!n){j[j.length]='<a class="'+this.O10l1O+" "+f+'" style="'+(this.showExpandButtons?"":"display:none")+'" '+(mini.isChrome?"":'href="javascript:void(0);"')+' onclick="return false;" hidefocus></a>'}else{j[j.length]='<span class="'+this.O10l1O+" "+f+'" style="'+(this.showExpandButtons?"":"display:none")+'"></span>'}j[j.length]='<span class="mini-tree-nodeshow">';if(u.showTreeIcon){if(u.img){var v=this.imgPath+u.img;j[j.length]='<span class="mini-tree-icon mini-iconfont" style="background-image:url('+v+');"></span>'}else{j[j.length]='<span class="'+u.iconCls+' mini-tree-icon mini-iconfont"></span>'}}if(u.showRadioButton&&!u.showCheckBox){j[j.length]='<span class="mini-tree-radio" ></span>'}if(u.showCheckBox){var l=this.OoOOol(g),d=this.isCheckedNode(g),k=u.enabled===false?"disabled":"";if(u.enabled!==false){k=u.checkable===false?"disabled":""}j[j.length]='<span id="'+l+'" class="'+this.ool1oO+" "+(d?"mini-tree-checkbox-checked":"")+'"></span>'}j[j.length]='<span class="mini-tree-nodetext">';if(this._editingNode==g){var r=this._id+"$edit$"+g._id,b=u.value;j[j.length]='<input id="'+r+'" type="text" class="mini-tree-editinput" value="'+b+'"/>'}else{j[j.length]=u.cellHtml}j[j.length]="</span>";j[j.length]="</span>";j[j.length]="</div>";if(w){return j.join("")}},isInLastNode:function(d,a){var c=null,i=this.getAncestors(d);for(var g=0,f=i.length;g<f;g++){var b=i[g];if(this.getLevel(b)==a){c=b}}if(!c||c==this.root){return false}return this.isLastNode(c)},_isInViewLastNode:function(d,a){if(this._viewNodes){var c=null,i=this.getAncestors(d);for(var g=0,f=i.length;g<f;g++){var b=i[g];if(this.getLevel(b)==a){c=b}}if(!c||c==this.root){return false}return this._isViewLastNode(c)}else{return this.isInLastNode(d,a)}},_isViewLastNode:function(c){if(this._viewNodes){var a=this.getParentNode(c),b=this._getViewChildNodes(a);return b[b.length-1]===c}else{return this.isLastNode(c)}},_isViewFirstNode:function(c){if(this._viewNodes){var a=this.getParentNode(c),b=this._getViewChildNodes(a);return b[0]===c}else{return this.isFirstNode(c)}},_OnDrawCell:function(b,a,f,d){var c=TreeGrid.superclass._OnDrawCell.call(this,b,a,f,d);if(this._treeColumn&&this._treeColumn==a.name){this.fire("drawnode",c);if(c.nodeStyle){c.cellStyle=c.nodeStyle}if(c.nodeCls){c.cellCls=c.nodeCls}if(c.nodeHtml){c.cellHtml=c.nodeHtml}this._createTreeColumn(c)}return c},_createDrawCellEvent:function(b,a,f,d){var c=TreeGrid.superclass._createDrawCellEvent.call(this,b,a,f,d);c.node=c.record;c.isLeaf=this.isLeaf(c.node);if(this._treeColumn&&this._treeColumn==a.name){c.isTreeCell=true;c.img=b[this.imgField];c.iconCls=this._getNodeIcon(b);c.nodeCls="";c.nodeStyle="";c.nodeHtml="";c.showTreeIcon=this.showTreeIcon;c.checkBoxType=this._checkBoxType;c.showCheckBox=this.showCheckBox;c.showRadioButton=this.showRadioButton;if(c.showCheckBox&&!c.isLeaf){c.showCheckBox=this.showFolderCheckBox}if(c.showRadioButton&&!c.isLeaf){c.showRadioButton=this.showFolderCheckBox}c.enabled=c.node.enabled!==false;c.checkable=this.getCheckable(c.node)}return c},loadList:function(a,c,d){c=c||this.getIdField();d=d||this.getParentField();var b=mini.listToTree(a,this.getNodesField(),c,d);this.setData(b)},setData:function(a){if(!a){a=[]}this._dataSource.setData(a)},doUpdate:function(){TreeGrid.superclass.doUpdate.apply(this,arguments)},removeNodeCls:function(b,a){this.removeRowCls(b,a)},addNodeCls:function(b,a){this.addRowCls(b,a)},_doUpdateTreeNodeEl:function(q,l){l=l!==false;var a=this.getRootNode();if(a==q){this.doUpdate();return}if(!this.isVisibleNode(q)){return}var r=q,o=this.getFrozenColumns(),p=this.getUnFrozenColumns(),g=this.olO10HTML(q,o,1,null,l),i=this.olO10HTML(q,p,2,null,l),s=this._getNodeEl(q,1),b=this._getNodeEl(q,2),d=this._getNodesTr(q,1),f=this._getNodesTr(q,2),k=this._getRowDetailEl(q,1),j=this._getRowDetailEl(q,2),c=mini.createElements(g),q=c[0],n=c[1];if(s){mini.before(s,q);if(l){if(k){mini.after(k,n)}else{mini.before(s,n)}}mini.removeNode(s);if(l){mini.removeNode(d)}}c=mini.createElements(i),q=c[0],n=c[1];if(b){mini.before(b,q);if(l){if(j){mini.after(j,n)}else{mini.before(b,n)}}mini.removeNode(b);if(l){mini.removeNode(f)}}if(q.checked!=true&&!this.isLeaf(q)){this._doCheckNodeEl(r)}},oo0l0:function(a){this._doUpdateTreeNodeEl(a,false)},_doMoveNodeEl:function(b){if(this.isVirtualScroll()==true){this._virtualUpdate()}else{this._doRemoveNodeEl(b);var a=this.getParentNode(b);this._doUpdateTreeNodeEl(a)}},_doRemoveNodeEl:function(b){this._doRemoveRowEl(b);var c=this.oO00(b,1),a=this.oO00(b,2);if(c){c.parentNode.removeChild(c)}if(a){a.parentNode.removeChild(a)}},_doAddNodeEl:function(d){var i=this.getFrozenColumns(),b=this.getUnFrozenColumns(),c=this.getParentNode(d),f=this.indexOf(d),g=false;function a(j,p,o){var r=this.O11lOHTML(j,f,p,o),n=this.indexOfNode(j)+1,l=this.getChildNodeAt(n,c);if(l){var q=this._getNodeEl(l,o);jQuery(q).before(r)}else{var k=this.oO00(c,o);if(k){mini.append(k.firstChild,r)}else{g=true}}}a.call(this,d,b,2);a.call(this,d,i,1);if(g){this._doUpdateTreeNodeEl(c)}},__OnSourceMoveNode:function(f){this._doMoveNodeEl(f.node);this.fire("movenode",f);var c=f.oldParentNode,d=f.parentNode;if(c!=d){var b=this.getChildNodes(c);if(b){var a=b[b.length-1];if(a){this._doUpdateTreeNodeEl(a)}}}},__OnSourceRemoveNode:function(b){if(this.isVirtualScroll()==true){this._virtualUpdate()}else{this._doRemoveNodeEl(b.node);var d=this.getParentNode(b.node),c=this.getChildNodes(d);if(c.length==0){this._doUpdateTreeNodeEl(d)}else{var a=b.index;if(a>1&&a==c.length){this._doUpdateTreeNodeEl(c[c.length-1])}}}this.fire("removenode",b)},__OnSourceAddNode:function(b){var c=this._dataSource.isVisibleNode(b.node);if(this.isVirtualScroll()==true){this._virtualUpdate()}else{if(c){this._doAddNodeEl(b.node)}else{var a=this.getParentNode(b.node);if(this._dataSource.isVisibleNode(a)){this._doUpdateTreeNodeEl(a)}}}this.fire("addnode",b)},_virtualUpdate:function(){var a=this;if(a._updateNodeTimer){clearTimeout(a._updateNodeTimer);a._updateNodeTimer=null}a._updateNodeTimer=setTimeout(function(){a._updateNodeTimer=null;a.doUpdateRows();a.deferLayout(50)},5)},__OnLoadNode:function(a){this.showLoading=this.__showLoading;this.removeNodeCls(a.node,"mini-tree-loading");this.fire("loadnode",a)},__OnBeforeLoadNode:function(a){this.__showLoading=this.showLoading;this.showLoading=false;this.addNodeCls(a.node,"mini-tree-loading");this.fire("beforeloadnode",a)},oOlOoO:function(){TreeGrid.superclass.oOlOoO.call(this);var a=this._dataSource;a.on("expand",this.loo1O1,this);a.on("collapse",this.OloOOo,this);a.on("_checkchanged",this.__OnCheckChanged,this);a.on("addnode",this.__OnSourceAddNode,this);a.on("removenode",this.__OnSourceRemoveNode,this);a.on("movenode",this.__OnSourceMoveNode,this);a.on("beforeloadnode",this.__OnBeforeLoadNode,this);a.on("loadnode",this.__OnLoadNode,this)},_createSource:function(){this._dataSource=new mini.DataTree()},isGrouping:function(){return false},getText:function(){var b=[];if(this.showCheckBox){b=this.getCheckedNodes()}else{var c=this.getSelectedNode();if(c){b.push(c)}}var f=[],d=this.getTextField();for(var a=0,g=b.length;a<g;a++){c=b[a];f.push(c[d])}return f.join(",")},getValue:function(a){if(this.showCheckBox){if(a===false){a="leaf"}return this._dataSource.getCheckedNodesId(a)}else{return this._dataSource.getSelectedsId()}},setValue:function(d,b){if(mini.isNull(d)){d=""}d=String(d);if(this.getValue()!=d){var c=this.getCheckedNodes();this.uncheckNodes(c,this.checkRecursive);this.value=d;if(this.showCheckBox){var a=String(d).split(",");this._dataSource.doCheckNodes(a,true,b!==false)}else{this.selectNode(d,false)}}},_initEvents:function(){TreeGrid.superclass._initEvents.call(this);this.on("nodedblclick",this.__OnNodeDblClick,this);this.on("nodeclick",this.l1OO,this);this.on("cellclick",function(a){a.node=a.record;a.isLeaf=this.isLeaf(a.node);this.fire("nodeclick",a)},this);this.on("cellmousedown",function(a){a.node=a.record;a.isLeaf=this.isLeaf(a.node);this.fire("nodemousedown",a)},this);this.on("celldblclick",function(a){a.node=a.record;a.isLeaf=this.isLeaf(a.node);this.fire("nodedblclick",a)},this);this.on("beforerowselect",function(a){a.node=a.selected;a.isLeaf=this.isLeaf(a.node);this.fire("beforenodeselect",a)},this);this.on("rowselect",function(a){a.node=a.selected;a.isLeaf=this.isLeaf(a.node);this.fire("nodeselect",a)},this)},o00Oo0Text:function(a){return"Nodes "+a.length},indexOf:function(a){return this._dataSource.indexOfList(a)},isEditingNode:function(a){return this._editingNode==a}});mini.regClass(TreeGrid,"TreeGrid");Tree=function(){Tree.superclass.constructor.apply(this,arguments);var a=[{name:"node",header:"",field:this.getTextField(),width:"auto",allowDrag:true,editor:{type:"textbox"}}];this._columnModel.setColumns(a);this._column=this._columnModel.getColumn("node");__cls_rm(this.el,"mini-treegrid");__cls_add(this.el,"mini-tree-nowrap");this.setBorderStyle("border:0")};mini.extend(Tree,TreeGrid,{_userEmptyTd:(mini.isChrome||mini.isIE6||mini.isIE7)?false:true,uiCls:"mini-tree",hoverMode:"title",o1OlOl:"mini-tree-node-hover",o1lo:"mini-tree-selectedNode",_treeColumn:"node",defaultRowHeight:22,showHeader:false,showTopbar:false,showFooter:false,showColumns:false,showHGridLines:false,showVGridLines:false,showTreeLines:true,setTreeColumn:null,setColumns:null,getColumns:null,frozen:null,unFrozen:null,showModified:false});mini.copyTo(Tree.prototype,{scrollIntoView:function(b){b=this.getNode(b);if(!b){return}if(!this.isVisibleNode(b)){this.expandPath(b)}var a=this;setTimeout(function(){if(a.isVirtualScroll()){Tree.superclass.scrollIntoView.call(a,b)}else{var c=a._getNodeEl(b,2);mini.scrollIntoView(c,a._rowsViewEl,false)}},10)},removeRowCls:function(c,b){var a=this.l0011(c,1),d=this.l0011(c,2);if(a){__cls_rm(a,b)}if(d){__cls_rm(d,b)}if(a){__cls_rm(a.cells[1],b)}if(d){__cls_rm(d.cells[1],b)}},addRowCls:function(c,b){var a=this.l0011(c,1),d=this.l0011(c,2);if(a){__cls_add(a,b)}if(d){__cls_add(d,b)}if(a){__cls_add(a.cells[1],b)}if(d){__cls_add(d.cells[1],b)}},o010:function(b){var c=this._editingNode;if(c){var a=this._editInput.value;this.cancelEdit();this.setNodeText(c,a);this.fire("endedit",{node:c,text:a})}},OlOoO:function(b){if(b.keyCode==13){var c=this._editingNode,a=this._editInput.value;this._editingNode=null;this.setNodeText(c,a);this.cancelEdit(false);this.fire("endedit",{node:c,text:a})}else{if(b.keyCode==27){this.cancelEdit()}}},cancelEdit:function(a){var b=this._editingNode;this._editingNode=null;if(b){if(a!==false){this.oo0l0(b)}mini.un(this._editInput,"keydown",this.OlOoO,this);mini.un(this._editInput,"blur",this.o010,this)}this._editInput=null},beginEdit:function(c){c=this.getNode(c);if(!c){return}var f=this.getColumn(0),d=mini._getMap(f.field,c),g={record:c,node:c,column:f,field:f.field,value:d,cancel:false};this.fire("cellbeginedit",g);if(g.cancel==true){return}this._editingNode=c;this.oo0l0(c);var b=this;function a(){var i=b._id+"$edit$"+c._id;b._editInput=document.getElementById(i);b._editInput.focus();mini.selectRange(b._editInput,0,1000);mini.on(b._editInput,"keydown",b.OlOoO,b);mini.on(b._editInput,"blur",b.o010,b)}setTimeout(function(){a()},100);a()},_OnCellMouseDown:function(a){if(this._editInput){this._editInput.blur()}this.fire("cellmousedown",a)},_getRowHeight:function(b){var a=this.defaultRowHeight;if(b._height){a=parseInt(b._height);if(isNaN(parseInt(b._height))){a=rowHeight}}return a},O0lO0ByEvent:function(c,b){if(this.hoverMode=="node"){b=false}var a=Tree.superclass.O0lO0ByEvent.call(this,c);if(b===false){return a}if(a&&__getByCls(c.target,"mini-tree-nodeshow")){return a}return null},setTextField:function(a){this._dataSource.setTextField(a);this._columnModel.updateColumn("node",{field:a});this.textField=a}});mini.regClass(Tree,"Tree");mini._Tree_Expander=function(a){this.owner=a;mini.on(a.el,"click",this.l11o00,this);mini.on(a.el,"dblclick",this.O1loO1,this)};mini._Tree_Expander.prototype={_canToggle:function(){return !this.owner._dataSource._isNodeLoading()},l11o00:function(b){var a=this.owner,c=a.O0lO0ByEvent(b,false);if(!c||c.enabled===false){return}if(__getByCls(b.target,"mini-tree-checkbox")){return}var d=a.isLeaf(c);if(__getByCls(b.target,a.O10l1O)){if(this._canToggle()==false){return}a._tryToggleNode(c)}else{if(a.expandOnNodeClick&&!d&&!a.ooo0Oo){if(this._canToggle()==false){return}a._tryToggleNode(c)}}},O1loO1:function(b){var a=this.owner,c=a.O0lO0ByEvent(b,false);if(!c||c.enabled===false){return}if(a.isEditingNode(c)){return}var d=a.isLeaf(c);if(a.ooo0Oo){return}if(__getByCls(b.target,a.O10l1O)){return}if(__getByCls(b.target,"mini-tree-checkbox")){return}if(a.expandOnNodeClick){return}if(a.expandOnDblClick&&!d){if(this._canToggle()==false){return}b.preventDefault();a._tryToggleNode(c)}}};mini._Tree_AsyncLoader=function(a){this.owner=a;a.on("expand",this.__OnBeforeNodeExpand,this)};mini._Tree_AsyncLoader.prototype={__OnBeforeNodeExpand:function(a){var f=this.owner,b=a.node,d=f.isLeaf(b),c=b[f.getNodesField()];if(!d&&(!c||c.length==0)){if(f.loadOnExpand&&b.asyncLoad!==false){a.cancel=true;f.loadNode(b)}}}};mini.RadioButtonList=RadioButtonList,mini.ValidatorBase=ValidatorBase,mini.CheckBoxList=CheckBoxList,mini.AutoComplete=AutoComplete,mini.TextBoxList=TextBoxList,mini.TimeSpinner=TimeSpinner,mini.ListControl=ListControl,mini.DataBinding=DataBinding,mini.TreeSelect=TreeSelect,mini.DatePicker=DatePicker,mini.FileUpload=FileUpload,mini.ButtonEdit=ButtonEdit,mini.MenuButton=MenuButton,mini.PopupEdit=PopupEdit,mini.Component=Component,mini.Calendar=Calendar,mini.HtmlFile=HtmlFile,mini.ComboBox=ComboBox,mini.Splitter=Splitter,mini.TextArea=TextArea,mini.MenuItem=MenuItem,mini.Password=Password,mini.DataGrid=DataGrid,mini.CheckBox=CheckBox,mini.TreeGrid=TreeGrid,mini.Spinner=Spinner,mini.ListBox=ListBox,mini.Include=Include,mini.TextBox=TextBox,mini.DataSet=DataSet,mini.Control=Control,mini.Lookup=Lookup,mini.Window=Window,mini.Button=Button,mini.Layout=Layout,mini.Hidden=Hidden,mini.Panel=Panel,mini.Pager=Pager,mini.Popup=Popup,mini.Menu=Menu,mini.Tabs=Tabs,mini.Tree=Tree,mini.Box=Box,mini.Fit=Fit;