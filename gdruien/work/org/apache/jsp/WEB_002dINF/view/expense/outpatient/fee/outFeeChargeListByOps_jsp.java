/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/9.0.2
 * Generated at: 2018-05-14 02:17:18 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.WEB_002dINF.view.expense.outpatient.fee;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class outFeeChargeListByOps_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.HashMap<java.lang.String,java.lang.Long>(6);
    _jspx_dependants.put("jar:file:/E:/workspace.hisnew/hisbase/WebContent/WEB-INF/lib/jstl-1.2.jar!/META-INF/fn.tld", Long.valueOf(1153356282000L));
    _jspx_dependants.put("jar:file:/E:/workspace.hisnew/hisbase/WebContent/WEB-INF/lib/jstl-1.2.jar!/META-INF/c.tld", Long.valueOf(1153356282000L));
    _jspx_dependants.put("/WEB-INF/lib/jstl-1.2.jar", Long.valueOf(1525761782870L));
    _jspx_dependants.put("/commons/include/html_doctype.html", Long.valueOf(1525761798654L));
    _jspx_dependants.put("/commons/include/get.jsp", Long.valueOf(1525827802831L));
    _jspx_dependants.put("jar:file:/E:/workspace.hisnew/hisbase/WebContent/WEB-INF/lib/jstl-1.2.jar!/META-INF/fmt.tld", Long.valueOf(1153356282000L));
  }

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.HashSet<>();
    _jspx_imports_packages.add("javax.servlet");
    _jspx_imports_packages.add("javax.servlet.http");
    _jspx_imports_packages.add("javax.servlet.jsp");
    _jspx_imports_classes = null;
  }

  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody;

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
    _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
  }

  public void _jspDestroy() {
    _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.release();
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
      throws java.io.IOException, javax.servlet.ServletException {

    final java.lang.String _jspx_method = request.getMethod();
    if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method) && !javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET POST or HEAD");
      return;
    }

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write('\r');
      out.write('\n');
      out.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">");
      out.write("\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("<title>门诊手术批费</title>\r\n");
      out.write('\r');
      out.write('\n');
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      if (_jspx_meth_c_005fset_005f0(_jspx_page_context))
        return;
      out.write('\r');
      out.write('\n');
      if (_jspx_meth_c_005fset_005f1(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\r\n");
      out.write("<meta http-equiv=\"X-UA-Compatible\" content=\"IE=EmulateIE8\" />\r\n");
      out.write("\r\n");
      out.write("<script src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/scripts/boot.js\" type=\"text/javascript\"></script>\r\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/commons/dynamic.jsp\"></script>\r\n");
      out.write("\r\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/scripts/core.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/scripts/plugins/template/jquery.tmpl.min.js\"></script>\r\n");
      out.write("\r\n");
      out.write("<link href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/styles/default/css/web.css\" rel=\"stylesheet\" type=\"text/css\" />\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<style type=\"text/css\">\r\n");
      out.write("\t.hideBegin {\r\n");
      out.write("\t\tborder: 0; \r\n");
      out.write("\t}\r\n");
      out.write("    \r\n");
      out.write("</style>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write(" \tvar registerId = null;\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 当前的手术批费\r\n");
      out.write(" \tvar currentCharge = null;\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 当前的手术申请Id\r\n");
      out.write(" \tvar currentOpsApply = null;\r\n");
      out.write("\t\r\n");
      out.write(" \t// 键盘监听事件\r\n");
      out.write("\tdocument.onkeydown = function(event) {\r\n");
      out.write("\t\tif (event.keyCode == 13) {\r\n");
      out.write("\t\t\tvar cell = grid.getCurrentCell();\r\n");
      out.write("\t\t\tif(cell) {\r\n");
      out.write("\t\t\t\tif (cell[1].field == \"showQty\" && cell[0]._state == \"added\") {\r\n");
      out.write("\t\t\t\t\taddRows();\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tif (event.keyCode == 9) {\r\n");
      out.write("\t\t\treturn false; \r\n");
      out.write("\t\t};\r\n");
      out.write("\t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 重新加载页面\r\n");
      out.write(" \tfunction refreshPage() {\r\n");
      out.write(" \t\treloadTree();\r\n");
      out.write(" \t\tquery();\r\n");
      out.write(" \t\treloadDetail();\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write("\t// 所有查询条件\r\n");
      out.write(" \tvar fields = [{id: 0, filed: \"patientName\", text: \"姓名\"}, {id: 1, filed: \"patientId\", text: \"唯一号\"}];\r\n");
      out.write(" \tvar searchIndex = 0; // 查询条件索引\r\n");
      out.write("\t\r\n");
      out.write(" \t// 键盘事件\r\n");
      out.write(" \tfunction onenter(e) {\r\n");
      out.write(" \t\tloadTree();\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 过滤\r\n");
      out.write(" \tfunction loadTree() {\r\n");
      out.write(" \t\ttree1.load(\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/operation/outOpsApply/getOpsTree.do?applyTime=\"+ date1.text);\r\n");
      out.write(" \t\tvar patientName = searchField.getValue();\r\n");
      out.write("\t\tvar nodes = tree1.findNodes(function(node) {\t\r\n");
      out.write(" \t\t\tif(node.text == patientName) {\r\n");
      out.write("\t\t\t\treturn true; \r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\r\n");
      out.write("\t\tif(nodes.length > 0) {\r\n");
      out.write("\t\t\t$.ajax({\r\n");
      out.write("\t\t\t\turl: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/operation/outOpsApply/getOpsTree.do\",\r\n");
      out.write("\t\t\t\tdata: {applyTime: date1.text },\r\n");
      out.write("\t\t\t\tasync: false ,\r\n");
      out.write("\t\t\t\tsuccess: function (r) {\r\n");
      out.write("\t\t\t\t\tvar opsTree = []; \r\n");
      out.write("\t\t\t\t\tfor(var i = 0 ; i < r.length; i++) {\r\n");
      out.write("\t\t\t\t\t\tif(r[i].registerId == nodes[0].registerId) {\r\n");
      out.write("\t\t\t\t\t\t\topsTree.push(r[i]);\r\n");
      out.write("\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\ttree1.loadList(opsTree, \"id\", \"pid\");\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t});\r\n");
      out.write("\t\t}\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 查询\r\n");
      out.write(" \tfunction queryRegister(data) {\r\n");
      out.write("\t\t$.ajax({  \r\n");
      out.write("\t        type: \"post\",  \r\n");
      out.write("\t        url: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/operation/outOpsApply/getTree.do\",\r\n");
      out.write("\t        data: data,\r\n");
      out.write("\t        async: false,  \r\n");
      out.write("\t        success: function(r){  \r\n");
      out.write("\t        \tif(parseInt(r.state) == 1) {\r\n");
      out.write("\t\t\t\t\ttree1.loadList(r.tree);\r\n");
      out.write("\t\t\t\t\tform1.setData(r.registerInfo, false);\r\n");
      out.write("\t\t\t\t\tsetDiagName();\r\n");
      out.write("\t        \t} else if(parseInt(r.state) == 0) { // 多条患者记录\r\n");
      out.write("\t        \t\twin.show();\r\n");
      out.write("\t\t\t\t\tgrid2.loadData(r.registerInfos);\r\n");
      out.write("\t\t\t\t\tgrid2.focus();\r\n");
      out.write("\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\ttree1.loadList(r);\r\n");
      out.write("\t\t\t\t\twin.hide();\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t        }\r\n");
      out.write("\t    }); \r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 弹窗\r\n");
      out.write(" \tfunction choose(data) {\r\n");
      out.write(" \t\twin.show();\r\n");
      out.write(" \t\tgrid2.load({patientId: data});\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 根据registerId 画树\r\n");
      out.write(" \tfunction paintTree() {\r\n");
      out.write(" \t\tvar url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/operation/outOpsApply/getTree.do\";\r\n");
      out.write("\t\t$.post(url, {registerId: registerId}, function(r) {\r\n");
      out.write("\t\t\tif(r) {\r\n");
      out.write("\t\t\t\ttree1.loadList(r);\r\n");
      out.write("\t\t\t} else {\r\n");
      out.write("\t\t\t\ttop.mini.error(r, \"提示\");\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\t\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 重新加载详情\r\n");
      out.write(" \tfunction reloadDetail() {\r\n");
      out.write(" \t\tvar node = tree1.getSelectedNode();\r\n");
      out.write(" \t\tgrid.load({\r\n");
      out.write(" \t\t\tregisterId: registerId,\r\n");
      out.write(" \t\t\topsChargedId: node.id \t\t\r\n");
      out.write(" \t\t});\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t/* // 弹窗行双击\r\n");
      out.write(" \tfunction onrowdblclick() {\r\n");
      out.write(" \t\tvar row = grid2.getSelected();\r\n");
      out.write("\t\tform.setData(row, false);\r\n");
      out.write("\t\tform1.setData(row, false);\r\n");
      out.write("\t\t$.ajax({\r\n");
      out.write("\t\t\turl: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/operation/outOpsApply/getTree.do\",\r\n");
      out.write("\t\t\tdata: {registerId: row.registerId},\r\n");
      out.write("\t\t\tasync: false ,\r\n");
      out.write("\t\t\tsuccess: function(r) {\r\n");
      out.write("\t\t\t\tif(r) {\r\n");
      out.write("\t\t\t\t\ttree1.loadList(r);\r\n");
      out.write("\t\t\t\t\twin.hide();\r\n");
      out.write("\t\t\t\t\tmini.get(\"#registerId\").setValue(row.registerId);\r\n");
      out.write("\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\ttop.mini.alert(\"该患者没有手术申请信息！\", \"提示\");\r\n");
      out.write("\t\t\t\t\twin.hide();\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t\t\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\r\n");
      out.write(" \t} */\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 键盘回车事件  ESC事件\r\n");
      out.write("\t$(document).keyup(function(event){\r\n");
      out.write("\t   \tif (event.keyCode == 27) {\r\n");
      out.write("\t  \t\twin.hide();\r\n");
      out.write("\t  \t\tmini.get(\"name\").focus();\r\n");
      out.write("\t  \t}\r\n");
      out.write("\t});\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 常用项目双击\r\n");
      out.write(" \tfunction onrowdblclick1(e) {\r\n");
      out.write(" \t\tif(!addBefore())return;\r\n");
      out.write(" \t\tvar itemSourceType = \"0\";\r\n");
      out.write("\t\tvar noDrugs = [\"UZ\", \"UM\", \"UN\", \"MF\", \"U\",\"UC\",\"UL\",\"UO\",\"MC\"];\r\n");
      out.write("\t\tfor(var i = 0 ; i < noDrugs.length; i++) {\r\n");
      out.write("\t\t\tif(noDrugs[i] == e.row.itemSysType ) {\r\n");
      out.write("\t\t\t\titemSourceType = \"1\";\r\n");
      out.write("\t\t\t\tbreak;\r\n");
      out.write("\t\t\t};\r\n");
      out.write("\t\t};\r\n");
      out.write("\t\tvar newRow = {\r\n");
      out.write("\t\t\t\tregisterId: registerId,\r\n");
      out.write("\t \t\t\texecuteDeptId: orgNameComb.getValue(),\r\n");
      out.write("\t \t\t\trecipeDeptId: orgNameComb.getValue(),\r\n");
      out.write("\t \t\t\tregisterDeptId: orgNameComb.getValue(),\r\n");
      out.write("\t \t\t\trecipeDoctId: doctorNameComb.getValue(),\r\n");
      out.write("\t \t\t\tregisterDeptId: orgNameComb.getValue(),\r\n");
      out.write("\t \t\t\tapplyDeptId: orgNameComb.getValue(),\r\n");
      out.write("\t \t\t\tapplyOperId: doctorNameComb.getValue(),\r\n");
      out.write("\t \t\t\texecuteDeptId: orgNameComb.getValue(),\r\n");
      out.write("\t\t\t\titemId: e.row.itemId,\r\n");
      out.write("\t\t\t\titemNo: e.row.itemNo,\r\n");
      out.write("\t\t\t\titemName: e.row.itemName,\r\n");
      out.write("\t\t\t\tprice: e.row.itemPrice,\r\n");
      out.write("\t\t\t\tshowQty: 1,\r\n");
      out.write("\t\t\t\tspecs: e.row.specs,\r\n");
      out.write("\t\t\t\tapplyId: \"-1\",\r\n");
      out.write("\t\t\t\tshowUnit: e.row.unit\r\n");
      out.write("\t\t};\r\n");
      out.write(" \t\tvar url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/operation/outOpsApply/fillApply.do\";\r\n");
      out.write(" \t\tvar data = {data: mini.encode(newRow) };\r\n");
      out.write("\t\t$.post(url, data, function(r) {\r\n");
      out.write("\t\t\tgrid.deselectAll(false);\r\n");
      out.write("\t\t\tgrid.addRow(r);\r\n");
      out.write("\t\t\tgrid.setSelected(r);\r\n");
      out.write("\t\t\tsetTotCost(e.row);\r\n");
      out.write("\t\t});\t\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 切换查询条件\r\n");
      out.write(" \tfunction changedField(e) {\r\n");
      out.write(" \t\t var code = e.htmlEvent.keyCode;\r\n");
      out.write(" \t\t if(code == 113) {\r\n");
      out.write("\t \t\t if(searchIndex < fields.length - 1 ) {\r\n");
      out.write("\t\t \t\t searchIndex++;\r\n");
      out.write("\t \t\t } else {\r\n");
      out.write("\t \t\t\tsearchIndex = 0 ;\r\n");
      out.write("\t \t\t }\r\n");
      out.write(" \t\t\t mini.get(\"searchField\").setValue(fields[searchIndex].text);\r\n");
      out.write(" \t\t }\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 重新加载科室组套树\r\n");
      out.write(" \tfunction reloadTree() {\r\n");
      out.write(" \t\t\r\n");
      out.write(" \t\ttree1.reload();\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 加载科室常用项目\r\n");
      out.write(" \tfunction query(e) {\r\n");
      out.write(" \t\tgrid1.load();\r\n");
      out.write(" \t\tlabelModel();\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 初始化 是展开  开立 医生的下拉选 \r\n");
      out.write(" \tfunction showPop() {\r\n");
      out.write(" \t\tvar doctorName=mini.get(\"doctorName\").getValue();\r\n");
      out.write(" \t\tif( doctorName == \"\") {\r\n");
      out.write(" \t\t\tmini.get(\"doctorName\").showPopup();\r\n");
      out.write(" \t\t\tmini.get(\"doctorName\").focus();\r\n");
      out.write(" \t\t};\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 文本框只读  模式\r\n");
      out.write(" \t function labelModel() {\r\n");
      out.write("         var fields = form1.getFields();                \r\n");
      out.write("         for(var i = 0, l = fields.length; i < l; i++) {\r\n");
      out.write("             var c = fields[i];\r\n");
      out.write("             if(c.setReadOnly) c.setReadOnly(true);     //只读\r\n");
      out.write("             if(c.setIsValid) c.setIsValid(true);      //去除错误提示\r\n");
      out.write("             if(c.addCls) c.addCls(\"asLabel\");          //增加asLabel外观\r\n");
      out.write("         }\r\n");
      out.write("     }\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 点击手术申请树节点\r\n");
      out.write(" \tfunction onnodeclick(e) {\r\n");
      out.write(" \t\tregisterId = e.row.registerId;\r\n");
      out.write(" \t\tif(e.row.pid && e.row.pid != \"ROOT\") {\r\n");
      out.write("\t \t\tcurrentCharge = e.row;\r\n");
      out.write("\t \t\tcurrentOpsApply = null;\r\n");
      out.write("\t \t\trefreshPage();\r\n");
      out.write(" \t\t} else if(e.row.pid && e.row.pid == \"ROOT\") {\r\n");
      out.write(" \t\t\tcurrentOpsApply = e.row;\r\n");
      out.write(" \t\t\tcurrentCharge = null;\r\n");
      out.write(" \t\t\tgrid.clearRows();\r\n");
      out.write(" \t\t};\r\n");
      out.write(" \t\t\r\n");
      out.write("\t\torgNameComb.setValue(e.row.execDeptId);\r\n");
      out.write("\t\t$.ajax({\r\n");
      out.write("\t\t\turl: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/opsCharge/getOrgNameComb.do\",\r\n");
      out.write("\t\t\tdata: {\r\n");
      out.write("\t\t\t\tchargeId: e.node.id ,\r\n");
      out.write("\t\t        orgId: top.orgCombo.value ,\r\n");
      out.write("\t\t        registerId: registerId \t\t\r\n");
      out.write("\t\t\t},\r\n");
      out.write("\t\t\tasync: false ,\r\n");
      out.write("\t\t\tsuccess: function(r) {\r\n");
      out.write("\t\t\t\tdoctorNameComb.setValue(r.recipeDoctId);\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\r\n");
      out.write("\t\t\r\n");
      out.write("\t\t// 根据registerId查询患者信息\r\n");
      out.write("\t\t$.ajax({\r\n");
      out.write("\t\t\turl: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/outpatient/opExpRegister/getById.do\",\r\n");
      out.write("\t\t\tdata: {\r\n");
      out.write("\t\t\t\tregisterId: e.row.registerId\t\t\r\n");
      out.write("\t\t\t},\r\n");
      out.write("\t\t\tasync: false ,\r\n");
      out.write("\t\t\tsuccess: function(r) {\r\n");
      out.write("\t\t\t\tform1.setData(r);\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\r\n");
      out.write("\t\t\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 点击手术申请树节点\r\n");
      out.write(" \tfunction onnodeclick1(e) {\r\n");
      out.write(" \t\tregisterId = e.row.registerId;\r\n");
      out.write(" \t\tif(e.row.pid && e.row.pid != \"ROOT\") {\r\n");
      out.write("\t \t\tcurrentCharge = e.row;\r\n");
      out.write("\t \t\tcurrentOpsApply = null;\r\n");
      out.write("\t \t\trefreshPage();\r\n");
      out.write(" \t\t} else if(e.row.pid && e.row.pid == \"ROOT\") {\r\n");
      out.write(" \t\t\tcurrentOpsApply = e.row;\r\n");
      out.write(" \t\t\tcurrentCharge = null;\r\n");
      out.write(" \t\t\tgrid.clearRows();\r\n");
      out.write(" \t\t};\r\n");
      out.write(" \t\t\r\n");
      out.write(" \t\tif(e.node.pid != \"ROOT\") {\r\n");
      out.write(" \t\t\tvar url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/opsCharge/getOrgNameComb.do\"\r\n");
      out.write("\t \t\tvar data={\r\n");
      out.write("\t\t       chargeId: e.node.id ,\r\n");
      out.write("\t\t       orgId: top.orgCombo.value ,\r\n");
      out.write("\t\t       registerId: registerId \t\t\t\t\t\r\n");
      out.write("\t\t\t};\r\n");
      out.write(" \t\t\t\r\n");
      out.write("\t \t\t$.post(url, data, function(r) {\r\n");
      out.write("\t \t\t\tdoctorNameComb.setValue(r.recipeDoctId);\r\n");
      out.write("\t \t\t});\r\n");
      out.write("\t \t\torgNameComb.setValue(e.row.execDeptId);\r\n");
      out.write(" \t\t} else {\r\n");
      out.write("\t \t\torgNameComb.setValue(e.row.execDeptId);\r\n");
      out.write(" \t\t\tif(e.node.text != \"手术申请信息\") {\r\n");
      out.write("\t \t\t\tvar url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/opsCharge/getOrgNameCombByOps.do\"\r\n");
      out.write(" \t\t \t\t$.post(url, {orgId: top.orgCombo.value}, function(r) {\r\n");
      out.write(" \t\t \t\t\tif(parseInt(r.state) == 1) {\r\n");
      out.write("\t\t\t \t\t\tdoctorNameComb.setValue(r.recipeDoctId);\r\n");
      out.write(" \t\t \t\t\t}\r\n");
      out.write(" \t\t \t\t});\r\n");
      out.write(" \t\t\t} \r\n");
      out.write(" \t\t}\r\n");
      out.write(" \t\t\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 点击科室套餐节点\r\n");
      out.write(" \tfunction onnodedblclick(e) {\r\n");
      out.write(" \t\tif(registerId == null ) {\r\n");
      out.write("\t\t\ttop.mini.showTips({content:\"请选择患者\", state: \"warning\", x: \"center\", y: \"center\", timeout: 2000});\r\n");
      out.write("\t\t\treturn;\r\n");
      out.write("\t\t}  \r\n");
      out.write(" \t\tif(doctorNameComb.getValue() == null || \"\" == doctorNameComb.getValue() ) {\r\n");
      out.write("\t\t\ttop.mini.showTips({content:\"请选择手术医生!\", state: \"warning\", x: \"center\", y: \"center\", timeout: 2000});\r\n");
      out.write(" \t\t\tdoctorNameComb.showPopup();\r\n");
      out.write(" \t\t\treturn;\r\n");
      out.write("\t\t} \r\n");
      out.write(" \t\tif(currentCharge != null) {\r\n");
      out.write("\t\t\t var url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/opsCharge/checkOpsCharge.do\"\r\n");
      out.write("\t\t\t var data = {currentCharge: currentCharge.id };\r\n");
      out.write("\t\t\t $.post(url, data, function(r) {\r\n");
      out.write("\t\t\t\t if(r == \"ok\") {\r\n");
      out.write("\t\t\t\t\ttop.mini.alert(\"该手术批费记录已经收费，不能修改！\");\r\n");
      out.write("\t\t\t\t\treturn;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t \t });\r\n");
      out.write("\t\t}\r\n");
      out.write(" \t\tif(currentOpsApply == null) {\r\n");
      out.write(" \t\t\tvar node = tree1.getSelectedNode();\r\n");
      out.write(" \t\t\tif(!node.isLeaf) {\r\n");
      out.write("\t\t\t\ttop.mini.alert(\"请选择手术申请信息!\");\r\n");
      out.write("\t\t\t\treturn;\r\n");
      out.write("\t\t\t } else {\r\n");
      out.write("\t\t\t\tvar url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/opsCharge/checkRecipeDept.do\"\r\n");
      out.write("\t\t\t \tvar data = { orgNameComb: orgNameComb.getValue() , id: currentCharge.pid };\r\n");
      out.write("\t\t\t\t$.post(url, data, function(r) {\r\n");
      out.write("\t\t\t\t\tif(r == \"ok\") {\r\n");
      out.write("\t\t\t\t\t\ttop.mini.alert(\"请选择正确的开方科室！\");\r\n");
      out.write("\t\t\t\t\t\treturn;\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t \t\t});\r\n");
      out.write("\t\t\t\t\r\n");
      out.write("\t\t\t }\r\n");
      out.write("\t    }\r\n");
      out.write(" \t\tvar url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/opsCharge/setGroupList.do\"\r\n");
      out.write(" \t\tvar data = {grouplistId: e.row.groupId};\r\n");
      out.write(" \t\t$.post(url, data, function(r) {\r\n");
      out.write(" \t\t\tif(r.result == 1) {\r\n");
      out.write(" \t\t\t\tvar listGroup = r.message;\r\n");
      out.write(" \t\t\t\tfor(var i = 0; i < listGroup.length; i++) {\r\n");
      out.write(" \t\t\t\t\tgrid.deselectAll();\r\n");
      out.write(" \t\t\t\t\tvar newRow = listGroup[i];\r\n");
      out.write("\t\t\t\t\tnewRow.registerId = registerId;\r\n");
      out.write("\t\t\t\t\tnewRow.executeDeptId = orgNameComb.getValue();\r\n");
      out.write("\t\t\t\t\tnewRow.recipeDeptId = orgNameComb.getValue();\r\n");
      out.write("\t\t\t\t\tnewRow.registerDeptId = orgNameComb.getValue();\r\n");
      out.write("\t\t\t\t\tnewRow.recipeDoctId = doctorNameComb.getValue();\r\n");
      out.write("\t\t\t\t\tnewRow.registerDeptId = orgNameComb.getValue();\r\n");
      out.write("\t\t\t\t\tnewRow.applyDeptId = orgNameComb.getValue();\r\n");
      out.write("\t\t\t\t\tnewRow.applyOperId = doctorNameComb.getValue();\r\n");
      out.write(" \t\t\t\t    grid.addRow(newRow);\r\n");
      out.write(" \t\t\t\t    grid.setSelected(newRow);\r\n");
      out.write(" \t\t\t\t    setTotCost(newRow);\r\n");
      out.write(" \t\t\t\t}\r\n");
      out.write(" \t\t\t}\r\n");
      out.write(" \t\t\tsummary();\r\n");
      out.write(" \t\t});\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 求和\r\n");
      out.write(" \tfunction summary() {\r\n");
      out.write(" \t\tvar rows = grid.getList();\t\t\r\n");
      out.write("\t\tvar totFee = 0;\r\n");
      out.write("\t\tfor(var i = 0; i < rows.length; i++) {\r\n");
      out.write("\t\t\ttotFee += rows[i].totCost;\r\n");
      out.write("\t\t};\r\n");
      out.write("\t\tif(totFee) {\r\n");
      out.write("\t\t\t$(\"#totFee\").html(\"总价：<span style='color:red; font-weight:bold;'>\" + totFee.toFixed(2) + \"元</span>\");\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\t$(\"#totFee\").html(\"总价：<span style='color:red; font-weight:bold;'>?元</span>\");\r\n");
      out.write("\t\t}\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 在添加一行前先做条件判断\r\n");
      out.write(" \tfunction addBefore() {\r\n");
      out.write(" \t\tvar node = tree1.getSelected();\r\n");
      out.write(" \t\tif(!node) {\r\n");
      out.write(" \t\t\ttop.mini.alert(\"请选择手术信息\");\r\n");
      out.write(" \t\t\treturn false;\r\n");
      out.write(" \t\t};\r\n");
      out.write(" \t\tif(!orgNameComb.getValue() || !doctorNameComb.getValue() ) {\r\n");
      out.write(" \t\t\ttop.mini.alert(\"请选择开放科室和开方医生！！\");\r\n");
      out.write(" \t\t\treturn false;\r\n");
      out.write(" \t\t};\r\n");
      out.write(" \t\treturn true;\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 增加一行\r\n");
      out.write(" \tfunction addRows() {\r\n");
      out.write(" \t\tif(!registerId) {\r\n");
      out.write("\t\t\ttop.mini.showTips({content:\"请选择患者\", state: \"warning\", x: \"center\", y: \"center\", timeout: 2000});\r\n");
      out.write("\t\t\treturn;\r\n");
      out.write("\t\t}; \r\n");
      out.write("\t\t\r\n");
      out.write(" \t\tif(!doctorNameComb.getValue() ) {\r\n");
      out.write("\t\t\ttop.mini.showTips({content:\"请选择手术医生!\", state: \"warning\", x: \"center\", y: \"center\", timeout: 2000});\r\n");
      out.write(" \t\t\tdoctorNameComb.showPopup();\r\n");
      out.write(" \t\t\treturn;\r\n");
      out.write("\t\t}; \r\n");
      out.write(" \t\tif(!orgNameComb.getValue() ) {\r\n");
      out.write("\t\t\torgNameComb.showPopup();\r\n");
      out.write("\t\t\ttop.mini.showTips({content:\"请选择开方科室!\", state: \"warning\", x: \"center\", y: \"center\", timeout: 2000});\r\n");
      out.write("\t\t\treturn;\r\n");
      out.write("\t\t}; \r\n");
      out.write(" \t\t\r\n");
      out.write("\t\tvar node = tree1.getSelectedNode();\r\n");
      out.write("\t\tif(!!node.root) {\r\n");
      out.write("\t\t\ttop.mini.showTips({content: \"请选中手术名称或批费！\", state: \"warning\", x: \"center\", y: \"center\", timeout: 2000});\r\n");
      out.write("\t\t\treturn ;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\t\r\n");
      out.write(" \t\tvar rows = grid.getList();\r\n");
      out.write(" \t\tfor(var i = 0 ; i < rows.length; i++) {\r\n");
      out.write(" \t\t\tif(!rows[i].itemId) {\r\n");
      out.write("\t\t\t\ttop.mini.showTips({content:\"请将已经添加的行补全！\", state: \"warning\", x: \"center\", y: \"center\", timeout: 2000});\r\n");
      out.write("\t\t\t\treturn; \r\n");
      out.write(" \t\t\t}\r\n");
      out.write(" \t\t};\r\n");
      out.write("\t\tif(currentOpsApply != null) {\r\n");
      out.write("\t\t\tif(!checkDept()) return; \r\n");
      out.write("\t\t};\r\n");
      out.write("\t\tvar node = tree1.getSelectedNode();\r\n");
      out.write("\t\tif(!node.isLeaf) {\r\n");
      out.write("\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\tif(!checkDept()) return;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\t\r\n");
      out.write("\t\tif(currentOpsApply!=null) {\r\n");
      out.write("\t\t\t if(currentCharge == null) {\r\n");
      out.write("\t\t\t\t currentCharge = new Object(); \r\n");
      out.write("\t \t\t\t currentCharge.State = \"0\";\r\n");
      out.write("\t\t\t }\r\n");
      out.write("\t\t} \r\n");
      out.write("\t\t\r\n");
      out.write("\t\tif(currentCharge != null) {\r\n");
      out.write("\t\t\tvar url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/opsCharge/checkOpsCharge.do\"\r\n");
      out.write("\t\t\tvar data = {currentCharge: currentCharge.id };\r\n");
      out.write("\t\t\t$.post(url, data, function(r) {\r\n");
      out.write("\t\t\t\tif(r == \"ok\") {\r\n");
      out.write("\t\t\t\t\ttop.mini.alert(\"该手术批费记录已经收费，不能修改!如需录入费用，请新增一条批费记录记录！\");\r\n");
      out.write("\t\t\t\t\treturn;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t \t});\r\n");
      out.write("\t\t};\r\n");
      out.write("\t\taddNewRow();\r\n");
      out.write(" \t} \r\n");
      out.write(" \t\r\n");
      out.write(" \t// 判断当前开放科室是否正确\r\n");
      out.write("\tfunction checkDept() {\r\n");
      out.write(" \t\tvar node = tree1.getSelected();\r\n");
      out.write(" \t\tif(node.execDeptId != orgNameComb.getValue()) {\r\n");
      out.write("\t\t\ttop.mini.showTips({content:\"请选择正确的开方科室！\", state: \"warning\", x: \"center\", y: \"center\", timeout: 2000});\r\n");
      out.write(" \t\t\treturn false;\r\n");
      out.write(" \t\t};\r\n");
      out.write(" \t\treturn true; \r\n");
      out.write(" \t\t/* $.ajax({ \r\n");
      out.write("           type: \"post\", \r\n");
      out.write("\t       url: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/opsCharge/checkRecipeDept.do\", \r\n");
      out.write("\t       cache: false, \r\n");
      out.write("\t       async: false,\r\n");
      out.write("\t       data: {orgNameComb: orgNameComb.getValue() , id: node.pid },\r\n");
      out.write("\t       dataType: \"text\",\r\n");
      out.write("\t\t   success: function(r){ \r\n");
      out.write("\t\t\t\tif(r == \"ok\") {\r\n");
      out.write("\t\t\t\t\ttop.mini.showTips({content:\"请选择正确的开方科室！\", state: \"warning\", x: \"center\", y: \"center\", timeout: 2000});\r\n");
      out.write("\t\t\t\t\treturn true;\r\n");
      out.write("\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\treturn false;\r\n");
      out.write("\t\t\t\t} \r\n");
      out.write("\t\t   } \r\n");
      out.write("\t\t}); */\r\n");
      out.write("\t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 添加 一行\r\n");
      out.write(" \tfunction addNewRow() {\r\n");
      out.write(" \t\tgrid.deselectAll(false);\r\n");
      out.write(" \t\tvar newRow = {\r\n");
      out.write(" \t\t\tregisterId: registerId,\r\n");
      out.write(" \t\t\texecuteDeptId: orgNameComb.getValue(),\r\n");
      out.write(" \t\t\trecipeDeptId :orgNameComb.getValue(),\r\n");
      out.write(" \t\t\tregisterDeptId: orgNameComb.getValue(),\r\n");
      out.write(" \t\t\trecipeDoctId: doctorNameComb.getValue(),\r\n");
      out.write(" \t\t\tregisterDeptId: orgNameComb.getValue(),\r\n");
      out.write(" \t\t\tapplyDeptId: orgNameComb.getValue(),\r\n");
      out.write(" \t\t\tapplyOperId: doctorNameComb.getValue(),\r\n");
      out.write(" \t\t\tapplyId: \"-1\"\r\n");
      out.write(" \t \t};\r\n");
      out.write(" \t\tgrid.addRow(newRow, false);\r\n");
      out.write(" \t\tvar selectRow = grid.getList();\r\n");
      out.write(" \t\tgrid.beginEditCell(selectRow[selectRow.length - 1], \"taskName\");\r\n");
      out.write(" \t\tgrid.setSelected(selectRow[selectRow.length - 1]);\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write("\t// 点击保存\r\n");
      out.write(" \tfunction save(e) {\r\n");
      out.write(" \t\t if(registerId == null ) {\r\n");
      out.write("\t\t\ttop.mini.showTips({content:\"请选择患者\", state: \"warning\", x: \"center\", y: \"center\", timeout: 2000});\r\n");
      out.write("\t\t\treturn;\r\n");
      out.write("\t\t };\r\n");
      out.write("\t\t \r\n");
      out.write("\t\tvar node = tree1.getSelectedNode();\r\n");
      out.write("\t\tif(doctorNameComb.getValue() == null || \"\" == doctorNameComb.getValue() ) {\r\n");
      out.write("\t\t\ttop.mini.showTips({content:\"请选择手术医生!\", state: \"warning\", x: \"center\", y: \"center\", timeout: 2000});\r\n");
      out.write(" \t\t\tdoctorNameComb.showPopup();\r\n");
      out.write(" \t\t\treturn;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tif(!orgNameComb.getValue() ) {\r\n");
      out.write("\t\t\torgNameComb.showPopup();\r\n");
      out.write("\t\t\ttop.mini.showTips({content:\"请选择开方科室!\", state: \"warning\", x: \"center\", y: \"center\", timeout: 2000});\r\n");
      out.write("\t\t\treturn;\r\n");
      out.write("\t\t} \r\n");
      out.write("\t\tif(currentCharge!=null) {\r\n");
      out.write("\t\t \tvar url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/opsCharge/checkOpsCharge.do\"\r\n");
      out.write("\t\t\tvar data = {currentCharge: currentCharge.id };\r\n");
      out.write("\t\t\t$.post(url, data, function(r) {\r\n");
      out.write("\t\t\t\tif(r == \"ok\") {\r\n");
      out.write("\t\t\t\t\ttop.mini.alert(\"该手术批费记录已经收费，不能再次保存！\");\r\n");
      out.write("\t\t\t\t\treturn;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t \t });\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\t\r\n");
      out.write("\t\tvar rowList = grid.getList();\r\n");
      out.write("\t\tfor(var j = 0; j < rowList.length; j++) {\r\n");
      out.write("\t\t\tif(rowList[j].itemId==undefined) {\r\n");
      out.write("\t\t\t\tgrid.removeRow(rowList[j]);\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t\tif(rowList[j].itemName==undefined) {\r\n");
      out.write("\t\t\t\tgrid.removeRow(rowList[j]);\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tvar data = grid.getList();\r\n");
      out.write("\t\tfor(var i = 0; i < data.length; i++) {\r\n");
      out.write("\t\t\tif(!isNumber(data[i].qty)) {\r\n");
      out.write("\t\t\t\ttop.mini.alert(\"有不合法输入，请检查！\");\r\n");
      out.write("\t\t\t\treturn;\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t\tif(data[i].qty < 1) {\r\n");
      out.write("\t\t\t\ttop.mini.showTips({content: \"有数量为0的记录!!\", state: \"warning\", x: \"center\", y: \"center\", timeout: 2000});\r\n");
      out.write("\t\t\t\tfocusCell(\"qty\");\r\n");
      out.write("\t\t\t\treturn;\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t\tif(!data[i].itemId || !data[i].qty) {\r\n");
      out.write("\t\t\t\ttop.mini.showTips({content: \"添加的记录中有必填数据没填 !!\", state: \"warning\", x: \"center\", y: \"center\", timeout: 2000});\r\n");
      out.write("\t\t\t\tfocusCell(\"itemId\");\r\n");
      out.write("\t\t\t\treturn;\r\n");
      out.write("\t\t\t};\r\n");
      out.write("\t\t\tif(!data[i].showUnit) {\r\n");
      out.write("\t\t\t\ttop.mini.showTips({content: \"单位为空！无法保存\", state: \"warning\", x: \"center\", y: \"center\", timeout: 2000});\r\n");
      out.write("\t\t\t\tfocusCell(\"showUnit\");\r\n");
      out.write("\t\t\t\treturn;\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t};\r\n");
      out.write("\t\t\r\n");
      out.write("\t\tvar rows = getGoodCharge();\r\n");
      out.write("\t\tvar url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/opsCharge/save.do\"\r\n");
      out.write("\t\tif(!!node.isLeaf) {\r\n");
      out.write("\t\t\t$.ajax({\r\n");
      out.write("\t\t\t\turl: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/opsCharge/save.do\",\r\n");
      out.write("\t\t\t\tdata: {\r\n");
      out.write("\t\t \t\t\tdata: mini.encode(rows) ,\r\n");
      out.write("\t\t\t\t\tcurrentOpsApplyId: node.pid ,\r\n");
      out.write("\t\t            currentCharge: node.id ,\r\n");
      out.write("\t\t            recipeDept: orgNameComb.getValue() ,\r\n");
      out.write("\t\t            childrenLength: \"-1\",\r\n");
      out.write("\t\t            registerId: registerId\r\n");
      out.write("\t\t\t\t},\r\n");
      out.write("\t\t\t\tasync: false ,\r\n");
      out.write("\t\t\t\tsuccess: function(r) {\r\n");
      out.write("\t\t\t\t\tif(r == \"ok\") {\r\n");
      out.write("\t\t\t\t\t\treloadDetail();\r\n");
      out.write("\t\t\t\t\t\tloadTree();\r\n");
      out.write("\t\t\t\t\t\ttop.mini.showTips({content:\"记账成功\", state:\"success\",x:\"center\",y:\"center\",timeout:3000}); \r\n");
      out.write("\t\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\t\ttop.mini.error(r, \"提示\");\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t \t\t}\r\n");
      out.write("\t\t\t});\r\n");
      out.write("\t\t\t\r\n");
      out.write("\t\t\t\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\tchildrenLength = !node.children == true ?  1: node.children.length + 1;\r\n");
      out.write("\t\t \t$.ajax({\r\n");
      out.write("\t\t \t\turl: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/opsCharge/save.do\",\r\n");
      out.write("\t\t \t\tdata: {\r\n");
      out.write("\t\t \t\t\tdata: mini.encode(rows),\r\n");
      out.write("\t\t\t\t    currentOpsApplyId: node.id,\r\n");
      out.write("\t\t\t\t    recipeDept: orgNameComb.getValue() ,\r\n");
      out.write("\t\t\t\t    currentCharge: \"-1\" , \r\n");
      out.write("\t\t\t\t    childrenLength: childrenLength,\r\n");
      out.write("\t\t            registerId: registerId\r\n");
      out.write("\t\t\t\t},\r\n");
      out.write("\t\t \t\tasync: false ,\r\n");
      out.write("\t\t \t\tsuccess: function (r){\r\n");
      out.write("\t\t \t\t\tif(r == \"ok\") {\r\n");
      out.write("\t\t\t\t\t\ttop.mini.showTips({content:\"记账成功\",state:\"success\",x:\"center\",y:\"center\",timeout:3000});\r\n");
      out.write("\t\t\t\t\t\treloadDetail(); \r\n");
      out.write("\t\t\t\t\t\tgetNewCharge(node);\t\t\t\t\r\n");
      out.write("\t\t\t\t\t\tloadTree();\r\n");
      out.write("\t\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\t\ttop.mini.error(r, \"提示\");\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t \t\t}\r\n");
      out.write("\t\t \t});\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\ttree1.selectNode(node);\r\n");
      out.write(" \t}\r\n");
      out.write("\r\n");
      out.write(" \t// 当前页面\r\n");
      out.write(" \tfunction getGoodCharge() {\r\n");
      out.write("\t\t var list = grid.getList();\r\n");
      out.write("\t\t var goodCharge = [];\r\n");
      out.write("\t\t for(var i = 0 ; i < list.length; i++) {\r\n");
      out.write("\t\t\t if(list[i].itemName) {\r\n");
      out.write("\t\t\t\t goodCharge.push(list[i]);\r\n");
      out.write("\t\t\t }\r\n");
      out.write("\t\t }\r\n");
      out.write("\t\t return goodCharge; \r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 选中新生成的手术批费\r\n");
      out.write(" \tfunction getNewCharge(node) {\r\n");
      out.write(" \t\tvar nodes = tree1.getList();\r\n");
      out.write(" \t\tvar maxId = 0;\r\n");
      out.write(" \t\tvar newNode = {};\r\n");
      out.write(" \t\t \r\n");
      out.write(" \t\tfor(var i = 0; i < nodes.length; i++) {\r\n");
      out.write(" \t\t\tif(nodes[i].pid == node.id) {\r\n");
      out.write(" \t\t\t\tif(parseInt(nodes[i].id) > maxId) {\r\n");
      out.write(" \t\t\t\t\tmaxId = parseInt(nodes[i].id);\r\n");
      out.write(" \t\t\t\t\tnewNode = nodes[i];\r\n");
      out.write(" \t\t\t\t}\r\n");
      out.write(" \t\t\t}\r\n");
      out.write(" \t\t}\r\n");
      out.write(" \t\ttree1.selectNode(newNode);\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 费用\r\n");
      out.write(" \tfunction setTotCost(row) {\r\n");
      out.write(" \t\t$.ajax({  \r\n");
      out.write("\t        type: \"post\",  \r\n");
      out.write("\t        url: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/operation/outOpsApply/setTotcost.do\",\r\n");
      out.write("\t        data: {data: mini.encode(row)},\r\n");
      out.write("\t        async: false,  \r\n");
      out.write("\t        success: function(r){  \r\n");
      out.write("\t\t\t\tgrid.updateRow(row, r);\r\n");
      out.write("\t        }\r\n");
      out.write("\t    }); \r\n");
      out.write(" \t}\r\n");
      out.write(" \r\n");
      out.write("\t// 编辑某个单元格\r\n");
      out.write("\tfunction focusCell(cellName) {\r\n");
      out.write("\t\tgrid.beginEditCell(selectRow(), cellName);\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write(" \t// 删除 提示 \r\n");
      out.write(" \tfunction removeTip(e) {\r\n");
      out.write(" \t\ttop.mini.confirm(\"是否删除所选信息?\", '提示',function(r) {\r\n");
      out.write("\t\t\tif(r == \"ok\") { \r\n");
      out.write("\t\t\t\tremove(e);\r\n");
      out.write("\t\t\t} else {\r\n");
      out.write("\t\t\t\treturn;\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\t\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 删除操作\r\n");
      out.write(" \tfunction remove(e) {\r\n");
      out.write(" \t\tvar rows = grid.getSelecteds();\r\n");
      out.write(" \t\tif(rows.length == 0) {\r\n");
      out.write("\t\t\ttop.mini.alert(\"请选择你要删除的数据！\");\r\n");
      out.write("\t\t\treturn;\r\n");
      out.write("\t\t}\r\n");
      out.write(" \t\t\r\n");
      out.write(" \t\tif(orgNameComb.getValue() == null || \"\" == orgNameComb.getValue() ) {\r\n");
      out.write("\t\t\torgNameComb.showPopup();\r\n");
      out.write("\t\t\ttop.mini.showTips({content:\"请选择开方科室!\", state: \"warning\", x: \"center\", y: \"center\", timeout: 2000});\r\n");
      out.write("\t\t\treturn;\r\n");
      out.write("\t\t} \r\n");
      out.write(" \t\tif(doctorNameComb.getValue() == null || \"\" == doctorNameComb.getValue() ) {\r\n");
      out.write("\t\t\t\ttop.mini.showTips({content:\"请选择手术医生!\", state: \"warning\", x: \"center\", y: \"center\", timeout: 2000});\r\n");
      out.write("\t \t\t\tdoctorNameComb.showPopup();\r\n");
      out.write("\t \t\t\treturn;\r\n");
      out.write("\t\t}\r\n");
      out.write(" \t\tif(currentCharge!=null) {\r\n");
      out.write("\t\t\t var url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/opsCharge/checkOpsCharge.do\"\r\n");
      out.write("\t\t\t\t var data = {currentCharge: currentCharge.id};\r\n");
      out.write("\t\t\t\t $.post(url, data, function(r) {\r\n");
      out.write("\t\t\t\t\t if(r == \"ok\") {\r\n");
      out.write("\t\t\t\t\t\ttop.mini.alert(\"该手术批费记录已经收费，不能修改！\");\r\n");
      out.write("\t\t\t\t\t\treturn;\r\n");
      out.write("\t\t\t\t\t }\r\n");
      out.write("\t\t\t \t });\r\n");
      out.write("\t\t}\r\n");
      out.write(" \t\tgrid.removeRows( rows, true );\r\n");
      out.write(" \t\tsave();\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 退出\r\n");
      out.write(" \tfunction exit() {\r\n");
      out.write(" \t\tvar currentTab = top.tabs.activeIndex;\r\n");
      out.write("\t\tvar tabs = top.tabs;\r\n");
      out.write("\t\ttabs.removeTab(currentTab);\r\n");
      out.write(" \t}\r\n");
      out.write(" \t\r\n");
      out.write("\t// 医嘱信息回填( 手动 )\r\n");
      out.write("\tfunction fillOrder(itemId) { \r\n");
      out.write("\t\tvar order = grid.getSelected();\r\n");
      out.write("\t\tvar url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/outpatient/outOrder/fillOrder.do\";\r\n");
      out.write("\t\tvar data = {itemId: itemId, order: mini.encode(order)};\r\n");
      out.write("\t\t$.post(url, data, function(r) {\r\n");
      out.write("\t\t\tif(parseInt(r.state) == -1) {\r\n");
      out.write("\t\t\t\ttop.mini.alert(r.message);\r\n");
      out.write("\t\t\t} else if(r.state == \"1\") {\r\n");
      out.write("\t\t\t\t\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\r\n");
      out.write("\t}\r\n");
      out.write(" \t\r\n");
      out.write(" \t// 选定编码给这一行赋值\r\n");
      out.write("\tfunction onValueChanged1(e) {\r\n");
      out.write("\t\tvar newRow = grid.getSelected();\r\n");
      out.write("\t\tvar dataRow = e.selected;\r\n");
      out.write("\t\tif(!dataRow) {return; }\r\n");
      out.write("\t\tnewRow.itemId = dataRow.itemId;\r\n");
      out.write("\t\tnewRow.itemNo = dataRow.itemNo;\r\n");
      out.write("\t\tnewRow.itemName = dataRow.itemName; \r\n");
      out.write("\t\tnewRow.showUnit = dataRow.drugBulkUnit;\r\n");
      out.write("\t\tnewRow.unit = dataRow.drugBulkUnit;\r\n");
      out.write("\t\tnewRow.drugOnceDosage = dataRow.drugOnceDosage;\r\n");
      out.write("\t\tnewRow.orderOnceDosageUnit = dataRow.orderOnceDosageUnit;\r\n");
      out.write("\t\tnewRow.specs = dataRow.specs;\r\n");
      out.write("\t\tif(currentCharge) newRow.opschargeId = currentCharge.id;\r\n");
      out.write("\t\tnewRow.price = dataRow.itemPrice;\r\n");
      out.write("\t\tnewRow.showQty = 1;\r\n");
      out.write("\t\tnewRow.qty = dataRow.qty != null ? dataRow.qty: 1;\r\n");
      out.write("\t\tnewRow.qty = dataRow.qty != 0 ? dataRow.qty: 1;\r\n");
      out.write("\t\tnewRow.itemSysType = dataRow.itemSysType;\r\n");
      out.write("\t\tnewRow.itemSourceType = \"0\";\r\n");
      out.write("\t\tnewRow.drugBulkUnit = dataRow.drugBulkUnit;\r\n");
      out.write("\t\tnewRow.drugPackageUnit = dataRow.drugPackageUnit;\r\n");
      out.write("\t\tnewRow.drugPackageQty = dataRow.drugPackageQty;\r\n");
      out.write("\t\tvar noDrugs = [\"UZ\", \"UM\", \"UN\", \"MF\", \"U\",\"UC\",\"UL\",\"UO\",\"MC\"];\r\n");
      out.write("\t\tfor(var i = 0 ; i < noDrugs.length; i++) {\r\n");
      out.write("\t\t\tif(noDrugs[i] == dataRow.itemSysType ) {\r\n");
      out.write("\t\t\t\tnewRow.itemSourceType = \"1\";\r\n");
      out.write("\t\t\t\tnewRow.showUnit = dataRow.showUnit\r\n");
      out.write("\t\t\t\tbreak;\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t};\r\n");
      out.write("\t\tif(newRow.qty == undefined) {\r\n");
      out.write("\t\t\tnewRow.qty = 1;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\t\r\n");
      out.write("\t\tgrid.updateRow(newRow);\r\n");
      out.write("\t\t$.ajax({ \r\n");
      out.write("           type: \"post\", \r\n");
      out.write("\t       url: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/operation/outOpsApply/fillApply.do\", \r\n");
      out.write("\t       cache: false, \r\n");
      out.write("\t       async: false,\r\n");
      out.write("\t       data: {data: mini.encode(newRow)},\r\n");
      out.write("\t       dataType: \"json\",\r\n");
      out.write("\t\t   success: function(r){ \r\n");
      out.write("\t\t\t\tgrid.updateRow(selectRow(), r);\r\n");
      out.write("\t\t\t\tsetTotCost(selectRow());\t\r\n");
      out.write("\t\t   } \r\n");
      out.write("\t\t});\r\n");
      out.write("\t};\r\n");
      out.write("\t\r\n");
      out.write("\t// 获取当前选中行\r\n");
      out.write("\tfunction selectRow() {\r\n");
      out.write("\t\tvar rows = grid.getSelecteds();\r\n");
      out.write("\t\tif(rows.length == 1) {\r\n");
      out.write("\t\t\treturn rows[0];\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\ttop.mini.showTips({content:\"请选中一行进行编辑！\", state: \"warning\", x: \"center\", y: \"center\", timeout: 2000});\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 单元格编辑前事件绘制下拉选\r\n");
      out.write("\tfunction cellbeginedit(e) {  \r\n");
      out.write("\t/* \tif(e.field == \"showUnit\" && e.row.drugBulkUnit && (e.row.drugBulkUnit != e.row.drugPackageUnit)) { \r\n");
      out.write("\t\t\t// var dataUnit = [{id: e.row.drugBulkUnit, text: e.row.drugBulkUnit},{id: e.row.drugPackageUnit, text: e.row.drugPackageUnit}]\r\n");
      out.write("\t\t\t// e.editor.setData(dataUnit);\r\n");
      out.write("\t\t\te.editor.setData(getUnit(e.row.itemId));\r\n");
      out.write("\t\t\treturn ;\r\n");
      out.write("\t\t}; */\r\n");
      out.write("\t\t\r\n");
      out.write("\t\tif(e.field == \"showUnit\" || e.field == \"showQty\" || e.field == \"itemNo\" || e.field == \"executeDeptId\") {\r\n");
      out.write("\t\t\tgrid.deselectAll();\r\n");
      out.write("\t\t\tgrid.setSelected(e.row);\r\n");
      out.write("\t\t};\r\n");
      out.write("\t\t\r\n");
      out.write("\t\tif(e.field == \"showUnit\") { \r\n");
      out.write("\t\t\t$.ajax({  \r\n");
      out.write("\t\t        type: \"post\",  \r\n");
      out.write("\t\t        url: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/pharmacy/common/comDrug/getUnit.do\",\r\n");
      out.write("\t\t        data: {itemId: e.row.itemId},\r\n");
      out.write("\t\t        async: false,  \r\n");
      out.write("\t\t        success: function(r){  \r\n");
      out.write("\t\t\t\t\te.editor.setData(r);\r\n");
      out.write("\t\t        }\r\n");
      out.write("\t\t    }); \r\n");
      out.write("\t\t\t\r\n");
      out.write("\t\t};\r\n");
      out.write("\t\tif(e.field == \"itemId\") {\r\n");
      out.write("\t\t\tif(e.row._state != \"added\") {\r\n");
      out.write("\t\t\t\te.cancel = true;\r\n");
      out.write("\t\t\t};\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 编辑后事件\r\n");
      out.write("\tfunction cellendedit(e) {\r\n");
      out.write("\t\tif(e.field == \"showQty\" || e.field == \"showUnit\") {\r\n");
      out.write("\t\t\tsetTotCost(e.row);\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tsummary();\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 单元格值提交前事件\r\n");
      out.write("\tfunction cellcommitedit(e) {\r\n");
      out.write("\t\tif(e.field == \"showQty\") {\r\n");
      out.write("\t\t\tif(!/^\\d+$/.test(e.value)) {\r\n");
      out.write("\t\t\t\ttop.mini.showTips({content: \"请输入数值！\", state: \"warning\", x: \"center\", y: \"center\", timeout: 2000});\r\n");
      out.write("\t\t\t\te.cancel = true; \r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}; \r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("\tfunction getUnit(itemId) {\r\n");
      out.write("\t\t\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 开方医生的键盘 事件 \r\n");
      out.write("\tfunction showOrgName() {\r\n");
      out.write("\t\tmini.get(\"orgName\").showPopup();\r\n");
      out.write("\t\tmini.get(\"orgName\").focus();\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("    //过滤\t\r\n");
      out.write("\tfunction filter() {\r\n");
      out.write("\t \tvar key = mini.get(\"chageinput\").getValue().toLowerCase();\r\n");
      out.write("\t \t$.ajax({  \r\n");
      out.write("\t        type: \"post\",  \r\n");
      out.write("\t        url: \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/basedata/datamanager/deptItem/getDeptItemWithDrug.do\",\r\n");
      out.write("\t        data: {},\r\n");
      out.write("\t        async: false,  \r\n");
      out.write("\t        success: function(r){  \r\n");
      out.write("\t        \tvar deptItemArr = [];\r\n");
      out.write("\t\t\t\tfor(var i = 0; i < r.length; i++) {\r\n");
      out.write("\t\t\t\t\tif((r[i].itemName+ r[i].itemId).indexOf(key) != -1) {\r\n");
      out.write("\t\t\t\t\t\tdeptItemArr.push(r[i]);\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t\tgrid1.loadData(deptItemArr);\r\n");
      out.write("\t        }\r\n");
      out.write("\t    }); \r\n");
      out.write("    }\r\n");
      out.write("    \r\n");
      out.write("\t// 设置诊断信息\r\n");
      out.write("\tfunction setDiagName() {\r\n");
      out.write("\t\tvar diagName = mini.get(\"diagName\").getValue()\r\n");
      out.write("\t\tif(diagName.length > 30) {\r\n");
      out.write("\t\t\tdiagName = diagName.substring(0, 50) + \"......\";\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\t$(\".diagName\").html(diagName);\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 加载事件\r\n");
      out.write("\tfunction onload() {\r\n");
      out.write("\t\tsummary();\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 刷新\r\n");
      out.write("\tfunction refresh() {\r\n");
      out.write("\t\tloadTree();\r\n");
      out.write("\t\treloadDetail();\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t// 搜索手术历史\r\n");
      out.write("\tfunction getOpsList() {\r\n");
      out.write("\t\tmini.alert(\"功能未实现！\");\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t//打印\r\n");
      out.write("\tfunction print(data) {\t\t\r\n");
      out.write("\t\tvar ReportURL = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/report/template/ucInDeptRetrench.grf?t=\" + new Date().getTime();\r\n");
      out.write("\t\tReport.LoadFromURL(ReportURL);\r\n");
      out.write("\t\tvar dataStr = JSON.stringify(data);\t\r\n");
      out.write("\t\tReport.LoadDataFromAjaxRequest(dataStr, \"data\")\t\t\t\t\t\t\t\t\r\n");
      out.write("\t\tReport.PrintPreview(true);\t\t\r\n");
      out.write("\t}\r\n");
      out.write("\r\n");
      out.write("\t\r\n");
      out.write("\tfunction show() {\r\n");
      out.write("\t\t$(\".hideBegin\").show();\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\ttop.$(top).bind(\"EVENT_ORG_CHANGED\", reloadTree);\r\n");
      out.write("\t$(window).unload(function(){\r\n");
      out.write("\t  \ttop.$(top).unbind(\"EVENT_ORG_CHANGED\", reloadTree);\r\n");
      out.write("\t});\r\n");
      out.write("</script>\r\n");
      out.write("</head>\r\n");
      out.write("<body>\r\n");
      out.write("\t<div class=\"hideBegin\" style=\"display:none;border-bottom: 1px solid #ccc;padding:5px;font-size:10px;\"> \r\n");
      out.write("\t    \t<div id=\"form2\">\r\n");
      out.write("\t\t    \t<table style=\"width:85%;\">\r\n");
      out.write("\t\t\t        <tr>\r\n");
      out.write("\t\t\t         \t<td class=\"patientInfo\">姓名：<input class=\"mini-textbox\" name=\"patientName\"/></td>\r\n");
      out.write("\t\t\t         \t<td class=\"patientInfo\">性别：<input class=\"mini-combobox\" name=\"sexCode\" data=\"[{id:'0', text:'女'},{id:'1', text:'男'}]\"/></td>\r\n");
      out.write("\t\t\t         \t<td class=\"patientInfo\">出生日期：<input class=\"mini-datepicker\" name=\"birthDate\" dateFormat=\"yyyy-MM-dd HH:mm:ss\"/></td>\r\n");
      out.write("\t\t\t         \t<td class=\"patientInfo\">年龄：<input class=\"mini-textbox\" name=\"age\"/></td>\r\n");
      out.write("\t\t\t \t\t\t<td class=\"patientInfo\" colspan=\"3\">诊断： <input  class=\"mini-textbox\" id=\"diagName\" name=\"diagName\"/></td>\r\n");
      out.write("\t\t\t \t\t</tr>\r\n");
      out.write("\t\t\t    </table>\r\n");
      out.write("\t    \t</div>\r\n");
      out.write("\t</div>\r\n");
      out.write("\t<table class=\"hideBegin\" style=\"width:100%; border-bottom: 1px solid #ccc;display:none;\">\r\n");
      out.write("        <tr>\r\n");
      out.write("         \t<td colspan=\"2\" style=\"width:100%;\">\r\n");
      out.write("         \t\t<input class=\"mini-textbox\" borderStyle=\"border:0;\" id=\"searchField\" style=\"width:50px;\" value=\"姓 名\"/> \r\n");
      out.write("         \t\t<input class=\"mini-textbox\" id=\"name\" onenter=\"loadTree\"/>\r\n");
      out.write("         \t\t<a class=\"mini-button\" iconCls=\"fa fa-plus-square\" onclick=\"addRows\">增加</a>\r\n");
      out.write("         \t\t<a class=\"mini-button\" iconCls=\"fa fa-save\" onclick=\"save\">保存</a>\r\n");
      out.write("         \t\t<a class=\"mini-button\" iconCls=\"\" onclick=\"removeTip\">删除</a>\r\n");
      out.write("         \t\t<a class=\"mini-button\" iconCls=\"\" onclick=\"exit\">退出</a>\r\n");
      out.write("         \t  \t<a class=\"mini-button\" iconCls=\"\" onclick=\"print\">打印</a>\r\n");
      out.write("         \t\t<a class=\"mini-button\" iconCls=\"fa fa-refresh\" onclick=\"refresh\">刷新</a>\r\n");
      out.write("         \t</td>\r\n");
      out.write(" \t\t</tr>\r\n");
      out.write("    </table>\r\n");
      out.write("\t<div class=\"mini-fit\">\r\n");
      out.write("\t\t<div class=\"mini-splitter hideBegin\" style=\"width:100%;height:100%; display:none;\" allowResize=\"true\">\r\n");
      out.write("\t\t    <div size=\"230px;\" style=\"\" showCollapseButton=\"false\">\r\n");
      out.write("\t\t  \t\t<div class=\"mini-splitter\" style=\"width:100%;height:100%;\" allowResize=\"true\"  vertical=\"true\">\r\n");
      out.write("\t\t  \t\t\t<div size=\"50%\" showCollapseButton=\"false\">\r\n");
      out.write("\t\t  \t\t\t\t<div style=\" width:100%;font-size:15px;font-weight:bold;border-bottom:1px solid #ccc;margin:0;padding:5px;\">手术申请\t\r\n");
      out.write("\t\t  \t\t\t\t\t<input id=\"date1\" class=\"mini-datepicker\" onvaluechanged=\"loadTree\" value=\"2010-01-01\" />\r\n");
      out.write("\t\t  \t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t<div class=\"mini-fit\">\r\n");
      out.write("\t\t\t\t\t\t\t<ul id=\"tree2\" class=\"mini-tree\" showArrow=\"true\" showTreeIcon=\"true\" \r\n");
      out.write("\t\t\t\t\t\t\t\texpandOnLoad=\"true\" resultAsTree=\"false\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/medical/operation/outOpsApply/getOpsTree.do\" onnodeclick=\"onnodeclick\"\r\n");
      out.write("\t\t\t\t\t\t\t\tstyle=\"width:100%; height:100%; margin:0; padding:2px;\">\r\n");
      out.write("\t\t\t\t\t\t\t</ul>\r\n");
      out.write("\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t  \t\t\t</div>\r\n");
      out.write("\t\t  \t\t\t<div size=\"50%\" showCollapseButton=\"false\">\r\n");
      out.write("\t\t  \t\t\t\t<p style=\"width:100%;font-size:15px;font-weight:bold;border-bottom:0px solid #ccc;border-top:0px solid #ccc;margin:0;padding:5px;\">手术历史</p>\r\n");
      out.write("\t\t  \t\t\t\t<p style=\"width:100%;font-size:10px;font-weight:bold;border-bottom:0px solid #ccc;margin:0;padding:2px;\">\r\n");
      out.write("\t\t  \t\t\t\t\t<input class=\"mini-datepicker\"/> <a class=\"mini-button\" iconCls=\"icon-search\" onclick=\"getOpsList\">搜索</a>\r\n");
      out.write("\t\t  \t\t\t\t</p>\r\n");
      out.write("\t\t  \t\t\t</div>\r\n");
      out.write("\t\t  \t\t</div>\t\t  \t\t\t\t  \t\r\n");
      out.write("\t\t    </div>\t\t    \r\n");
      out.write("\t\t    <div showCollapseButton=\"false\" style=\"border-left:1px solid #ccc;\">\r\n");
      out.write("\t\t    \t<div id=\"form1\">\r\n");
      out.write("\t\t\t    \t<table>\r\n");
      out.write("\t\t\t    \t\t<tr>\r\n");
      out.write("\t\t\t    \t\t\t<td>开方医生</td>\r\n");
      out.write("\t\t\t    \t\t\t<td><input class=\"mini-combobox\" onenter=\"showOrgName\"  allowInput=\"true\" showPopup=\"true\" name=\"doctorName\" id=\"doctorName\"\r\n");
      out.write("\t\t\t    \t\t\t\t\t url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysUser/getKVs.do\"/></td>\r\n");
      out.write("\t\t\t    \t\t\t<td> 开方科室</td>\r\n");
      out.write("\t\t\t    \t\t\t<td>\r\n");
      out.write("\t\t\t\t    \t\t\t<input class=\"mini-combobox\" name=\"orgName\" showPopup=\"true\" allowInput=\"true\" id=\"orgName\" pinyinField=\"spellCode\"\r\n");
      out.write("\t\t\t\t    \t\t\t\t   url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysOrg/getKVs.do\"/>\r\n");
      out.write("\t\t\t    \t\t\t</td>\r\n");
      out.write("\t\t\t    \t\t\t<td>\r\n");
      out.write("\t\t\t\t    \t\t\t<span id=\"totFee\">总价：</span>\r\n");
      out.write("\t\t\t    \t\t\t</td>\r\n");
      out.write("\t\t\t    \t\t</tr>\r\n");
      out.write("\t\t\t    \t</table>\r\n");
      out.write("\t\t    \t</div>\r\n");
      out.write("\t\t\t    <div class=\"mini-fit\">\r\n");
      out.write("\t\t\t         <div class=\"mini-splitter\" style=\"width:100%;height:100%;\" allowResize=\"true\">\r\n");
      out.write("\t\t\t\t         <div size=\"75%\" showCollapseButton=\"false\">\r\n");
      out.write("\t\t\t\t\t         <div id=\"grid1\" showPager=\"true\" class=\"mini-datagrid\" allowCellSelect=\"true\" allowCellEdit=\"true\" onload=\"onload\"editNextOnEnterKey=\"true\" oncellcommitedit=\"cellcommitedit\"\r\n");
      out.write("\t\t\t\t\t         \t  multiSelect=\"true\" showPager=\"true\" pageSize=\"50\" oncellendedit=\"cellendedit\" oncellbeginedit=\"cellbeginedit\" allowCellValid=\"true\"\r\n");
      out.write("\t\t\t\t\t\t\t\t  url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/outpatient/opExpApply/getOpsItems.do\" style=\"width:100%; height:100%;\" borderStyle=\"border:0;\">\r\n");
      out.write("\t\t\t\t\t\t\t\t <div property=\"columns\">\r\n");
      out.write("\t\t\t\t\t\t\t\t \t<div type=\"checkcolumn\"></div>\r\n");
      out.write("\t\t\t\t\t\t\t\t \t<div type=\"indexColumn\"></div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t<div field=\"itemNo\" name=\"taskName\" displayField=\"itemNo\" autoShowPopup=\"true\" headerAlign=\"center\" align=\"center\" vtype=\"required\" width=\"120\"> 编码\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t<div property=\"editor\" class=\"mini-autocomplete\" style=\"width:100%;\" required=\"true\" showPopup=\"true\" \r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t allowInput=\"true\" popupWidth=\"800\" popupHeight=\"300\" valueField=\"itemNo\" textField=\"itemNo\" onvaluechanged=\"onValueChanged1\"  onlyCheckSelection=\"true\"\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/pharmacy/common/comDrug/getDrugList.do\">\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t<div property=\"columns\">\t\t\t\t\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t\t<div header=\"编码\" width=\"89\" field=\"itemId\" headerAlign=\"center\" align=\"center\"></div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t\t<div header=\"自定义编码\" width=\"89\" field=\"userDefineCode\" headerAlign=\"center\" align=\"center\"></div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t\t<div header=\"名称\" width=\"89\" field=\"itemName\" headerAlign=\"center\" align=\"center\"></div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t\t<div header=\"规格\" widtsh=\"89\" field=\"specs\" headerAlign=\"center\" align=\"center\"></div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t\t<div header=\"单位\" width=\"89\" field=\"showUnit\" headerAlign=\"center\" align=\"center\"></div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t\t<div header=\"单价\" width=\"89\" field=\"itemPrice\" headerAlign=\"center\" align=\"center\"></div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t</div> \r\n");
      out.write("\t\t\t\t\t\t\t        <div field=\"itemName\" width=\"300\" headerAlign=\"center\" align=\"center\">名称 </div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t<div field=\"drugPackageQty\" visible=\"false\"></div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t<div field=\"drugPackageUnit\" visible=\"false\">包装单位</div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t<div field=\"drugBulkUnit\" visible=\"false\">散装单位</div>\r\n");
      out.write("\t\t\t\t\t\t\t        <div field=\"specs\" headerAlign=\"center\" align=\"center\">规格 </div>\r\n");
      out.write("\t\t\t\t\t\t\t        <div field=\"price\" headerAlign=\"center\" align=\"center\">单价 </div>\r\n");
      out.write("\t\t\t\t\t\t\t        <div field=\"showQty\" headerAlign=\"center\" align=\"center\">数量\r\n");
      out.write("\t\t\t\t\t\t\t        \t<input property=\"editor\" class=\"mini-textbox\"/>\r\n");
      out.write("\t\t\t\t\t\t\t         </div>\r\n");
      out.write("\t\t\t\t\t\t\t        <div field=\"showUnit\" type=\"comboboxColumn\" headerAlign=\"center\" align=\"center\" renderer=\"unitRenderer\">单位\r\n");
      out.write("\t\t\t\t\t\t\t\t\t    <input property=\"editor\" class=\"mini-combobox\"/>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t\t        <div field=\"totCost\" headerAlign=\"center\" align=\"center\">金额</div>\r\n");
      out.write("\t\t\t\t\t\t\t        <div field=\"executeDeptId\" type=\"comboboxcolumn\" headerAlign=\"center\" align=\"center\">\r\n");
      out.write("\t\t\t\t\t\t\t        \t执行科室\r\n");
      out.write("\t\t\t\t\t\t\t        \t<input property=\"editor\" class=\"mini-combobox\" url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/platform/system/sysOrg/getKVs.do\" />\r\n");
      out.write("\t\t\t\t\t\t\t        </div>\r\n");
      out.write("\t\t\t\t\t\t\t        <div field=\"\" headerAlign=\"center\" align=\"center\">标识</div>\r\n");
      out.write("\t\t\t       \t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t<div style=\"width:100%; height:100%;border-left:1px solid #ccc;border-top:1px solid #ccc; padding:0;margin:0;\">\r\n");
      out.write("\t\t\t\t\t\t\t<div id=\"tabs\" class=\"mini-tabs\" style=\"width:100%; height:100%;padding:-3px ;margin:-4px;\">\r\n");
      out.write("\t\t\t\t\t\t\t\t<div class=\"mini-fit\" title=\"科室套餐\">\r\n");
      out.write("\t\t\t\t\t\t\t\t\t<ul id=\"tree1\" class=\"mini-tree\" showArrow=\"true\" showTreeIcon=\"true\" idField=\"groupId\"\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\ttextField=\"groupName\" parentField=\"parentGroupId\" expandOnLoad=\"true\" resultAsTree=\"false\" \r\n");
      out.write("\t\t\t\t\t\t\t\t\t\turl=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/expense/maintenance/expGroup/groupTree.do?orgId=66253\"\t\t\t\t\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tstyle=\"width:100%; height:100%; margin:0; padding:2px;\"\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tonnodedblclick=\"onnodedblclick\">\r\n");
      out.write("\t\t\t\t\t\t\t\t\t</ul>\r\n");
      out.write("\t\t\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t\t\t<div class=\"mini-fit\" title=\"常用项目\">\r\n");
      out.write("\t\t\t\t\t\t\t\t\t<p style=\"margin:0;padding:5px;border-bottom:1px solid #ccc;\">过滤: <input class=\"mini-textbox\" id=\"chageinput\" onenter=\"filter\"/> \r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t<a class=\"mini-button\" onclick=\"filter\">查询</a>\t\r\n");
      out.write("\t\t\t\t\t\t\t\t\t</p>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t<div class=\"mini-datagrid\" id=\"grid2\" showPager=\"false\" allowCellSelect=\"true\" allowCellValid=\"true\" allowCellEdit=\"true\"\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t url=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/basedata/datamanager/deptItem/getDeptItemWithDrug.do\" style=\"width:100%; height:100%;border:1px solid #ccc;\"\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t editNextOnEnterKey=\"true\" onrowdblclick=\"onrowdblclick1\" multiSelect=\"true\">\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t <div property=\"columns\">\r\n");
      out.write("\t\t\t\t\t\t\t\t\t        <div type=\"indexColumn\" headerAlign=\"center\" align=\"left\">序号</div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t        <div field=\"itemName\" headerAlign=\"center\" align=\"left\">名称 </div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t \t<div field=\"itemNo\" headerAlign=\"center\" align=\"left\" visible=\"true\">编码</div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t \t<div field=\"itemPrice\"  visible=\"false\" >价格</div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t \t<div field=\"unit\"  visible=\"false\" >价格</div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t \t<div field=\"itemSysType\"  >类型</div>\r\n");
      out.write("\t\t\t\t\t       \t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t\t\t</div>\r\n");
      out.write("\t\t\t    </div>\r\n");
      out.write("\t\t    </div>\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t</div>\r\n");
      out.write("\t\r\n");
      out.write("\t<div style=\"display:block;margin-top:-16\">\r\n");
      out.write("\t\t<script type=\"text/javascript\">\r\n");
      out.write("\t\t\t// CreateReport(\"Report\");\r\n");
      out.write("\t\t</script>\r\n");
      out.write("\t</div>\r\n");
      out.write("\t<script type=\"text/javascript\">\r\n");
      out.write("\t\tmini.parse();\r\n");
      out.write("\t\tvar tree = mini.get(\"tree1\");\r\n");
      out.write("\t\tvar tree1 = mini.get(\"tree2\");\r\n");
      out.write("\t\tvar grid = mini.get(\"grid1\");\r\n");
      out.write("\t\tvar grid1 = mini.get(\"grid2\");\r\n");
      out.write("\t\tvar grid2 = mini.get(\"grid3\");\r\n");
      out.write("\t\tvar searchField = mini.get(\"name\");\r\n");
      out.write("\t\tvar win = mini.get(\"win1\");\r\n");
      out.write("\t\tvar form = new mini.Form(\"#form1\");\r\n");
      out.write("\t\tvar form1 = new mini.Form(\"#form2\");\r\n");
      out.write("\t\tvar orgNameComb = mini.get(\"orgName\");\r\n");
      out.write(" \t\tvar doctorNameComb = mini.get(\"doctorName\");\r\n");
      out.write(" \t\tvar date1 = mini.get(\"#date1\");\r\n");
      out.write("\t\tdate1.setValue(new Date());\r\n");
      out.write(" \t\tquery();\r\n");
      out.write("\r\n");
      out.write("\t\tshow();\r\n");
      out.write("\t\t\r\n");
      out.write("\t\t\r\n");
      out.write("\t</script>\r\n");
      out.write("</body>\r\n");
      out.write("</html>\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }

  private boolean _jspx_meth_c_005fset_005f0(javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f0 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f0_reused = false;
    try {
      _jspx_th_c_005fset_005f0.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f0.setParent(null);
      // /commons/include/get.jsp(5,0) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f0.setVar("ctx");
      // /commons/include/get.jsp(5,0) name = value type = javax.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f0.setValue(new org.apache.jasper.el.JspValueExpression("/commons/include/get.jsp(5,0) '${pageContext.request.contextPath}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${pageContext.request.contextPath}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f0 = _jspx_th_c_005fset_005f0.doStartTag();
      if (_jspx_th_c_005fset_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f0);
      _jspx_th_c_005fset_005f0_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f0_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fset_005f1(javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f1 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f1_reused = false;
    try {
      _jspx_th_c_005fset_005f1.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f1.setParent(null);
      // /commons/include/get.jsp(6,0) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f1.setVar("emr");
      // /commons/include/get.jsp(6,0) name = value type = javax.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f1.setValue(new org.apache.jasper.el.JspValueExpression("/commons/include/get.jsp(6,0) '${emrContextPath}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${emrContextPath}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f1 = _jspx_th_c_005fset_005f1.doStartTag();
      if (_jspx_th_c_005fset_005f1.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f1);
      _jspx_th_c_005fset_005f1_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f1, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f1_reused);
    }
    return false;
  }
}
